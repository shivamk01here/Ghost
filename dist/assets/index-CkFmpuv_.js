(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var cT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Am={exports:{}},Fu={};var Jv;function fT(){if(Jv)return Fu;Jv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var c in a)c!=="key"&&(o[c]=a[c])}else o=a;return a=o.ref,{$$typeof:t,type:r,key:l,ref:a!==void 0?a:null,props:o}}return Fu.Fragment=e,Fu.jsx=n,Fu.jsxs=n,Fu}var Zv;function dT(){return Zv||(Zv=1,Am.exports=fT()),Am.exports}var B=dT(),Om={exports:{}},rt={};var eb;function hT(){if(eb)return rt;eb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),v=Symbol.iterator;function x(I){return I===null||typeof I!="object"?null:(I=v&&I[v]||I["@@iterator"],typeof I=="function"?I:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,M={};function O(I,Y,we){this.props=I,this.context=Y,this.refs=M,this.updater=we||w}O.prototype.isReactComponent={},O.prototype.setState=function(I,Y){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,Y,"setState")},O.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function q(){}q.prototype=O.prototype;function V(I,Y,we){this.props=I,this.context=Y,this.refs=M,this.updater=we||w}var F=V.prototype=new q;F.constructor=V,T(F,O.prototype),F.isPureReactComponent=!0;var $=Array.isArray;function U(){}var P={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function L(I,Y,we){var ge=we.ref;return{$$typeof:t,type:I,key:Y,ref:ge!==void 0?ge:null,props:we}}function G(I,Y){return L(I.type,Y,I.props)}function se(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function re(I){var Y={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(we){return Y[we]})}var ce=/\/+/g;function W(I,Y){return typeof I=="object"&&I!==null&&I.key!=null?re(""+I.key):Y.toString(36)}function fe(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(U,U):(I.status="pending",I.then(function(Y){I.status==="pending"&&(I.status="fulfilled",I.value=Y)},function(Y){I.status==="pending"&&(I.status="rejected",I.reason=Y)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function D(I,Y,we,ge,me){var _e=typeof I;(_e==="undefined"||_e==="boolean")&&(I=null);var Fe=!1;if(I===null)Fe=!0;else switch(_e){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(I.$$typeof){case t:case e:Fe=!0;break;case p:return Fe=I._init,D(Fe(I._payload),Y,we,ge,me)}}if(Fe)return me=me(I),Fe=ge===""?"."+W(I,0):ge,$(me)?(we="",Fe!=null&&(we=Fe.replace(ce,"$&/")+"/"),D(me,Y,we,"",function(ze){return ze})):me!=null&&(se(me)&&(me=G(me,we+(me.key==null||I&&I.key===me.key?"":(""+me.key).replace(ce,"$&/")+"/")+Fe)),Y.push(me)),1;Fe=0;var Ze=ge===""?".":ge+":";if($(I))for(var Qe=0;Qe<I.length;Qe++)ge=I[Qe],_e=Ze+W(ge,Qe),Fe+=D(ge,Y,we,_e,me);else if(Qe=x(I),typeof Qe=="function")for(I=Qe.call(I),Qe=0;!(ge=I.next()).done;)ge=ge.value,_e=Ze+W(ge,Qe++),Fe+=D(ge,Y,we,_e,me);else if(_e==="object"){if(typeof I.then=="function")return D(fe(I),Y,we,ge,me);throw Y=String(I),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function R(I,Y,we){if(I==null)return I;var ge=[],me=0;return D(I,ge,"","",function(_e){return Y.call(we,_e,me++)}),ge}function ve(I){if(I._status===-1){var Y=I._result;Y=Y(),Y.then(function(we){(I._status===0||I._status===-1)&&(I._status=1,I._result=we)},function(we){(I._status===0||I._status===-1)&&(I._status=2,I._result=we)}),I._status===-1&&(I._status=0,I._result=Y)}if(I._status===1)return I._result.default;throw I._result}var oe=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},le={map:R,forEach:function(I,Y,we){R(I,function(){Y.apply(this,arguments)},we)},count:function(I){var Y=0;return R(I,function(){Y++}),Y},toArray:function(I){return R(I,function(Y){return Y})||[]},only:function(I){if(!se(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return rt.Activity=m,rt.Children=le,rt.Component=O,rt.Fragment=n,rt.Profiler=a,rt.PureComponent=V,rt.StrictMode=r,rt.Suspense=d,rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,rt.__COMPILER_RUNTIME={__proto__:null,c:function(I){return P.H.useMemoCache(I)}},rt.cache=function(I){return function(){return I.apply(null,arguments)}},rt.cacheSignal=function(){return null},rt.cloneElement=function(I,Y,we){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var ge=T({},I.props),me=I.key;if(Y!=null)for(_e in Y.key!==void 0&&(me=""+Y.key),Y)!z.call(Y,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&Y.ref===void 0||(ge[_e]=Y[_e]);var _e=arguments.length-2;if(_e===1)ge.children=we;else if(1<_e){for(var Fe=Array(_e),Ze=0;Ze<_e;Ze++)Fe[Ze]=arguments[Ze+2];ge.children=Fe}return L(I.type,me,ge)},rt.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:o,_context:I},I},rt.createElement=function(I,Y,we){var ge,me={},_e=null;if(Y!=null)for(ge in Y.key!==void 0&&(_e=""+Y.key),Y)z.call(Y,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(me[ge]=Y[ge]);var Fe=arguments.length-2;if(Fe===1)me.children=we;else if(1<Fe){for(var Ze=Array(Fe),Qe=0;Qe<Fe;Qe++)Ze[Qe]=arguments[Qe+2];me.children=Ze}if(I&&I.defaultProps)for(ge in Fe=I.defaultProps,Fe)me[ge]===void 0&&(me[ge]=Fe[ge]);return L(I,_e,me)},rt.createRef=function(){return{current:null}},rt.forwardRef=function(I){return{$$typeof:c,render:I}},rt.isValidElement=se,rt.lazy=function(I){return{$$typeof:p,_payload:{_status:-1,_result:I},_init:ve}},rt.memo=function(I,Y){return{$$typeof:h,type:I,compare:Y===void 0?null:Y}},rt.startTransition=function(I){var Y=P.T,we={};P.T=we;try{var ge=I(),me=P.S;me!==null&&me(we,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(U,oe)}catch(_e){oe(_e)}finally{Y!==null&&we.types!==null&&(Y.types=we.types),P.T=Y}},rt.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},rt.use=function(I){return P.H.use(I)},rt.useActionState=function(I,Y,we){return P.H.useActionState(I,Y,we)},rt.useCallback=function(I,Y){return P.H.useCallback(I,Y)},rt.useContext=function(I){return P.H.useContext(I)},rt.useDebugValue=function(){},rt.useDeferredValue=function(I,Y){return P.H.useDeferredValue(I,Y)},rt.useEffect=function(I,Y){return P.H.useEffect(I,Y)},rt.useEffectEvent=function(I){return P.H.useEffectEvent(I)},rt.useId=function(){return P.H.useId()},rt.useImperativeHandle=function(I,Y,we){return P.H.useImperativeHandle(I,Y,we)},rt.useInsertionEffect=function(I,Y){return P.H.useInsertionEffect(I,Y)},rt.useLayoutEffect=function(I,Y){return P.H.useLayoutEffect(I,Y)},rt.useMemo=function(I,Y){return P.H.useMemo(I,Y)},rt.useOptimistic=function(I,Y){return P.H.useOptimistic(I,Y)},rt.useReducer=function(I,Y,we){return P.H.useReducer(I,Y,we)},rt.useRef=function(I){return P.H.useRef(I)},rt.useState=function(I){return P.H.useState(I)},rt.useSyncExternalStore=function(I,Y,we){return P.H.useSyncExternalStore(I,Y,we)},rt.useTransition=function(){return P.H.useTransition()},rt.version="19.2.4",rt}var tb;function Ac(){return tb||(tb=1,Om.exports=hT()),Om.exports}var ae=Ac();const ai=Zg(ae);var Nm={exports:{}},Ku={},Dm={exports:{}},Rm={};var nb;function pT(){return nb||(nb=1,(function(t){function e(D,R){var ve=D.length;D.push(R);e:for(;0<ve;){var oe=ve-1>>>1,le=D[oe];if(0<a(le,R))D[oe]=R,D[ve]=le,ve=oe;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var R=D[0],ve=D.pop();if(ve!==R){D[0]=ve;e:for(var oe=0,le=D.length,I=le>>>1;oe<I;){var Y=2*(oe+1)-1,we=D[Y],ge=Y+1,me=D[ge];if(0>a(we,ve))ge<le&&0>a(me,we)?(D[oe]=me,D[ge]=ve,oe=ge):(D[oe]=we,D[Y]=ve,oe=Y);else if(ge<le&&0>a(me,ve))D[oe]=me,D[ge]=ve,oe=ge;else break e}}return R}function a(D,R){var ve=D.sortIndex-R.sortIndex;return ve!==0?ve:D.id-R.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],h=[],p=1,m=null,v=3,x=!1,w=!1,T=!1,M=!1,O=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function F(D){for(var R=n(h);R!==null;){if(R.callback===null)r(h);else if(R.startTime<=D)r(h),R.sortIndex=R.expirationTime,e(d,R);else break;R=n(h)}}function $(D){if(T=!1,F(D),!w)if(n(d)!==null)w=!0,U||(U=!0,re());else{var R=n(h);R!==null&&fe($,R.startTime-D)}}var U=!1,P=-1,z=5,L=-1;function G(){return M?!0:!(t.unstable_now()-L<z)}function se(){if(M=!1,U){var D=t.unstable_now();L=D;var R=!0;try{e:{w=!1,T&&(T=!1,q(P),P=-1),x=!0;var ve=v;try{t:{for(F(D),m=n(d);m!==null&&!(m.expirationTime>D&&G());){var oe=m.callback;if(typeof oe=="function"){m.callback=null,v=m.priorityLevel;var le=oe(m.expirationTime<=D);if(D=t.unstable_now(),typeof le=="function"){m.callback=le,F(D),R=!0;break t}m===n(d)&&r(d),F(D)}else r(d);m=n(d)}if(m!==null)R=!0;else{var I=n(h);I!==null&&fe($,I.startTime-D),R=!1}}break e}finally{m=null,v=ve,x=!1}R=void 0}}finally{R?re():U=!1}}}var re;if(typeof V=="function")re=function(){V(se)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,W=ce.port2;ce.port1.onmessage=se,re=function(){W.postMessage(null)}}else re=function(){O(se,0)};function fe(D,R){P=O(function(){D(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(D){switch(v){case 1:case 2:case 3:var R=3;break;default:R=v}var ve=v;v=R;try{return D()}finally{v=ve}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(D,R){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var ve=v;v=D;try{return R()}finally{v=ve}},t.unstable_scheduleCallback=function(D,R,ve){var oe=t.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?oe+ve:oe):ve=oe,D){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=ve+le,D={id:p++,callback:R,priorityLevel:D,startTime:ve,expirationTime:le,sortIndex:-1},ve>oe?(D.sortIndex=ve,e(h,D),n(d)===null&&D===n(h)&&(T?(q(P),P=-1):T=!0,fe($,ve-oe))):(D.sortIndex=le,e(d,D),w||x||(w=!0,U||(U=!0,re()))),D},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(D){var R=v;return function(){var ve=v;v=R;try{return D.apply(this,arguments)}finally{v=ve}}}})(Rm)),Rm}var rb;function mT(){return rb||(rb=1,Dm.exports=pT()),Dm.exports}var _m={exports:{}},rr={};var ib;function gT(){if(ib)return rr;ib=1;var t=Ac();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return rr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,rr.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(d,h,null,p)},rr.flushSync=function(d){var h=l.T,p=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=h,r.p=p,r.d.f()}},rr.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},rr.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},rr.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:x}):p==="script"&&r.d.X(d,{crossOrigin:m,integrity:v,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},rr.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},rr.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin);r.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},rr.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=c(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},rr.requestFormReset=function(d){r.d.r(d)},rr.unstable_batchedUpdates=function(d,h){return d(h)},rr.useFormState=function(d,h,p){return l.H.useFormState(d,h,p)},rr.useFormStatus=function(){return l.H.useHostTransitionStatus()},rr.version="19.2.4",rr}var ab;function uS(){if(ab)return _m.exports;ab=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_m.exports=gT(),_m.exports}var sb;function yT(){if(sb)return Ku;sb=1;var t=mT(),e=Ac(),n=uS();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,u=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(u=s.return),i=s.return;while(i)}return s.tag===3?u:null}function l(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function c(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(r(188))}function h(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(r(188));return s!==i?null:i}for(var u=i,f=s;;){var y=u.return;if(y===null)break;var b=y.alternate;if(b===null){if(f=y.return,f!==null){u=f;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===u)return d(y),i;if(b===f)return d(y),s;b=b.sibling}throw Error(r(188))}if(u.return!==f.return)u=y,f=b;else{for(var C=!1,_=y.child;_;){if(_===u){C=!0,u=y,f=b;break}if(_===f){C=!0,f=y,u=b;break}_=_.sibling}if(!C){for(_=b.child;_;){if(_===u){C=!0,u=b,f=y;break}if(_===f){C=!0,f=b,u=y;break}_=_.sibling}if(!C)throw Error(r(189))}}if(u.alternate!==f)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?i:s}function p(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=p(i),s!==null)return s;i=i.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),V=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function re(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var ce=Symbol.for("react.client.reference");function W(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ce?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case T:return"Fragment";case O:return"Profiler";case M:return"StrictMode";case $:return"Suspense";case U:return"SuspenseList";case L:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case w:return"Portal";case V:return i.displayName||"Context";case q:return(i._context.displayName||"Context")+".Consumer";case F:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case P:return s=i.displayName||null,s!==null?s:W(i.type)||"Memo";case z:s=i._payload,i=i._init;try{return W(i(s))}catch{}}return null}var fe=Array.isArray,D=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},oe=[],le=-1;function I(i){return{current:i}}function Y(i){0>le||(i.current=oe[le],oe[le]=null,le--)}function we(i,s){le++,oe[le]=i.current,i.current=s}var ge=I(null),me=I(null),_e=I(null),Fe=I(null);function Ze(i,s){switch(we(_e,s),we(me,i),we(ge,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Sv(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Sv(s),i=wv(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Y(ge),we(ge,i)}function Qe(){Y(ge),Y(me),Y(_e)}function ze(i){i.memoizedState!==null&&we(Fe,i);var s=ge.current,u=wv(s,i.type);s!==u&&(we(me,i),we(ge,u))}function Tt(i){me.current===i&&(Y(ge),Y(me)),Fe.current===i&&(Y(Fe),Iu._currentValue=ve)}var Xe,Xn;function bn(i){if(Xe===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);Xe=s&&s[1]||"",Xn=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xe+i+Xn}var vt=!1;function rn(i,s){if(!i||vt)return"";vt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var Me=function(){throw Error()};if(Object.defineProperty(Me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Me,[])}catch(Ee){var Se=Ee}Reflect.construct(i,[],Me)}else{try{Me.call()}catch(Ee){Se=Ee}i.call(Me.prototype)}}else{try{throw Error()}catch(Ee){Se=Ee}(Me=i())&&typeof Me.catch=="function"&&Me.catch(function(){})}}catch(Ee){if(Ee&&Se&&typeof Ee.stack=="string")return[Ee.stack,Se.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),C=b[0],_=b[1];if(C&&_){var K=C.split(`
`),be=_.split(`
`);for(y=f=0;f<K.length&&!K[f].includes("DetermineComponentFrameRoot");)f++;for(;y<be.length&&!be[y].includes("DetermineComponentFrameRoot");)y++;if(f===K.length||y===be.length)for(f=K.length-1,y=be.length-1;1<=f&&0<=y&&K[f]!==be[y];)y--;for(;1<=f&&0<=y;f--,y--)if(K[f]!==be[y]){if(f!==1||y!==1)do if(f--,y--,0>y||K[f]!==be[y]){var Te=`
`+K[f].replace(" at new "," at ");return i.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",i.displayName)),Te}while(1<=f&&0<=y);break}}}finally{vt=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?bn(u):""}function Nt(i,s){switch(i.tag){case 26:case 27:case 5:return bn(i.type);case 16:return bn("Lazy");case 13:return i.child!==s&&s!==null?bn("Suspense Fallback"):bn("Suspense");case 19:return bn("SuspenseList");case 0:case 15:return rn(i.type,!1);case 11:return rn(i.type.render,!1);case 1:return rn(i.type,!0);case 31:return bn("Activity");default:return""}}function Et(i){try{var s="",u=null;do s+=Nt(i,u),u=i,i=i.return;while(i);return s}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Zt=Object.prototype.hasOwnProperty,en=t.unstable_scheduleCallback,mt=t.unstable_cancelCallback,Dn=t.unstable_shouldYield,Dt=t.unstable_requestPaint,it=t.unstable_now,fn=t.unstable_getCurrentPriorityLevel,Vt=t.unstable_ImmediatePriority,lr=t.unstable_UserBlockingPriority,Ft=t.unstable_NormalPriority,ur=t.unstable_LowPriority,an=t.unstable_IdlePriority,Rn=t.log,sn=t.unstable_setDisableYieldValue,xn=null,Rt=null;function Kt(i){if(typeof Rn=="function"&&sn(i),Rt&&typeof Rt.setStrictMode=="function")try{Rt.setStrictMode(xn,i)}catch{}}var He=Math.clz32?Math.clz32:Vi,Pi=Math.log,Or=Math.LN2;function Vi(i){return i>>>=0,i===0?32:31-(Pi(i)/Or|0)|0}var je=256,Si=262144,Jn=4194304;function Sn(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function yr(i,s,u){var f=i.pendingLanes;if(f===0)return 0;var y=0,b=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var _=f&134217727;return _!==0?(f=_&~b,f!==0?y=Sn(f):(C&=_,C!==0?y=Sn(C):u||(u=_&~i,u!==0&&(y=Sn(u))))):(_=f&~b,_!==0?y=Sn(_):C!==0?y=Sn(C):u||(u=f&~i,u!==0&&(y=Sn(u)))),y===0?0:s!==0&&s!==y&&(s&b)===0&&(b=y&-y,u=s&-s,b>=u||b===32&&(u&4194048)!==0)?s:y}function cr(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Oo(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vr(){var i=Jn;return Jn<<=1,(Jn&62914560)===0&&(Jn=4194304),i}function _n(i){for(var s=[],u=0;31>u;u++)s.push(i);return s}function Fr(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Fl(i,s,u,f,y,b){var C=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var _=i.entanglements,K=i.expirationTimes,be=i.hiddenUpdates;for(u=C&~u;0<u;){var Te=31-He(u),Me=1<<Te;_[Te]=0,K[Te]=-1;var Se=be[Te];if(Se!==null)for(be[Te]=null,Te=0;Te<Se.length;Te++){var Ee=Se[Te];Ee!==null&&(Ee.lane&=-536870913)}u&=~Me}f!==0&&Rs(i,f,0),b!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=b&~(C&~s))}function Rs(i,s,u){i.pendingLanes|=s,i.suspendedLanes&=~s;var f=31-He(s);i.entangledLanes|=s,i.entanglements[f]=i.entanglements[f]|1073741824|u&261930}function Ht(i,s){var u=i.entangledLanes|=s;for(i=i.entanglements;u;){var f=31-He(u),y=1<<f;y&s|i[f]&s&&(i[f]|=s),u&=~y}}function dn(i,s){var u=s&-s;return u=(u&42)!==0?1:Kl(u),(u&(i.suspendedLanes|s))!==0?0:u}function Kl(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Na(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function _s(){var i=R.p;return i!==0?i:(i=window.event,i===void 0?32:Kv(i.type))}function zs(i,s){var u=R.p;try{return R.p=i,s()}finally{R.p=u}}var wi=Math.random().toString(36).slice(2),Pt="__reactFiber$"+wi,hn="__reactProps$"+wi,fr="__reactContainer$"+wi,Da="__reactEvents$"+wi,Lh="__reactListeners$"+wi,Ei="__reactHandles$"+wi,$l="__reactResources$"+wi,Nr="__reactMarker$"+wi;function No(i){delete i[Pt],delete i[hn],delete i[Da],delete i[Lh],delete i[Ei]}function ki(i){var s=i[Pt];if(s)return s;for(var u=i.parentNode;u;){if(s=u[fr]||u[Pt]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(i=Ov(i);i!==null;){if(u=i[Pt])return u;i=Ov(i)}return s}i=u,u=i.parentNode}return null}function _t(i){if(i=i[Pt]||i[fr]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function Dr(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function Zn(i){var s=i[$l];return s||(s=i[$l]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function pn(i){i[Nr]=!0}var Fi=new Set,js={};function ui(i,s){Ti(i,s),Ti(i+"Capture",s)}function Ti(i,s){for(js[i]=s,i=0;i<s.length;i++)Fi.add(s[i])}var Ki=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yl={},Ls={};function Lc(i){return Zt.call(Ls,i)?!0:Zt.call(Yl,i)?!1:Ki.test(i)?Ls[i]=!0:(Yl[i]=!0,!1)}function ot(i,s,u){if(Lc(s))if(u===null)i.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+u)}}function Bs(i,s,u){if(u===null)i.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+u)}}function Kr(i,s,u,f){if(f===null)i.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(s,u,""+f)}}function qn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ra(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Bc(i,s,u){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,b=f.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return y.call(this)},set:function(C){u=""+C,b.call(this,C)}}),Object.defineProperty(i,s,{enumerable:f.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Do(i){if(!i._valueTracker){var s=Ra(i)?"checked":"value";i._valueTracker=Bc(i,s,""+i[s])}}function Gl(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var u=s.getValue(),f="";return i&&(f=Ra(i)?i.checked?"true":"false":i.value),i=f,i!==u?(s.setValue(i),!0):!1}function St(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Us=/[\n"\\]/g;function zn(i){return i.replace(Us,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ci(i,s,u,f,y,b,C,_){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),s!=null?C==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+qn(s)):i.value!==""+qn(s)&&(i.value=""+qn(s)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),s!=null?Hs(i,C,qn(s)):u!=null?Hs(i,C,qn(u)):f!=null&&i.removeAttribute("value"),y==null&&b!=null&&(i.defaultChecked=!!b),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.name=""+qn(_):i.removeAttribute("name")}function Ro(i,s,u,f,y,b,C,_){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),s!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||s!=null)){Do(i);return}u=u!=null?""+qn(u):"",s=s!=null?""+qn(s):u,_||s===i.value||(i.value=s),i.defaultValue=s}f=f??y,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=_?i.checked:!!f,i.defaultChecked=!!f,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C),Do(i)}function Hs(i,s,u){s==="number"&&St(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function ci(i,s,u,f){if(i=i.options,s){s={};for(var y=0;y<u.length;y++)s["$"+u[y]]=!0;for(u=0;u<i.length;u++)y=s.hasOwnProperty("$"+i[u].value),i[u].selected!==y&&(i[u].selected=y),y&&f&&(i[u].defaultSelected=!0)}else{for(u=""+qn(u),s=null,y=0;y<i.length;y++){if(i[y].value===u){i[y].selected=!0,f&&(i[y].defaultSelected=!0);return}s!==null||i[y].disabled||(s=i[y])}s!==null&&(s.selected=!0)}}function Ql(i,s,u){if(s!=null&&(s=""+qn(s),s!==i.value&&(i.value=s),u==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=u!=null?""+qn(u):""}function Is(i,s,u,f){if(s==null){if(f!=null){if(u!=null)throw Error(r(92));if(fe(f)){if(1<f.length)throw Error(r(93));f=f[0]}u=f}u==null&&(u=""),s=u}u=qn(s),i.defaultValue=u,f=i.textContent,f===u&&f!==""&&f!==null&&(i.value=f),Do(i)}function $i(i,s){if(s){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=s;return}}i.textContent=s}var Bh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gt(i,s,u){var f=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":f?i.setProperty(s,u):typeof u!="number"||u===0||Bh.has(s)?s==="float"?i.cssFloat=u:i[s]=(""+u).trim():i[s]=u+"px"}function Wl(i,s,u){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var y in s)f=s[y],s.hasOwnProperty(y)&&u[y]!==f&&gt(i,y,f)}else for(var b in s)s.hasOwnProperty(b)&&gt(i,b,s[b])}function Xl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fi(i){return dr.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function vr(){}var $r=null;function _o(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Yi=null,$t=null;function Rr(i){var s=_t(i);if(s&&(i=s.stateNode)){var u=i[hn]||null;e:switch(i=s.stateNode,s.type){case"input":if(Ci(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+zn(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var f=u[s];if(f!==i&&f.form===i.form){var y=f[hn]||null;if(!y)throw Error(r(90));Ci(f,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<u.length;s++)f=u[s],f.form===i.form&&Gl(f)}break e;case"textarea":Ql(i,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&ci(i,!!u.multiple,s,!1)}}}var Gi=!1;function _a(i,s,u){if(Gi)return i(s,u);Gi=!0;try{var f=i(s);return f}finally{if(Gi=!1,(Yi!==null||$t!==null)&&(Mf(),Yi&&(s=Yi,i=$t,$t=Yi=null,Rr(s),i)))for(s=0;s<i.length;s++)Rr(i[s])}}function Qi(i,s){var u=i.stateNode;if(u===null)return null;var f=u[hn]||null;if(f===null)return null;u=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(r(231,s,typeof u));return u}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jl=!1;if(jn)try{var er={};Object.defineProperty(er,"passive",{get:function(){Jl=!0}}),window.addEventListener("test",er,er),window.removeEventListener("test",er,er)}catch{Jl=!1}var Yr=null,zo=null,za=null;function ja(){if(za)return za;var i,s=zo,u=s.length,f,y="value"in Yr?Yr.value:Yr.textContent,b=y.length;for(i=0;i<u&&s[i]===y[i];i++);var C=u-i;for(f=1;f<=C&&s[u-f]===y[b-f];f++);return za=y.slice(i,1<f?1-f:void 0)}function La(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function qs(){return!0}function Uc(){return!1}function wn(i){function s(u,f,y,b,C){this._reactName=u,this._targetInst=y,this.type=f,this.nativeEvent=b,this.target=C,this.currentTarget=null;for(var _ in i)i.hasOwnProperty(_)&&(u=i[_],this[_]=u?u(b):b[_]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?qs:Uc,this.isPropagationStopped=Uc,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=qs)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=qs)},persist:function(){},isPersistent:qs}),s}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jo=wn(Wi),Mi=m({},Wi,{view:0,detail:0}),Lo=wn(Mi),Ps,Zl,Vs,Bo=m({},Mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xi,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Vs&&(Vs&&i.type==="mousemove"?(Ps=i.screenX-Vs.screenX,Zl=i.screenY-Vs.screenY):Zl=Ps=0,Vs=i),Ps)},movementY:function(i){return"movementY"in i?i.movementY:Zl}}),Uo=wn(Bo),eu=m({},Bo,{dataTransfer:0}),Hc=wn(eu),Ho=m({},Mi,{relatedTarget:0}),Ba=wn(Ho),Io=m({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ic=wn(Io),Hh=m({},Wi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ua=wn(Hh),tu=m({},Wi,{data:0}),qo=wn(tu),nu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ru={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ln={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fs(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Ln[i])?!!s[i]:!1}function Xi(){return Fs}var qc=m({},Mi,{key:function(i){if(i.key){var s=nu[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=La(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ru[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xi,charCode:function(i){return i.type==="keypress"?La(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?La(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Po=wn(qc),Pc=m({},Bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iu=wn(Pc),Vo=m({},Mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xi}),au=wn(Vo),Ji=m({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),su=wn(Ji),ou=m({},Bo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Fo=wn(ou),lu=m({},Wi,{newState:0,oldState:0}),Vc=wn(lu),Ih=[9,13,27,32],Ks=jn&&"CompositionEvent"in window,Ai=null;jn&&"documentMode"in document&&(Ai=document.documentMode);var qh=jn&&"TextEvent"in window&&!Ai,Ko=jn&&(!Ks||Ai&&8<Ai&&11>=Ai),$o=" ",Fc=!1;function uu(i,s){switch(i){case"keyup":return Ih.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kc(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Zi=!1;function $c(i,s){switch(i){case"compositionend":return Kc(s);case"keypress":return s.which!==32?null:(Fc=!0,$o);case"textInput":return i=s.data,i===$o&&Fc?null:i;default:return null}}function Ph(i,s){if(Zi)return i==="compositionend"||!Ks&&uu(i,s)?(i=ja(),za=zo=Yr=null,Zi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ko&&s.locale!=="ko"?null:s.data;default:return null}}var Yc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yo(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Yc[i.type]:s==="textarea"}function cu(i,s,u,f){Yi?$t?$t.push(f):$t=[f]:Yi=f,s=zf(s,"onChange"),0<s.length&&(u=new jo("onChange","change",null,u,f),i.push({event:u,listeners:s}))}var Ha=null,$s=null;function Vh(i){mv(i,0)}function Go(i){var s=Dr(i);if(Gl(s))return i}function Ys(i,s){if(i==="change")return s}var Gr=!1;if(jn){var Yt;if(jn){var Ia="oninput"in document;if(!Ia){var ea=document.createElement("div");ea.setAttribute("oninput","return;"),Ia=typeof ea.oninput=="function"}Yt=Ia}else Yt=!1;Gr=Yt&&(!document.documentMode||9<document.documentMode)}function Gc(){Ha&&(Ha.detachEvent("onpropertychange",Qo),$s=Ha=null)}function Qo(i){if(i.propertyName==="value"&&Go($s)){var s=[];cu(s,$s,i,_o(i)),_a(Vh,s)}}function Qc(i,s,u){i==="focusin"?(Gc(),Ha=s,$s=u,Ha.attachEvent("onpropertychange",Qo)):i==="focusout"&&Gc()}function ta(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Go($s)}function fu(i,s){if(i==="click")return Go(s)}function qa(i,s){if(i==="input"||i==="change")return Go(s)}function Oi(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var tr=typeof Object.is=="function"?Object.is:Oi;function g(i,s){if(tr(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var u=Object.keys(i),f=Object.keys(s);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var y=u[f];if(!Zt.call(s,y)||!tr(i[y],s[y]))return!1}return!0}function S(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function E(i,s){var u=S(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=s&&f>=s)return{node:u,offset:s-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=S(u)}}function k(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?k(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function A(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=St(i.document);s instanceof i.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)i=s.contentWindow;else break;s=St(i.document)}return s}function N(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var j=jn&&"documentMode"in document&&11>=document.documentMode,H=null,X=null,de=null,J=!1;function Q(i,s,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;J||H==null||H!==St(f)||(f=H,"selectionStart"in f&&N(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),de&&g(de,f)||(de=f,f=zf(X,"onSelect"),0<f.length&&(s=new jo("onSelect","select",null,s,u),i.push({event:s,listeners:f}),s.target=H)))}function te(i,s){var u={};return u[i.toLowerCase()]=s.toLowerCase(),u["Webkit"+i]="webkit"+s,u["Moz"+i]="moz"+s,u}var ie={animationend:te("Animation","AnimationEnd"),animationiteration:te("Animation","AnimationIteration"),animationstart:te("Animation","AnimationStart"),transitionrun:te("Transition","TransitionRun"),transitionstart:te("Transition","TransitionStart"),transitioncancel:te("Transition","TransitionCancel"),transitionend:te("Transition","TransitionEnd")},Z={},ee={};jn&&(ee=document.createElement("div").style,"AnimationEvent"in window||(delete ie.animationend.animation,delete ie.animationiteration.animation,delete ie.animationstart.animation),"TransitionEvent"in window||delete ie.transitionend.transition);function pe(i){if(Z[i])return Z[i];if(!ie[i])return i;var s=ie[i],u;for(u in s)if(s.hasOwnProperty(u)&&u in ee)return Z[i]=s[u];return i}var xe=pe("animationend"),he=pe("animationiteration"),ke=pe("animationstart"),Ae=pe("transitionrun"),Le=pe("transitionstart"),Be=pe("transitioncancel"),Oe=pe("transitionend"),Ie=new Map,Ue="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ue.push("scrollEnd");function Ne(i,s){Ie.set(i,s),ui(s,[i])}var qe=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},et=[],ct=0,$e=0;function nt(){for(var i=ct,s=$e=ct=0;s<i;){var u=et[s];et[s++]=null;var f=et[s];et[s++]=null;var y=et[s];et[s++]=null;var b=et[s];if(et[s++]=null,f!==null&&y!==null){var C=f.pending;C===null?y.next=y:(y.next=C.next,C.next=y),f.pending=y}b!==0&&Ni(u,y,b)}}function zt(i,s,u,f){et[ct++]=i,et[ct++]=s,et[ct++]=u,et[ct++]=f,$e|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function nr(i,s,u,f){return zt(i,s,u,f),Pa(i)}function kt(i,s){return zt(i,null,null,s),Pa(i)}function Ni(i,s,u){i.lanes|=u;var f=i.alternate;f!==null&&(f.lanes|=u);for(var y=!1,b=i.return;b!==null;)b.childLanes|=u,f=b.alternate,f!==null&&(f.childLanes|=u),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(y=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,y&&s!==null&&(y=31-He(u),i=b.hiddenUpdates,f=i[y],f===null?i[y]=[s]:f.push(s),s.lane=u|536870912),b):null}function Pa(i){if(50<_u)throw _u=0,Jp=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Wo={};function YE(i,s,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(i,s,u,f){return new YE(i,s,u,f)}function Fh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function na(i,s){var u=i.alternate;return u===null?(u=_r(i.tag,s,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=s,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,s=i.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function Xy(i,s){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,s=u.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Wc(i,s,u,f,y,b){var C=0;if(f=i,typeof i=="function")Fh(i)&&(C=1);else if(typeof i=="string")C=Jk(i,u,ge.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case L:return i=_r(31,u,s,y),i.elementType=L,i.lanes=b,i;case T:return Gs(u.children,y,b,s);case M:C=8,y|=24;break;case O:return i=_r(12,u,s,y|2),i.elementType=O,i.lanes=b,i;case $:return i=_r(13,u,s,y),i.elementType=$,i.lanes=b,i;case U:return i=_r(19,u,s,y),i.elementType=U,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case V:C=10;break e;case q:C=9;break e;case F:C=11;break e;case P:C=14;break e;case z:C=16,f=null;break e}C=29,u=Error(r(130,i===null?"null":typeof i,"")),f=null}return s=_r(C,u,s,y),s.elementType=i,s.type=f,s.lanes=b,s}function Gs(i,s,u,f){return i=_r(7,i,f,s),i.lanes=u,i}function Kh(i,s,u){return i=_r(6,i,null,s),i.lanes=u,i}function Jy(i){var s=_r(18,null,null,0);return s.stateNode=i,s}function $h(i,s,u){return s=_r(4,i.children!==null?i.children:[],i.key,s),s.lanes=u,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Zy=new WeakMap;function Qr(i,s){if(typeof i=="object"&&i!==null){var u=Zy.get(i);return u!==void 0?u:(s={value:i,source:s,stack:Et(s)},Zy.set(i,s),s)}return{value:i,source:s,stack:Et(s)}}var Xo=[],Jo=0,Xc=null,du=0,Wr=[],Xr=0,Va=null,Di=1,Ri="";function ra(i,s){Xo[Jo++]=du,Xo[Jo++]=Xc,Xc=i,du=s}function e0(i,s,u){Wr[Xr++]=Di,Wr[Xr++]=Ri,Wr[Xr++]=Va,Va=i;var f=Di;i=Ri;var y=32-He(f)-1;f&=~(1<<y),u+=1;var b=32-He(s)+y;if(30<b){var C=y-y%5;b=(f&(1<<C)-1).toString(32),f>>=C,y-=C,Di=1<<32-He(s)+y|u<<y|f,Ri=b+i}else Di=1<<b|u<<y|f,Ri=i}function Yh(i){i.return!==null&&(ra(i,1),e0(i,1,0))}function Gh(i){for(;i===Xc;)Xc=Xo[--Jo],Xo[Jo]=null,du=Xo[--Jo],Xo[Jo]=null;for(;i===Va;)Va=Wr[--Xr],Wr[Xr]=null,Ri=Wr[--Xr],Wr[Xr]=null,Di=Wr[--Xr],Wr[Xr]=null}function t0(i,s){Wr[Xr++]=Di,Wr[Xr++]=Ri,Wr[Xr++]=Va,Di=s.id,Ri=s.overflow,Va=i}var Pn=null,Gt=null,yt=!1,Fa=null,Jr=!1,Qh=Error(r(519));function Ka(i){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hu(Qr(s,i)),Qh}function n0(i){var s=i.stateNode,u=i.type,f=i.memoizedProps;switch(s[Pt]=i,s[hn]=f,u){case"dialog":dt("cancel",s),dt("close",s);break;case"iframe":case"object":case"embed":dt("load",s);break;case"video":case"audio":for(u=0;u<ju.length;u++)dt(ju[u],s);break;case"source":dt("error",s);break;case"img":case"image":case"link":dt("error",s),dt("load",s);break;case"details":dt("toggle",s);break;case"input":dt("invalid",s),Ro(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":dt("invalid",s);break;case"textarea":dt("invalid",s),Is(s,f.value,f.defaultValue,f.children)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||f.suppressHydrationWarning===!0||bv(s.textContent,u)?(f.popover!=null&&(dt("beforetoggle",s),dt("toggle",s)),f.onScroll!=null&&dt("scroll",s),f.onScrollEnd!=null&&dt("scrollend",s),f.onClick!=null&&(s.onclick=vr),s=!0):s=!1,s||Ka(i,!0)}function r0(i){for(Pn=i.return;Pn;)switch(Pn.tag){case 5:case 31:case 13:Jr=!1;return;case 27:case 3:Jr=!0;return;default:Pn=Pn.return}}function Zo(i){if(i!==Pn)return!1;if(!yt)return r0(i),yt=!0,!1;var s=i.tag,u;if((u=s!==3&&s!==27)&&((u=s===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||hm(i.type,i.memoizedProps)),u=!u),u&&Gt&&Ka(i),r0(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Gt=Av(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Gt=Av(i)}else s===27?(s=Gt,as(i.type)?(i=vm,vm=null,Gt=i):Gt=s):Gt=Pn?ei(i.stateNode.nextSibling):null;return!0}function Qs(){Gt=Pn=null,yt=!1}function Wh(){var i=Fa;return i!==null&&(wr===null?wr=i:wr.push.apply(wr,i),Fa=null),i}function hu(i){Fa===null?Fa=[i]:Fa.push(i)}var Xh=I(null),Ws=null,ia=null;function $a(i,s,u){we(Xh,s._currentValue),s._currentValue=u}function aa(i){i._currentValue=Xh.current,Y(Xh)}function Jh(i,s,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),i===u)break;i=i.return}}function Zh(i,s,u,f){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var b=y.dependencies;if(b!==null){var C=y.child;b=b.firstContext;e:for(;b!==null;){var _=b;b=y;for(var K=0;K<s.length;K++)if(_.context===s[K]){b.lanes|=u,_=b.alternate,_!==null&&(_.lanes|=u),Jh(b.return,u,i),f||(C=null);break e}b=_.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(r(341));C.lanes|=u,b=C.alternate,b!==null&&(b.lanes|=u),Jh(C,u,i),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===i){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function el(i,s,u,f){i=null;for(var y=s,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var _=y.type;tr(y.pendingProps.value,C.value)||(i!==null?i.push(_):i=[_])}}else if(y===Fe.current){if(C=y.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Iu):i=[Iu])}y=y.return}i!==null&&Zh(s,i,u,f),s.flags|=262144}function Jc(i){for(i=i.firstContext;i!==null;){if(!tr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Xs(i){Ws=i,ia=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Vn(i){return i0(Ws,i)}function Zc(i,s){return Ws===null&&Xs(i),i0(i,s)}function i0(i,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},ia===null){if(i===null)throw Error(r(308));ia=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else ia=ia.next=s;return u}var GE=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(u,f){i.push(f)}};this.abort=function(){s.aborted=!0,i.forEach(function(u){return u()})}},QE=t.unstable_scheduleCallback,WE=t.unstable_NormalPriority,En={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ep(){return{controller:new GE,data:new Map,refCount:0}}function pu(i){i.refCount--,i.refCount===0&&QE(WE,function(){i.controller.abort()})}var mu=null,tp=0,tl=0,nl=null;function XE(i,s){if(mu===null){var u=mu=[];tp=0,tl=im(),nl={status:"pending",value:void 0,then:function(f){u.push(f)}}}return tp++,s.then(a0,a0),s}function a0(){if(--tp===0&&mu!==null){nl!==null&&(nl.status="fulfilled");var i=mu;mu=null,tl=0,nl=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function JE(i,s){var u=[],f={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return i.then(function(){f.status="fulfilled",f.value=s;for(var y=0;y<u.length;y++)(0,u[y])(s)},function(y){for(f.status="rejected",f.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),f}var s0=D.S;D.S=function(i,s){V1=it(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&XE(i,s),s0!==null&&s0(i,s)};var Js=I(null);function np(){var i=Js.current;return i!==null?i:It.pooledCache}function ef(i,s){s===null?we(Js,Js.current):we(Js,s.pool)}function o0(){var i=np();return i===null?null:{parent:En._currentValue,pool:i}}var rl=Error(r(460)),rp=Error(r(474)),tf=Error(r(542)),nf={then:function(){}};function l0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function u0(i,s,u){switch(u=i[u],u===void 0?i.push(s):u!==s&&(s.then(vr,vr),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,f0(i),i;default:if(typeof s.status=="string")s.then(vr,vr);else{if(i=It,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(f){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=f}},function(f){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,f0(i),i}throw eo=s,rl}}function Zs(i){try{var s=i._init;return s(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(eo=u,rl):u}}var eo=null;function c0(){if(eo===null)throw Error(r(459));var i=eo;return eo=null,i}function f0(i){if(i===rl||i===tf)throw Error(r(483))}var il=null,gu=0;function rf(i){var s=gu;return gu+=1,il===null&&(il=[]),u0(il,i,s)}function yu(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function af(i,s){throw s.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function d0(i){function s(ue,ne){if(i){var ye=ue.deletions;ye===null?(ue.deletions=[ne],ue.flags|=16):ye.push(ne)}}function u(ue,ne){if(!i)return null;for(;ne!==null;)s(ue,ne),ne=ne.sibling;return null}function f(ue){for(var ne=new Map;ue!==null;)ue.key!==null?ne.set(ue.key,ue):ne.set(ue.index,ue),ue=ue.sibling;return ne}function y(ue,ne){return ue=na(ue,ne),ue.index=0,ue.sibling=null,ue}function b(ue,ne,ye){return ue.index=ye,i?(ye=ue.alternate,ye!==null?(ye=ye.index,ye<ne?(ue.flags|=67108866,ne):ye):(ue.flags|=67108866,ne)):(ue.flags|=1048576,ne)}function C(ue){return i&&ue.alternate===null&&(ue.flags|=67108866),ue}function _(ue,ne,ye,Ce){return ne===null||ne.tag!==6?(ne=Kh(ye,ue.mode,Ce),ne.return=ue,ne):(ne=y(ne,ye),ne.return=ue,ne)}function K(ue,ne,ye,Ce){var Ge=ye.type;return Ge===T?Te(ue,ne,ye.props.children,Ce,ye.key):ne!==null&&(ne.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===z&&Zs(Ge)===ne.type)?(ne=y(ne,ye.props),yu(ne,ye),ne.return=ue,ne):(ne=Wc(ye.type,ye.key,ye.props,null,ue.mode,Ce),yu(ne,ye),ne.return=ue,ne)}function be(ue,ne,ye,Ce){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ye.containerInfo||ne.stateNode.implementation!==ye.implementation?(ne=$h(ye,ue.mode,Ce),ne.return=ue,ne):(ne=y(ne,ye.children||[]),ne.return=ue,ne)}function Te(ue,ne,ye,Ce,Ge){return ne===null||ne.tag!==7?(ne=Gs(ye,ue.mode,Ce,Ge),ne.return=ue,ne):(ne=y(ne,ye),ne.return=ue,ne)}function Me(ue,ne,ye){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=Kh(""+ne,ue.mode,ye),ne.return=ue,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case x:return ye=Wc(ne.type,ne.key,ne.props,null,ue.mode,ye),yu(ye,ne),ye.return=ue,ye;case w:return ne=$h(ne,ue.mode,ye),ne.return=ue,ne;case z:return ne=Zs(ne),Me(ue,ne,ye)}if(fe(ne)||re(ne))return ne=Gs(ne,ue.mode,ye,null),ne.return=ue,ne;if(typeof ne.then=="function")return Me(ue,rf(ne),ye);if(ne.$$typeof===V)return Me(ue,Zc(ue,ne),ye);af(ue,ne)}return null}function Se(ue,ne,ye,Ce){var Ge=ne!==null?ne.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return Ge!==null?null:_(ue,ne,""+ye,Ce);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case x:return ye.key===Ge?K(ue,ne,ye,Ce):null;case w:return ye.key===Ge?be(ue,ne,ye,Ce):null;case z:return ye=Zs(ye),Se(ue,ne,ye,Ce)}if(fe(ye)||re(ye))return Ge!==null?null:Te(ue,ne,ye,Ce,null);if(typeof ye.then=="function")return Se(ue,ne,rf(ye),Ce);if(ye.$$typeof===V)return Se(ue,ne,Zc(ue,ye),Ce);af(ue,ye)}return null}function Ee(ue,ne,ye,Ce,Ge){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return ue=ue.get(ye)||null,_(ne,ue,""+Ce,Ge);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case x:return ue=ue.get(Ce.key===null?ye:Ce.key)||null,K(ne,ue,Ce,Ge);case w:return ue=ue.get(Ce.key===null?ye:Ce.key)||null,be(ne,ue,Ce,Ge);case z:return Ce=Zs(Ce),Ee(ue,ne,ye,Ce,Ge)}if(fe(Ce)||re(Ce))return ue=ue.get(ye)||null,Te(ne,ue,Ce,Ge,null);if(typeof Ce.then=="function")return Ee(ue,ne,ye,rf(Ce),Ge);if(Ce.$$typeof===V)return Ee(ue,ne,ye,Zc(ne,Ce),Ge);af(ne,Ce)}return null}function Ve(ue,ne,ye,Ce){for(var Ge=null,bt=null,Ke=ne,st=ne=0,pt=null;Ke!==null&&st<ye.length;st++){Ke.index>st?(pt=Ke,Ke=null):pt=Ke.sibling;var xt=Se(ue,Ke,ye[st],Ce);if(xt===null){Ke===null&&(Ke=pt);break}i&&Ke&&xt.alternate===null&&s(ue,Ke),ne=b(xt,ne,st),bt===null?Ge=xt:bt.sibling=xt,bt=xt,Ke=pt}if(st===ye.length)return u(ue,Ke),yt&&ra(ue,st),Ge;if(Ke===null){for(;st<ye.length;st++)Ke=Me(ue,ye[st],Ce),Ke!==null&&(ne=b(Ke,ne,st),bt===null?Ge=Ke:bt.sibling=Ke,bt=Ke);return yt&&ra(ue,st),Ge}for(Ke=f(Ke);st<ye.length;st++)pt=Ee(Ke,ue,st,ye[st],Ce),pt!==null&&(i&&pt.alternate!==null&&Ke.delete(pt.key===null?st:pt.key),ne=b(pt,ne,st),bt===null?Ge=pt:bt.sibling=pt,bt=pt);return i&&Ke.forEach(function(fs){return s(ue,fs)}),yt&&ra(ue,st),Ge}function Je(ue,ne,ye,Ce){if(ye==null)throw Error(r(151));for(var Ge=null,bt=null,Ke=ne,st=ne=0,pt=null,xt=ye.next();Ke!==null&&!xt.done;st++,xt=ye.next()){Ke.index>st?(pt=Ke,Ke=null):pt=Ke.sibling;var fs=Se(ue,Ke,xt.value,Ce);if(fs===null){Ke===null&&(Ke=pt);break}i&&Ke&&fs.alternate===null&&s(ue,Ke),ne=b(fs,ne,st),bt===null?Ge=fs:bt.sibling=fs,bt=fs,Ke=pt}if(xt.done)return u(ue,Ke),yt&&ra(ue,st),Ge;if(Ke===null){for(;!xt.done;st++,xt=ye.next())xt=Me(ue,xt.value,Ce),xt!==null&&(ne=b(xt,ne,st),bt===null?Ge=xt:bt.sibling=xt,bt=xt);return yt&&ra(ue,st),Ge}for(Ke=f(Ke);!xt.done;st++,xt=ye.next())xt=Ee(Ke,ue,st,xt.value,Ce),xt!==null&&(i&&xt.alternate!==null&&Ke.delete(xt.key===null?st:xt.key),ne=b(xt,ne,st),bt===null?Ge=xt:bt.sibling=xt,bt=xt);return i&&Ke.forEach(function(uT){return s(ue,uT)}),yt&&ra(ue,st),Ge}function Bt(ue,ne,ye,Ce){if(typeof ye=="object"&&ye!==null&&ye.type===T&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case x:e:{for(var Ge=ye.key;ne!==null;){if(ne.key===Ge){if(Ge=ye.type,Ge===T){if(ne.tag===7){u(ue,ne.sibling),Ce=y(ne,ye.props.children),Ce.return=ue,ue=Ce;break e}}else if(ne.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===z&&Zs(Ge)===ne.type){u(ue,ne.sibling),Ce=y(ne,ye.props),yu(Ce,ye),Ce.return=ue,ue=Ce;break e}u(ue,ne);break}else s(ue,ne);ne=ne.sibling}ye.type===T?(Ce=Gs(ye.props.children,ue.mode,Ce,ye.key),Ce.return=ue,ue=Ce):(Ce=Wc(ye.type,ye.key,ye.props,null,ue.mode,Ce),yu(Ce,ye),Ce.return=ue,ue=Ce)}return C(ue);case w:e:{for(Ge=ye.key;ne!==null;){if(ne.key===Ge)if(ne.tag===4&&ne.stateNode.containerInfo===ye.containerInfo&&ne.stateNode.implementation===ye.implementation){u(ue,ne.sibling),Ce=y(ne,ye.children||[]),Ce.return=ue,ue=Ce;break e}else{u(ue,ne);break}else s(ue,ne);ne=ne.sibling}Ce=$h(ye,ue.mode,Ce),Ce.return=ue,ue=Ce}return C(ue);case z:return ye=Zs(ye),Bt(ue,ne,ye,Ce)}if(fe(ye))return Ve(ue,ne,ye,Ce);if(re(ye)){if(Ge=re(ye),typeof Ge!="function")throw Error(r(150));return ye=Ge.call(ye),Je(ue,ne,ye,Ce)}if(typeof ye.then=="function")return Bt(ue,ne,rf(ye),Ce);if(ye.$$typeof===V)return Bt(ue,ne,Zc(ue,ye),Ce);af(ue,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint"?(ye=""+ye,ne!==null&&ne.tag===6?(u(ue,ne.sibling),Ce=y(ne,ye),Ce.return=ue,ue=Ce):(u(ue,ne),Ce=Kh(ye,ue.mode,Ce),Ce.return=ue,ue=Ce),C(ue)):u(ue,ne)}return function(ue,ne,ye,Ce){try{gu=0;var Ge=Bt(ue,ne,ye,Ce);return il=null,Ge}catch(Ke){if(Ke===rl||Ke===tf)throw Ke;var bt=_r(29,Ke,null,ue.mode);return bt.lanes=Ce,bt.return=ue,bt}}}var to=d0(!0),h0=d0(!1),Ya=!1;function ip(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ap(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ga(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Qa(i,s,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(wt&2)!==0){var y=f.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),f.pending=s,s=Pa(i),Ni(i,null,u),s}return zt(i,f,s,u),Pa(i)}function vu(i,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194048)!==0)){var f=s.lanes;f&=i.pendingLanes,u|=f,s.lanes=u,Ht(i,u)}}function sp(i,s){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var y=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var C={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?y=b=C:b=b.next=C,u=u.next}while(u!==null);b===null?y=b=s:b=b.next=s}else y=b=s;u={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=s:i.next=s,u.lastBaseUpdate=s}var op=!1;function bu(){if(op){var i=nl;if(i!==null)throw i}}function xu(i,s,u,f){op=!1;var y=i.updateQueue;Ya=!1;var b=y.firstBaseUpdate,C=y.lastBaseUpdate,_=y.shared.pending;if(_!==null){y.shared.pending=null;var K=_,be=K.next;K.next=null,C===null?b=be:C.next=be,C=K;var Te=i.alternate;Te!==null&&(Te=Te.updateQueue,_=Te.lastBaseUpdate,_!==C&&(_===null?Te.firstBaseUpdate=be:_.next=be,Te.lastBaseUpdate=K))}if(b!==null){var Me=y.baseState;C=0,Te=be=K=null,_=b;do{var Se=_.lane&-536870913,Ee=Se!==_.lane;if(Ee?(ht&Se)===Se:(f&Se)===Se){Se!==0&&Se===tl&&(op=!0),Te!==null&&(Te=Te.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Ve=i,Je=_;Se=s;var Bt=u;switch(Je.tag){case 1:if(Ve=Je.payload,typeof Ve=="function"){Me=Ve.call(Bt,Me,Se);break e}Me=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=Je.payload,Se=typeof Ve=="function"?Ve.call(Bt,Me,Se):Ve,Se==null)break e;Me=m({},Me,Se);break e;case 2:Ya=!0}}Se=_.callback,Se!==null&&(i.flags|=64,Ee&&(i.flags|=8192),Ee=y.callbacks,Ee===null?y.callbacks=[Se]:Ee.push(Se))}else Ee={lane:Se,tag:_.tag,payload:_.payload,callback:_.callback,next:null},Te===null?(be=Te=Ee,K=Me):Te=Te.next=Ee,C|=Se;if(_=_.next,_===null){if(_=y.shared.pending,_===null)break;Ee=_,_=Ee.next,Ee.next=null,y.lastBaseUpdate=Ee,y.shared.pending=null}}while(!0);Te===null&&(K=Me),y.baseState=K,y.firstBaseUpdate=be,y.lastBaseUpdate=Te,b===null&&(y.shared.lanes=0),es|=C,i.lanes=C,i.memoizedState=Me}}function p0(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function m0(i,s){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)p0(u[i],s)}var al=I(null),sf=I(0);function g0(i,s){i=pa,we(sf,i),we(al,s),pa=i|s.baseLanes}function lp(){we(sf,pa),we(al,al.current)}function up(){pa=sf.current,Y(al),Y(sf)}var zr=I(null),Zr=null;function Wa(i){var s=i.alternate;we(mn,mn.current&1),we(zr,i),Zr===null&&(s===null||al.current!==null||s.memoizedState!==null)&&(Zr=i)}function cp(i){we(mn,mn.current),we(zr,i),Zr===null&&(Zr=i)}function y0(i){i.tag===22?(we(mn,mn.current),we(zr,i),Zr===null&&(Zr=i)):Xa()}function Xa(){we(mn,mn.current),we(zr,zr.current)}function jr(i){Y(zr),Zr===i&&(Zr=null),Y(mn)}var mn=I(0);function of(i){for(var s=i;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||gm(u)||ym(u)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var sa=0,at=null,jt=null,kn=null,lf=!1,sl=!1,no=!1,uf=0,Su=0,ol=null,ZE=0;function on(){throw Error(r(321))}function fp(i,s){if(s===null)return!1;for(var u=0;u<s.length&&u<i.length;u++)if(!tr(i[u],s[u]))return!1;return!0}function dp(i,s,u,f,y,b){return sa=b,at=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,D.H=i===null||i.memoizedState===null?e1:Mp,no=!1,b=u(f,y),no=!1,sl&&(b=b0(s,u,f,y)),v0(i),b}function v0(i){D.H=ku;var s=jt!==null&&jt.next!==null;if(sa=0,kn=jt=at=null,lf=!1,Su=0,ol=null,s)throw Error(r(300));i===null||Tn||(i=i.dependencies,i!==null&&Jc(i)&&(Tn=!0))}function b0(i,s,u,f){at=i;var y=0;do{if(sl&&(ol=null),Su=0,sl=!1,25<=y)throw Error(r(301));if(y+=1,kn=jt=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}D.H=t1,b=s(u,f)}while(sl);return b}function ek(){var i=D.H,s=i.useState()[0];return s=typeof s.then=="function"?wu(s):s,i=i.useState()[0],(jt!==null?jt.memoizedState:null)!==i&&(at.flags|=1024),s}function hp(){var i=uf!==0;return uf=0,i}function pp(i,s,u){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~u}function mp(i){if(lf){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}lf=!1}sa=0,kn=jt=at=null,sl=!1,Su=uf=0,ol=null}function hr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?at.memoizedState=kn=i:kn=kn.next=i,kn}function gn(){if(jt===null){var i=at.alternate;i=i!==null?i.memoizedState:null}else i=jt.next;var s=kn===null?at.memoizedState:kn.next;if(s!==null)kn=s,jt=i;else{if(i===null)throw at.alternate===null?Error(r(467)):Error(r(310));jt=i,i={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},kn===null?at.memoizedState=kn=i:kn=kn.next=i}return kn}function cf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wu(i){var s=Su;return Su+=1,ol===null&&(ol=[]),i=u0(ol,i,s),s=at,(kn===null?s.memoizedState:kn.next)===null&&(s=s.alternate,D.H=s===null||s.memoizedState===null?e1:Mp),i}function ff(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return wu(i);if(i.$$typeof===V)return Vn(i)}throw Error(r(438,String(i)))}function gp(i){var s=null,u=at.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var f=at.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=cf(),at.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(i),f=0;f<i;f++)u[f]=G;return s.index++,u}function oa(i,s){return typeof s=="function"?s(i):s}function df(i){var s=gn();return yp(s,jt,i)}function yp(i,s,u){var f=i.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=u;var y=i.baseQueue,b=f.pending;if(b!==null){if(y!==null){var C=y.next;y.next=b.next,b.next=C}s.baseQueue=y=b,f.pending=null}if(b=i.baseState,y===null)i.memoizedState=b;else{s=y.next;var _=C=null,K=null,be=s,Te=!1;do{var Me=be.lane&-536870913;if(Me!==be.lane?(ht&Me)===Me:(sa&Me)===Me){var Se=be.revertLane;if(Se===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),Me===tl&&(Te=!0);else if((sa&Se)===Se){be=be.next,Se===tl&&(Te=!0);continue}else Me={lane:0,revertLane:be.revertLane,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},K===null?(_=K=Me,C=b):K=K.next=Me,at.lanes|=Se,es|=Se;Me=be.action,no&&u(b,Me),b=be.hasEagerState?be.eagerState:u(b,Me)}else Se={lane:Me,revertLane:be.revertLane,gesture:be.gesture,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},K===null?(_=K=Se,C=b):K=K.next=Se,at.lanes|=Me,es|=Me;be=be.next}while(be!==null&&be!==s);if(K===null?C=b:K.next=_,!tr(b,i.memoizedState)&&(Tn=!0,Te&&(u=nl,u!==null)))throw u;i.memoizedState=b,i.baseState=C,i.baseQueue=K,f.lastRenderedState=b}return y===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function vp(i){var s=gn(),u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=i;var f=u.dispatch,y=u.pending,b=s.memoizedState;if(y!==null){u.pending=null;var C=y=y.next;do b=i(b,C.action),C=C.next;while(C!==y);tr(b,s.memoizedState)||(Tn=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),u.lastRenderedState=b}return[b,f]}function x0(i,s,u){var f=at,y=gn(),b=yt;if(b){if(u===void 0)throw Error(r(407));u=u()}else u=s();var C=!tr((jt||y).memoizedState,u);if(C&&(y.memoizedState=u,Tn=!0),y=y.queue,Sp(E0.bind(null,f,y,i),[i]),y.getSnapshot!==s||C||kn!==null&&kn.memoizedState.tag&1){if(f.flags|=2048,ll(9,{destroy:void 0},w0.bind(null,f,y,u,s),null),It===null)throw Error(r(349));b||(sa&127)!==0||S0(f,s,u)}return u}function S0(i,s,u){i.flags|=16384,i={getSnapshot:s,value:u},s=at.updateQueue,s===null?(s=cf(),at.updateQueue=s,s.stores=[i]):(u=s.stores,u===null?s.stores=[i]:u.push(i))}function w0(i,s,u,f){s.value=u,s.getSnapshot=f,k0(s)&&T0(i)}function E0(i,s,u){return u(function(){k0(s)&&T0(i)})}function k0(i){var s=i.getSnapshot;i=i.value;try{var u=s();return!tr(i,u)}catch{return!0}}function T0(i){var s=kt(i,2);s!==null&&Er(s,i,2)}function bp(i){var s=hr();if(typeof i=="function"){var u=i;if(i=u(),no){Kt(!0);try{u()}finally{Kt(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:i},s}function C0(i,s,u,f){return i.baseState=u,yp(i,jt,typeof f=="function"?f:oa)}function tk(i,s,u,f,y){if(mf(i))throw Error(r(485));if(i=s.action,i!==null){var b={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){b.listeners.push(C)}};D.T!==null?u(!0):b.isTransition=!1,f(b),u=s.pending,u===null?(b.next=s.pending=b,M0(s,b)):(b.next=u.next,s.pending=u.next=b)}}function M0(i,s){var u=s.action,f=s.payload,y=i.state;if(s.isTransition){var b=D.T,C={};D.T=C;try{var _=u(y,f),K=D.S;K!==null&&K(C,_),A0(i,s,_)}catch(be){xp(i,s,be)}finally{b!==null&&C.types!==null&&(b.types=C.types),D.T=b}}else try{b=u(y,f),A0(i,s,b)}catch(be){xp(i,s,be)}}function A0(i,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){O0(i,s,f)},function(f){return xp(i,s,f)}):O0(i,s,u)}function O0(i,s,u){s.status="fulfilled",s.value=u,N0(s),i.state=u,s=i.pending,s!==null&&(u=s.next,u===s?i.pending=null:(u=u.next,s.next=u,M0(i,u)))}function xp(i,s,u){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=u,N0(s),s=s.next;while(s!==f)}i.action=null}function N0(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function D0(i,s){return s}function R0(i,s){if(yt){var u=It.formState;if(u!==null){e:{var f=at;if(yt){if(Gt){t:{for(var y=Gt,b=Jr;y.nodeType!==8;){if(!b){y=null;break t}if(y=ei(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){Gt=ei(y.nextSibling),f=y.data==="F!";break e}}Ka(f)}f=!1}f&&(s=u[0])}}return u=hr(),u.memoizedState=u.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:D0,lastRenderedState:s},u.queue=f,u=X0.bind(null,at,f),f.dispatch=u,f=bp(!1),b=Cp.bind(null,at,!1,f.queue),f=hr(),y={state:s,dispatch:null,action:i,pending:null},f.queue=y,u=tk.bind(null,at,y,b,u),y.dispatch=u,f.memoizedState=i,[s,u,!1]}function _0(i){var s=gn();return z0(s,jt,i)}function z0(i,s,u){if(s=yp(i,s,D0)[0],i=df(oa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=wu(s)}catch(C){throw C===rl?tf:C}else f=s;s=gn();var y=s.queue,b=y.dispatch;return u!==s.memoizedState&&(at.flags|=2048,ll(9,{destroy:void 0},nk.bind(null,y,u),null)),[f,b,i]}function nk(i,s){i.action=s}function j0(i){var s=gn(),u=jt;if(u!==null)return z0(s,u,i);gn(),s=s.memoizedState,u=gn();var f=u.queue.dispatch;return u.memoizedState=i,[s,f,!1]}function ll(i,s,u,f){return i={tag:i,create:u,deps:f,inst:s,next:null},s=at.updateQueue,s===null&&(s=cf(),at.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,s.lastEffect=i),i}function L0(){return gn().memoizedState}function hf(i,s,u,f){var y=hr();at.flags|=i,y.memoizedState=ll(1|s,{destroy:void 0},u,f===void 0?null:f)}function pf(i,s,u,f){var y=gn();f=f===void 0?null:f;var b=y.memoizedState.inst;jt!==null&&f!==null&&fp(f,jt.memoizedState.deps)?y.memoizedState=ll(s,b,u,f):(at.flags|=i,y.memoizedState=ll(1|s,b,u,f))}function B0(i,s){hf(8390656,8,i,s)}function Sp(i,s){pf(2048,8,i,s)}function rk(i){at.flags|=4;var s=at.updateQueue;if(s===null)s=cf(),at.updateQueue=s,s.events=[i];else{var u=s.events;u===null?s.events=[i]:u.push(i)}}function U0(i){var s=gn().memoizedState;return rk({ref:s,nextImpl:i}),function(){if((wt&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function H0(i,s){return pf(4,2,i,s)}function I0(i,s){return pf(4,4,i,s)}function q0(i,s){if(typeof s=="function"){i=i();var u=s(i);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function P0(i,s,u){u=u!=null?u.concat([i]):null,pf(4,4,q0.bind(null,s,i),u)}function wp(){}function V0(i,s){var u=gn();s=s===void 0?null:s;var f=u.memoizedState;return s!==null&&fp(s,f[1])?f[0]:(u.memoizedState=[i,s],i)}function F0(i,s){var u=gn();s=s===void 0?null:s;var f=u.memoizedState;if(s!==null&&fp(s,f[1]))return f[0];if(f=i(),no){Kt(!0);try{i()}finally{Kt(!1)}}return u.memoizedState=[f,s],f}function Ep(i,s,u){return u===void 0||(sa&1073741824)!==0&&(ht&261930)===0?i.memoizedState=s:(i.memoizedState=u,i=K1(),at.lanes|=i,es|=i,u)}function K0(i,s,u,f){return tr(u,s)?u:al.current!==null?(i=Ep(i,u,f),tr(i,s)||(Tn=!0),i):(sa&42)===0||(sa&1073741824)!==0&&(ht&261930)===0?(Tn=!0,i.memoizedState=u):(i=K1(),at.lanes|=i,es|=i,s)}function $0(i,s,u,f,y){var b=R.p;R.p=b!==0&&8>b?b:8;var C=D.T,_={};D.T=_,Cp(i,!1,s,u);try{var K=y(),be=D.S;if(be!==null&&be(_,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var Te=JE(K,f);Eu(i,s,Te,Ur(i))}else Eu(i,s,f,Ur(i))}catch(Me){Eu(i,s,{then:function(){},status:"rejected",reason:Me},Ur())}finally{R.p=b,C!==null&&_.types!==null&&(C.types=_.types),D.T=C}}function ik(){}function kp(i,s,u,f){if(i.tag!==5)throw Error(r(476));var y=Y0(i).queue;$0(i,y,s,ve,u===null?ik:function(){return G0(i),u(f)})}function Y0(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:ve},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:u},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function G0(i){var s=Y0(i);s.next===null&&(s=i.alternate.memoizedState),Eu(i,s.next.queue,{},Ur())}function Tp(){return Vn(Iu)}function Q0(){return gn().memoizedState}function W0(){return gn().memoizedState}function ak(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var u=Ur();i=Ga(u);var f=Qa(s,i,u);f!==null&&(Er(f,s,u),vu(f,s,u)),s={cache:ep()},i.payload=s;return}s=s.return}}function sk(i,s,u){var f=Ur();u={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},mf(i)?J0(s,u):(u=nr(i,s,u,f),u!==null&&(Er(u,i,f),Z0(u,s,f)))}function X0(i,s,u){var f=Ur();Eu(i,s,u,f)}function Eu(i,s,u,f){var y={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(mf(i))J0(s,y);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var C=s.lastRenderedState,_=b(C,u);if(y.hasEagerState=!0,y.eagerState=_,tr(_,C))return zt(i,s,y,0),It===null&&nt(),!1}catch{}if(u=nr(i,s,y,f),u!==null)return Er(u,i,f),Z0(u,s,f),!0}return!1}function Cp(i,s,u,f){if(f={lane:2,revertLane:im(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},mf(i)){if(s)throw Error(r(479))}else s=nr(i,u,f,2),s!==null&&Er(s,i,2)}function mf(i){var s=i.alternate;return i===at||s!==null&&s===at}function J0(i,s){sl=lf=!0;var u=i.pending;u===null?s.next=s:(s.next=u.next,u.next=s),i.pending=s}function Z0(i,s,u){if((u&4194048)!==0){var f=s.lanes;f&=i.pendingLanes,u|=f,s.lanes=u,Ht(i,u)}}var ku={readContext:Vn,use:ff,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useLayoutEffect:on,useInsertionEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useSyncExternalStore:on,useId:on,useHostTransitionStatus:on,useFormState:on,useActionState:on,useOptimistic:on,useMemoCache:on,useCacheRefresh:on};ku.useEffectEvent=on;var e1={readContext:Vn,use:ff,useCallback:function(i,s){return hr().memoizedState=[i,s===void 0?null:s],i},useContext:Vn,useEffect:B0,useImperativeHandle:function(i,s,u){u=u!=null?u.concat([i]):null,hf(4194308,4,q0.bind(null,s,i),u)},useLayoutEffect:function(i,s){return hf(4194308,4,i,s)},useInsertionEffect:function(i,s){hf(4,2,i,s)},useMemo:function(i,s){var u=hr();s=s===void 0?null:s;var f=i();if(no){Kt(!0);try{i()}finally{Kt(!1)}}return u.memoizedState=[f,s],f},useReducer:function(i,s,u){var f=hr();if(u!==void 0){var y=u(s);if(no){Kt(!0);try{u(s)}finally{Kt(!1)}}}else y=s;return f.memoizedState=f.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},f.queue=i,i=i.dispatch=sk.bind(null,at,i),[f.memoizedState,i]},useRef:function(i){var s=hr();return i={current:i},s.memoizedState=i},useState:function(i){i=bp(i);var s=i.queue,u=X0.bind(null,at,s);return s.dispatch=u,[i.memoizedState,u]},useDebugValue:wp,useDeferredValue:function(i,s){var u=hr();return Ep(u,i,s)},useTransition:function(){var i=bp(!1);return i=$0.bind(null,at,i.queue,!0,!1),hr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,u){var f=at,y=hr();if(yt){if(u===void 0)throw Error(r(407));u=u()}else{if(u=s(),It===null)throw Error(r(349));(ht&127)!==0||S0(f,s,u)}y.memoizedState=u;var b={value:u,getSnapshot:s};return y.queue=b,B0(E0.bind(null,f,b,i),[i]),f.flags|=2048,ll(9,{destroy:void 0},w0.bind(null,f,b,u,s),null),u},useId:function(){var i=hr(),s=It.identifierPrefix;if(yt){var u=Ri,f=Di;u=(f&~(1<<32-He(f)-1)).toString(32)+u,s="_"+s+"R_"+u,u=uf++,0<u&&(s+="H"+u.toString(32)),s+="_"}else u=ZE++,s="_"+s+"r_"+u.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Tp,useFormState:R0,useActionState:R0,useOptimistic:function(i){var s=hr();s.memoizedState=s.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=Cp.bind(null,at,!0,u),u.dispatch=s,[i,s]},useMemoCache:gp,useCacheRefresh:function(){return hr().memoizedState=ak.bind(null,at)},useEffectEvent:function(i){var s=hr(),u={impl:i};return s.memoizedState=u,function(){if((wt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},Mp={readContext:Vn,use:ff,useCallback:V0,useContext:Vn,useEffect:Sp,useImperativeHandle:P0,useInsertionEffect:H0,useLayoutEffect:I0,useMemo:F0,useReducer:df,useRef:L0,useState:function(){return df(oa)},useDebugValue:wp,useDeferredValue:function(i,s){var u=gn();return K0(u,jt.memoizedState,i,s)},useTransition:function(){var i=df(oa)[0],s=gn().memoizedState;return[typeof i=="boolean"?i:wu(i),s]},useSyncExternalStore:x0,useId:Q0,useHostTransitionStatus:Tp,useFormState:_0,useActionState:_0,useOptimistic:function(i,s){var u=gn();return C0(u,jt,i,s)},useMemoCache:gp,useCacheRefresh:W0};Mp.useEffectEvent=U0;var t1={readContext:Vn,use:ff,useCallback:V0,useContext:Vn,useEffect:Sp,useImperativeHandle:P0,useInsertionEffect:H0,useLayoutEffect:I0,useMemo:F0,useReducer:vp,useRef:L0,useState:function(){return vp(oa)},useDebugValue:wp,useDeferredValue:function(i,s){var u=gn();return jt===null?Ep(u,i,s):K0(u,jt.memoizedState,i,s)},useTransition:function(){var i=vp(oa)[0],s=gn().memoizedState;return[typeof i=="boolean"?i:wu(i),s]},useSyncExternalStore:x0,useId:Q0,useHostTransitionStatus:Tp,useFormState:j0,useActionState:j0,useOptimistic:function(i,s){var u=gn();return jt!==null?C0(u,jt,i,s):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:gp,useCacheRefresh:W0};t1.useEffectEvent=U0;function Ap(i,s,u,f){s=i.memoizedState,u=u(f,s),u=u==null?s:m({},s,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Op={enqueueSetState:function(i,s,u){i=i._reactInternals;var f=Ur(),y=Ga(f);y.payload=s,u!=null&&(y.callback=u),s=Qa(i,y,f),s!==null&&(Er(s,i,f),vu(s,i,f))},enqueueReplaceState:function(i,s,u){i=i._reactInternals;var f=Ur(),y=Ga(f);y.tag=1,y.payload=s,u!=null&&(y.callback=u),s=Qa(i,y,f),s!==null&&(Er(s,i,f),vu(s,i,f))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var u=Ur(),f=Ga(u);f.tag=2,s!=null&&(f.callback=s),s=Qa(i,f,u),s!==null&&(Er(s,i,u),vu(s,i,u))}};function n1(i,s,u,f,y,b,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,b,C):s.prototype&&s.prototype.isPureReactComponent?!g(u,f)||!g(y,b):!0}function r1(i,s,u,f){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,f),s.state!==i&&Op.enqueueReplaceState(s,s.state,null)}function ro(i,s){var u=s;if("ref"in s){u={};for(var f in s)f!=="ref"&&(u[f]=s[f])}if(i=i.defaultProps){u===s&&(u=m({},u));for(var y in i)u[y]===void 0&&(u[y]=i[y])}return u}function i1(i){qe(i)}function a1(i){console.error(i)}function s1(i){qe(i)}function gf(i,s){try{var u=i.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function o1(i,s,u){try{var f=i.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Np(i,s,u){return u=Ga(u),u.tag=3,u.payload={element:null},u.callback=function(){gf(i,s)},u}function l1(i){return i=Ga(i),i.tag=3,i}function u1(i,s,u,f){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var b=f.value;i.payload=function(){return y(b)},i.callback=function(){o1(s,u,f)}}var C=u.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){o1(s,u,f),typeof y!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var _=f.stack;this.componentDidCatch(f.value,{componentStack:_!==null?_:""})})}function ok(i,s,u,f,y){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=u.alternate,s!==null&&el(s,u,y,!0),u=zr.current,u!==null){switch(u.tag){case 31:case 13:return Zr===null?Af():u.alternate===null&&ln===0&&(ln=3),u.flags&=-257,u.flags|=65536,u.lanes=y,f===nf?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([f]):s.add(f),tm(i,f,y)),!1;case 22:return u.flags|=65536,f===nf?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([f]):u.add(f)),tm(i,f,y)),!1}throw Error(r(435,u.tag))}return tm(i,f,y),Af(),!1}if(yt)return s=zr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,f!==Qh&&(i=Error(r(422),{cause:f}),hu(Qr(i,u)))):(f!==Qh&&(s=Error(r(423),{cause:f}),hu(Qr(s,u))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,f=Qr(f,u),y=Np(i.stateNode,f,y),sp(i,y),ln!==4&&(ln=2)),!1;var b=Error(r(520),{cause:f});if(b=Qr(b,u),Ru===null?Ru=[b]:Ru.push(b),ln!==4&&(ln=2),s===null)return!0;f=Qr(f,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,i=y&-y,u.lanes|=i,i=Np(u.stateNode,f,i),sp(u,i),!1;case 1:if(s=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ts===null||!ts.has(b))))return u.flags|=65536,y&=-y,u.lanes|=y,y=l1(y),u1(y,i,u,f),sp(u,y),!1}u=u.return}while(u!==null);return!1}var Dp=Error(r(461)),Tn=!1;function Fn(i,s,u,f){s.child=i===null?h0(s,null,u,f):to(s,i.child,u,f)}function c1(i,s,u,f,y){u=u.render;var b=s.ref;if("ref"in f){var C={};for(var _ in f)_!=="ref"&&(C[_]=f[_])}else C=f;return Xs(s),f=dp(i,s,u,C,b,y),_=hp(),i!==null&&!Tn?(pp(i,s,y),la(i,s,y)):(yt&&_&&Yh(s),s.flags|=1,Fn(i,s,f,y),s.child)}function f1(i,s,u,f,y){if(i===null){var b=u.type;return typeof b=="function"&&!Fh(b)&&b.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=b,d1(i,s,b,f,y)):(i=Wc(u.type,null,f,s,s.mode,y),i.ref=s.ref,i.return=s,s.child=i)}if(b=i.child,!Hp(i,y)){var C=b.memoizedProps;if(u=u.compare,u=u!==null?u:g,u(C,f)&&i.ref===s.ref)return la(i,s,y)}return s.flags|=1,i=na(b,f),i.ref=s.ref,i.return=s,s.child=i}function d1(i,s,u,f,y){if(i!==null){var b=i.memoizedProps;if(g(b,f)&&i.ref===s.ref)if(Tn=!1,s.pendingProps=f=b,Hp(i,y))(i.flags&131072)!==0&&(Tn=!0);else return s.lanes=i.lanes,la(i,s,y)}return Rp(i,s,u,f,y)}function h1(i,s,u,f){var y=f.children,b=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((s.flags&128)!==0){if(b=b!==null?b.baseLanes|u:u,i!==null){for(f=s.child=i.child,y=0;f!==null;)y=y|f.lanes|f.childLanes,f=f.sibling;f=y&~b}else f=0,s.child=null;return p1(i,s,b,u,f)}if((u&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&ef(s,b!==null?b.cachePool:null),b!==null?g0(s,b):lp(),y0(s);else return f=s.lanes=536870912,p1(i,s,b!==null?b.baseLanes|u:u,u,f)}else b!==null?(ef(s,b.cachePool),g0(s,b),Xa(),s.memoizedState=null):(i!==null&&ef(s,null),lp(),Xa());return Fn(i,s,y,u),s.child}function Tu(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function p1(i,s,u,f,y){var b=np();return b=b===null?null:{parent:En._currentValue,pool:b},s.memoizedState={baseLanes:u,cachePool:b},i!==null&&ef(s,null),lp(),y0(s),i!==null&&el(i,s,f,!0),s.childLanes=y,null}function yf(i,s){return s=bf({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function m1(i,s,u){return to(s,i.child,null,u),i=yf(s,s.pendingProps),i.flags|=2,jr(s),s.memoizedState=null,i}function lk(i,s,u){var f=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(yt){if(f.mode==="hidden")return i=yf(s,f),s.lanes=536870912,Tu(null,i);if(cp(s),(i=Gt)?(i=Mv(i,Jr),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Va!==null?{id:Di,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},u=Jy(i),u.return=s,s.child=u,Pn=s,Gt=null)):i=null,i===null)throw Ka(s);return s.lanes=536870912,null}return yf(s,f)}var b=i.memoizedState;if(b!==null){var C=b.dehydrated;if(cp(s),y)if(s.flags&256)s.flags&=-257,s=m1(i,s,u);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(r(558));else if(Tn||el(i,s,u,!1),y=(u&i.childLanes)!==0,Tn||y){if(f=It,f!==null&&(C=dn(f,u),C!==0&&C!==b.retryLane))throw b.retryLane=C,kt(i,C),Er(f,i,C),Dp;Af(),s=m1(i,s,u)}else i=b.treeContext,Gt=ei(C.nextSibling),Pn=s,yt=!0,Fa=null,Jr=!1,i!==null&&t0(s,i),s=yf(s,f),s.flags|=4096;return s}return i=na(i.child,{mode:f.mode,children:f.children}),i.ref=s.ref,s.child=i,i.return=s,i}function vf(i,s){var u=s.ref;if(u===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(i===null||i.ref!==u)&&(s.flags|=4194816)}}function Rp(i,s,u,f,y){return Xs(s),u=dp(i,s,u,f,void 0,y),f=hp(),i!==null&&!Tn?(pp(i,s,y),la(i,s,y)):(yt&&f&&Yh(s),s.flags|=1,Fn(i,s,u,y),s.child)}function g1(i,s,u,f,y,b){return Xs(s),s.updateQueue=null,u=b0(s,f,u,y),v0(i),f=hp(),i!==null&&!Tn?(pp(i,s,b),la(i,s,b)):(yt&&f&&Yh(s),s.flags|=1,Fn(i,s,u,b),s.child)}function y1(i,s,u,f,y){if(Xs(s),s.stateNode===null){var b=Wo,C=u.contextType;typeof C=="object"&&C!==null&&(b=Vn(C)),b=new u(f,b),s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Op,s.stateNode=b,b._reactInternals=s,b=s.stateNode,b.props=f,b.state=s.memoizedState,b.refs={},ip(s),C=u.contextType,b.context=typeof C=="object"&&C!==null?Vn(C):Wo,b.state=s.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(Ap(s,u,C,f),b.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(C=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),C!==b.state&&Op.enqueueReplaceState(b,b.state,null),xu(s,f,b,y),bu(),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(i===null){b=s.stateNode;var _=s.memoizedProps,K=ro(u,_);b.props=K;var be=b.context,Te=u.contextType;C=Wo,typeof Te=="object"&&Te!==null&&(C=Vn(Te));var Me=u.getDerivedStateFromProps;Te=typeof Me=="function"||typeof b.getSnapshotBeforeUpdate=="function",_=s.pendingProps!==_,Te||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_||be!==C)&&r1(s,b,f,C),Ya=!1;var Se=s.memoizedState;b.state=Se,xu(s,f,b,y),bu(),be=s.memoizedState,_||Se!==be||Ya?(typeof Me=="function"&&(Ap(s,u,Me,f),be=s.memoizedState),(K=Ya||n1(s,u,K,f,Se,be,C))?(Te||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=be),b.props=f,b.state=be,b.context=C,f=K):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{b=s.stateNode,ap(i,s),C=s.memoizedProps,Te=ro(u,C),b.props=Te,Me=s.pendingProps,Se=b.context,be=u.contextType,K=Wo,typeof be=="object"&&be!==null&&(K=Vn(be)),_=u.getDerivedStateFromProps,(be=typeof _=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(C!==Me||Se!==K)&&r1(s,b,f,K),Ya=!1,Se=s.memoizedState,b.state=Se,xu(s,f,b,y),bu();var Ee=s.memoizedState;C!==Me||Se!==Ee||Ya||i!==null&&i.dependencies!==null&&Jc(i.dependencies)?(typeof _=="function"&&(Ap(s,u,_,f),Ee=s.memoizedState),(Te=Ya||n1(s,u,Te,f,Se,Ee,K)||i!==null&&i.dependencies!==null&&Jc(i.dependencies))?(be||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,Ee,K),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,Ee,K)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||C===i.memoizedProps&&Se===i.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&Se===i.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=Ee),b.props=f,b.state=Ee,b.context=K,f=Te):(typeof b.componentDidUpdate!="function"||C===i.memoizedProps&&Se===i.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&Se===i.memoizedState||(s.flags|=1024),f=!1)}return b=f,vf(i,s),f=(s.flags&128)!==0,b||f?(b=s.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:b.render(),s.flags|=1,i!==null&&f?(s.child=to(s,i.child,null,y),s.child=to(s,null,u,y)):Fn(i,s,u,y),s.memoizedState=b.state,i=s.child):i=la(i,s,y),i}function v1(i,s,u,f){return Qs(),s.flags|=256,Fn(i,s,u,f),s.child}var _p={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zp(i){return{baseLanes:i,cachePool:o0()}}function jp(i,s,u){return i=i!==null?i.childLanes&~u:0,s&&(i|=Br),i}function b1(i,s,u){var f=s.pendingProps,y=!1,b=(s.flags&128)!==0,C;if((C=b)||(C=i!==null&&i.memoizedState===null?!1:(mn.current&2)!==0),C&&(y=!0,s.flags&=-129),C=(s.flags&32)!==0,s.flags&=-33,i===null){if(yt){if(y?Wa(s):Xa(),(i=Gt)?(i=Mv(i,Jr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Va!==null?{id:Di,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},u=Jy(i),u.return=s,s.child=u,Pn=s,Gt=null)):i=null,i===null)throw Ka(s);return ym(i)?s.lanes=32:s.lanes=536870912,null}var _=f.children;return f=f.fallback,y?(Xa(),y=s.mode,_=bf({mode:"hidden",children:_},y),f=Gs(f,y,u,null),_.return=s,f.return=s,_.sibling=f,s.child=_,f=s.child,f.memoizedState=zp(u),f.childLanes=jp(i,C,u),s.memoizedState=_p,Tu(null,f)):(Wa(s),Lp(s,_))}var K=i.memoizedState;if(K!==null&&(_=K.dehydrated,_!==null)){if(b)s.flags&256?(Wa(s),s.flags&=-257,s=Bp(i,s,u)):s.memoizedState!==null?(Xa(),s.child=i.child,s.flags|=128,s=null):(Xa(),_=f.fallback,y=s.mode,f=bf({mode:"visible",children:f.children},y),_=Gs(_,y,u,null),_.flags|=2,f.return=s,_.return=s,f.sibling=_,s.child=f,to(s,i.child,null,u),f=s.child,f.memoizedState=zp(u),f.childLanes=jp(i,C,u),s.memoizedState=_p,s=Tu(null,f));else if(Wa(s),ym(_)){if(C=_.nextSibling&&_.nextSibling.dataset,C)var be=C.dgst;C=be,f=Error(r(419)),f.stack="",f.digest=C,hu({value:f,source:null,stack:null}),s=Bp(i,s,u)}else if(Tn||el(i,s,u,!1),C=(u&i.childLanes)!==0,Tn||C){if(C=It,C!==null&&(f=dn(C,u),f!==0&&f!==K.retryLane))throw K.retryLane=f,kt(i,f),Er(C,i,f),Dp;gm(_)||Af(),s=Bp(i,s,u)}else gm(_)?(s.flags|=192,s.child=i.child,s=null):(i=K.treeContext,Gt=ei(_.nextSibling),Pn=s,yt=!0,Fa=null,Jr=!1,i!==null&&t0(s,i),s=Lp(s,f.children),s.flags|=4096);return s}return y?(Xa(),_=f.fallback,y=s.mode,K=i.child,be=K.sibling,f=na(K,{mode:"hidden",children:f.children}),f.subtreeFlags=K.subtreeFlags&65011712,be!==null?_=na(be,_):(_=Gs(_,y,u,null),_.flags|=2),_.return=s,f.return=s,f.sibling=_,s.child=f,Tu(null,f),f=s.child,_=i.child.memoizedState,_===null?_=zp(u):(y=_.cachePool,y!==null?(K=En._currentValue,y=y.parent!==K?{parent:K,pool:K}:y):y=o0(),_={baseLanes:_.baseLanes|u,cachePool:y}),f.memoizedState=_,f.childLanes=jp(i,C,u),s.memoizedState=_p,Tu(i.child,f)):(Wa(s),u=i.child,i=u.sibling,u=na(u,{mode:"visible",children:f.children}),u.return=s,u.sibling=null,i!==null&&(C=s.deletions,C===null?(s.deletions=[i],s.flags|=16):C.push(i)),s.child=u,s.memoizedState=null,u)}function Lp(i,s){return s=bf({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function bf(i,s){return i=_r(22,i,null,s),i.lanes=0,i}function Bp(i,s,u){return to(s,i.child,null,u),i=Lp(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function x1(i,s,u){i.lanes|=s;var f=i.alternate;f!==null&&(f.lanes|=s),Jh(i.return,s,u)}function Up(i,s,u,f,y,b){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:y,treeForkCount:b}:(C.isBackwards=s,C.rendering=null,C.renderingStartTime=0,C.last=f,C.tail=u,C.tailMode=y,C.treeForkCount=b)}function S1(i,s,u){var f=s.pendingProps,y=f.revealOrder,b=f.tail;f=f.children;var C=mn.current,_=(C&2)!==0;if(_?(C=C&1|2,s.flags|=128):C&=1,we(mn,C),Fn(i,s,f,u),f=yt?du:0,!_&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&x1(i,u,s);else if(i.tag===19)x1(i,u,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(u=s.child,y=null;u!==null;)i=u.alternate,i!==null&&of(i)===null&&(y=u),u=u.sibling;u=y,u===null?(y=s.child,s.child=null):(y=u.sibling,u.sibling=null),Up(s,!1,y,u,b,f);break;case"backwards":case"unstable_legacy-backwards":for(u=null,y=s.child,s.child=null;y!==null;){if(i=y.alternate,i!==null&&of(i)===null){s.child=y;break}i=y.sibling,y.sibling=u,u=y,y=i}Up(s,!0,u,null,b,f);break;case"together":Up(s,!1,null,null,void 0,f);break;default:s.memoizedState=null}return s.child}function la(i,s,u){if(i!==null&&(s.dependencies=i.dependencies),es|=s.lanes,(u&s.childLanes)===0)if(i!==null){if(el(i,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,u=na(i,i.pendingProps),s.child=u,u.return=s;i.sibling!==null;)i=i.sibling,u=u.sibling=na(i,i.pendingProps),u.return=s;u.sibling=null}return s.child}function Hp(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Jc(i)))}function uk(i,s,u){switch(s.tag){case 3:Ze(s,s.stateNode.containerInfo),$a(s,En,i.memoizedState.cache),Qs();break;case 27:case 5:ze(s);break;case 4:Ze(s,s.stateNode.containerInfo);break;case 10:$a(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,cp(s),null;break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(Wa(s),s.flags|=128,null):(u&s.child.childLanes)!==0?b1(i,s,u):(Wa(s),i=la(i,s,u),i!==null?i.sibling:null);Wa(s);break;case 19:var y=(i.flags&128)!==0;if(f=(u&s.childLanes)!==0,f||(el(i,s,u,!1),f=(u&s.childLanes)!==0),y){if(f)return S1(i,s,u);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),we(mn,mn.current),f)break;return null;case 22:return s.lanes=0,h1(i,s,u,s.pendingProps);case 24:$a(s,En,i.memoizedState.cache)}return la(i,s,u)}function w1(i,s,u){if(i!==null)if(i.memoizedProps!==s.pendingProps)Tn=!0;else{if(!Hp(i,u)&&(s.flags&128)===0)return Tn=!1,uk(i,s,u);Tn=(i.flags&131072)!==0}else Tn=!1,yt&&(s.flags&1048576)!==0&&e0(s,du,s.index);switch(s.lanes=0,s.tag){case 16:e:{var f=s.pendingProps;if(i=Zs(s.elementType),s.type=i,typeof i=="function")Fh(i)?(f=ro(i,f),s.tag=1,s=y1(null,s,i,f,u)):(s.tag=0,s=Rp(null,s,i,f,u));else{if(i!=null){var y=i.$$typeof;if(y===F){s.tag=11,s=c1(null,s,i,f,u);break e}else if(y===P){s.tag=14,s=f1(null,s,i,f,u);break e}}throw s=W(i)||i,Error(r(306,s,""))}}return s;case 0:return Rp(i,s,s.type,s.pendingProps,u);case 1:return f=s.type,y=ro(f,s.pendingProps),y1(i,s,f,y,u);case 3:e:{if(Ze(s,s.stateNode.containerInfo),i===null)throw Error(r(387));f=s.pendingProps;var b=s.memoizedState;y=b.element,ap(i,s),xu(s,f,null,u);var C=s.memoizedState;if(f=C.cache,$a(s,En,f),f!==b.cache&&Zh(s,[En],u,!0),bu(),f=C.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:C.cache},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){s=v1(i,s,f,u);break e}else if(f!==y){y=Qr(Error(r(424)),s),hu(y),s=v1(i,s,f,u);break e}else for(i=s.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,Gt=ei(i.firstChild),Pn=s,yt=!0,Fa=null,Jr=!0,u=h0(s,null,f,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Qs(),f===y){s=la(i,s,u);break e}Fn(i,s,f,u)}s=s.child}return s;case 26:return vf(i,s),i===null?(u=_v(s.type,null,s.pendingProps,null))?s.memoizedState=u:yt||(u=s.type,i=s.pendingProps,f=jf(_e.current).createElement(u),f[Pt]=s,f[hn]=i,Kn(f,u,i),pn(f),s.stateNode=f):s.memoizedState=_v(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return ze(s),i===null&&yt&&(f=s.stateNode=Nv(s.type,s.pendingProps,_e.current),Pn=s,Jr=!0,y=Gt,as(s.type)?(vm=y,Gt=ei(f.firstChild)):Gt=y),Fn(i,s,s.pendingProps.children,u),vf(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&yt&&((y=f=Gt)&&(f=Hk(f,s.type,s.pendingProps,Jr),f!==null?(s.stateNode=f,Pn=s,Gt=ei(f.firstChild),Jr=!1,y=!0):y=!1),y||Ka(s)),ze(s),y=s.type,b=s.pendingProps,C=i!==null?i.memoizedProps:null,f=b.children,hm(y,b)?f=null:C!==null&&hm(y,C)&&(s.flags|=32),s.memoizedState!==null&&(y=dp(i,s,ek,null,null,u),Iu._currentValue=y),vf(i,s),Fn(i,s,f,u),s.child;case 6:return i===null&&yt&&((i=u=Gt)&&(u=Ik(u,s.pendingProps,Jr),u!==null?(s.stateNode=u,Pn=s,Gt=null,i=!0):i=!1),i||Ka(s)),null;case 13:return b1(i,s,u);case 4:return Ze(s,s.stateNode.containerInfo),f=s.pendingProps,i===null?s.child=to(s,null,f,u):Fn(i,s,f,u),s.child;case 11:return c1(i,s,s.type,s.pendingProps,u);case 7:return Fn(i,s,s.pendingProps,u),s.child;case 8:return Fn(i,s,s.pendingProps.children,u),s.child;case 12:return Fn(i,s,s.pendingProps.children,u),s.child;case 10:return f=s.pendingProps,$a(s,s.type,f.value),Fn(i,s,f.children,u),s.child;case 9:return y=s.type._context,f=s.pendingProps.children,Xs(s),y=Vn(y),f=f(y),s.flags|=1,Fn(i,s,f,u),s.child;case 14:return f1(i,s,s.type,s.pendingProps,u);case 15:return d1(i,s,s.type,s.pendingProps,u);case 19:return S1(i,s,u);case 31:return lk(i,s,u);case 22:return h1(i,s,u,s.pendingProps);case 24:return Xs(s),f=Vn(En),i===null?(y=np(),y===null&&(y=It,b=ep(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=u),y=b),s.memoizedState={parent:f,cache:y},ip(s),$a(s,En,y)):((i.lanes&u)!==0&&(ap(i,s),xu(s,null,null,u),bu()),y=i.memoizedState,b=s.memoizedState,y.parent!==f?(y={parent:f,cache:f},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),$a(s,En,f)):(f=b.cache,$a(s,En,f),f!==y.cache&&Zh(s,[En],u,!0))),Fn(i,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function ua(i){i.flags|=4}function Ip(i,s,u,f,y){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(Q1())i.flags|=8192;else throw eo=nf,rp}else i.flags&=-16777217}function E1(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Uv(s))if(Q1())i.flags|=8192;else throw eo=nf,rp}function xf(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Vr():536870912,i.lanes|=s,dl|=s)}function Cu(i,s){if(!yt)switch(i.tailMode){case"hidden":s=i.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Qt(i){var s=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(s)for(var y=i.child;y!==null;)u|=y.lanes|y.childLanes,f|=y.subtreeFlags&65011712,f|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)u|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=f,i.childLanes=u,s}function ck(i,s,u){var f=s.pendingProps;switch(Gh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(s),null;case 1:return Qt(s),null;case 3:return u=s.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),aa(En),Qe(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(Zo(s)?ua(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Wh())),Qt(s),null;case 26:var y=s.type,b=s.memoizedState;return i===null?(ua(s),b!==null?(Qt(s),E1(s,b)):(Qt(s),Ip(s,y,null,f,u))):b?b!==i.memoizedState?(ua(s),Qt(s),E1(s,b)):(Qt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==f&&ua(s),Qt(s),Ip(s,y,i,f,u)),null;case 27:if(Tt(s),u=_e.current,y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==f&&ua(s);else{if(!f){if(s.stateNode===null)throw Error(r(166));return Qt(s),null}i=ge.current,Zo(s)?n0(s):(i=Nv(y,f,u),s.stateNode=i,ua(s))}return Qt(s),null;case 5:if(Tt(s),y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==f&&ua(s);else{if(!f){if(s.stateNode===null)throw Error(r(166));return Qt(s),null}if(b=ge.current,Zo(s))n0(s);else{var C=jf(_e.current);switch(b){case 1:b=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:b=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":b=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":b=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":b=C.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof f.is=="string"?C.createElement("select",{is:f.is}):C.createElement("select"),f.multiple?b.multiple=!0:f.size&&(b.size=f.size);break;default:b=typeof f.is=="string"?C.createElement(y,{is:f.is}):C.createElement(y)}}b[Pt]=s,b[hn]=f;e:for(C=s.child;C!==null;){if(C.tag===5||C.tag===6)b.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===s)break e;for(;C.sibling===null;){if(C.return===null||C.return===s)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}s.stateNode=b;e:switch(Kn(b,y,f),y){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&ua(s)}}return Qt(s),Ip(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,u),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==f&&ua(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(r(166));if(i=_e.current,Zo(s)){if(i=s.stateNode,u=s.memoizedProps,f=null,y=Pn,y!==null)switch(y.tag){case 27:case 5:f=y.memoizedProps}i[Pt]=s,i=!!(i.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||bv(i.nodeValue,u)),i||Ka(s,!0)}else i=jf(i).createTextNode(f),i[Pt]=s,s.stateNode=i}return Qt(s),null;case 31:if(u=s.memoizedState,i===null||i.memoizedState!==null){if(f=Zo(s),u!==null){if(i===null){if(!f)throw Error(r(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[Pt]=s}else Qs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qt(s),i=!1}else u=Wh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return s.flags&256?(jr(s),s):(jr(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Qt(s),null;case 13:if(f=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Zo(s),f!==null&&f.dehydrated!==null){if(i===null){if(!y)throw Error(r(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Pt]=s}else Qs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qt(s),y=!1}else y=Wh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(jr(s),s):(jr(s),null)}return jr(s),(s.flags&128)!==0?(s.lanes=u,s):(u=f!==null,i=i!==null&&i.memoizedState!==null,u&&(f=s.child,y=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(y=f.alternate.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==y&&(f.flags|=2048)),u!==i&&u&&(s.child.flags|=8192),xf(s,s.updateQueue),Qt(s),null);case 4:return Qe(),i===null&&lm(s.stateNode.containerInfo),Qt(s),null;case 10:return aa(s.type),Qt(s),null;case 19:if(Y(mn),f=s.memoizedState,f===null)return Qt(s),null;if(y=(s.flags&128)!==0,b=f.rendering,b===null)if(y)Cu(f,!1);else{if(ln!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(b=of(i),b!==null){for(s.flags|=128,Cu(f,!1),i=b.updateQueue,s.updateQueue=i,xf(s,i),s.subtreeFlags=0,i=u,u=s.child;u!==null;)Xy(u,i),u=u.sibling;return we(mn,mn.current&1|2),yt&&ra(s,f.treeForkCount),s.child}i=i.sibling}f.tail!==null&&it()>Tf&&(s.flags|=128,y=!0,Cu(f,!1),s.lanes=4194304)}else{if(!y)if(i=of(b),i!==null){if(s.flags|=128,y=!0,i=i.updateQueue,s.updateQueue=i,xf(s,i),Cu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!b.alternate&&!yt)return Qt(s),null}else 2*it()-f.renderingStartTime>Tf&&u!==536870912&&(s.flags|=128,y=!0,Cu(f,!1),s.lanes=4194304);f.isBackwards?(b.sibling=s.child,s.child=b):(i=f.last,i!==null?i.sibling=b:s.child=b,f.last=b)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=it(),i.sibling=null,u=mn.current,we(mn,y?u&1|2:u&1),yt&&ra(s,f.treeForkCount),i):(Qt(s),null);case 22:case 23:return jr(s),up(),f=s.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(u&536870912)!==0&&(s.flags&128)===0&&(Qt(s),s.subtreeFlags&6&&(s.flags|=8192)):Qt(s),u=s.updateQueue,u!==null&&xf(s,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==u&&(s.flags|=2048),i!==null&&Y(Js),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),aa(En),Qt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function fk(i,s){switch(Gh(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return aa(En),Qe(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Tt(s),null;case 31:if(s.memoizedState!==null){if(jr(s),s.alternate===null)throw Error(r(340));Qs()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(jr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Qs()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return Y(mn),null;case 4:return Qe(),null;case 10:return aa(s.type),null;case 22:case 23:return jr(s),up(),i!==null&&Y(Js),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return aa(En),null;case 25:return null;default:return null}}function k1(i,s){switch(Gh(s),s.tag){case 3:aa(En),Qe();break;case 26:case 27:case 5:Tt(s);break;case 4:Qe();break;case 31:s.memoizedState!==null&&jr(s);break;case 13:jr(s);break;case 19:Y(mn);break;case 10:aa(s.type);break;case 22:case 23:jr(s),up(),i!==null&&Y(Js);break;case 24:aa(En)}}function Mu(i,s){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var y=f.next;u=y;do{if((u.tag&i)===i){f=void 0;var b=u.create,C=u.inst;f=b(),C.destroy=f}u=u.next}while(u!==y)}}catch(_){Mt(s,s.return,_)}}function Ja(i,s,u){try{var f=s.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var b=y.next;f=b;do{if((f.tag&i)===i){var C=f.inst,_=C.destroy;if(_!==void 0){C.destroy=void 0,y=s;var K=u,be=_;try{be()}catch(Te){Mt(y,K,Te)}}}f=f.next}while(f!==b)}}catch(Te){Mt(s,s.return,Te)}}function T1(i){var s=i.updateQueue;if(s!==null){var u=i.stateNode;try{m0(s,u)}catch(f){Mt(i,i.return,f)}}}function C1(i,s,u){u.props=ro(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(f){Mt(i,s,f)}}function Au(i,s){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof u=="function"?i.refCleanup=u(f):u.current=f}}catch(y){Mt(i,s,y)}}function _i(i,s){var u=i.ref,f=i.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(y){Mt(i,s,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){Mt(i,s,y)}else u.current=null}function M1(i){var s=i.type,u=i.memoizedProps,f=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(y){Mt(i,i.return,y)}}function qp(i,s,u){try{var f=i.stateNode;_k(f,i.type,u,s),f[hn]=s}catch(y){Mt(i,i.return,y)}}function A1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&as(i.type)||i.tag===4}function Pp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||A1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&as(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Vp(i,s,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,s):(s=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,s.appendChild(i),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=vr));else if(f!==4&&(f===27&&as(i.type)&&(u=i.stateNode,s=null),i=i.child,i!==null))for(Vp(i,s,u),i=i.sibling;i!==null;)Vp(i,s,u),i=i.sibling}function Sf(i,s,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?u.insertBefore(i,s):u.appendChild(i);else if(f!==4&&(f===27&&as(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Sf(i,s,u),i=i.sibling;i!==null;)Sf(i,s,u),i=i.sibling}function O1(i){var s=i.stateNode,u=i.memoizedProps;try{for(var f=i.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);Kn(s,f,u),s[Pt]=i,s[hn]=u}catch(b){Mt(i,i.return,b)}}var ca=!1,Cn=!1,Fp=!1,N1=typeof WeakSet=="function"?WeakSet:Set,Bn=null;function dk(i,s){if(i=i.containerInfo,fm=Pf,i=A(i),N(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var y=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var C=0,_=-1,K=-1,be=0,Te=0,Me=i,Se=null;t:for(;;){for(var Ee;Me!==u||y!==0&&Me.nodeType!==3||(_=C+y),Me!==b||f!==0&&Me.nodeType!==3||(K=C+f),Me.nodeType===3&&(C+=Me.nodeValue.length),(Ee=Me.firstChild)!==null;)Se=Me,Me=Ee;for(;;){if(Me===i)break t;if(Se===u&&++be===y&&(_=C),Se===b&&++Te===f&&(K=C),(Ee=Me.nextSibling)!==null)break;Me=Se,Se=Me.parentNode}Me=Ee}u=_===-1||K===-1?null:{start:_,end:K}}else u=null}u=u||{start:0,end:0}}else u=null;for(dm={focusedElem:i,selectionRange:u},Pf=!1,Bn=s;Bn!==null;)if(s=Bn,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Bn=i;else for(;Bn!==null;){switch(s=Bn,b=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)y=i[u],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,u=s,y=b.memoizedProps,b=b.memoizedState,f=u.stateNode;try{var Ve=ro(u.type,y);i=f.getSnapshotBeforeUpdate(Ve,b),f.__reactInternalSnapshotBeforeUpdate=i}catch(Je){Mt(u,u.return,Je)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,u=i.nodeType,u===9)mm(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":mm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,Bn=i;break}Bn=s.return}}function D1(i,s,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:da(i,u),f&4&&Mu(5,u);break;case 1:if(da(i,u),f&4)if(i=u.stateNode,s===null)try{i.componentDidMount()}catch(C){Mt(u,u.return,C)}else{var y=ro(u.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(y,s,i.__reactInternalSnapshotBeforeUpdate)}catch(C){Mt(u,u.return,C)}}f&64&&T1(u),f&512&&Au(u,u.return);break;case 3:if(da(i,u),f&64&&(i=u.updateQueue,i!==null)){if(s=null,u.child!==null)switch(u.child.tag){case 27:case 5:s=u.child.stateNode;break;case 1:s=u.child.stateNode}try{m0(i,s)}catch(C){Mt(u,u.return,C)}}break;case 27:s===null&&f&4&&O1(u);case 26:case 5:da(i,u),s===null&&f&4&&M1(u),f&512&&Au(u,u.return);break;case 12:da(i,u);break;case 31:da(i,u),f&4&&z1(i,u);break;case 13:da(i,u),f&4&&j1(i,u),f&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=Sk.bind(null,u),qk(i,u))));break;case 22:if(f=u.memoizedState!==null||ca,!f){s=s!==null&&s.memoizedState!==null||Cn,y=ca;var b=Cn;ca=f,(Cn=s)&&!b?ha(i,u,(u.subtreeFlags&8772)!==0):da(i,u),ca=y,Cn=b}break;case 30:break;default:da(i,u)}}function R1(i){var s=i.alternate;s!==null&&(i.alternate=null,R1(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&No(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Xt=null,br=!1;function fa(i,s,u){for(u=u.child;u!==null;)_1(i,s,u),u=u.sibling}function _1(i,s,u){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(xn,u)}catch{}switch(u.tag){case 26:Cn||_i(u,s),fa(i,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Cn||_i(u,s);var f=Xt,y=br;as(u.type)&&(Xt=u.stateNode,br=!1),fa(i,s,u),Bu(u.stateNode),Xt=f,br=y;break;case 5:Cn||_i(u,s);case 6:if(f=Xt,y=br,Xt=null,fa(i,s,u),Xt=f,br=y,Xt!==null)if(br)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(u.stateNode)}catch(b){Mt(u,s,b)}else try{Xt.removeChild(u.stateNode)}catch(b){Mt(u,s,b)}break;case 18:Xt!==null&&(br?(i=Xt,Tv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),xl(i)):Tv(Xt,u.stateNode));break;case 4:f=Xt,y=br,Xt=u.stateNode.containerInfo,br=!0,fa(i,s,u),Xt=f,br=y;break;case 0:case 11:case 14:case 15:Ja(2,u,s),Cn||Ja(4,u,s),fa(i,s,u);break;case 1:Cn||(_i(u,s),f=u.stateNode,typeof f.componentWillUnmount=="function"&&C1(u,s,f)),fa(i,s,u);break;case 21:fa(i,s,u);break;case 22:Cn=(f=Cn)||u.memoizedState!==null,fa(i,s,u),Cn=f;break;default:fa(i,s,u)}}function z1(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{xl(i)}catch(u){Mt(s,s.return,u)}}}function j1(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{xl(i)}catch(u){Mt(s,s.return,u)}}function hk(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new N1),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new N1),s;default:throw Error(r(435,i.tag))}}function wf(i,s){var u=hk(i);s.forEach(function(f){if(!u.has(f)){u.add(f);var y=wk.bind(null,i,f);f.then(y,y)}})}function xr(i,s){var u=s.deletions;if(u!==null)for(var f=0;f<u.length;f++){var y=u[f],b=i,C=s,_=C;e:for(;_!==null;){switch(_.tag){case 27:if(as(_.type)){Xt=_.stateNode,br=!1;break e}break;case 5:Xt=_.stateNode,br=!1;break e;case 3:case 4:Xt=_.stateNode.containerInfo,br=!0;break e}_=_.return}if(Xt===null)throw Error(r(160));_1(b,C,y),Xt=null,br=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)L1(s,i),s=s.sibling}var di=null;function L1(i,s){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:xr(s,i),Sr(i),f&4&&(Ja(3,i,i.return),Mu(3,i),Ja(5,i,i.return));break;case 1:xr(s,i),Sr(i),f&512&&(Cn||u===null||_i(u,u.return)),f&64&&ca&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var y=di;if(xr(s,i),Sr(i),f&512&&(Cn||u===null||_i(u,u.return)),f&4){var b=u!==null?u.memoizedState:null;if(f=i.memoizedState,u===null)if(f===null)if(i.stateNode===null){e:{f=i.type,u=i.memoizedProps,y=y.ownerDocument||y;t:switch(f){case"title":b=y.getElementsByTagName("title")[0],(!b||b[Nr]||b[Pt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(f),y.head.insertBefore(b,y.querySelector("head > title"))),Kn(b,f,u),b[Pt]=i,pn(b),f=b;break e;case"link":var C=Lv("link","href",y).get(f+(u.href||""));if(C){for(var _=0;_<C.length;_++)if(b=C[_],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){C.splice(_,1);break t}}b=y.createElement(f),Kn(b,f,u),y.head.appendChild(b);break;case"meta":if(C=Lv("meta","content",y).get(f+(u.content||""))){for(_=0;_<C.length;_++)if(b=C[_],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){C.splice(_,1);break t}}b=y.createElement(f),Kn(b,f,u),y.head.appendChild(b);break;default:throw Error(r(468,f))}b[Pt]=i,pn(b),f=b}i.stateNode=f}else Bv(y,i.type,i.stateNode);else i.stateNode=jv(y,f,i.memoizedProps);else b!==f?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,f===null?Bv(y,i.type,i.stateNode):jv(y,f,i.memoizedProps)):f===null&&i.stateNode!==null&&qp(i,i.memoizedProps,u.memoizedProps)}break;case 27:xr(s,i),Sr(i),f&512&&(Cn||u===null||_i(u,u.return)),u!==null&&f&4&&qp(i,i.memoizedProps,u.memoizedProps);break;case 5:if(xr(s,i),Sr(i),f&512&&(Cn||u===null||_i(u,u.return)),i.flags&32){y=i.stateNode;try{$i(y,"")}catch(Ve){Mt(i,i.return,Ve)}}f&4&&i.stateNode!=null&&(y=i.memoizedProps,qp(i,y,u!==null?u.memoizedProps:y)),f&1024&&(Fp=!0);break;case 6:if(xr(s,i),Sr(i),f&4){if(i.stateNode===null)throw Error(r(162));f=i.memoizedProps,u=i.stateNode;try{u.nodeValue=f}catch(Ve){Mt(i,i.return,Ve)}}break;case 3:if(Uf=null,y=di,di=Lf(s.containerInfo),xr(s,i),di=y,Sr(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{xl(s.containerInfo)}catch(Ve){Mt(i,i.return,Ve)}Fp&&(Fp=!1,B1(i));break;case 4:f=di,di=Lf(i.stateNode.containerInfo),xr(s,i),Sr(i),di=f;break;case 12:xr(s,i),Sr(i);break;case 31:xr(s,i),Sr(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,wf(i,f)));break;case 13:xr(s,i),Sr(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(kf=it()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,wf(i,f)));break;case 22:y=i.memoizedState!==null;var K=u!==null&&u.memoizedState!==null,be=ca,Te=Cn;if(ca=be||y,Cn=Te||K,xr(s,i),Cn=Te,ca=be,Sr(i),f&8192)e:for(s=i.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(u===null||K||ca||Cn||io(i)),u=null,s=i;;){if(s.tag===5||s.tag===26){if(u===null){K=u=s;try{if(b=K.stateNode,y)C=b.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{_=K.stateNode;var Me=K.memoizedProps.style,Se=Me!=null&&Me.hasOwnProperty("display")?Me.display:null;_.style.display=Se==null||typeof Se=="boolean"?"":(""+Se).trim()}}catch(Ve){Mt(K,K.return,Ve)}}}else if(s.tag===6){if(u===null){K=s;try{K.stateNode.nodeValue=y?"":K.memoizedProps}catch(Ve){Mt(K,K.return,Ve)}}}else if(s.tag===18){if(u===null){K=s;try{var Ee=K.stateNode;y?Cv(Ee,!0):Cv(K.stateNode,!1)}catch(Ve){Mt(K,K.return,Ve)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=i.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,wf(i,u))));break;case 19:xr(s,i),Sr(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,wf(i,f)));break;case 30:break;case 21:break;default:xr(s,i),Sr(i)}}function Sr(i){var s=i.flags;if(s&2){try{for(var u,f=i.return;f!==null;){if(A1(f)){u=f;break}f=f.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var y=u.stateNode,b=Pp(i);Sf(i,b,y);break;case 5:var C=u.stateNode;u.flags&32&&($i(C,""),u.flags&=-33);var _=Pp(i);Sf(i,_,C);break;case 3:case 4:var K=u.stateNode.containerInfo,be=Pp(i);Vp(i,be,K);break;default:throw Error(r(161))}}catch(Te){Mt(i,i.return,Te)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function B1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;B1(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function da(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)D1(i,s.alternate,s),s=s.sibling}function io(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Ja(4,s,s.return),io(s);break;case 1:_i(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&C1(s,s.return,u),io(s);break;case 27:Bu(s.stateNode);case 26:case 5:_i(s,s.return),io(s);break;case 22:s.memoizedState===null&&io(s);break;case 30:io(s);break;default:io(s)}i=i.sibling}}function ha(i,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,y=i,b=s,C=b.flags;switch(b.tag){case 0:case 11:case 15:ha(y,b,u),Mu(4,b);break;case 1:if(ha(y,b,u),f=b,y=f.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(be){Mt(f,f.return,be)}if(f=b,y=f.updateQueue,y!==null){var _=f.stateNode;try{var K=y.shared.hiddenCallbacks;if(K!==null)for(y.shared.hiddenCallbacks=null,y=0;y<K.length;y++)p0(K[y],_)}catch(be){Mt(f,f.return,be)}}u&&C&64&&T1(b),Au(b,b.return);break;case 27:O1(b);case 26:case 5:ha(y,b,u),u&&f===null&&C&4&&M1(b),Au(b,b.return);break;case 12:ha(y,b,u);break;case 31:ha(y,b,u),u&&C&4&&z1(y,b);break;case 13:ha(y,b,u),u&&C&4&&j1(y,b);break;case 22:b.memoizedState===null&&ha(y,b,u),Au(b,b.return);break;case 30:break;default:ha(y,b,u)}s=s.sibling}}function Kp(i,s){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&pu(u))}function $p(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&pu(i))}function hi(i,s,u,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)U1(i,s,u,f),s=s.sibling}function U1(i,s,u,f){var y=s.flags;switch(s.tag){case 0:case 11:case 15:hi(i,s,u,f),y&2048&&Mu(9,s);break;case 1:hi(i,s,u,f);break;case 3:hi(i,s,u,f),y&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&pu(i)));break;case 12:if(y&2048){hi(i,s,u,f),i=s.stateNode;try{var b=s.memoizedProps,C=b.id,_=b.onPostCommit;typeof _=="function"&&_(C,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(K){Mt(s,s.return,K)}}else hi(i,s,u,f);break;case 31:hi(i,s,u,f);break;case 13:hi(i,s,u,f);break;case 23:break;case 22:b=s.stateNode,C=s.alternate,s.memoizedState!==null?b._visibility&2?hi(i,s,u,f):Ou(i,s):b._visibility&2?hi(i,s,u,f):(b._visibility|=2,ul(i,s,u,f,(s.subtreeFlags&10256)!==0||!1)),y&2048&&Kp(C,s);break;case 24:hi(i,s,u,f),y&2048&&$p(s.alternate,s);break;default:hi(i,s,u,f)}}function ul(i,s,u,f,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var b=i,C=s,_=u,K=f,be=C.flags;switch(C.tag){case 0:case 11:case 15:ul(b,C,_,K,y),Mu(8,C);break;case 23:break;case 22:var Te=C.stateNode;C.memoizedState!==null?Te._visibility&2?ul(b,C,_,K,y):Ou(b,C):(Te._visibility|=2,ul(b,C,_,K,y)),y&&be&2048&&Kp(C.alternate,C);break;case 24:ul(b,C,_,K,y),y&&be&2048&&$p(C.alternate,C);break;default:ul(b,C,_,K,y)}s=s.sibling}}function Ou(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=i,f=s,y=f.flags;switch(f.tag){case 22:Ou(u,f),y&2048&&Kp(f.alternate,f);break;case 24:Ou(u,f),y&2048&&$p(f.alternate,f);break;default:Ou(u,f)}s=s.sibling}}var Nu=8192;function cl(i,s,u){if(i.subtreeFlags&Nu)for(i=i.child;i!==null;)H1(i,s,u),i=i.sibling}function H1(i,s,u){switch(i.tag){case 26:cl(i,s,u),i.flags&Nu&&i.memoizedState!==null&&Zk(u,di,i.memoizedState,i.memoizedProps);break;case 5:cl(i,s,u);break;case 3:case 4:var f=di;di=Lf(i.stateNode.containerInfo),cl(i,s,u),di=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=Nu,Nu=16777216,cl(i,s,u),Nu=f):cl(i,s,u));break;default:cl(i,s,u)}}function I1(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Du(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var f=s[u];Bn=f,P1(f,i)}I1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)q1(i),i=i.sibling}function q1(i){switch(i.tag){case 0:case 11:case 15:Du(i),i.flags&2048&&Ja(9,i,i.return);break;case 3:Du(i);break;case 12:Du(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Ef(i)):Du(i);break;default:Du(i)}}function Ef(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var f=s[u];Bn=f,P1(f,i)}I1(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Ja(8,s,s.return),Ef(s);break;case 22:u=s.stateNode,u._visibility&2&&(u._visibility&=-3,Ef(s));break;default:Ef(s)}i=i.sibling}}function P1(i,s){for(;Bn!==null;){var u=Bn;switch(u.tag){case 0:case 11:case 15:Ja(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:pu(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,Bn=f;else e:for(u=i;Bn!==null;){f=Bn;var y=f.sibling,b=f.return;if(R1(f),f===u){Bn=null;break e}if(y!==null){y.return=b,Bn=y;break e}Bn=b}}}var pk={getCacheForType:function(i){var s=Vn(En),u=s.data.get(i);return u===void 0&&(u=i(),s.data.set(i,u)),u},cacheSignal:function(){return Vn(En).controller.signal}},mk=typeof WeakMap=="function"?WeakMap:Map,wt=0,It=null,ft=null,ht=0,Ct=0,Lr=null,Za=!1,fl=!1,Yp=!1,pa=0,ln=0,es=0,ao=0,Gp=0,Br=0,dl=0,Ru=null,wr=null,Qp=!1,kf=0,V1=0,Tf=1/0,Cf=null,ts=null,On=0,ns=null,hl=null,ma=0,Wp=0,Xp=null,F1=null,_u=0,Jp=null;function Ur(){return(wt&2)!==0&&ht!==0?ht&-ht:D.T!==null?im():_s()}function K1(){if(Br===0)if((ht&536870912)===0||yt){var i=Si;Si<<=1,(Si&3932160)===0&&(Si=262144),Br=i}else Br=536870912;return i=zr.current,i!==null&&(i.flags|=32),Br}function Er(i,s,u){(i===It&&(Ct===2||Ct===9)||i.cancelPendingCommit!==null)&&(pl(i,0),rs(i,ht,Br,!1)),Fr(i,u),((wt&2)===0||i!==It)&&(i===It&&((wt&2)===0&&(ao|=u),ln===4&&rs(i,ht,Br,!1)),zi(i))}function $1(i,s,u){if((wt&6)!==0)throw Error(r(327));var f=!u&&(s&127)===0&&(s&i.expiredLanes)===0||cr(i,s),y=f?vk(i,s):em(i,s,!0),b=f;do{if(y===0){fl&&!f&&rs(i,s,0,!1);break}else{if(u=i.current.alternate,b&&!gk(u)){y=em(i,s,!1),b=!1;continue}if(y===2){if(b=s,i.errorRecoveryDisabledLanes&b)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){s=C;e:{var _=i;y=Ru;var K=_.current.memoizedState.isDehydrated;if(K&&(pl(_,C).flags|=256),C=em(_,C,!1),C!==2){if(Yp&&!K){_.errorRecoveryDisabledLanes|=b,ao|=b,y=4;break e}b=wr,wr=y,b!==null&&(wr===null?wr=b:wr.push.apply(wr,b))}y=C}if(b=!1,y!==2)continue}}if(y===1){pl(i,0),rs(i,s,0,!0);break}e:{switch(f=i,b=y,b){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:rs(f,s,Br,!Za);break e;case 2:wr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(y=kf+300-it(),10<y)){if(rs(f,s,Br,!Za),yr(f,0,!0)!==0)break e;ma=s,f.timeoutHandle=Ev(Y1.bind(null,f,u,wr,Cf,Qp,s,Br,ao,dl,Za,b,"Throttled",-0,0),y);break e}Y1(f,u,wr,Cf,Qp,s,Br,ao,dl,Za,b,null,-0,0)}}break}while(!0);zi(i)}function Y1(i,s,u,f,y,b,C,_,K,be,Te,Me,Se,Ee){if(i.timeoutHandle=-1,Me=s.subtreeFlags,Me&8192||(Me&16785408)===16785408){Me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vr},H1(s,b,Me);var Ve=(b&62914560)===b?kf-it():(b&4194048)===b?V1-it():0;if(Ve=eT(Me,Ve),Ve!==null){ma=b,i.cancelPendingCommit=Ve(tv.bind(null,i,s,b,u,f,y,C,_,K,Te,Me,null,Se,Ee)),rs(i,b,C,!be);return}}tv(i,s,b,u,f,y,C,_,K)}function gk(i){for(var s=i;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var y=u[f],b=y.getSnapshot;y=y.value;try{if(!tr(b(),y))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function rs(i,s,u,f){s&=~Gp,s&=~ao,i.suspendedLanes|=s,i.pingedLanes&=~s,f&&(i.warmLanes|=s),f=i.expirationTimes;for(var y=s;0<y;){var b=31-He(y),C=1<<b;f[b]=-1,y&=~C}u!==0&&Rs(i,u,s)}function Mf(){return(wt&6)===0?(zu(0),!1):!0}function Zp(){if(ft!==null){if(Ct===0)var i=ft.return;else i=ft,ia=Ws=null,mp(i),il=null,gu=0,i=ft;for(;i!==null;)k1(i.alternate,i),i=i.return;ft=null}}function pl(i,s){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,Lk(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),ma=0,Zp(),It=i,ft=u=na(i.current,null),ht=s,Ct=0,Lr=null,Za=!1,fl=cr(i,s),Yp=!1,dl=Br=Gp=ao=es=ln=0,wr=Ru=null,Qp=!1,(s&8)!==0&&(s|=s&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=s;0<f;){var y=31-He(f),b=1<<y;s|=i[y],f&=~b}return pa=s,nt(),u}function G1(i,s){at=null,D.H=ku,s===rl||s===tf?(s=c0(),Ct=3):s===rp?(s=c0(),Ct=4):Ct=s===Dp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Lr=s,ft===null&&(ln=1,gf(i,Qr(s,i.current)))}function Q1(){var i=zr.current;return i===null?!0:(ht&4194048)===ht?Zr===null:(ht&62914560)===ht||(ht&536870912)!==0?i===Zr:!1}function W1(){var i=D.H;return D.H=ku,i===null?ku:i}function X1(){var i=D.A;return D.A=pk,i}function Af(){ln=4,Za||(ht&4194048)!==ht&&zr.current!==null||(fl=!0),(es&134217727)===0&&(ao&134217727)===0||It===null||rs(It,ht,Br,!1)}function em(i,s,u){var f=wt;wt|=2;var y=W1(),b=X1();(It!==i||ht!==s)&&(Cf=null,pl(i,s)),s=!1;var C=ln;e:do try{if(Ct!==0&&ft!==null){var _=ft,K=Lr;switch(Ct){case 8:Zp(),C=6;break e;case 3:case 2:case 9:case 6:zr.current===null&&(s=!0);var be=Ct;if(Ct=0,Lr=null,ml(i,_,K,be),u&&fl){C=0;break e}break;default:be=Ct,Ct=0,Lr=null,ml(i,_,K,be)}}yk(),C=ln;break}catch(Te){G1(i,Te)}while(!0);return s&&i.shellSuspendCounter++,ia=Ws=null,wt=f,D.H=y,D.A=b,ft===null&&(It=null,ht=0,nt()),C}function yk(){for(;ft!==null;)J1(ft)}function vk(i,s){var u=wt;wt|=2;var f=W1(),y=X1();It!==i||ht!==s?(Cf=null,Tf=it()+500,pl(i,s)):fl=cr(i,s);e:do try{if(Ct!==0&&ft!==null){s=ft;var b=Lr;t:switch(Ct){case 1:Ct=0,Lr=null,ml(i,s,b,1);break;case 2:case 9:if(l0(b)){Ct=0,Lr=null,Z1(s);break}s=function(){Ct!==2&&Ct!==9||It!==i||(Ct=7),zi(i)},b.then(s,s);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:l0(b)?(Ct=0,Lr=null,Z1(s)):(Ct=0,Lr=null,ml(i,s,b,7));break;case 5:var C=null;switch(ft.tag){case 26:C=ft.memoizedState;case 5:case 27:var _=ft;if(C?Uv(C):_.stateNode.complete){Ct=0,Lr=null;var K=_.sibling;if(K!==null)ft=K;else{var be=_.return;be!==null?(ft=be,Of(be)):ft=null}break t}}Ct=0,Lr=null,ml(i,s,b,5);break;case 6:Ct=0,Lr=null,ml(i,s,b,6);break;case 8:Zp(),ln=6;break e;default:throw Error(r(462))}}bk();break}catch(Te){G1(i,Te)}while(!0);return ia=Ws=null,D.H=f,D.A=y,wt=u,ft!==null?0:(It=null,ht=0,nt(),ln)}function bk(){for(;ft!==null&&!Dn();)J1(ft)}function J1(i){var s=w1(i.alternate,i,pa);i.memoizedProps=i.pendingProps,s===null?Of(i):ft=s}function Z1(i){var s=i,u=s.alternate;switch(s.tag){case 15:case 0:s=g1(u,s,s.pendingProps,s.type,void 0,ht);break;case 11:s=g1(u,s,s.pendingProps,s.type.render,s.ref,ht);break;case 5:mp(s);default:k1(u,s),s=ft=Xy(s,pa),s=w1(u,s,pa)}i.memoizedProps=i.pendingProps,s===null?Of(i):ft=s}function ml(i,s,u,f){ia=Ws=null,mp(s),il=null,gu=0;var y=s.return;try{if(ok(i,y,s,u,ht)){ln=1,gf(i,Qr(u,i.current)),ft=null;return}}catch(b){if(y!==null)throw ft=y,b;ln=1,gf(i,Qr(u,i.current)),ft=null;return}s.flags&32768?(yt||f===1?i=!0:fl||(ht&536870912)!==0?i=!1:(Za=i=!0,(f===2||f===9||f===3||f===6)&&(f=zr.current,f!==null&&f.tag===13&&(f.flags|=16384))),ev(s,i)):Of(s)}function Of(i){var s=i;do{if((s.flags&32768)!==0){ev(s,Za);return}i=s.return;var u=ck(s.alternate,s,pa);if(u!==null){ft=u;return}if(s=s.sibling,s!==null){ft=s;return}ft=s=i}while(s!==null);ln===0&&(ln=5)}function ev(i,s){do{var u=fk(i.alternate,i);if(u!==null){u.flags&=32767,ft=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(i=i.sibling,i!==null)){ft=i;return}ft=i=u}while(i!==null);ln=6,ft=null}function tv(i,s,u,f,y,b,C,_,K){i.cancelPendingCommit=null;do Nf();while(On!==0);if((wt&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(b=s.lanes|s.childLanes,b|=$e,Fl(i,u,b,C,_,K),i===It&&(ft=It=null,ht=0),hl=s,ns=i,ma=u,Wp=b,Xp=y,F1=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,Ek(Ft,function(){return sv(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=D.T,D.T=null,y=R.p,R.p=2,C=wt,wt|=4;try{dk(i,s,u)}finally{wt=C,R.p=y,D.T=f}}On=1,nv(),rv(),iv()}}function nv(){if(On===1){On=0;var i=ns,s=hl,u=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||u){u=D.T,D.T=null;var f=R.p;R.p=2;var y=wt;wt|=4;try{L1(s,i);var b=dm,C=A(i.containerInfo),_=b.focusedElem,K=b.selectionRange;if(C!==_&&_&&_.ownerDocument&&k(_.ownerDocument.documentElement,_)){if(K!==null&&N(_)){var be=K.start,Te=K.end;if(Te===void 0&&(Te=be),"selectionStart"in _)_.selectionStart=be,_.selectionEnd=Math.min(Te,_.value.length);else{var Me=_.ownerDocument||document,Se=Me&&Me.defaultView||window;if(Se.getSelection){var Ee=Se.getSelection(),Ve=_.textContent.length,Je=Math.min(K.start,Ve),Bt=K.end===void 0?Je:Math.min(K.end,Ve);!Ee.extend&&Je>Bt&&(C=Bt,Bt=Je,Je=C);var ue=E(_,Je),ne=E(_,Bt);if(ue&&ne&&(Ee.rangeCount!==1||Ee.anchorNode!==ue.node||Ee.anchorOffset!==ue.offset||Ee.focusNode!==ne.node||Ee.focusOffset!==ne.offset)){var ye=Me.createRange();ye.setStart(ue.node,ue.offset),Ee.removeAllRanges(),Je>Bt?(Ee.addRange(ye),Ee.extend(ne.node,ne.offset)):(ye.setEnd(ne.node,ne.offset),Ee.addRange(ye))}}}}for(Me=[],Ee=_;Ee=Ee.parentNode;)Ee.nodeType===1&&Me.push({element:Ee,left:Ee.scrollLeft,top:Ee.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<Me.length;_++){var Ce=Me[_];Ce.element.scrollLeft=Ce.left,Ce.element.scrollTop=Ce.top}}Pf=!!fm,dm=fm=null}finally{wt=y,R.p=f,D.T=u}}i.current=s,On=2}}function rv(){if(On===2){On=0;var i=ns,s=hl,u=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||u){u=D.T,D.T=null;var f=R.p;R.p=2;var y=wt;wt|=4;try{D1(i,s.alternate,s)}finally{wt=y,R.p=f,D.T=u}}On=3}}function iv(){if(On===4||On===3){On=0,Dt();var i=ns,s=hl,u=ma,f=F1;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?On=5:(On=0,hl=ns=null,av(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(ts=null),Na(u),s=s.stateNode,Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(xn,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=D.T,y=R.p,R.p=2,D.T=null;try{for(var b=i.onRecoverableError,C=0;C<f.length;C++){var _=f[C];b(_.value,{componentStack:_.stack})}}finally{D.T=s,R.p=y}}(ma&3)!==0&&Nf(),zi(i),y=i.pendingLanes,(u&261930)!==0&&(y&42)!==0?i===Jp?_u++:(_u=0,Jp=i):_u=0,zu(0)}}function av(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,pu(s)))}function Nf(){return nv(),rv(),iv(),sv()}function sv(){if(On!==5)return!1;var i=ns,s=Wp;Wp=0;var u=Na(ma),f=D.T,y=R.p;try{R.p=32>u?32:u,D.T=null,u=Xp,Xp=null;var b=ns,C=ma;if(On=0,hl=ns=null,ma=0,(wt&6)!==0)throw Error(r(331));var _=wt;if(wt|=4,q1(b.current),U1(b,b.current,C,u),wt=_,zu(0,!1),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(xn,b)}catch{}return!0}finally{R.p=y,D.T=f,av(i,s)}}function ov(i,s,u){s=Qr(u,s),s=Np(i.stateNode,s,2),i=Qa(i,s,2),i!==null&&(Fr(i,2),zi(i))}function Mt(i,s,u){if(i.tag===3)ov(i,i,u);else for(;s!==null;){if(s.tag===3){ov(s,i,u);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ts===null||!ts.has(f))){i=Qr(u,i),u=l1(2),f=Qa(s,u,2),f!==null&&(u1(u,f,s,i),Fr(f,2),zi(f));break}}s=s.return}}function tm(i,s,u){var f=i.pingCache;if(f===null){f=i.pingCache=new mk;var y=new Set;f.set(s,y)}else y=f.get(s),y===void 0&&(y=new Set,f.set(s,y));y.has(u)||(Yp=!0,y.add(u),i=xk.bind(null,i,s,u),s.then(i,i))}function xk(i,s,u){var f=i.pingCache;f!==null&&f.delete(s),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,It===i&&(ht&u)===u&&(ln===4||ln===3&&(ht&62914560)===ht&&300>it()-kf?(wt&2)===0&&pl(i,0):Gp|=u,dl===ht&&(dl=0)),zi(i)}function lv(i,s){s===0&&(s=Vr()),i=kt(i,s),i!==null&&(Fr(i,s),zi(i))}function Sk(i){var s=i.memoizedState,u=0;s!==null&&(u=s.retryLane),lv(i,u)}function wk(i,s){var u=0;switch(i.tag){case 31:case 13:var f=i.stateNode,y=i.memoizedState;y!==null&&(u=y.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(s),lv(i,u)}function Ek(i,s){return en(i,s)}var Df=null,gl=null,nm=!1,Rf=!1,rm=!1,is=0;function zi(i){i!==gl&&i.next===null&&(gl===null?Df=gl=i:gl=gl.next=i),Rf=!0,nm||(nm=!0,Tk())}function zu(i,s){if(!rm&&Rf){rm=!0;do for(var u=!1,f=Df;f!==null;){if(i!==0){var y=f.pendingLanes;if(y===0)var b=0;else{var C=f.suspendedLanes,_=f.pingedLanes;b=(1<<31-He(42|i)+1)-1,b&=y&~(C&~_),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,dv(f,b))}else b=ht,b=yr(f,f===It?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||cr(f,b)||(u=!0,dv(f,b));f=f.next}while(u);rm=!1}}function kk(){uv()}function uv(){Rf=nm=!1;var i=0;is!==0&&jk()&&(i=is);for(var s=it(),u=null,f=Df;f!==null;){var y=f.next,b=cv(f,s);b===0?(f.next=null,u===null?Df=y:u.next=y,y===null&&(gl=u)):(u=f,(i!==0||(b&3)!==0)&&(Rf=!0)),f=y}On!==0&&On!==5||zu(i),is!==0&&(is=0)}function cv(i,s){for(var u=i.suspendedLanes,f=i.pingedLanes,y=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var C=31-He(b),_=1<<C,K=y[C];K===-1?((_&u)===0||(_&f)!==0)&&(y[C]=Oo(_,s)):K<=s&&(i.expiredLanes|=_),b&=~_}if(s=It,u=ht,u=yr(i,i===s?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,u===0||i===s&&(Ct===2||Ct===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&mt(f),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||cr(i,u)){if(s=u&-u,s===i.callbackPriority)return s;switch(f!==null&&mt(f),Na(u)){case 2:case 8:u=lr;break;case 32:u=Ft;break;case 268435456:u=an;break;default:u=Ft}return f=fv.bind(null,i),u=en(u,f),i.callbackPriority=s,i.callbackNode=u,s}return f!==null&&f!==null&&mt(f),i.callbackPriority=2,i.callbackNode=null,2}function fv(i,s){if(On!==0&&On!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(Nf()&&i.callbackNode!==u)return null;var f=ht;return f=yr(i,i===It?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:($1(i,f,s),cv(i,it()),i.callbackNode!=null&&i.callbackNode===u?fv.bind(null,i):null)}function dv(i,s){if(Nf())return null;$1(i,s,!0)}function Tk(){Bk(function(){(wt&6)!==0?en(Vt,kk):uv()})}function im(){if(is===0){var i=tl;i===0&&(i=je,je<<=1,(je&261888)===0&&(je=256)),is=i}return is}function hv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:fi(""+i)}function pv(i,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,i.id&&u.setAttribute("form",i.id),s.parentNode.insertBefore(u,s),i=new FormData(i),u.parentNode.removeChild(u),i}function Ck(i,s,u,f,y){if(s==="submit"&&u&&u.stateNode===y){var b=hv((y[hn]||null).action),C=f.submitter;C&&(s=(s=C[hn]||null)?hv(s.formAction):C.getAttribute("formAction"),s!==null&&(b=s,C=null));var _=new jo("action","action",null,f,y);i.push({event:_,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(is!==0){var K=C?pv(y,C):new FormData(y);kp(u,{pending:!0,data:K,method:y.method,action:b},null,K)}}else typeof b=="function"&&(_.preventDefault(),K=C?pv(y,C):new FormData(y),kp(u,{pending:!0,data:K,method:y.method,action:b},b,K))},currentTarget:y}]})}}for(var am=0;am<Ue.length;am++){var sm=Ue[am],Mk=sm.toLowerCase(),Ak=sm[0].toUpperCase()+sm.slice(1);Ne(Mk,"on"+Ak)}Ne(xe,"onAnimationEnd"),Ne(he,"onAnimationIteration"),Ne(ke,"onAnimationStart"),Ne("dblclick","onDoubleClick"),Ne("focusin","onFocus"),Ne("focusout","onBlur"),Ne(Ae,"onTransitionRun"),Ne(Le,"onTransitionStart"),Ne(Be,"onTransitionCancel"),Ne(Oe,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ok=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ju));function mv(i,s){s=(s&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],y=f.event;f=f.listeners;e:{var b=void 0;if(s)for(var C=f.length-1;0<=C;C--){var _=f[C],K=_.instance,be=_.currentTarget;if(_=_.listener,K!==b&&y.isPropagationStopped())break e;b=_,y.currentTarget=be;try{b(y)}catch(Te){qe(Te)}y.currentTarget=null,b=K}else for(C=0;C<f.length;C++){if(_=f[C],K=_.instance,be=_.currentTarget,_=_.listener,K!==b&&y.isPropagationStopped())break e;b=_,y.currentTarget=be;try{b(y)}catch(Te){qe(Te)}y.currentTarget=null,b=K}}}}function dt(i,s){var u=s[Da];u===void 0&&(u=s[Da]=new Set);var f=i+"__bubble";u.has(f)||(gv(s,i,2,!1),u.add(f))}function om(i,s,u){var f=0;s&&(f|=4),gv(u,i,f,s)}var _f="_reactListening"+Math.random().toString(36).slice(2);function lm(i){if(!i[_f]){i[_f]=!0,Fi.forEach(function(u){u!=="selectionchange"&&(Ok.has(u)||om(u,!1,i),om(u,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[_f]||(s[_f]=!0,om("selectionchange",!1,s))}}function gv(i,s,u,f){switch(Kv(s)){case 2:var y=rT;break;case 8:y=iT;break;default:y=Em}u=y.bind(null,s,u,i),y=void 0,!Jl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),f?y!==void 0?i.addEventListener(s,u,{capture:!0,passive:y}):i.addEventListener(s,u,!0):y!==void 0?i.addEventListener(s,u,{passive:y}):i.addEventListener(s,u,!1)}function um(i,s,u,f,y){var b=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var C=f.tag;if(C===3||C===4){var _=f.stateNode.containerInfo;if(_===y)break;if(C===4)for(C=f.return;C!==null;){var K=C.tag;if((K===3||K===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;_!==null;){if(C=ki(_),C===null)return;if(K=C.tag,K===5||K===6||K===26||K===27){f=b=C;continue e}_=_.parentNode}}f=f.return}_a(function(){var be=b,Te=_o(u),Me=[];e:{var Se=Ie.get(i);if(Se!==void 0){var Ee=jo,Ve=i;switch(i){case"keypress":if(La(u)===0)break e;case"keydown":case"keyup":Ee=Po;break;case"focusin":Ve="focus",Ee=Ba;break;case"focusout":Ve="blur",Ee=Ba;break;case"beforeblur":case"afterblur":Ee=Ba;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=Uo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=Hc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=au;break;case xe:case he:case ke:Ee=Ic;break;case Oe:Ee=su;break;case"scroll":case"scrollend":Ee=Lo;break;case"wheel":Ee=Fo;break;case"copy":case"cut":case"paste":Ee=Ua;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=iu;break;case"toggle":case"beforetoggle":Ee=Vc}var Je=(s&4)!==0,Bt=!Je&&(i==="scroll"||i==="scrollend"),ue=Je?Se!==null?Se+"Capture":null:Se;Je=[];for(var ne=be,ye;ne!==null;){var Ce=ne;if(ye=Ce.stateNode,Ce=Ce.tag,Ce!==5&&Ce!==26&&Ce!==27||ye===null||ue===null||(Ce=Qi(ne,ue),Ce!=null&&Je.push(Lu(ne,Ce,ye))),Bt)break;ne=ne.return}0<Je.length&&(Se=new Ee(Se,Ve,null,u,Te),Me.push({event:Se,listeners:Je}))}}if((s&7)===0){e:{if(Se=i==="mouseover"||i==="pointerover",Ee=i==="mouseout"||i==="pointerout",Se&&u!==$r&&(Ve=u.relatedTarget||u.fromElement)&&(ki(Ve)||Ve[fr]))break e;if((Ee||Se)&&(Se=Te.window===Te?Te:(Se=Te.ownerDocument)?Se.defaultView||Se.parentWindow:window,Ee?(Ve=u.relatedTarget||u.toElement,Ee=be,Ve=Ve?ki(Ve):null,Ve!==null&&(Bt=o(Ve),Je=Ve.tag,Ve!==Bt||Je!==5&&Je!==27&&Je!==6)&&(Ve=null)):(Ee=null,Ve=be),Ee!==Ve)){if(Je=Uo,Ce="onMouseLeave",ue="onMouseEnter",ne="mouse",(i==="pointerout"||i==="pointerover")&&(Je=iu,Ce="onPointerLeave",ue="onPointerEnter",ne="pointer"),Bt=Ee==null?Se:Dr(Ee),ye=Ve==null?Se:Dr(Ve),Se=new Je(Ce,ne+"leave",Ee,u,Te),Se.target=Bt,Se.relatedTarget=ye,Ce=null,ki(Te)===be&&(Je=new Je(ue,ne+"enter",Ve,u,Te),Je.target=ye,Je.relatedTarget=Bt,Ce=Je),Bt=Ce,Ee&&Ve)t:{for(Je=Nk,ue=Ee,ne=Ve,ye=0,Ce=ue;Ce;Ce=Je(Ce))ye++;Ce=0;for(var Ge=ne;Ge;Ge=Je(Ge))Ce++;for(;0<ye-Ce;)ue=Je(ue),ye--;for(;0<Ce-ye;)ne=Je(ne),Ce--;for(;ye--;){if(ue===ne||ne!==null&&ue===ne.alternate){Je=ue;break t}ue=Je(ue),ne=Je(ne)}Je=null}else Je=null;Ee!==null&&yv(Me,Se,Ee,Je,!1),Ve!==null&&Bt!==null&&yv(Me,Bt,Ve,Je,!0)}}e:{if(Se=be?Dr(be):window,Ee=Se.nodeName&&Se.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&Se.type==="file")var bt=Ys;else if(Yo(Se))if(Gr)bt=qa;else{bt=ta;var Ke=Qc}else Ee=Se.nodeName,!Ee||Ee.toLowerCase()!=="input"||Se.type!=="checkbox"&&Se.type!=="radio"?be&&Xl(be.elementType)&&(bt=Ys):bt=fu;if(bt&&(bt=bt(i,be))){cu(Me,bt,u,Te);break e}Ke&&Ke(i,Se,be),i==="focusout"&&be&&Se.type==="number"&&be.memoizedProps.value!=null&&Hs(Se,"number",Se.value)}switch(Ke=be?Dr(be):window,i){case"focusin":(Yo(Ke)||Ke.contentEditable==="true")&&(H=Ke,X=be,de=null);break;case"focusout":de=X=H=null;break;case"mousedown":J=!0;break;case"contextmenu":case"mouseup":case"dragend":J=!1,Q(Me,u,Te);break;case"selectionchange":if(j)break;case"keydown":case"keyup":Q(Me,u,Te)}var st;if(Ks)e:{switch(i){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else Zi?uu(i,u)&&(pt="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(pt="onCompositionStart");pt&&(Ko&&u.locale!=="ko"&&(Zi||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Zi&&(st=ja()):(Yr=Te,zo="value"in Yr?Yr.value:Yr.textContent,Zi=!0)),Ke=zf(be,pt),0<Ke.length&&(pt=new qo(pt,i,null,u,Te),Me.push({event:pt,listeners:Ke}),st?pt.data=st:(st=Kc(u),st!==null&&(pt.data=st)))),(st=qh?$c(i,u):Ph(i,u))&&(pt=zf(be,"onBeforeInput"),0<pt.length&&(Ke=new qo("onBeforeInput","beforeinput",null,u,Te),Me.push({event:Ke,listeners:pt}),Ke.data=st)),Ck(Me,i,be,u,Te)}mv(Me,s)})}function Lu(i,s,u){return{instance:i,listener:s,currentTarget:u}}function zf(i,s){for(var u=s+"Capture",f=[];i!==null;){var y=i,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=Qi(i,u),y!=null&&f.unshift(Lu(i,y,b)),y=Qi(i,s),y!=null&&f.push(Lu(i,y,b))),i.tag===3)return f;i=i.return}return[]}function Nk(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function yv(i,s,u,f,y){for(var b=s._reactName,C=[];u!==null&&u!==f;){var _=u,K=_.alternate,be=_.stateNode;if(_=_.tag,K!==null&&K===f)break;_!==5&&_!==26&&_!==27||be===null||(K=be,y?(be=Qi(u,b),be!=null&&C.unshift(Lu(u,be,K))):y||(be=Qi(u,b),be!=null&&C.push(Lu(u,be,K)))),u=u.return}C.length!==0&&i.push({event:s,listeners:C})}var Dk=/\r\n?/g,Rk=/\u0000|\uFFFD/g;function vv(i){return(typeof i=="string"?i:""+i).replace(Dk,`
`).replace(Rk,"")}function bv(i,s){return s=vv(s),vv(i)===s}function Lt(i,s,u,f,y,b){switch(u){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||$i(i,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&$i(i,""+f);break;case"className":Bs(i,"class",f);break;case"tabIndex":Bs(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Bs(i,u,f);break;case"style":Wl(i,f,b);break;case"data":if(s!=="object"){Bs(i,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||u!=="href")){i.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(u);break}f=fi(""+f),i.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(s!=="input"&&Lt(i,s,"name",y.name,y,null),Lt(i,s,"formEncType",y.formEncType,y,null),Lt(i,s,"formMethod",y.formMethod,y,null),Lt(i,s,"formTarget",y.formTarget,y,null)):(Lt(i,s,"encType",y.encType,y,null),Lt(i,s,"method",y.method,y,null),Lt(i,s,"target",y.target,y,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(u);break}f=fi(""+f),i.setAttribute(u,f);break;case"onClick":f!=null&&(i.onclick=vr);break;case"onScroll":f!=null&&dt("scroll",i);break;case"onScrollEnd":f!=null&&dt("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(y.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}u=fi(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,""+f):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":f===!0?i.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,f):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(u,f):i.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(u):i.setAttribute(u,f);break;case"popover":dt("beforetoggle",i),dt("toggle",i),ot(i,"popover",f);break;case"xlinkActuate":Kr(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Kr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Kr(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Kr(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Kr(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Kr(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Kr(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Kr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Kr(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":ot(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Uh.get(u)||u,ot(i,u,f))}}function cm(i,s,u,f,y,b){switch(u){case"style":Wl(i,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(y.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"children":typeof f=="string"?$i(i,f):(typeof f=="number"||typeof f=="bigint")&&$i(i,""+f);break;case"onScroll":f!=null&&dt("scroll",i);break;case"onScrollEnd":f!=null&&dt("scrollend",i);break;case"onClick":f!=null&&(i.onclick=vr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!js.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),s=u.slice(2,y?u.length-7:void 0),b=i[hn]||null,b=b!=null?b[u]:null,typeof b=="function"&&i.removeEventListener(s,b,y),typeof f=="function")){typeof b!="function"&&b!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(s,f,y);break e}u in i?i[u]=f:f===!0?i.setAttribute(u,""):ot(i,u,f)}}}function Kn(i,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dt("error",i),dt("load",i);var f=!1,y=!1,b;for(b in u)if(u.hasOwnProperty(b)){var C=u[b];if(C!=null)switch(b){case"src":f=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Lt(i,s,b,C,u,null)}}y&&Lt(i,s,"srcSet",u.srcSet,u,null),f&&Lt(i,s,"src",u.src,u,null);return;case"input":dt("invalid",i);var _=b=C=y=null,K=null,be=null;for(f in u)if(u.hasOwnProperty(f)){var Te=u[f];if(Te!=null)switch(f){case"name":y=Te;break;case"type":C=Te;break;case"checked":K=Te;break;case"defaultChecked":be=Te;break;case"value":b=Te;break;case"defaultValue":_=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(r(137,s));break;default:Lt(i,s,f,Te,u,null)}}Ro(i,b,_,K,be,C,y,!1);return;case"select":dt("invalid",i),f=C=b=null;for(y in u)if(u.hasOwnProperty(y)&&(_=u[y],_!=null))switch(y){case"value":b=_;break;case"defaultValue":C=_;break;case"multiple":f=_;default:Lt(i,s,y,_,u,null)}s=b,u=C,i.multiple=!!f,s!=null?ci(i,!!f,s,!1):u!=null&&ci(i,!!f,u,!0);return;case"textarea":dt("invalid",i),b=y=f=null;for(C in u)if(u.hasOwnProperty(C)&&(_=u[C],_!=null))switch(C){case"value":f=_;break;case"defaultValue":y=_;break;case"children":b=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:Lt(i,s,C,_,u,null)}Is(i,f,y,b);return;case"option":for(K in u)u.hasOwnProperty(K)&&(f=u[K],f!=null)&&(K==="selected"?i.selected=f&&typeof f!="function"&&typeof f!="symbol":Lt(i,s,K,f,u,null));return;case"dialog":dt("beforetoggle",i),dt("toggle",i),dt("cancel",i),dt("close",i);break;case"iframe":case"object":dt("load",i);break;case"video":case"audio":for(f=0;f<ju.length;f++)dt(ju[f],i);break;case"image":dt("error",i),dt("load",i);break;case"details":dt("toggle",i);break;case"embed":case"source":case"link":dt("error",i),dt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(be in u)if(u.hasOwnProperty(be)&&(f=u[be],f!=null))switch(be){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Lt(i,s,be,f,u,null)}return;default:if(Xl(s)){for(Te in u)u.hasOwnProperty(Te)&&(f=u[Te],f!==void 0&&cm(i,s,Te,f,u,void 0));return}}for(_ in u)u.hasOwnProperty(_)&&(f=u[_],f!=null&&Lt(i,s,_,f,u,null))}function _k(i,s,u,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,C=null,_=null,K=null,be=null,Te=null;for(Ee in u){var Me=u[Ee];if(u.hasOwnProperty(Ee)&&Me!=null)switch(Ee){case"checked":break;case"value":break;case"defaultValue":K=Me;default:f.hasOwnProperty(Ee)||Lt(i,s,Ee,null,f,Me)}}for(var Se in f){var Ee=f[Se];if(Me=u[Se],f.hasOwnProperty(Se)&&(Ee!=null||Me!=null))switch(Se){case"type":b=Ee;break;case"name":y=Ee;break;case"checked":be=Ee;break;case"defaultChecked":Te=Ee;break;case"value":C=Ee;break;case"defaultValue":_=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(r(137,s));break;default:Ee!==Me&&Lt(i,s,Se,Ee,f,Me)}}Ci(i,C,_,K,be,Te,b,y);return;case"select":Ee=C=_=Se=null;for(b in u)if(K=u[b],u.hasOwnProperty(b)&&K!=null)switch(b){case"value":break;case"multiple":Ee=K;default:f.hasOwnProperty(b)||Lt(i,s,b,null,f,K)}for(y in f)if(b=f[y],K=u[y],f.hasOwnProperty(y)&&(b!=null||K!=null))switch(y){case"value":Se=b;break;case"defaultValue":_=b;break;case"multiple":C=b;default:b!==K&&Lt(i,s,y,b,f,K)}s=_,u=C,f=Ee,Se!=null?ci(i,!!u,Se,!1):!!f!=!!u&&(s!=null?ci(i,!!u,s,!0):ci(i,!!u,u?[]:"",!1));return;case"textarea":Ee=Se=null;for(_ in u)if(y=u[_],u.hasOwnProperty(_)&&y!=null&&!f.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Lt(i,s,_,null,f,y)}for(C in f)if(y=f[C],b=u[C],f.hasOwnProperty(C)&&(y!=null||b!=null))switch(C){case"value":Se=y;break;case"defaultValue":Ee=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==b&&Lt(i,s,C,y,f,b)}Ql(i,Se,Ee);return;case"option":for(var Ve in u)Se=u[Ve],u.hasOwnProperty(Ve)&&Se!=null&&!f.hasOwnProperty(Ve)&&(Ve==="selected"?i.selected=!1:Lt(i,s,Ve,null,f,Se));for(K in f)Se=f[K],Ee=u[K],f.hasOwnProperty(K)&&Se!==Ee&&(Se!=null||Ee!=null)&&(K==="selected"?i.selected=Se&&typeof Se!="function"&&typeof Se!="symbol":Lt(i,s,K,Se,f,Ee));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Je in u)Se=u[Je],u.hasOwnProperty(Je)&&Se!=null&&!f.hasOwnProperty(Je)&&Lt(i,s,Je,null,f,Se);for(be in f)if(Se=f[be],Ee=u[be],f.hasOwnProperty(be)&&Se!==Ee&&(Se!=null||Ee!=null))switch(be){case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(r(137,s));break;default:Lt(i,s,be,Se,f,Ee)}return;default:if(Xl(s)){for(var Bt in u)Se=u[Bt],u.hasOwnProperty(Bt)&&Se!==void 0&&!f.hasOwnProperty(Bt)&&cm(i,s,Bt,void 0,f,Se);for(Te in f)Se=f[Te],Ee=u[Te],!f.hasOwnProperty(Te)||Se===Ee||Se===void 0&&Ee===void 0||cm(i,s,Te,Se,f,Ee);return}}for(var ue in u)Se=u[ue],u.hasOwnProperty(ue)&&Se!=null&&!f.hasOwnProperty(ue)&&Lt(i,s,ue,null,f,Se);for(Me in f)Se=f[Me],Ee=u[Me],!f.hasOwnProperty(Me)||Se===Ee||Se==null&&Ee==null||Lt(i,s,Me,Se,f,Ee)}function xv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zk(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,u=performance.getEntriesByType("resource"),f=0;f<u.length;f++){var y=u[f],b=y.transferSize,C=y.initiatorType,_=y.duration;if(b&&_&&xv(C)){for(C=0,_=y.responseEnd,f+=1;f<u.length;f++){var K=u[f],be=K.startTime;if(be>_)break;var Te=K.transferSize,Me=K.initiatorType;Te&&xv(Me)&&(K=K.responseEnd,C+=Te*(K<_?1:(_-be)/(K-be)))}if(--f,s+=8*(b+C)/(y.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var fm=null,dm=null;function jf(i){return i.nodeType===9?i:i.ownerDocument}function Sv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wv(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function hm(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var pm=null;function jk(){var i=window.event;return i&&i.type==="popstate"?i===pm?!1:(pm=i,!0):(pm=null,!1)}var Ev=typeof setTimeout=="function"?setTimeout:void 0,Lk=typeof clearTimeout=="function"?clearTimeout:void 0,kv=typeof Promise=="function"?Promise:void 0,Bk=typeof queueMicrotask=="function"?queueMicrotask:typeof kv<"u"?function(i){return kv.resolve(null).then(i).catch(Uk)}:Ev;function Uk(i){setTimeout(function(){throw i})}function as(i){return i==="head"}function Tv(i,s){var u=s,f=0;do{var y=u.nextSibling;if(i.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"||u==="/&"){if(f===0){i.removeChild(y),xl(s);return}f--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")f++;else if(u==="html")Bu(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,Bu(u);for(var b=u.firstChild;b;){var C=b.nextSibling,_=b.nodeName;b[Nr]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&b.rel.toLowerCase()==="stylesheet"||u.removeChild(b),b=C}}else u==="body"&&Bu(i.ownerDocument.body);u=y}while(u);xl(s)}function Cv(i,s){var u=i;i=0;do{var f=u.nextSibling;if(u.nodeType===1?s?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(s?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=f}while(u)}function mm(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":mm(u),No(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function Hk(i,s,u,f){for(;i.nodeType===1;){var y=u;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[Nr])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=ei(i.nextSibling),i===null)break}return null}function Ik(i,s,u){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=ei(i.nextSibling),i===null))return null;return i}function Mv(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=ei(i.nextSibling),i===null))return null;return i}function gm(i){return i.data==="$?"||i.data==="$~"}function ym(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function qk(i,s){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||u.readyState!=="loading")s();else{var f=function(){s(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function ei(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var vm=null;function Av(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(s===0)return ei(i.nextSibling);s--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||s++}i=i.nextSibling}return null}function Ov(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(s===0)return i;s--}else u!=="/$"&&u!=="/&"||s++}i=i.previousSibling}return null}function Nv(i,s,u){switch(s=jf(u),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Bu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);No(i)}var ti=new Map,Dv=new Set;function Lf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ga=R.d;R.d={f:Pk,r:Vk,D:Fk,C:Kk,L:$k,m:Yk,X:Qk,S:Gk,M:Wk};function Pk(){var i=ga.f(),s=Mf();return i||s}function Vk(i){var s=_t(i);s!==null&&s.tag===5&&s.type==="form"?G0(s):ga.r(i)}var yl=typeof document>"u"?null:document;function Rv(i,s,u){var f=yl;if(f&&typeof s=="string"&&s){var y=zn(s);y='link[rel="'+i+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),Dv.has(y)||(Dv.add(y),i={rel:i,crossOrigin:u,href:s},f.querySelector(y)===null&&(s=f.createElement("link"),Kn(s,"link",i),pn(s),f.head.appendChild(s)))}}function Fk(i){ga.D(i),Rv("dns-prefetch",i,null)}function Kk(i,s){ga.C(i,s),Rv("preconnect",i,s)}function $k(i,s,u){ga.L(i,s,u);var f=yl;if(f&&i&&s){var y='link[rel="preload"][as="'+zn(s)+'"]';s==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+zn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+zn(u.imageSizes)+'"]')):y+='[href="'+zn(i)+'"]';var b=y;switch(s){case"style":b=vl(i);break;case"script":b=bl(i)}ti.has(b)||(i=m({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:i,as:s},u),ti.set(b,i),f.querySelector(y)!==null||s==="style"&&f.querySelector(Uu(b))||s==="script"&&f.querySelector(Hu(b))||(s=f.createElement("link"),Kn(s,"link",i),pn(s),f.head.appendChild(s)))}}function Yk(i,s){ga.m(i,s);var u=yl;if(u&&i){var f=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+zn(f)+'"][href="'+zn(i)+'"]',b=y;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=bl(i)}if(!ti.has(b)&&(i=m({rel:"modulepreload",href:i},s),ti.set(b,i),u.querySelector(y)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Hu(b)))return}f=u.createElement("link"),Kn(f,"link",i),pn(f),u.head.appendChild(f)}}}function Gk(i,s,u){ga.S(i,s,u);var f=yl;if(f&&i){var y=Zn(f).hoistableStyles,b=vl(i);s=s||"default";var C=y.get(b);if(!C){var _={loading:0,preload:null};if(C=f.querySelector(Uu(b)))_.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":s},u),(u=ti.get(b))&&bm(i,u);var K=C=f.createElement("link");pn(K),Kn(K,"link",i),K._p=new Promise(function(be,Te){K.onload=be,K.onerror=Te}),K.addEventListener("load",function(){_.loading|=1}),K.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Bf(C,s,f)}C={type:"stylesheet",instance:C,count:1,state:_},y.set(b,C)}}}function Qk(i,s){ga.X(i,s);var u=yl;if(u&&i){var f=Zn(u).hoistableScripts,y=bl(i),b=f.get(y);b||(b=u.querySelector(Hu(y)),b||(i=m({src:i,async:!0},s),(s=ti.get(y))&&xm(i,s),b=u.createElement("script"),pn(b),Kn(b,"link",i),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(y,b))}}function Wk(i,s){ga.M(i,s);var u=yl;if(u&&i){var f=Zn(u).hoistableScripts,y=bl(i),b=f.get(y);b||(b=u.querySelector(Hu(y)),b||(i=m({src:i,async:!0,type:"module"},s),(s=ti.get(y))&&xm(i,s),b=u.createElement("script"),pn(b),Kn(b,"link",i),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(y,b))}}function _v(i,s,u,f){var y=(y=_e.current)?Lf(y):null;if(!y)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=vl(u.href),u=Zn(y).hoistableStyles,f=u.get(s),f||(f={type:"style",instance:null,count:0,state:null},u.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=vl(u.href);var b=Zn(y).hoistableStyles,C=b.get(i);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,C),(b=y.querySelector(Uu(i)))&&!b._p&&(C.instance=b,C.state.loading=5),ti.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ti.set(i,u),b||Xk(y,i,u,C.state))),s&&f===null)throw Error(r(528,""));return C}if(s&&f!==null)throw Error(r(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=bl(u),u=Zn(y).hoistableScripts,f=u.get(s),f||(f={type:"script",instance:null,count:0,state:null},u.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function vl(i){return'href="'+zn(i)+'"'}function Uu(i){return'link[rel="stylesheet"]['+i+"]"}function zv(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function Xk(i,s,u,f){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=i.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),Kn(s,"link",u),pn(s),i.head.appendChild(s))}function bl(i){return'[src="'+zn(i)+'"]'}function Hu(i){return"script[async]"+i}function jv(i,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var f=i.querySelector('style[data-href~="'+zn(u.href)+'"]');if(f)return s.instance=f,pn(f),f;var y=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),pn(f),Kn(f,"style",y),Bf(f,u.precedence,i),s.instance=f;case"stylesheet":y=vl(u.href);var b=i.querySelector(Uu(y));if(b)return s.state.loading|=4,s.instance=b,pn(b),b;f=zv(u),(y=ti.get(y))&&bm(f,y),b=(i.ownerDocument||i).createElement("link"),pn(b);var C=b;return C._p=new Promise(function(_,K){C.onload=_,C.onerror=K}),Kn(b,"link",f),s.state.loading|=4,Bf(b,u.precedence,i),s.instance=b;case"script":return b=bl(u.src),(y=i.querySelector(Hu(b)))?(s.instance=y,pn(y),y):(f=u,(y=ti.get(b))&&(f=m({},u),xm(f,y)),i=i.ownerDocument||i,y=i.createElement("script"),pn(y),Kn(y,"link",f),i.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,Bf(f,u.precedence,i));return s.instance}function Bf(i,s,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=f.length?f[f.length-1]:null,b=y,C=0;C<f.length;C++){var _=f[C];if(_.dataset.precedence===s)b=_;else if(b!==y)break}b?b.parentNode.insertBefore(i,b.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(i,s.firstChild))}function bm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function xm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Uf=null;function Lv(i,s,u){if(Uf===null){var f=new Map,y=Uf=new Map;y.set(u,f)}else y=Uf,f=y.get(u),f||(f=new Map,y.set(u,f));if(f.has(i))return f;for(f.set(i,null),u=u.getElementsByTagName(i),y=0;y<u.length;y++){var b=u[y];if(!(b[Nr]||b[Pt]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var C=b.getAttribute(s)||"";C=i+C;var _=f.get(C);_?_.push(b):f.set(C,[b])}}return f}function Bv(i,s,u){i=i.ownerDocument||i,i.head.insertBefore(u,s==="title"?i.querySelector("head > title"):null)}function Jk(i,s,u){if(u===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(i=s.disabled,typeof s.precedence=="string"&&i==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Uv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Zk(i,s,u,f){if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var y=vl(f.href),b=s.querySelector(Uu(y));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=Hf.bind(i),s.then(i,i)),u.state.loading|=4,u.instance=b,pn(b);return}b=s.ownerDocument||s,f=zv(f),(y=ti.get(y))&&bm(f,y),b=b.createElement("link"),pn(b);var C=b;C._p=new Promise(function(_,K){C.onload=_,C.onerror=K}),Kn(b,"link",f),u.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,s),(s=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=Hf.bind(i),s.addEventListener("load",u),s.addEventListener("error",u))}}var Sm=0;function eT(i,s){return i.stylesheets&&i.count===0&&qf(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var f=setTimeout(function(){if(i.stylesheets&&qf(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+s);0<i.imgBytes&&Sm===0&&(Sm=62500*zk());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&qf(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>Sm?50:800)+s);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(y)}}:null}function Hf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var If=null;function qf(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,If=new Map,s.forEach(tT,i),If=null,Hf.call(i))}function tT(i,s){if(!(s.state.loading&4)){var u=If.get(i);if(u)var f=u.get(null);else{u=new Map,If.set(i,u);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var C=y[b];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(u.set(C.dataset.precedence,C),f=C)}f&&u.set(null,f)}y=s.instance,C=y.getAttribute("data-precedence"),b=u.get(C)||f,b===f&&u.set(null,y),u.set(C,y),this.count++,f=Hf.bind(this),y.addEventListener("load",f),y.addEventListener("error",f),b?b.parentNode.insertBefore(y,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),s.state.loading|=4}}var Iu={$$typeof:V,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function nT(i,s,u,f,y,b,C,_,K){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_n(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_n(0),this.hiddenUpdates=_n(null),this.identifierPrefix=f,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function Hv(i,s,u,f,y,b,C,_,K,be,Te,Me){return i=new nT(i,s,u,C,K,be,Te,Me,_),s=1,b===!0&&(s|=24),b=_r(3,null,null,s),i.current=b,b.stateNode=i,s=ep(),s.refCount++,i.pooledCache=s,s.refCount++,b.memoizedState={element:f,isDehydrated:u,cache:s},ip(b),i}function Iv(i){return i?(i=Wo,i):Wo}function qv(i,s,u,f,y,b){y=Iv(y),f.context===null?f.context=y:f.pendingContext=y,f=Ga(s),f.payload={element:u},b=b===void 0?null:b,b!==null&&(f.callback=b),u=Qa(i,f,s),u!==null&&(Er(u,i,s),vu(u,i,s))}function Pv(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<s?u:s}}function wm(i,s){Pv(i,s),(i=i.alternate)&&Pv(i,s)}function Vv(i){if(i.tag===13||i.tag===31){var s=kt(i,67108864);s!==null&&Er(s,i,67108864),wm(i,67108864)}}function Fv(i){if(i.tag===13||i.tag===31){var s=Ur();s=Kl(s);var u=kt(i,s);u!==null&&Er(u,i,s),wm(i,s)}}var Pf=!0;function rT(i,s,u,f){var y=D.T;D.T=null;var b=R.p;try{R.p=2,Em(i,s,u,f)}finally{R.p=b,D.T=y}}function iT(i,s,u,f){var y=D.T;D.T=null;var b=R.p;try{R.p=8,Em(i,s,u,f)}finally{R.p=b,D.T=y}}function Em(i,s,u,f){if(Pf){var y=km(f);if(y===null)um(i,s,f,Vf,u),$v(i,f);else if(sT(y,i,s,u,f))f.stopPropagation();else if($v(i,f),s&4&&-1<aT.indexOf(i)){for(;y!==null;){var b=_t(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var C=Sn(b.pendingLanes);if(C!==0){var _=b;for(_.pendingLanes|=2,_.entangledLanes|=2;C;){var K=1<<31-He(C);_.entanglements[1]|=K,C&=~K}zi(b),(wt&6)===0&&(Tf=it()+500,zu(0))}}break;case 31:case 13:_=kt(b,2),_!==null&&Er(_,b,2),Mf(),wm(b,2)}if(b=km(f),b===null&&um(i,s,f,Vf,u),b===y)break;y=b}y!==null&&f.stopPropagation()}else um(i,s,f,null,u)}}function km(i){return i=_o(i),Tm(i)}var Vf=null;function Tm(i){if(Vf=null,i=ki(i),i!==null){var s=o(i);if(s===null)i=null;else{var u=s.tag;if(u===13){if(i=l(s),i!==null)return i;i=null}else if(u===31){if(i=c(s),i!==null)return i;i=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Vf=i,null}function Kv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fn()){case Vt:return 2;case lr:return 8;case Ft:case ur:return 32;case an:return 268435456;default:return 32}default:return 32}}var Cm=!1,ss=null,ls=null,us=null,qu=new Map,Pu=new Map,cs=[],aT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $v(i,s){switch(i){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":ls=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":qu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pu.delete(s.pointerId)}}function Vu(i,s,u,f,y,b){return i===null||i.nativeEvent!==b?(i={blockedOn:s,domEventName:u,eventSystemFlags:f,nativeEvent:b,targetContainers:[y]},s!==null&&(s=_t(s),s!==null&&Vv(s)),i):(i.eventSystemFlags|=f,s=i.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),i)}function sT(i,s,u,f,y){switch(s){case"focusin":return ss=Vu(ss,i,s,u,f,y),!0;case"dragenter":return ls=Vu(ls,i,s,u,f,y),!0;case"mouseover":return us=Vu(us,i,s,u,f,y),!0;case"pointerover":var b=y.pointerId;return qu.set(b,Vu(qu.get(b)||null,i,s,u,f,y)),!0;case"gotpointercapture":return b=y.pointerId,Pu.set(b,Vu(Pu.get(b)||null,i,s,u,f,y)),!0}return!1}function Yv(i){var s=ki(i.target);if(s!==null){var u=o(s);if(u!==null){if(s=u.tag,s===13){if(s=l(u),s!==null){i.blockedOn=s,zs(i.priority,function(){Fv(u)});return}}else if(s===31){if(s=c(u),s!==null){i.blockedOn=s,zs(i.priority,function(){Fv(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ff(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var u=km(i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);$r=f,u.target.dispatchEvent(f),$r=null}else return s=_t(u),s!==null&&Vv(s),i.blockedOn=u,!1;s.shift()}return!0}function Gv(i,s,u){Ff(i)&&u.delete(s)}function oT(){Cm=!1,ss!==null&&Ff(ss)&&(ss=null),ls!==null&&Ff(ls)&&(ls=null),us!==null&&Ff(us)&&(us=null),qu.forEach(Gv),Pu.forEach(Gv)}function Kf(i,s){i.blockedOn===s&&(i.blockedOn=null,Cm||(Cm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,oT)))}var $f=null;function Qv(i){$f!==i&&($f=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){$f===i&&($f=null);for(var s=0;s<i.length;s+=3){var u=i[s],f=i[s+1],y=i[s+2];if(typeof f!="function"){if(Tm(f||u)===null)continue;break}var b=_t(u);b!==null&&(i.splice(s,3),s-=3,kp(b,{pending:!0,data:y,method:u.method,action:f},f,y))}}))}function xl(i){function s(K){return Kf(K,i)}ss!==null&&Kf(ss,i),ls!==null&&Kf(ls,i),us!==null&&Kf(us,i),qu.forEach(s),Pu.forEach(s);for(var u=0;u<cs.length;u++){var f=cs[u];f.blockedOn===i&&(f.blockedOn=null)}for(;0<cs.length&&(u=cs[0],u.blockedOn===null);)Yv(u),u.blockedOn===null&&cs.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var y=u[f],b=u[f+1],C=y[hn]||null;if(typeof b=="function")C||Qv(u);else if(C){var _=null;if(b&&b.hasAttribute("formAction")){if(y=b,C=b[hn]||null)_=C.formAction;else if(Tm(y)!==null)continue}else _=C.action;typeof _=="function"?u[f+1]=_:(u.splice(f,3),f-=3),Qv(u)}}}function Wv(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),f||setTimeout(u,20)}function u(){if(!f&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(u,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function Mm(i){this._internalRoot=i}Yf.prototype.render=Mm.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var u=s.current,f=Ur();qv(u,f,i,s,null,null)},Yf.prototype.unmount=Mm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;qv(i.current,2,null,i,null,null),Mf(),s[fr]=null}};function Yf(i){this._internalRoot=i}Yf.prototype.unstable_scheduleHydration=function(i){if(i){var s=_s();i={blockedOn:null,target:i,priority:s};for(var u=0;u<cs.length&&s!==0&&s<cs[u].priority;u++);cs.splice(u,0,i),u===0&&Yv(i)}};var Xv=e.version;if(Xv!=="19.2.4")throw Error(r(527,Xv,"19.2.4"));R.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(s),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var lT={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gf.isDisabled&&Gf.supportsFiber)try{xn=Gf.inject(lT),Rt=Gf}catch{}}return Ku.createRoot=function(i,s){if(!a(i))throw Error(r(299));var u=!1,f="",y=i1,b=a1,C=s1;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError)),s=Hv(i,1,!1,null,null,u,f,null,y,b,C,Wv),i[fr]=s.current,lm(i),new Mm(s)},Ku.hydrateRoot=function(i,s,u){if(!a(i))throw Error(r(299));var f=!1,y="",b=i1,C=a1,_=s1,K=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(_=u.onRecoverableError),u.formState!==void 0&&(K=u.formState)),s=Hv(i,1,!0,s,u??null,f,y,K,b,C,_,Wv),s.context=Iv(null),u=s.current,f=Ur(),f=Kl(f),y=Ga(f),y.callback=null,Qa(u,y,f),u=f,s.current.lanes=u,Fr(s,u),zi(s),i[fr]=s.current,lm(i),new Yf(s)},Ku.version="19.2.4",Ku}var ob;function vT(){if(ob)return Nm.exports;ob=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Nm.exports=yT(),Nm.exports}var bT=vT();var lb="popstate";function xT(t={}){function e(r,a){let{pathname:o,search:l,hash:c}=r.location;return vg("",{pathname:o,search:l,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:pc(a)}return wT(e,n,null,t)}function Jt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ST(){return Math.random().toString(36).substring(2,10)}function ub(t,e){return{usr:t.state,key:t.key,idx:e}}function vg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Il(e):e,state:n,key:e&&e.key||r||ST()}}function pc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Il(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function wT(t,e,n,r={}){let{window:a=document.defaultView,v5Compat:o=!1}=r,l=a.history,c="POP",d=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function m(){c="POP";let M=p(),O=M==null?null:M-h;h=M,d&&d({action:c,location:T.location,delta:O})}function v(M,O){c="PUSH";let q=vg(T.location,M,O);h=p()+1;let V=ub(q,h),F=T.createHref(q);try{l.pushState(V,"",F)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;a.location.assign(F)}o&&d&&d({action:c,location:T.location,delta:1})}function x(M,O){c="REPLACE";let q=vg(T.location,M,O);h=p();let V=ub(q,h),F=T.createHref(q);l.replaceState(V,"",F),o&&d&&d({action:c,location:T.location,delta:0})}function w(M){return ET(M)}let T={get action(){return c},get location(){return t(a,l)},listen(M){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(lb,m),d=M,()=>{a.removeEventListener(lb,m),d=null}},createHref(M){return e(a,M)},createURL:w,encodeLocation(M){let O=w(M);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:v,replace:x,go(M){return l.go(M)}};return T}function ET(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Jt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:pc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function cS(t,e,n="/"){return kT(t,e,n,!1)}function kT(t,e,n,r){let a=typeof e=="string"?Il(e):e,o=Aa(a.pathname||"/",n);if(o==null)return null;let l=fS(t);TT(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let h=LT(o);c=zT(l[d],h,r)}return c}function fS(t,e=[],n=[],r="",a=!1){let o=(l,c,d=a,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&d)return;Jt(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let m=Ta([r,p.relativePath]),v=n.concat(p);l.children&&l.children.length>0&&(Jt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),fS(l.children,e,v,m,d)),!(l.path==null&&!l.index)&&e.push({path:m,score:RT(m,l.index),routesMeta:v})};return t.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))o(l,c);else for(let d of dS(l.path))o(l,c,!0,d)}),e}function dS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let l=dS(r.join("/")),c=[];return c.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&c.push(...l),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function TT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_T(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var CT=/^:[\w-]+$/,MT=3,AT=2,OT=1,NT=10,DT=-2,cb=t=>t==="*";function RT(t,e){let n=t.split("/"),r=n.length;return n.some(cb)&&(r+=DT),e&&(r+=AT),n.filter(a=>!cb(a)).reduce((a,o)=>a+(CT.test(o)?MT:o===""?OT:NT),r)}function _T(t,e){return t.length===e.length&&t.slice(0,-1).every((r,a)=>r===e[a])?t[t.length-1]-e[e.length-1]:0}function zT(t,e,n=!1){let{routesMeta:r}=t,a={},o="/",l=[];for(let c=0;c<r.length;++c){let d=r[c],h=c===r.length-1,p=o==="/"?e:e.slice(o.length)||"/",m=bd({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),v=d.route;if(!m&&h&&n&&!r[r.length-1].route.index&&(m=bd({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!m)return null;Object.assign(a,m.params),l.push({params:a,pathname:Ta([o,m.pathname]),pathnameBase:IT(Ta([o,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(o=Ta([o,m.pathnameBase]))}return l}function bd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=jT(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:m},v)=>{if(p==="*"){let w=c[v]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const x=c[v];return m&&!x?h[p]=void 0:h[p]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:t}}function jT(t,e=!1,n=!0){vi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function LT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Aa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var BT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function UT(t,e="/"){let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?Il(t):t,o;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?o=fb(n.substring(1),"/"):o=fb(n,e)):o=e,{pathname:o,search:qT(r),hash:PT(a)}}function fb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function zm(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function HT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ey(t){let e=HT(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function ty(t,e,n,r=!1){let a;typeof t=="string"?a=Il(t):(a={...t},Jt(!a.pathname||!a.pathname.includes("?"),zm("?","pathname","search",a)),Jt(!a.pathname||!a.pathname.includes("#"),zm("#","pathname","hash",a)),Jt(!a.search||!a.search.includes("#"),zm("#","search","hash",a)));let o=t===""||a.pathname==="",l=o?"/":a.pathname,c;if(l==null)c=n;else{let m=e.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),m-=1;a.pathname=v.join("/")}c=m>=0?e[m]:"/"}let d=UT(a,c),h=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}var Ta=t=>t.join("/").replace(/\/\/+/g,"/"),IT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),qT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,PT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,VT=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function FT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function KT(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var hS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function pS(t,e){let n=t;if(typeof n!="string"||!BT.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,a=!1;if(hS)try{let o=new URL(window.location.href),l=n.startsWith("//")?new URL(o.protocol+n):new URL(n),c=Aa(l.pathname,e);l.origin===o.origin&&c!=null?n=c+l.search+l.hash:a=!0}catch{vi(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mS=["POST","PUT","PATCH","DELETE"];new Set(mS);var $T=["GET",...mS];new Set($T);var ql=ae.createContext(null);ql.displayName="DataRouter";var yh=ae.createContext(null);yh.displayName="DataRouterState";var YT=ae.createContext(!1),gS=ae.createContext({isTransitioning:!1});gS.displayName="ViewTransition";var GT=ae.createContext(new Map);GT.displayName="Fetchers";var QT=ae.createContext(null);QT.displayName="Await";var Pr=ae.createContext(null);Pr.displayName="Navigation";var Oc=ae.createContext(null);Oc.displayName="Location";var xi=ae.createContext({outlet:null,matches:[],isDataRoute:!1});xi.displayName="Route";var ny=ae.createContext(null);ny.displayName="RouteError";var yS="REACT_ROUTER_ERROR",WT="REDIRECT",XT="ROUTE_ERROR_RESPONSE";function JT(t){if(t.startsWith(`${yS}:${WT}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function ZT(t){if(t.startsWith(`${yS}:${XT}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new VT(e.status,e.statusText,e.data)}catch{}}function eC(t,{relative:e}={}){Jt(Pl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=ae.useContext(Pr),{hash:a,pathname:o,search:l}=Nc(t,{relative:e}),c=o;return n!=="/"&&(c=o==="/"?n:Ta([n,o])),r.createHref({pathname:c,search:l,hash:a})}function Pl(){return ae.useContext(Oc)!=null}function qi(){return Jt(Pl(),"useLocation() may be used only in the context of a <Router> component."),ae.useContext(Oc).location}var vS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bS(t){ae.useContext(Pr).static||ae.useLayoutEffect(t)}function To(){let{isDataRoute:t}=ae.useContext(xi);return t?hC():tC()}function tC(){Jt(Pl(),"useNavigate() may be used only in the context of a <Router> component.");let t=ae.useContext(ql),{basename:e,navigator:n}=ae.useContext(Pr),{matches:r}=ae.useContext(xi),{pathname:a}=qi(),o=JSON.stringify(ey(r)),l=ae.useRef(!1);return bS(()=>{l.current=!0}),ae.useCallback((d,h={})=>{if(vi(l.current,vS),!l.current)return;if(typeof d=="number"){n.go(d);return}let p=ty(d,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ta([e,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[e,n,o,a,t])}ae.createContext(null);function xS(){let{matches:t}=ae.useContext(xi),e=t[t.length-1];return e?e.params:{}}function Nc(t,{relative:e}={}){let{matches:n}=ae.useContext(xi),{pathname:r}=qi(),a=JSON.stringify(ey(n));return ae.useMemo(()=>ty(t,JSON.parse(a),r,e==="path"),[t,a,r,e])}function nC(t,e){return SS(t,e)}function SS(t,e,n,r,a){Jt(Pl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=ae.useContext(Pr),{matches:l}=ae.useContext(xi),c=l[l.length-1],d=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",m=c&&c.route;{let q=m&&m.path||"";ES(h,!m||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let v=qi(),x;if(e){let q=typeof e=="string"?Il(e):e;Jt(p==="/"||q.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${q.pathname}" was given in the \`location\` prop.`),x=q}else x=v;let w=x.pathname||"/",T=w;if(p!=="/"){let q=p.replace(/^\//,"").split("/");T="/"+w.replace(/^\//,"").split("/").slice(q.length).join("/")}let M=cS(t,{pathname:T});vi(m||M!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),vi(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=oC(M&&M.map(q=>Object.assign({},q,{params:Object.assign({},d,q.params),pathname:Ta([p,o.encodeLocation?o.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?p:Ta([p,o.encodeLocation?o.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),l,n,r,a);return e&&O?ae.createElement(Oc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},O):O}function rC(){let t=dC(),e=FT(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=ae.createElement(ae.Fragment,null,ae.createElement("p",null," Hey developer "),ae.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ae.createElement("code",{style:o},"ErrorBoundary")," or"," ",ae.createElement("code",{style:o},"errorElement")," prop on your route.")),ae.createElement(ae.Fragment,null,ae.createElement("h2",null,"Unexpected Application Error!"),ae.createElement("h3",{style:{fontStyle:"italic"}},e),n?ae.createElement("pre",{style:a},n):null,l)}var iC=ae.createElement(rC,null),wS=class extends ae.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=ZT(t.digest);n&&(t=n)}let e=t!==void 0?ae.createElement(xi.Provider,{value:this.props.routeContext},ae.createElement(ny.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?ae.createElement(aC,{error:t},e):e}};wS.contextType=YT;var jm=new WeakMap;function aC({children:t,error:e}){let{basename:n}=ae.useContext(Pr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=JT(e.digest);if(r){let a=jm.get(e);if(a)throw a;let o=pS(r.location,n);if(hS&&!jm.get(e))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw jm.set(e,l),l}return ae.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return t}function sC({routeContext:t,match:e,children:n}){let r=ae.useContext(ql);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),ae.createElement(xi.Provider,{value:t},n)}function oC(t,e=[],n=null,r=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=n?.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);Jt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,d=-1;if(n)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:v,errors:x}=n,w=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!x||x[m.route.id]===void 0);if(m.route.lazy||w){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let h=n&&r?(p,m)=>{r(p,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:KT(n.matches),errorInfo:m})}:void 0;return o.reduceRight((p,m,v)=>{let x,w=!1,T=null,M=null;n&&(x=l&&m.route.id?l[m.route.id]:void 0,T=m.route.errorElement||iC,c&&(d<0&&v===0?(ES("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,M=null):d===v&&(w=!0,M=m.route.hydrateFallbackElement||null)));let O=e.concat(o.slice(0,v+1)),q=()=>{let V;return x?V=T:w?V=M:m.route.Component?V=ae.createElement(m.route.Component,null):m.route.element?V=m.route.element:V=p,ae.createElement(sC,{match:m,routeContext:{outlet:p,matches:O,isDataRoute:n!=null},children:V})};return n&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?ae.createElement(wS,{location:n.location,revalidation:n.revalidation,component:T,error:x,children:q(),routeContext:{outlet:null,matches:O,isDataRoute:!0},onError:h}):q()},null)}function ry(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lC(t){let e=ae.useContext(ql);return Jt(e,ry(t)),e}function uC(t){let e=ae.useContext(yh);return Jt(e,ry(t)),e}function cC(t){let e=ae.useContext(xi);return Jt(e,ry(t)),e}function iy(t){let e=cC(t),n=e.matches[e.matches.length-1];return Jt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function fC(){return iy("useRouteId")}function dC(){let t=ae.useContext(ny),e=uC("useRouteError"),n=iy("useRouteError");return t!==void 0?t:e.errors?.[n]}function hC(){let{router:t}=lC("useNavigate"),e=iy("useNavigate"),n=ae.useRef(!1);return bS(()=>{n.current=!0}),ae.useCallback(async(a,o={})=>{vi(n.current,vS),n.current&&(typeof a=="number"?await t.navigate(a):await t.navigate(a,{fromRouteId:e,...o}))},[t,e])}var db={};function ES(t,e,n){!e&&!db[t]&&(db[t]=!0,vi(!1,n))}ae.memo(pC);function pC({routes:t,future:e,state:n,onError:r}){return SS(t,void 0,n,r,e)}function mC({to:t,replace:e,state:n,relative:r}){Jt(Pl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=ae.useContext(Pr);vi(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=ae.useContext(xi),{pathname:l}=qi(),c=To(),d=ty(t,ey(o),l,r==="path"),h=JSON.stringify(d);return ae.useEffect(()=>{c(JSON.parse(h),{replace:e,state:n,relative:r})},[c,h,r,e,n]),null}function xa(t){Jt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gC({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:a,static:o=!1,unstable_useTransitions:l}){Jt(!Pl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),d=ae.useMemo(()=>({basename:c,navigator:a,static:o,unstable_useTransitions:l,future:{}}),[c,a,o,l]);typeof n=="string"&&(n=Il(n));let{pathname:h="/",search:p="",hash:m="",state:v=null,key:x="default"}=n,w=ae.useMemo(()=>{let T=Aa(h,c);return T==null?null:{location:{pathname:T,search:p,hash:m,state:v,key:x},navigationType:r}},[c,h,p,m,v,x,r]);return vi(w!=null,`<Router basename="${c}"> is not able to match the URL "${h}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:ae.createElement(Pr.Provider,{value:d},ae.createElement(Oc.Provider,{children:e,value:w}))}function yC({children:t,location:e}){return nC(bg(t),e)}function bg(t,e=[]){let n=[];return ae.Children.forEach(t,(r,a)=>{if(!ae.isValidElement(r))return;let o=[...e,a];if(r.type===ae.Fragment){n.push.apply(n,bg(r.props.children,o));return}Jt(r.type===xa,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Jt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=bg(r.props.children,o)),n.push(l)}),n}var cd="get",fd="application/x-www-form-urlencoded";function vh(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function vC(t){return vh(t)&&t.tagName.toLowerCase()==="button"}function bC(t){return vh(t)&&t.tagName.toLowerCase()==="form"}function xC(t){return vh(t)&&t.tagName.toLowerCase()==="input"}function SC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wC(t,e){return t.button===0&&(!e||e==="_self")&&!SC(t)}var Qf=null;function EC(){if(Qf===null)try{new FormData(document.createElement("form"),0),Qf=!1}catch{Qf=!0}return Qf}var kC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lm(t){return t!=null&&!kC.has(t)?(vi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fd}"`),null):t}function TC(t,e){let n,r,a,o,l;if(bC(t)){let c=t.getAttribute("action");r=c?Aa(c,e):null,n=t.getAttribute("method")||cd,a=Lm(t.getAttribute("enctype"))||fd,o=new FormData(t)}else if(vC(t)||xC(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||c.getAttribute("action");if(r=d?Aa(d,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||cd,a=Lm(t.getAttribute("formenctype"))||Lm(c.getAttribute("enctype"))||fd,o=new FormData(c,t),!EC()){let{name:h,type:p,value:m}=t;if(p==="image"){let v=h?`${h}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else h&&o.append(h,m)}}else{if(vh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=cd,r=null,a=fd,l=t}return o&&a==="text/plain"&&(l=o,o=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ay(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function CC(t,e,n,r){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${r}`:a.pathname=`${a.pathname}.${r}`:a.pathname==="/"?a.pathname=`_root.${r}`:e&&Aa(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function MC(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AC(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function OC(t,e,n){let r=await Promise.all(t.map(async a=>{let o=e.routes[a.route.id];if(o){let l=await MC(o,n);return l.links?l.links():[]}return[]}));return _C(r.flat(1).filter(AC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function hb(t,e,n,r,a,o){let l=(d,h)=>n[h]?d.route.id!==n[h].route.id:!0,c=(d,h)=>n[h].pathname!==d.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,h)=>l(d,h)||c(d,h)):o==="data"?e.filter((d,h)=>{let p=r.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,h)||c(d,h))return!0;if(d.route.shouldRevalidate){let m=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function NC(t,e,{includeHydrateFallback:n}={}){return DC(t.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function DC(t){return[...new Set(t)]}function RC(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function _C(t,e){let n=new Set;return new Set(e),t.reduce((r,a)=>{let o=JSON.stringify(RC(a));return n.has(o)||(n.add(o),r.push({key:o,link:a})),r},[])}function kS(){let t=ae.useContext(ql);return ay(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function zC(){let t=ae.useContext(yh);return ay(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var sy=ae.createContext(void 0);sy.displayName="FrameworkContext";function TS(){let t=ae.useContext(sy);return ay(t,"You must render this element inside a <HydratedRouter> element"),t}function jC(t,e){let n=ae.useContext(sy),[r,a]=ae.useState(!1),[o,l]=ae.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=e,v=ae.useRef(null);ae.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let T=O=>{O.forEach(q=>{l(q.isIntersecting)})},M=new IntersectionObserver(T,{threshold:.5});return v.current&&M.observe(v.current),()=>{M.disconnect()}}},[t]),ae.useEffect(()=>{if(r){let T=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(T)}}},[r]);let x=()=>{a(!0)},w=()=>{a(!1),l(!1)};return n?t!=="intent"?[o,v,{}]:[o,v,{onFocus:$u(c,x),onBlur:$u(d,w),onMouseEnter:$u(h,x),onMouseLeave:$u(p,w),onTouchStart:$u(m,x)}]:[!1,v,{}]}function $u(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function LC({page:t,...e}){let{router:n}=kS(),r=ae.useMemo(()=>cS(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?ae.createElement(UC,{page:t,matches:r,...e}):null}function BC(t){let{manifest:e,routeModules:n}=TS(),[r,a]=ae.useState([]);return ae.useEffect(()=>{let o=!1;return OC(t,e,n).then(l=>{o||a(l)}),()=>{o=!0}},[t,e,n]),r}function UC({page:t,matches:e,...n}){let r=qi(),{future:a,manifest:o,routeModules:l}=TS(),{basename:c}=kS(),{loaderData:d,matches:h}=zC(),p=ae.useMemo(()=>hb(t,e,h,o,r,"data"),[t,e,h,o,r]),m=ae.useMemo(()=>hb(t,e,h,o,r,"assets"),[t,e,h,o,r]),v=ae.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let T=new Set,M=!1;if(e.forEach(q=>{let V=o.routes[q.route.id];!V||!V.hasLoader||(!p.some(F=>F.route.id===q.route.id)&&q.route.id in d&&l[q.route.id]?.shouldRevalidate||V.hasClientLoader?M=!0:T.add(q.route.id))}),T.size===0)return[];let O=CC(t,c,a.unstable_trailingSlashAwareDataRequests,"data");return M&&T.size>0&&O.searchParams.set("_routes",e.filter(q=>T.has(q.route.id)).map(q=>q.route.id).join(",")),[O.pathname+O.search]},[c,a.unstable_trailingSlashAwareDataRequests,d,r,o,p,e,t,l]),x=ae.useMemo(()=>NC(m,o),[m,o]),w=BC(m);return ae.createElement(ae.Fragment,null,v.map(T=>ae.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...n})),x.map(T=>ae.createElement("link",{key:T,rel:"modulepreload",href:T,...n})),w.map(({key:T,link:M})=>ae.createElement("link",{key:T,nonce:n.nonce,...M,crossOrigin:M.crossOrigin??n.crossOrigin})))}function HC(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var IC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{IC&&(window.__reactRouterVersion="7.13.0")}catch{}function qC({basename:t,children:e,unstable_useTransitions:n,window:r}){let a=ae.useRef();a.current==null&&(a.current=xT({window:r,v5Compat:!0}));let o=a.current,[l,c]=ae.useState({action:o.action,location:o.location}),d=ae.useCallback(h=>{n===!1?c(h):ae.startTransition(()=>c(h))},[n]);return ae.useLayoutEffect(()=>o.listen(d),[o,d]),ae.createElement(gC,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:n})}var CS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,MS=ae.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:a,reloadDocument:o,replace:l,state:c,target:d,to:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v,...x},w){let{basename:T,unstable_useTransitions:M}=ae.useContext(Pr),O=typeof h=="string"&&CS.test(h),q=pS(h,T);h=q.to;let V=eC(h,{relative:a}),[F,$,U]=jC(r,x),P=FC(h,{replace:l,state:c,target:d,preventScrollReset:p,relative:a,viewTransition:m,unstable_defaultShouldRevalidate:v,unstable_useTransitions:M});function z(G){e&&e(G),G.defaultPrevented||P(G)}let L=ae.createElement("a",{...x,...U,href:q.absoluteURL||V,onClick:q.isExternal||o?e:z,ref:HC(w,$),target:d,"data-discover":!O&&n==="render"?"true":void 0});return F&&!O?ae.createElement(ae.Fragment,null,L,ae.createElement(LC,{page:V})):L});MS.displayName="Link";var xg=ae.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:a=!1,style:o,to:l,viewTransition:c,children:d,...h},p){let m=Nc(l,{relative:h.relative}),v=qi(),x=ae.useContext(yh),{navigator:w,basename:T}=ae.useContext(Pr),M=x!=null&&QC(m)&&c===!0,O=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,q=v.pathname,V=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(q=q.toLowerCase(),V=V?V.toLowerCase():null,O=O.toLowerCase()),V&&T&&(V=Aa(V,T)||V);const F=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let $=q===O||!a&&q.startsWith(O)&&q.charAt(F)==="/",U=V!=null&&(V===O||!a&&V.startsWith(O)&&V.charAt(O.length)==="/"),P={isActive:$,isPending:U,isTransitioning:M},z=$?e:void 0,L;typeof r=="function"?L=r(P):L=[r,$?"active":null,U?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let G=typeof o=="function"?o(P):o;return ae.createElement(MS,{...h,"aria-current":z,className:L,ref:p,style:G,to:l,viewTransition:c},typeof d=="function"?d(P):d)});xg.displayName="NavLink";var PC=ae.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:a,state:o,method:l=cd,action:c,onSubmit:d,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v,...x},w)=>{let{unstable_useTransitions:T}=ae.useContext(Pr),M=YC(),O=GC(c,{relative:h}),q=l.toLowerCase()==="get"?"get":"post",V=typeof c=="string"&&CS.test(c),F=$=>{if(d&&d($),$.defaultPrevented)return;$.preventDefault();let U=$.nativeEvent.submitter,P=U?.getAttribute("formmethod")||l,z=()=>M(U||$.currentTarget,{fetcherKey:e,method:P,navigate:n,replace:a,state:o,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v});T&&n!==!1?ae.startTransition(()=>z()):z()};return ae.createElement("form",{ref:w,method:q,action:O,onSubmit:r?d:F,...x,"data-discover":!V&&t==="render"?"true":void 0})});PC.displayName="Form";function VC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AS(t){let e=ae.useContext(ql);return Jt(e,VC(t)),e}function FC(t,{target:e,replace:n,state:r,preventScrollReset:a,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:c,unstable_useTransitions:d}={}){let h=To(),p=qi(),m=Nc(t,{relative:o});return ae.useCallback(v=>{if(wC(v,e)){v.preventDefault();let x=n!==void 0?n:pc(p)===pc(m),w=()=>h(t,{replace:x,state:r,preventScrollReset:a,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:c});d?ae.startTransition(()=>w()):w()}},[p,h,m,n,r,e,t,a,o,l,c,d])}var KC=0,$C=()=>`__${String(++KC)}__`;function YC(){let{router:t}=AS("useSubmit"),{basename:e}=ae.useContext(Pr),n=fC(),r=t.fetch,a=t.navigate;return ae.useCallback(async(o,l={})=>{let{action:c,method:d,encType:h,formData:p,body:m}=TC(o,e);if(l.navigate===!1){let v=l.fetcherKey||$C();await r(v,n,l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||d,formEncType:l.encType||h,flushSync:l.flushSync})}else await a(l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||d,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,a,e,n])}function GC(t,{relative:e}={}){let{basename:n}=ae.useContext(Pr),r=ae.useContext(xi);Jt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),o={...Nc(t||".",{relative:e})},l=qi();if(t==null){o.search=l.search;let c=new URLSearchParams(o.search),d=c.getAll("index");if(d.some(p=>p==="")){c.delete("index"),d.filter(m=>m).forEach(m=>c.append("index",m));let p=c.toString();o.search=p?`?${p}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Ta([n,o.pathname])),pc(o)}function QC(t,{relative:e}={}){let n=ae.useContext(gS);Jt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=AS("useViewTransitionState"),a=Nc(t,{relative:e});if(!n.isTransitioning)return!1;let o=Aa(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Aa(n.nextLocation.pathname,r)||n.nextLocation.pathname;return bd(a.pathname,l)!=null||bd(a.pathname,o)!=null}var WC=uS();const XC=Zg(WC);const OS=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();const JC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const ZC=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase());const pb=t=>{const e=ZC(t);return e.charAt(0).toUpperCase()+e.slice(1)};var eM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const tM=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const nM=ae.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:o,iconNode:l,...c},d)=>ae.createElement("svg",{ref:d,...eM,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:OS("lucide",a),...!o&&!tM(c)&&{"aria-hidden":"true"},...c},[...l.map(([h,p])=>ae.createElement(h,p)),...Array.isArray(o)?o:[o]]));const Ut=(t,e)=>{const n=ae.forwardRef(({className:r,...a},o)=>ae.createElement(nM,{ref:o,iconNode:e,className:OS(`lucide-${JC(pb(t))}`,`lucide-${t}`,r),...a}));return n.displayName=pb(t),n};const rM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],iM=Ut("arrow-left",rM);const aM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],sM=Ut("calendar",aM);const oM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],lM=Ut("chevron-left",oM);const uM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],cM=Ut("chevron-right",uM);const fM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],NS=Ut("circle-alert",fM);const dM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],DS=Ut("circle-check-big",dM);const hM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],pM=Ut("download",hM);const mM=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],gM=Ut("funnel",mM);const yM=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],mc=Ut("heart",yM);const vM=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],RS=Ut("house",vM);const bM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Dc=Ut("image",bM);const xM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],SM=Ut("info",xM);const wM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],_S=Ut("loader-circle",wM);const EM=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],kM=Ut("map-pin",EM);const TM=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],CM=Ut("map",TM);const MM=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],AM=Ut("menu",MM);const OM=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],NM=Ut("mic",OM);const DM=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],RM=Ut("moon",DM);const _M=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],zM=Ut("panel-left",_M);const jM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],zS=Ut("plus",jM);const LM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],BM=Ut("refresh-cw",LM);const UM=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Sg=Ut("search",UM);const HM=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],IM=Ut("settings",HM);const qM=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],PM=Ut("sun",qM);const VM=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],jS=Ut("tag",VM);const FM=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],KM=Ut("type",FM);const $M=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],YM=Ut("upload",$M);const GM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Dl=Ut("x",GM),LS=6048e5,QM=864e5,BS=6e4,US=36e5,mb=Symbol.for("constructDateFrom");function bi(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&mb in t?t[mb](e):t instanceof Date?new t.constructor(e):new Date(e)}function Mr(t,e){return bi(e||t,t)}function HS(t,e,n){const r=Mr(t,n?.in);if(isNaN(e))return bi(t,NaN);if(!e)return r;const a=r.getDate(),o=bi(t,r.getTime());o.setMonth(r.getMonth()+e+1,0);const l=o.getDate();return a>=l?o:(r.setFullYear(o.getFullYear(),o.getMonth(),a),r)}let WM={};function bh(){return WM}function gc(t,e){const n=bh(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=Mr(t,e?.in),o=a.getDay(),l=(o<r?7:0)+o-r;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function xd(t,e){return gc(t,{...e,weekStartsOn:1})}function IS(t,e){const n=Mr(t,e?.in),r=n.getFullYear(),a=bi(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const o=xd(a),l=bi(n,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const c=xd(l);return n.getTime()>=o.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function gb(t){const e=Mr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function qS(t,...e){const n=bi.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function Sd(t,e){const n=Mr(t,e?.in);return n.setHours(0,0,0,0),n}function XM(t,e,n){const[r,a]=qS(n?.in,t,e),o=Sd(r),l=Sd(a),c=+o-gb(o),d=+l-gb(l);return Math.round((c-d)/QM)}function JM(t,e){const n=IS(t,e),r=bi(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),xd(r)}function ZM(t,e,n){const[r,a]=qS(n?.in,t,e);return+Sd(r)==+Sd(a)}function eA(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function tA(t){return!(!eA(t)&&typeof t!="number"||isNaN(+Mr(t)))}function nA(t,e){const n=Mr(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const rA={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},iA=(t,e,n)=>{let r;const a=rA[t];return typeof a=="string"?r=a:e===1?r=a.one:r=a.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Bm(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const aA={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},sA={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},oA={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},lA={date:Bm({formats:aA,defaultWidth:"full"}),time:Bm({formats:sA,defaultWidth:"full"}),dateTime:Bm({formats:oA,defaultWidth:"full"})},uA={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},cA=(t,e,n,r)=>uA[t];function Yu(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let a;if(r==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,c=n?.width?String(n.width):l;a=t.formattingValues[c]||t.formattingValues[l]}else{const l=t.defaultWidth,c=n?.width?String(n.width):t.defaultWidth;a=t.values[c]||t.values[l]}const o=t.argumentCallback?t.argumentCallback(e):e;return a[o]}}const fA={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},dA={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},hA={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pA={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},mA={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},gA={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},yA=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},vA={ordinalNumber:yA,era:Yu({values:fA,defaultWidth:"wide"}),quarter:Yu({values:dA,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Yu({values:hA,defaultWidth:"wide"}),day:Yu({values:pA,defaultWidth:"wide"}),dayPeriod:Yu({values:mA,defaultWidth:"wide",formattingValues:gA,defaultFormattingWidth:"wide"})};function Gu(t){return(e,n={})=>{const r=n.width,a=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(a);if(!o)return null;const l=o[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(c)?xA(c,m=>m.test(l)):bA(c,m=>m.test(l));let h;h=t.valueCallback?t.valueCallback(d):d,h=n.valueCallback?n.valueCallback(h):h;const p=e.slice(l.length);return{value:h,rest:p}}}function bA(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function xA(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function SA(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const a=r[0],o=e.match(t.parsePattern);if(!o)return null;let l=t.valueCallback?t.valueCallback(o[0]):o[0];l=n.valueCallback?n.valueCallback(l):l;const c=e.slice(a.length);return{value:l,rest:c}}}const wA=/^(\d+)(th|st|nd|rd)?/i,EA=/\d+/i,kA={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},TA={any:[/^b/i,/^(a|c)/i]},CA={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},MA={any:[/1/i,/2/i,/3/i,/4/i]},AA={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},OA={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},NA={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},DA={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},RA={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},_A={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},zA={ordinalNumber:SA({matchPattern:wA,parsePattern:EA,valueCallback:t=>parseInt(t,10)}),era:Gu({matchPatterns:kA,defaultMatchWidth:"wide",parsePatterns:TA,defaultParseWidth:"any"}),quarter:Gu({matchPatterns:CA,defaultMatchWidth:"wide",parsePatterns:MA,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Gu({matchPatterns:AA,defaultMatchWidth:"wide",parsePatterns:OA,defaultParseWidth:"any"}),day:Gu({matchPatterns:NA,defaultMatchWidth:"wide",parsePatterns:DA,defaultParseWidth:"any"}),dayPeriod:Gu({matchPatterns:RA,defaultMatchWidth:"any",parsePatterns:_A,defaultParseWidth:"any"})},jA={code:"en-US",formatDistance:iA,formatLong:lA,formatRelative:cA,localize:vA,match:zA,options:{weekStartsOn:0,firstWeekContainsDate:1}};function LA(t,e){const n=Mr(t,e?.in);return XM(n,nA(n))+1}function BA(t,e){const n=Mr(t,e?.in),r=+xd(n)-+JM(n);return Math.round(r/LS)+1}function PS(t,e){const n=Mr(t,e?.in),r=n.getFullYear(),a=bh(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=bi(e?.in||t,0);l.setFullYear(r+1,0,o),l.setHours(0,0,0,0);const c=gc(l,e),d=bi(e?.in||t,0);d.setFullYear(r,0,o),d.setHours(0,0,0,0);const h=gc(d,e);return+n>=+c?r+1:+n>=+h?r:r-1}function UA(t,e){const n=bh(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=PS(t,e),o=bi(e?.in||t,0);return o.setFullYear(a,0,r),o.setHours(0,0,0,0),gc(o,e)}function HA(t,e){const n=Mr(t,e?.in),r=+gc(n,e)-+UA(n,e);return Math.round(r/LS)+1}function Ot(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ds={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ot(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ot(n+1,2)},d(t,e){return Ot(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ot(t.getHours()%12||12,e.length)},H(t,e){return Ot(t.getHours(),e.length)},m(t,e){return Ot(t.getMinutes(),e.length)},s(t,e){return Ot(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return Ot(a,e.length)}},Sl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},yb={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return ds.y(t,e)},Y:function(t,e,n,r){const a=PS(t,r),o=a>0?a:1-a;if(e==="YY"){const l=o%100;return Ot(l,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):Ot(o,e.length)},R:function(t,e){const n=IS(t);return Ot(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ot(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ot(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ot(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ds.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ot(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const a=HA(t,r);return e==="wo"?n.ordinalNumber(a,{unit:"week"}):Ot(a,e.length)},I:function(t,e,n){const r=BA(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ot(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ds.d(t,e)},D:function(t,e,n){const r=LA(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ot(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const a=t.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Ot(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const a=t.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Ot(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),a=r===0?7:r;switch(e){case"i":return String(a);case"ii":return Ot(a,e.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let a;switch(r===12?a=Sl.noon:r===0?a=Sl.midnight:a=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let a;switch(r>=17?a=Sl.evening:r>=12?a=Sl.afternoon:r>=4?a=Sl.morning:a=Sl.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ds.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ds.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ot(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ot(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ds.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ds.s(t,e)},S:function(t,e){return ds.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return bb(r);case"XXXX":case"XX":return oo(r);default:return oo(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return bb(r);case"xxxx":case"xx":return oo(r);default:return oo(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+vb(r,":");default:return"GMT"+oo(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+vb(r,":");default:return"GMT"+oo(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Ot(r,e.length)},T:function(t,e,n){return Ot(+t,e.length)}};function vb(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),a=Math.trunc(r/60),o=r%60;return o===0?n+String(a):n+String(a)+e+Ot(o,2)}function bb(t,e){return t%60===0?(t>0?"-":"+")+Ot(Math.abs(t)/60,2):oo(t,e)}function oo(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),a=Ot(Math.trunc(r/60),2),o=Ot(r%60,2);return n+a+e+o}const xb=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},VS=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},IA=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return xb(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",xb(r,e)).replace("{{time}}",VS(a,e))},qA={p:VS,P:IA},PA=/^D+$/,VA=/^Y+$/,FA=["D","DD","YY","YYYY"];function KA(t){return PA.test(t)}function $A(t){return VA.test(t)}function YA(t,e,n){const r=GA(t,e,n);if(console.warn(r),FA.includes(t))throw new RangeError(r)}function GA(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const QA=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,WA=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,XA=/^'([^]*?)'?$/,JA=/''/g,ZA=/[a-zA-Z]/;function Ea(t,e,n){const r=bh(),a=r.locale??jA,o=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,c=Mr(t,n?.in);if(!tA(c))throw new RangeError("Invalid time value");let d=e.match(WA).map(p=>{const m=p[0];if(m==="p"||m==="P"){const v=qA[m];return v(p,a.formatLong)}return p}).join("").match(QA).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const m=p[0];if(m==="'")return{isToken:!1,value:eO(p)};if(yb[m])return{isToken:!0,value:p};if(m.match(ZA))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:p}});a.localize.preprocessor&&(d=a.localize.preprocessor(c,d));const h={firstWeekContainsDate:o,weekStartsOn:l,locale:a};return d.map(p=>{if(!p.isToken)return p.value;const m=p.value;($A(m)||KA(m))&&YA(m,e,String(t));const v=yb[m[0]];return v(c,m,a.localize,h)}).join("")}function eO(t){const e=t.match(XA);return e?e[1].replace(JA,"'"):t}function FS(t,e){const n=()=>bi(e?.in,NaN),a=iO(t);let o;if(a.date){const h=aO(a.date,2);o=sO(h.restDateString,h.year)}if(!o||isNaN(+o))return n();const l=+o;let c=0,d;if(a.time&&(c=oO(a.time),isNaN(c)))return n();if(a.timezone){if(d=lO(a.timezone),isNaN(d))return n()}else{const h=new Date(l+c),p=Mr(0,e?.in);return p.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),p.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),p}return Mr(l+c+d,e?.in)}const Wf={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},tO=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,nO=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,rO=/^([+-])(\d{2})(?::?(\d{2}))?$/;function iO(t){const e={},n=t.split(Wf.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],Wf.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Wf.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const a=Wf.timezone.exec(r);a?(e.time=r.replace(a[1],""),e.timezone=a[1]):e.time=r}return e}function aO(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const a=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?a:o*100,restDateString:t.slice((r[1]||r[2]).length)}}function sO(t,e){if(e===null)return new Date(NaN);const n=t.match(tO);if(!n)return new Date(NaN);const r=!!n[4],a=Qu(n[1]),o=Qu(n[2])-1,l=Qu(n[3]),c=Qu(n[4]),d=Qu(n[5])-1;if(r)return hO(e,c,d)?uO(e,c,d):new Date(NaN);{const h=new Date(0);return!fO(e,o,l)||!dO(e,a)?new Date(NaN):(h.setUTCFullYear(e,o,Math.max(a,l)),h)}}function Qu(t){return t?parseInt(t):1}function oO(t){const e=t.match(nO);if(!e)return NaN;const n=Um(e[1]),r=Um(e[2]),a=Um(e[3]);return pO(n,r,a)?n*US+r*BS+a*1e3:NaN}function Um(t){return t&&parseFloat(t.replace(",","."))||0}function lO(t){if(t==="Z")return 0;const e=t.match(rO);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return mO(r,a)?n*(r*US+a*BS):NaN}function uO(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const a=r.getUTCDay()||7,o=(e-1)*7+n+1-a;return r.setUTCDate(r.getUTCDate()+o),r}const cO=[31,null,31,30,31,30,31,31,30,31,30,31];function KS(t){return t%400===0||t%4===0&&t%100!==0}function fO(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(cO[e]||(KS(t)?29:28))}function dO(t,e){return e>=1&&e<=(KS(t)?366:365)}function hO(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function pO(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function mO(t,e){return e>=0&&e<=59}function gO(t,e,n){return HS(t,-1,n)}const yO=()=>{const[t,e]=ae.useState("light"),[n,r]=ae.useState(!1);return ae.useEffect(()=>{r(!0);const o=localStorage.getItem("theme");o?e(o):window.matchMedia("(prefers-color-scheme: dark)").matches&&e("dark")},[]),ae.useEffect(()=>{if(!n)return;const o=window.document.documentElement;t==="dark"?o.classList.add("dark"):o.classList.remove("dark"),localStorage.setItem("theme",t)},[t,n]),{theme:t,toggleTheme:()=>{e(o=>o==="light"?"dark":"light")},mounted:n}},vO=(t,e=300)=>{const[n,r]=ae.useState(t);return ae.useEffect(()=>{const a=setTimeout(()=>{r(t)},e);return()=>clearTimeout(a)},[t,e]),n};var dd={exports:{}},bO=dd.exports,Sb;function xO(){return Sb||(Sb=1,(function(t,e){((n,r)=>{t.exports=r()})(bO,function(){var n=function(g,S){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(E,k){E.__proto__=k}:function(E,k){for(var A in k)Object.prototype.hasOwnProperty.call(k,A)&&(E[A]=k[A])}))(g,S)},r=function(){return(r=Object.assign||function(g){for(var S,E=1,k=arguments.length;E<k;E++)for(var A in S=arguments[E])Object.prototype.hasOwnProperty.call(S,A)&&(g[A]=S[A]);return g}).apply(this,arguments)};function a(g,S,E){for(var k,A=0,N=S.length;A<N;A++)!k&&A in S||((k=k||Array.prototype.slice.call(S,0,A))[A]=S[A]);return g.concat(k||Array.prototype.slice.call(S))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:cT,l=Object.keys,c=Array.isArray;function d(g,S){return typeof S=="object"&&l(S).forEach(function(E){g[E]=S[E]}),g}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var h=Object.getPrototypeOf,p={}.hasOwnProperty;function m(g,S){return p.call(g,S)}function v(g,S){typeof S=="function"&&(S=S(h(g))),(typeof Reflect>"u"?l:Reflect.ownKeys)(S).forEach(function(E){w(g,E,S[E])})}var x=Object.defineProperty;function w(g,S,E,k){x(g,S,d(E&&m(E,"get")&&typeof E.get=="function"?{get:E.get,set:E.set,configurable:!0}:{value:E,configurable:!0,writable:!0},k))}function T(g){return{from:function(S){return g.prototype=Object.create(S.prototype),w(g.prototype,"constructor",g),{extend:v.bind(null,g.prototype)}}}}var M=Object.getOwnPropertyDescriptor,O=[].slice;function q(g,S,E){return O.call(g,S,E)}function V(g,S){return S(g)}function F(g){if(!g)throw new Error("Assertion Failed")}function $(g){o.setImmediate?setImmediate(g):setTimeout(g,0)}function U(g,S){if(typeof S=="string"&&m(g,S))return g[S];if(!S)return g;if(typeof S!="string"){for(var E=[],k=0,A=S.length;k<A;++k){var N=U(g,S[k]);E.push(N)}return E}var j,H=S.indexOf(".");return H===-1||(j=g[S.substr(0,H)])==null?void 0:U(j,S.substr(H+1))}function P(g,S,E){if(g&&S!==void 0&&!("isFrozen"in Object&&Object.isFrozen(g)))if(typeof S!="string"&&"length"in S){F(typeof E!="string"&&"length"in E);for(var k=0,A=S.length;k<A;++k)P(g,S[k],E[k])}else{var N,j,H=S.indexOf(".");H!==-1?(N=S.substr(0,H),(H=S.substr(H+1))===""?E===void 0?c(g)&&!isNaN(parseInt(N))?g.splice(N,1):delete g[N]:g[N]=E:P(j=(j=g[N])&&m(g,N)?j:g[N]={},H,E)):E===void 0?c(g)&&!isNaN(parseInt(S))?g.splice(S,1):delete g[S]:g[S]=E}}function z(g){var S,E={};for(S in g)m(g,S)&&(E[S]=g[S]);return E}var L=[].concat;function G(g){return L.apply([],g)}var Y="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(G([8,16,32,64].map(function(g){return["Int","Uint","Float"].map(function(S){return S+g+"Array"})}))).filter(function(g){return o[g]}),se=new Set(Y.map(function(g){return o[g]})),re=null;function ce(g){return re=new WeakMap,g=(function S(E){if(!E||typeof E!="object")return E;var k=re.get(E);if(k)return k;if(c(E)){k=[],re.set(E,k);for(var A=0,N=E.length;A<N;++A)k.push(S(E[A]))}else if(se.has(E.constructor))k=E;else{var j,H=h(E);for(j in k=H===Object.prototype?{}:Object.create(H),re.set(E,k),E)m(E,j)&&(k[j]=S(E[j]))}return k})(g),re=null,g}var W={}.toString;function fe(g){return W.call(g).slice(8,-1)}var D=typeof Symbol<"u"?Symbol.iterator:"@@iterator",R=typeof D=="symbol"?function(g){var S;return g!=null&&(S=g[D])&&S.apply(g)}:function(){return null};function ve(g,S){S=g.indexOf(S),0<=S&&g.splice(S,1)}var oe={};function le(g){var S,E,k,A;if(arguments.length===1){if(c(g))return g.slice();if(this===oe&&typeof g=="string")return[g];if(A=R(g))for(E=[];!(k=A.next()).done;)E.push(k.value);else{if(g==null)return[g];if(typeof(S=g.length)!="number")return[g];for(E=new Array(S);S--;)E[S]=g[S]}}else for(S=arguments.length,E=new Array(S);S--;)E[S]=arguments[S];return E}var I=typeof Symbol<"u"?function(g){return g[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Y=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Vt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Y),we={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ge(g,S){this.name=g,this.message=S}function me(g,S){return g+". Errors: "+Object.keys(S).map(function(E){return S[E].toString()}).filter(function(E,k,A){return A.indexOf(E)===k}).join(`
`)}function _e(g,S,E,k){this.failures=S,this.failedKeys=k,this.successCount=E,this.message=me(g,S)}function Fe(g,S){this.name="BulkError",this.failures=Object.keys(S).map(function(E){return S[E]}),this.failuresByPos=S,this.message=me(g,this.failures)}T(ge).from(Error).extend({toString:function(){return this.name+": "+this.message}}),T(_e).from(ge),T(Fe).from(ge);var Ze=Vt.reduce(function(g,S){return g[S]=S+"Error",g},{}),Qe=ge,ze=Vt.reduce(function(g,S){var E=S+"Error";function k(A,N){this.name=E,A?typeof A=="string"?(this.message="".concat(A).concat(N?`
 `+N:""),this.inner=N||null):typeof A=="object"&&(this.message="".concat(A.name," ").concat(A.message),this.inner=A):(this.message=we[S]||E,this.inner=null)}return T(k).from(Qe),g[S]=k,g},{}),Tt=(ze.Syntax=SyntaxError,ze.Type=TypeError,ze.Range=RangeError,Y.reduce(function(g,S){return g[S+"Error"]=ze[S],g},{}));Y=Vt.reduce(function(g,S){return["Syntax","Type","Range"].indexOf(S)===-1&&(g[S+"Error"]=ze[S]),g},{});function Xe(){}function Xn(g){return g}function bn(g,S){return g==null||g===Xn?S:function(E){return S(g(E))}}function vt(g,S){return function(){g.apply(this,arguments),S.apply(this,arguments)}}function rn(g,S){return g===Xe?S:function(){var E=g.apply(this,arguments),k=(E!==void 0&&(arguments[0]=E),this.onsuccess),A=this.onerror,N=(this.onsuccess=null,this.onerror=null,S.apply(this,arguments));return k&&(this.onsuccess=this.onsuccess?vt(k,this.onsuccess):k),A&&(this.onerror=this.onerror?vt(A,this.onerror):A),N!==void 0?N:E}}function Nt(g,S){return g===Xe?S:function(){g.apply(this,arguments);var E=this.onsuccess,k=this.onerror;this.onsuccess=this.onerror=null,S.apply(this,arguments),E&&(this.onsuccess=this.onsuccess?vt(E,this.onsuccess):E),k&&(this.onerror=this.onerror?vt(k,this.onerror):k)}}function Et(g,S){return g===Xe?S:function(A){var k=g.apply(this,arguments),A=(d(A,k),this.onsuccess),N=this.onerror,j=(this.onsuccess=null,this.onerror=null,S.apply(this,arguments));return A&&(this.onsuccess=this.onsuccess?vt(A,this.onsuccess):A),N&&(this.onerror=this.onerror?vt(N,this.onerror):N),k===void 0?j===void 0?void 0:j:d(k,j)}}function Zt(g,S){return g===Xe?S:function(){return S.apply(this,arguments)!==!1&&g.apply(this,arguments)}}function en(g,S){return g===Xe?S:function(){var E=g.apply(this,arguments);if(E&&typeof E.then=="function"){for(var k=this,A=arguments.length,N=new Array(A);A--;)N[A]=arguments[A];return E.then(function(){return S.apply(k,N)})}return S.apply(this,arguments)}}Y.ModifyError=_e,Y.DexieError=ge,Y.BulkError=Fe;var mt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Dn(g){mt=g}var Dt={},it=100,fn=typeof Promise>"u"?[]:(Vt=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[fn=crypto.subtle.digest("SHA-512",new Uint8Array([0])),h(fn),Vt]:[Vt,h(Vt),Vt]),Vt=fn[0],ea=fn[1],ea=ea&&ea.then,lr=Vt&&Vt.constructor,Ft=!!fn[2],ur=function(g,S){Pi.push([g,S]),Rn&&(queueMicrotask(Vr),Rn=!1)},an=!0,Rn=!0,sn=[],xn=[],Rt=Xn,Kt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Xe,pgp:!1,env:{},finalize:Xe},He=Kt,Pi=[],Or=0,Vi=[];function je(g){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var S=this._PSD=He;if(typeof g!="function"){if(g!==Dt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Sn(this,this._value)}else this._state=null,this._value=null,++S.ref,(function E(k,A){try{A(function(N){if(k._state===null){if(N===k)throw new TypeError("A promise cannot be resolved with itself.");var j=k._lib&&_n();N&&typeof N.then=="function"?E(k,function(H,X){N instanceof je?N._then(H,X):N.then(H,X)}):(k._state=!0,k._value=N,yr(k)),j&&Fr()}},Sn.bind(null,k))}catch(N){Sn(k,N)}})(this,g)}var Si={get:function(){var g=He,S=zs;function E(k,A){var N=this,j=!g.global&&(g!==He||S!==zs),H=j&&!fr(),X=new je(function(de,J){cr(N,new Jn(No(k,g,j,H),No(A,g,j,H),de,J,g))});return this._consoleTask&&(X._consoleTask=this._consoleTask),X}return E.prototype=Dt,E},set:function(g){w(this,"then",g&&g.prototype===Dt?Si:{get:function(){return g},set:Si.set})}};function Jn(g,S,E,k,A){this.onFulfilled=typeof g=="function"?g:null,this.onRejected=typeof S=="function"?S:null,this.resolve=E,this.reject=k,this.psd=A}function Sn(g,S){var E,k;xn.push(S),g._state===null&&(E=g._lib&&_n(),S=Rt(S),g._state=!1,g._value=S,k=g,sn.some(function(A){return A._value===k._value})||sn.push(k),yr(g),E)&&Fr()}function yr(g){var S=g._listeners;g._listeners=[];for(var E=0,k=S.length;E<k;++E)cr(g,S[E]);var A=g._PSD;--A.ref||A.finalize(),Or===0&&(++Or,ur(function(){--Or==0&&Fl()},[]))}function cr(g,S){if(g._state===null)g._listeners.push(S);else{var E=g._state?S.onFulfilled:S.onRejected;if(E===null)return(g._state?S.resolve:S.reject)(g._value);++S.psd.ref,++Or,ur(Oo,[E,g,S])}}function Oo(g,S,E){try{var k,A=S._value;!S._state&&xn.length&&(xn=[]),k=mt&&S._consoleTask?S._consoleTask.run(function(){return g(A)}):g(A),S._state||xn.indexOf(A)!==-1||(N=>{for(var j=sn.length;j;)if(sn[--j]._value===N._value)return sn.splice(j,1)})(S),E.resolve(k)}catch(N){E.reject(N)}finally{--Or==0&&Fl(),--E.psd.ref||E.psd.finalize()}}function Vr(){Nr(Kt,function(){_n()&&Fr()})}function _n(){var g=an;return Rn=an=!1,g}function Fr(){var g,S,E;do for(;0<Pi.length;)for(g=Pi,Pi=[],E=g.length,S=0;S<E;++S){var k=g[S];k[0].apply(null,k[1])}while(0<Pi.length);Rn=an=!0}function Fl(){for(var g=sn,S=(sn=[],g.forEach(function(k){k._PSD.onunhandled.call(null,k._value,k)}),Vi.slice(0)),E=S.length;E;)S[--E]()}function Rs(g){return new je(Dt,!1,g)}function Ht(g,S){var E=He;return function(){var k=_n(),A=He;try{return Ei(E,!0),g.apply(this,arguments)}catch(N){S&&S(N)}finally{Ei(A,!1),k&&Fr()}}}v(je.prototype,{then:Si,_then:function(g,S){cr(this,new Jn(null,null,g,S,He))},catch:function(g){var S,E;return arguments.length===1?this.then(null,g):(S=g,E=arguments[1],typeof S=="function"?this.then(null,function(k){return(k instanceof S?E:Rs)(k)}):this.then(null,function(k){return(k&&k.name===S?E:Rs)(k)}))},finally:function(g){return this.then(function(S){return je.resolve(g()).then(function(){return S})},function(S){return je.resolve(g()).then(function(){return Rs(S)})})},timeout:function(g,S){var E=this;return g<1/0?new je(function(k,A){var N=setTimeout(function(){return A(new ze.Timeout(S))},g);E.then(k,A).finally(clearTimeout.bind(null,N))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&w(je.prototype,Symbol.toStringTag,"Dexie.Promise"),Kt.env=$l(),v(je,{all:function(){var g=le.apply(null,arguments).map(Da);return new je(function(S,E){g.length===0&&S([]);var k=g.length;g.forEach(function(A,N){return je.resolve(A).then(function(j){g[N]=j,--k||S(g)},E)})})},resolve:function(g){return g instanceof je?g:g&&typeof g.then=="function"?new je(function(S,E){g.then(S,E)}):new je(Dt,!0,g)},reject:Rs,race:function(){var g=le.apply(null,arguments).map(Da);return new je(function(S,E){g.map(function(k){return je.resolve(k).then(S,E)})})},PSD:{get:function(){return He},set:function(g){return He=g}},totalEchoes:{get:function(){return zs}},newPSD:Pt,usePSD:Nr,scheduler:{get:function(){return ur},set:function(g){ur=g}},rejectionMapper:{get:function(){return Rt},set:function(g){Rt=g}},follow:function(g,S){return new je(function(E,k){return Pt(function(A,N){var j=He;j.unhandleds=[],j.onunhandled=N,j.finalize=vt(function(){var H,X=this;H=function(){X.unhandleds.length===0?A():N(X.unhandleds[0])},Vi.push(function de(){H(),Vi.splice(Vi.indexOf(de),1)}),++Or,ur(function(){--Or==0&&Fl()},[])},j.finalize),g()},S,E,k)})}}),lr&&(lr.allSettled&&w(je,"allSettled",function(){var g=le.apply(null,arguments).map(Da);return new je(function(S){g.length===0&&S([]);var E=g.length,k=new Array(E);g.forEach(function(A,N){return je.resolve(A).then(function(j){return k[N]={status:"fulfilled",value:j}},function(j){return k[N]={status:"rejected",reason:j}}).then(function(){return--E||S(k)})})})}),lr.any&&typeof AggregateError<"u"&&w(je,"any",function(){var g=le.apply(null,arguments).map(Da);return new je(function(S,E){g.length===0&&E(new AggregateError([]));var k=g.length,A=new Array(k);g.forEach(function(N,j){return je.resolve(N).then(function(H){return S(H)},function(H){A[j]=H,--k||E(new AggregateError(A))})})})}),lr.withResolvers)&&(je.withResolvers=lr.withResolvers);var dn={awaits:0,echoes:0,id:0},Kl=0,Na=[],_s=0,zs=0,wi=0;function Pt(g,j,E,k){var A=He,N=Object.create(A),j=(N.parent=A,N.ref=0,N.global=!1,N.id=++wi,Kt.env,N.env=Ft?{Promise:je,PromiseProp:{value:je,configurable:!0,writable:!0},all:je.all,race:je.race,allSettled:je.allSettled,any:je.any,resolve:je.resolve,reject:je.reject}:{},j&&d(N,j),++A.ref,N.finalize=function(){--this.parent.ref||this.parent.finalize()},Nr(N,g,E,k));return N.ref===0&&N.finalize(),j}function hn(){return dn.id||(dn.id=++Kl),++dn.awaits,dn.echoes+=it,dn.id}function fr(){return!!dn.awaits&&(--dn.awaits==0&&(dn.id=0),dn.echoes=dn.awaits*it,!0)}function Da(g){return dn.echoes&&g&&g.constructor===lr?(hn(),g.then(function(S){return fr(),S},function(S){return fr(),_t(S)})):g}function Lh(){var g=Na[Na.length-1];Na.pop(),Ei(g,!1)}function Ei(g,S){var E,k,A=He;(S?!dn.echoes||_s++&&g===He:!_s||--_s&&g===He)||queueMicrotask(S?(function(N){++zs,dn.echoes&&--dn.echoes!=0||(dn.echoes=dn.awaits=dn.id=0),Na.push(He),Ei(N,!0)}).bind(null,g):Lh),g!==He&&(He=g,A===Kt&&(Kt.env=$l()),Ft)&&(E=Kt.env.Promise,k=g.env,A.global||g.global)&&(Object.defineProperty(o,"Promise",k.PromiseProp),E.all=k.all,E.race=k.race,E.resolve=k.resolve,E.reject=k.reject,k.allSettled&&(E.allSettled=k.allSettled),k.any)&&(E.any=k.any)}function $l(){var g=o.Promise;return Ft?{Promise:g,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:g.all,race:g.race,allSettled:g.allSettled,any:g.any,resolve:g.resolve,reject:g.reject}:{}}function Nr(g,S,E,k,A){var N=He;try{return Ei(g,!0),S(E,k,A)}finally{Ei(N,!1)}}function No(g,S,E,k){return typeof g!="function"?g:function(){var A=He;E&&hn(),Ei(S,!0);try{return g.apply(this,arguments)}finally{Ei(A,!1),k&&queueMicrotask(fr)}}}function ki(g){Promise===lr&&dn.echoes===0?_s===0?g():enqueueNativeMicroTask(g):setTimeout(g,0)}(""+ea).indexOf("[native code]")===-1&&(hn=fr=Xe);var _t=je.reject,Dr="",Zn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",pn="String expected.",Fi=[],js="__dbnames",ui="readonly",Ti="readwrite";function Ki(g,S){return g?S?function(){return g.apply(this,arguments)&&S.apply(this,arguments)}:g:S}var Yl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ls(g){return typeof g!="string"||/\./.test(g)?function(S){return S}:function(S){return S[g]===void 0&&g in S&&delete(S=ce(S))[g],S}}function Lc(){throw ze.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ot(g,S){try{var E=Bs(g),k=Bs(S);if(E!==k)return E==="Array"?1:k==="Array"?-1:E==="binary"?1:k==="binary"?-1:E==="string"?1:k==="string"?-1:E==="Date"?1:k!=="Date"?NaN:-1;switch(E){case"number":case"Date":case"string":return S<g?1:g<S?-1:0;case"binary":for(var A=Kr(g),N=Kr(S),j=A.length,H=N.length,X=j<H?j:H,de=0;de<X;++de)if(A[de]!==N[de])return A[de]<N[de]?-1:1;return j===H?0:j<H?-1:1;case"Array":for(var J=g,Q=S,te=J.length,ie=Q.length,Z=te<ie?te:ie,ee=0;ee<Z;++ee){var pe=ot(J[ee],Q[ee]);if(pe!==0)return pe}return te===ie?0:te<ie?-1:1}}catch{}return NaN}function Bs(g){var S=typeof g;return S=="object"&&(ArrayBuffer.isView(g)||(S=fe(g))==="ArrayBuffer")?"binary":S}function Kr(g){return g instanceof Uint8Array?g:ArrayBuffer.isView(g)?new Uint8Array(g.buffer,g.byteOffset,g.byteLength):new Uint8Array(g)}function qn(g,S,E){var k=g.schema.yProps;return k?(S&&0<E.numFailures&&(S=S.filter(function(A,N){return!E.failures[N]})),Promise.all(k.map(function(A){return A=A.updatesTable,S?g.db.table(A).where("k").anyOf(S).delete():g.db.table(A).clear()})).then(function(){return E})):E}Bc.prototype.execute=function(g){var S=this["@@propmod"];if(S.add!==void 0){var E=S.add;if(c(E))return a(a([],c(g)?g:[],!0),E).sort();if(typeof E=="number")return(Number(g)||0)+E;if(typeof E=="bigint")try{return BigInt(g)+E}catch{return BigInt(0)+E}throw new TypeError("Invalid term ".concat(E))}if(S.remove!==void 0){var k=S.remove;if(c(k))return c(g)?g.filter(function(A){return!k.includes(A)}).sort():[];if(typeof k=="number")return Number(g)-k;if(typeof k=="bigint")try{return BigInt(g)-k}catch{return BigInt(0)-k}throw new TypeError("Invalid subtrahend ".concat(k))}return E=(E=S.replacePrefix)==null?void 0:E[0],E&&typeof g=="string"&&g.startsWith(E)?S.replacePrefix[1]+g.substring(E.length):g};var Ra=Bc;function Bc(g){this["@@propmod"]=g}function Do(g,S){for(var E=l(S),k=E.length,A=!1,N=0;N<k;++N){var j=E[N],H=S[j],X=U(g,j);H instanceof Ra?(P(g,j,H.execute(X)),A=!0):X!==H&&(P(g,j,H),A=!0)}return A}St.prototype._trans=function(g,S,E){var k=this._tx||He.trans,A=this.name,N=mt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(g==="readonly"?"read":"write"," ").concat(this.name));function j(de,J,Q){if(Q.schema[A])return S(Q.idbtrans,Q);throw new ze.NotFound("Table "+A+" not part of transaction")}var H=_n();try{var X=k&&k.db._novip===this.db._novip?k===He.trans?k._promise(g,j,E):Pt(function(){return k._promise(g,j,E)},{trans:k,transless:He.transless||He}):(function de(J,Q,te,ie){if(J.idbdb&&(J._state.openComplete||He.letThrough||J._vip)){var Z=J._createTransaction(Q,te,J._dbSchema);try{Z.create(),J._state.PR1398_maxLoop=3}catch(ee){return ee.name===Ze.InvalidState&&J.isOpen()&&0<--J._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),J.close({disableAutoOpen:!1}),J.open().then(function(){return de(J,Q,te,ie)})):_t(ee)}return Z._promise(Q,function(ee,pe){return Pt(function(){return He.trans=Z,ie(ee,pe,Z)})}).then(function(ee){if(Q==="readwrite")try{Z.idbtrans.commit()}catch{}return Q==="readonly"?ee:Z._completion.then(function(){return ee})})}if(J._state.openComplete)return _t(new ze.DatabaseClosed(J._state.dbOpenError));if(!J._state.isBeingOpened){if(!J._state.autoOpen)return _t(new ze.DatabaseClosed);J.open().catch(Xe)}return J._state.dbReadyPromise.then(function(){return de(J,Q,te,ie)})})(this.db,g,[this.name],j);return N&&(X._consoleTask=N,X=X.catch(function(de){return console.trace(de),_t(de)})),X}finally{H&&Fr()}},St.prototype.get=function(g,S){var E=this;return g&&g.constructor===Object?this.where(g).first(S):g==null?_t(new ze.Type("Invalid argument to Table.get()")):this._trans("readonly",function(k){return E.core.get({trans:k,key:g}).then(function(A){return E.hook.reading.fire(A)})}).then(S)},St.prototype.where=function(g){if(typeof g=="string")return new this.db.WhereClause(this,g);if(c(g))return new this.db.WhereClause(this,"[".concat(g.join("+"),"]"));var S=l(g);if(S.length===1)return this.where(S[0]).equals(g[S[0]]);var E=this.schema.indexes.concat(this.schema.primKey).filter(function(H){if(H.compound&&S.every(function(de){return 0<=H.keyPath.indexOf(de)})){for(var X=0;X<S.length;++X)if(S.indexOf(H.keyPath[X])===-1)return!1;return!0}return!1}).sort(function(H,X){return H.keyPath.length-X.keyPath.length})[0];if(E&&this.db._maxKey!==Dr)return j=E.keyPath.slice(0,S.length),this.where(j).equals(j.map(function(H){return g[H]}));!E&&mt&&console.warn("The query ".concat(JSON.stringify(g)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(S.join("+"),"]"));var k=this.schema.idxByName;function A(H,X){return ot(H,X)===0}var j=S.reduce(function(J,X){var de=J[0],J=J[1],Q=k[X],te=g[X];return[de||Q,de||!Q?Ki(J,Q&&Q.multi?function(ie){return ie=U(ie,X),c(ie)&&ie.some(function(Z){return A(te,Z)})}:function(ie){return A(te,U(ie,X))}):J]},[null,null]),N=j[0],j=j[1];return N?this.where(N.name).equals(g[N.keyPath]).filter(j):E?this.filter(j):this.where(S).equals("")},St.prototype.filter=function(g){return this.toCollection().and(g)},St.prototype.count=function(g){return this.toCollection().count(g)},St.prototype.offset=function(g){return this.toCollection().offset(g)},St.prototype.limit=function(g){return this.toCollection().limit(g)},St.prototype.each=function(g){return this.toCollection().each(g)},St.prototype.toArray=function(g){return this.toCollection().toArray(g)},St.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},St.prototype.orderBy=function(g){return new this.db.Collection(new this.db.WhereClause(this,c(g)?"[".concat(g.join("+"),"]"):g))},St.prototype.reverse=function(){return this.toCollection().reverse()},St.prototype.mapToClass=function(g){for(var S=this.db,E=this.name,k=((this.schema.mappedClass=g).prototype instanceof Lc&&(g=(j=>{var H=J,X=j;if(typeof X!="function"&&X!==null)throw new TypeError("Class extends value "+String(X)+" is not a constructor or null");function de(){this.constructor=H}function J(){return j!==null&&j.apply(this,arguments)||this}return n(H,X),H.prototype=X===null?Object.create(X):(de.prototype=X.prototype,new de),Object.defineProperty(J.prototype,"db",{get:function(){return S},enumerable:!1,configurable:!0}),J.prototype.table=function(){return E},J})(g)),new Set),A=g.prototype;A;A=h(A))Object.getOwnPropertyNames(A).forEach(function(j){return k.add(j)});function N(j){if(!j)return j;var H,X=Object.create(g.prototype);for(H in j)if(!k.has(H))try{X[H]=j[H]}catch{}return X}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=N,this.hook("reading",N),g},St.prototype.defineClass=function(){return this.mapToClass(function(g){d(this,g)})},St.prototype.add=function(g,S){var E=this,k=this.schema.primKey,A=k.auto,N=k.keyPath,j=g;return N&&A&&(j=Ls(N)(g)),this._trans("readwrite",function(H){return E.core.mutate({trans:H,type:"add",keys:S!=null?[S]:null,values:[j]})}).then(function(H){return H.numFailures?je.reject(H.failures[0]):H.lastResult}).then(function(H){if(N)try{P(g,N,H)}catch{}return H})},St.prototype.upsert=function(g,S){var E=this,k=this.schema.primKey.keyPath;return this._trans("readwrite",function(A){return E.core.get({trans:A,key:g}).then(function(N){var j=N??{};return Do(j,S),k&&P(j,k,g),E.core.mutate({trans:A,type:"put",values:[j],keys:[g],upsert:!0,updates:{keys:[g],changeSpecs:[S]}}).then(function(H){return H.numFailures?je.reject(H.failures[0]):!!N})})})},St.prototype.update=function(g,S){return typeof g!="object"||c(g)?this.where(":id").equals(g).modify(S):(g=U(g,this.schema.primKey.keyPath))===void 0?_t(new ze.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(g).modify(S)},St.prototype.put=function(g,S){var E=this,k=this.schema.primKey,A=k.auto,N=k.keyPath,j=g;return N&&A&&(j=Ls(N)(g)),this._trans("readwrite",function(H){return E.core.mutate({trans:H,type:"put",values:[j],keys:S!=null?[S]:null})}).then(function(H){return H.numFailures?je.reject(H.failures[0]):H.lastResult}).then(function(H){if(N)try{P(g,N,H)}catch{}return H})},St.prototype.delete=function(g){var S=this;return this._trans("readwrite",function(E){return S.core.mutate({trans:E,type:"delete",keys:[g]}).then(function(k){return qn(S,[g],k)}).then(function(k){return k.numFailures?je.reject(k.failures[0]):void 0})})},St.prototype.clear=function(){var g=this;return this._trans("readwrite",function(S){return g.core.mutate({trans:S,type:"deleteRange",range:Yl}).then(function(E){return qn(g,null,E)})}).then(function(S){return S.numFailures?je.reject(S.failures[0]):void 0})},St.prototype.bulkGet=function(g){var S=this;return this._trans("readonly",function(E){return S.core.getMany({keys:g,trans:E}).then(function(k){return k.map(function(A){return S.hook.reading.fire(A)})})})},St.prototype.bulkAdd=function(g,S,E){var k=this,A=Array.isArray(S)?S:void 0,N=(E=E||(A?void 0:S))?E.allKeys:void 0;return this._trans("readwrite",function(j){var H=k.schema.primKey,de=H.auto,H=H.keyPath;if(H&&A)throw new ze.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(A&&A.length!==g.length)throw new ze.InvalidArgument("Arguments objects and keys must have the same length");var X=g.length,de=H&&de?g.map(Ls(H)):g;return k.core.mutate({trans:j,type:"add",keys:A,values:de,wantResults:N}).then(function(J){var Q=J.numFailures,te=J.failures;if(Q===0)return N?J.results:J.lastResult;throw new Fe("".concat(k.name,".bulkAdd(): ").concat(Q," of ").concat(X," operations failed"),te)})})},St.prototype.bulkPut=function(g,S,E){var k=this,A=Array.isArray(S)?S:void 0,N=(E=E||(A?void 0:S))?E.allKeys:void 0;return this._trans("readwrite",function(j){var H=k.schema.primKey,de=H.auto,H=H.keyPath;if(H&&A)throw new ze.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(A&&A.length!==g.length)throw new ze.InvalidArgument("Arguments objects and keys must have the same length");var X=g.length,de=H&&de?g.map(Ls(H)):g;return k.core.mutate({trans:j,type:"put",keys:A,values:de,wantResults:N}).then(function(J){var Q=J.numFailures,te=J.failures;if(Q===0)return N?J.results:J.lastResult;throw new Fe("".concat(k.name,".bulkPut(): ").concat(Q," of ").concat(X," operations failed"),te)})})},St.prototype.bulkUpdate=function(g){var S=this,E=this.core,k=g.map(function(j){return j.key}),A=g.map(function(j){return j.changes}),N=[];return this._trans("readwrite",function(j){return E.getMany({trans:j,keys:k,cache:"clone"}).then(function(H){var X=[],de=[],J=(g.forEach(function(Q,te){var ie=Q.key,Z=Q.changes,ee=H[te];if(ee){for(var pe=0,xe=Object.keys(Z);pe<xe.length;pe++){var he=xe[pe],ke=Z[he];if(he===S.schema.primKey.keyPath){if(ot(ke,ie)!==0)throw new ze.Constraint("Cannot update primary key in bulkUpdate()")}else P(ee,he,ke)}N.push(te),X.push(ie),de.push(ee)}}),X.length);return E.mutate({trans:j,type:"put",keys:X,values:de,updates:{keys:k,changeSpecs:A}}).then(function(Q){var te=Q.numFailures,ie=Q.failures;if(te===0)return J;for(var Z=0,ee=Object.keys(ie);Z<ee.length;Z++){var pe,xe=ee[Z],he=N[Number(xe)];he!=null&&(pe=ie[xe],delete ie[xe],ie[he]=pe)}throw new Fe("".concat(S.name,".bulkUpdate(): ").concat(te," of ").concat(J," operations failed"),ie)})})})},St.prototype.bulkDelete=function(g){var S=this,E=g.length;return this._trans("readwrite",function(k){return S.core.mutate({trans:k,type:"delete",keys:g}).then(function(A){return qn(S,g,A)})}).then(function(k){var A=k.numFailures,N=k.failures;if(A===0)return k.lastResult;throw new Fe("".concat(S.name,".bulkDelete(): ").concat(A," of ").concat(E," operations failed"),N)})};var Gl=St;function St(){}function Us(g){function S(j,H){if(H){for(var X=arguments.length,de=new Array(X-1);--X;)de[X-1]=arguments[X];return E[j].subscribe.apply(null,de),g}if(typeof j=="string")return E[j]}var E={};S.addEventType=N;for(var k=1,A=arguments.length;k<A;++k)N(arguments[k]);return S;function N(j,H,X){var de,J;if(typeof j!="object")return H=H||Zt,J={subscribers:[],fire:X=X||Xe,subscribe:function(Q){J.subscribers.indexOf(Q)===-1&&(J.subscribers.push(Q),J.fire=H(J.fire,Q))},unsubscribe:function(Q){J.subscribers=J.subscribers.filter(function(te){return te!==Q}),J.fire=J.subscribers.reduce(H,X)}},E[j]=S[j]=J;l(de=j).forEach(function(Q){var te=de[Q];if(c(te))N(Q,de[Q][0],de[Q][1]);else{if(te!=="asap")throw new ze.InvalidArgument("Invalid event config");var ie=N(Q,Xn,function(){for(var Z=arguments.length,ee=new Array(Z);Z--;)ee[Z]=arguments[Z];ie.subscribers.forEach(function(pe){$(function(){pe.apply(null,ee)})})})}})}}function zn(g,S){return T(S).from({prototype:g}),S}function Ci(g,S){return!(g.filter||g.algorithm||g.or)&&(S?g.justLimit:!g.replayFilter)}function Ro(g,S){g.filter=Ki(g.filter,S)}function Hs(g,S,E){var k=g.replayFilter;g.replayFilter=k?function(){return Ki(k(),S())}:S,g.justLimit=E&&!k}function ci(g,S){if(g.isPrimKey)return S.primaryKey;var E=S.getIndexByKeyPath(g.index);if(E)return E;throw new ze.Schema("KeyPath "+g.index+" on object store "+S.name+" is not indexed")}function Ql(g,S,E){var k=ci(g,S.schema);return S.openCursor({trans:E,values:!g.keysOnly,reverse:g.dir==="prev",unique:!!g.unique,query:{index:k,range:g.range}})}function Is(g,S,E,k){var A,N,j=g.replayFilter?Ki(g.filter,g.replayFilter()):g.filter;return g.or?(A={},N=function(H,X,de){var J,Q;j&&!j(X,de,function(te){return X.stop(te)},function(te){return X.fail(te)})||((Q=""+(J=X.primaryKey))=="[object ArrayBuffer]"&&(Q=""+new Uint8Array(J)),m(A,Q))||(A[Q]=!0,S(H,X,de))},Promise.all([g.or._iterate(N,E),$i(Ql(g,k,E),g.algorithm,N,!g.keysOnly&&g.valueMapper)])):$i(Ql(g,k,E),Ki(g.algorithm,j),S,!g.keysOnly&&g.valueMapper)}function $i(g,S,E,k){var A=Ht(k?function(N,j,H){return E(k(N),j,H)}:E);return g.then(function(N){if(N)return N.start(function(){var j=function(){return N.continue()};S&&!S(N,function(H){return j=H},function(H){N.stop(H),j=Xe},function(H){N.fail(H),j=Xe})||A(N.value,N,function(H){return j=H}),j()})})}gt.prototype._read=function(g,S){var E=this._ctx;return E.error?E.table._trans(null,_t.bind(null,E.error)):E.table._trans("readonly",g).then(S)},gt.prototype._write=function(g){var S=this._ctx;return S.error?S.table._trans(null,_t.bind(null,S.error)):S.table._trans("readwrite",g,"locked")},gt.prototype._addAlgorithm=function(g){var S=this._ctx;S.algorithm=Ki(S.algorithm,g)},gt.prototype._iterate=function(g,S){return Is(this._ctx,g,S,this._ctx.table.core)},gt.prototype.clone=function(g){var S=Object.create(this.constructor.prototype),E=Object.create(this._ctx);return g&&d(E,g),S._ctx=E,S},gt.prototype.raw=function(){return this._ctx.valueMapper=null,this},gt.prototype.each=function(g){var S=this._ctx;return this._read(function(E){return Is(S,g,E,S.table.core)})},gt.prototype.count=function(g){var S=this;return this._read(function(E){var k,A=S._ctx,N=A.table.core;return Ci(A,!0)?N.count({trans:E,query:{index:ci(A,N.schema),range:A.range}}).then(function(j){return Math.min(j,A.limit)}):(k=0,Is(A,function(){return++k,!1},E,N).then(function(){return k}))}).then(g)},gt.prototype.sortBy=function(g,S){var E=g.split(".").reverse(),k=E[0],A=E.length-1;function N(X,de){return de?N(X[E[de]],de-1):X[k]}var j=this._ctx.dir==="next"?1:-1;function H(X,de){return ot(N(X,A),N(de,A))*j}return this.toArray(function(X){return X.sort(H)}).then(S)},gt.prototype.toArray=function(g){var S=this;return this._read(function(E){var k,A,N,j=S._ctx;return j.dir==="next"&&Ci(j,!0)&&0<j.limit?(k=j.valueMapper,A=ci(j,j.table.core.schema),j.table.core.query({trans:E,limit:j.limit,values:!0,query:{index:A,range:j.range}}).then(function(H){return H=H.result,k?H.map(k):H})):(N=[],Is(j,function(H){return N.push(H)},E,j.table.core).then(function(){return N}))},g)},gt.prototype.offset=function(g){var S=this._ctx;return g<=0||(S.offset+=g,Ci(S)?Hs(S,function(){var E=g;return function(k,A){return E===0||(E===1?--E:A(function(){k.advance(E),E=0}),!1)}}):Hs(S,function(){var E=g;return function(){return--E<0}})),this},gt.prototype.limit=function(g){return this._ctx.limit=Math.min(this._ctx.limit,g),Hs(this._ctx,function(){var S=g;return function(E,k,A){return--S<=0&&k(A),0<=S}},!0),this},gt.prototype.until=function(g,S){return Ro(this._ctx,function(E,k,A){return!g(E.value)||(k(A),S)}),this},gt.prototype.first=function(g){return this.limit(1).toArray(function(S){return S[0]}).then(g)},gt.prototype.last=function(g){return this.reverse().first(g)},gt.prototype.filter=function(g){var S;return Ro(this._ctx,function(E){return g(E.value)}),(S=this._ctx).isMatch=Ki(S.isMatch,g),this},gt.prototype.and=function(g){return this.filter(g)},gt.prototype.or=function(g){return new this.db.WhereClause(this._ctx.table,g,this)},gt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},gt.prototype.desc=function(){return this.reverse()},gt.prototype.eachKey=function(g){var S=this._ctx;return S.keysOnly=!S.isMatch,this.each(function(E,k){g(k.key,k)})},gt.prototype.eachUniqueKey=function(g){return this._ctx.unique="unique",this.eachKey(g)},gt.prototype.eachPrimaryKey=function(g){var S=this._ctx;return S.keysOnly=!S.isMatch,this.each(function(E,k){g(k.primaryKey,k)})},gt.prototype.keys=function(g){var S=this._ctx,E=(S.keysOnly=!S.isMatch,[]);return this.each(function(k,A){E.push(A.key)}).then(function(){return E}).then(g)},gt.prototype.primaryKeys=function(g){var S=this._ctx;if(S.dir==="next"&&Ci(S,!0)&&0<S.limit)return this._read(function(k){var A=ci(S,S.table.core.schema);return S.table.core.query({trans:k,values:!1,limit:S.limit,query:{index:A,range:S.range}})}).then(function(k){return k.result}).then(g);S.keysOnly=!S.isMatch;var E=[];return this.each(function(k,A){E.push(A.primaryKey)}).then(function(){return E}).then(g)},gt.prototype.uniqueKeys=function(g){return this._ctx.unique="unique",this.keys(g)},gt.prototype.firstKey=function(g){return this.limit(1).keys(function(S){return S[0]}).then(g)},gt.prototype.lastKey=function(g){return this.reverse().firstKey(g)},gt.prototype.distinct=function(){var g,S=this._ctx,S=S.index&&S.table.schema.idxByName[S.index];return S&&S.multi&&(g={},Ro(this._ctx,function(k){var k=k.primaryKey.toString(),A=m(g,k);return g[k]=!0,!A})),this},gt.prototype.modify=function(g){var S=this,E=this._ctx;return this._write(function(k){function A(ee,pe){var xe=pe.failures;te+=ee-pe.numFailures;for(var he=0,ke=l(xe);he<ke.length;he++){var Ae=ke[he];Q.push(xe[Ae])}}var N=typeof g=="function"?g:function(ee){return Do(ee,g)},j=E.table.core,J=j.schema.primaryKey,H=J.outbound,X=J.extractKey,de=200,J=S.db._options.modifyChunkSize,Q=(J&&(de=typeof J=="object"?J[j.name]||J["*"]||200:J),[]),te=0,ie=[],Z=g===Wl;return S.clone().primaryKeys().then(function(ee){function pe(he){var ke=Math.min(de,ee.length-he),Ae=ee.slice(he,he+ke);return(Z?Promise.resolve([]):j.getMany({trans:k,keys:Ae,cache:"immutable"})).then(function(Le){var Be=[],Oe=[],Ie=H?[]:null,Ue=Z?Ae:[];if(!Z)for(var Ne=0;Ne<ke;++Ne){var qe=Le[Ne],et={value:ce(qe),primKey:ee[he+Ne]};N.call(et,et.value,et)!==!1&&(et.value==null?Ue.push(ee[he+Ne]):H||ot(X(qe),X(et.value))===0?(Oe.push(et.value),H&&Ie.push(ee[he+Ne])):(Ue.push(ee[he+Ne]),Be.push(et.value)))}return Promise.resolve(0<Be.length&&j.mutate({trans:k,type:"add",values:Be}).then(function(ct){for(var $e in ct.failures)Ue.splice(parseInt($e),1);A(Be.length,ct)})).then(function(){return(0<Oe.length||xe&&typeof g=="object")&&j.mutate({trans:k,type:"put",keys:Ie,values:Oe,criteria:xe,changeSpec:typeof g!="function"&&g,isAdditionalChunk:0<he}).then(function(ct){return A(Oe.length,ct)})}).then(function(){return(0<Ue.length||xe&&Z)&&j.mutate({trans:k,type:"delete",keys:Ue,criteria:xe,isAdditionalChunk:0<he}).then(function(ct){return qn(E.table,Ue,ct)}).then(function(ct){return A(Ue.length,ct)})}).then(function(){return ee.length>he+ke&&pe(he+de)})})}var xe=Ci(E)&&E.limit===1/0&&(typeof g!="function"||Z)&&{index:E.index,range:E.range};return pe(0).then(function(){if(0<Q.length)throw new _e("Error modifying one or more objects",Q,te,ie);return ee.length})})})},gt.prototype.delete=function(){var g=this._ctx,S=g.range;return!Ci(g)||g.table.schema.yProps||!g.isPrimKey&&S.type!==3?this.modify(Wl):this._write(function(E){var k=g.table.core.schema.primaryKey,A=S;return g.table.core.count({trans:E,query:{index:k,range:A}}).then(function(N){return g.table.core.mutate({trans:E,type:"deleteRange",range:A}).then(function(X){var H=X.failures,X=X.numFailures;if(X)throw new _e("Could not delete some values",Object.keys(H).map(function(de){return H[de]}),N-X);return N-X})})})};var Bh=gt;function gt(){}var Wl=function(g,S){return S.value=null};function Xl(g,S){return g<S?-1:g===S?0:1}function Uh(g,S){return S<g?-1:g===S?0:1}function dr(g,S,E){return g=g instanceof Yi?new g.Collection(g):g,g._ctx.error=new(E||TypeError)(S),g}function fi(g){return new g.Collection(g,function(){return _o("")}).limit(0)}function vr(ie,S,E,k){var A,N,j,H,X,de,J,Q=E.length;if(!E.every(function(ee){return typeof ee=="string"}))return dr(ie,pn);function te(ee){A=ee==="next"?function(xe){return xe.toUpperCase()}:function(xe){return xe.toLowerCase()},N=ee==="next"?function(xe){return xe.toLowerCase()}:function(xe){return xe.toUpperCase()},j=ee==="next"?Xl:Uh;var pe=E.map(function(xe){return{lower:N(xe),upper:A(xe)}}).sort(function(xe,he){return j(xe.lower,he.lower)});H=pe.map(function(xe){return xe.upper}),X=pe.map(function(xe){return xe.lower}),J=(de=ee)==="next"?"":k}te("next");var ie=new ie.Collection(ie,function(){return $r(H[0],X[Q-1]+k)}),Z=(ie._ondirectionchange=function(ee){te(ee)},0);return ie._addAlgorithm(function(ee,pe,xe){var he=ee.key;if(typeof he=="string"){var ke=N(he);if(S(ke,X,Z))return!0;for(var Ae=null,Le=Z;Le<Q;++Le){var Be=((Oe,Ie,Ue,Ne,qe,et)=>{for(var ct=Math.min(Oe.length,Ne.length),$e=-1,nt=0;nt<ct;++nt){var zt=Ie[nt];if(zt!==Ne[nt])return qe(Oe[nt],Ue[nt])<0?Oe.substr(0,nt)+Ue[nt]+Ue.substr(nt+1):qe(Oe[nt],Ne[nt])<0?Oe.substr(0,nt)+Ne[nt]+Ue.substr(nt+1):0<=$e?Oe.substr(0,$e)+Ie[$e]+Ue.substr($e+1):null;qe(Oe[nt],zt)<0&&($e=nt)}return ct<Ne.length&&et==="next"?Oe+Ue.substr(Oe.length):ct<Oe.length&&et==="prev"?Oe.substr(0,Ue.length):$e<0?null:Oe.substr(0,$e)+Ne[$e]+Ue.substr($e+1)})(he,ke,H[Le],X[Le],j,de);Be===null&&Ae===null?Z=Le+1:(Ae===null||0<j(Ae,Be))&&(Ae=Be)}pe(Ae!==null?function(){ee.continue(Ae+J)}:xe)}return!1}),ie}function $r(g,S,E,k){return{type:2,lower:g,upper:S,lowerOpen:E,upperOpen:k}}function _o(g){return{type:1,lower:g,upper:g}}Object.defineProperty($t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),$t.prototype.between=function(g,S,E,k){E=E!==!1,k=k===!0;try{return 0<this._cmp(g,S)||this._cmp(g,S)===0&&(E||k)&&(!E||!k)?fi(this):new this.Collection(this,function(){return $r(g,S,!E,!k)})}catch{return dr(this,Zn)}},$t.prototype.equals=function(g){return g==null?dr(this,Zn):new this.Collection(this,function(){return _o(g)})},$t.prototype.above=function(g){return g==null?dr(this,Zn):new this.Collection(this,function(){return $r(g,void 0,!0)})},$t.prototype.aboveOrEqual=function(g){return g==null?dr(this,Zn):new this.Collection(this,function(){return $r(g,void 0,!1)})},$t.prototype.below=function(g){return g==null?dr(this,Zn):new this.Collection(this,function(){return $r(void 0,g,!1,!0)})},$t.prototype.belowOrEqual=function(g){return g==null?dr(this,Zn):new this.Collection(this,function(){return $r(void 0,g)})},$t.prototype.startsWith=function(g){return typeof g!="string"?dr(this,pn):this.between(g,g+Dr,!0,!0)},$t.prototype.startsWithIgnoreCase=function(g){return g===""?this.startsWith(g):vr(this,function(S,E){return S.indexOf(E[0])===0},[g],Dr)},$t.prototype.equalsIgnoreCase=function(g){return vr(this,function(S,E){return S===E[0]},[g],"")},$t.prototype.anyOfIgnoreCase=function(){var g=le.apply(oe,arguments);return g.length===0?fi(this):vr(this,function(S,E){return E.indexOf(S)!==-1},g,"")},$t.prototype.startsWithAnyOfIgnoreCase=function(){var g=le.apply(oe,arguments);return g.length===0?fi(this):vr(this,function(S,E){return E.some(function(k){return S.indexOf(k)===0})},g,Dr)},$t.prototype.anyOf=function(){var g,S,E=this,k=le.apply(oe,arguments),A=this._cmp;try{k.sort(A)}catch{return dr(this,Zn)}return k.length===0?fi(this):((g=new this.Collection(this,function(){return $r(k[0],k[k.length-1])}))._ondirectionchange=function(N){A=N==="next"?E._ascending:E._descending,k.sort(A)},S=0,g._addAlgorithm(function(N,j,H){for(var X=N.key;0<A(X,k[S]);)if(++S===k.length)return j(H),!1;return A(X,k[S])===0||(j(function(){N.continue(k[S])}),!1)}),g)},$t.prototype.notEqual=function(g){return this.inAnyRange([[-1/0,g],[g,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},$t.prototype.noneOf=function(){var g=le.apply(oe,arguments);if(g.length===0)return new this.Collection(this);try{g.sort(this._ascending)}catch{return dr(this,Zn)}var S=g.reduce(function(E,k){return E?E.concat([[E[E.length-1][1],k]]):[[-1/0,k]]},null);return S.push([g[g.length-1],this.db._maxKey]),this.inAnyRange(S,{includeLowers:!1,includeUppers:!1})},$t.prototype.inAnyRange=function(g,xe){var E=this,k=this._cmp,A=this._ascending,N=this._descending,j=this._min,H=this._max;if(g.length===0)return fi(this);if(!g.every(function(he){return he[0]!==void 0&&he[1]!==void 0&&A(he[0],he[1])<=0}))return dr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ze.InvalidArgument);var X=!xe||xe.includeLowers!==!1,de=xe&&xe.includeUppers===!0,J,Q=A;function te(he,ke){return Q(he[0],ke[0])}try{(J=g.reduce(function(he,ke){for(var Ae=0,Le=he.length;Ae<Le;++Ae){var Be=he[Ae];if(k(ke[0],Be[1])<0&&0<k(ke[1],Be[0])){Be[0]=j(Be[0],ke[0]),Be[1]=H(Be[1],ke[1]);break}}return Ae===Le&&he.push(ke),he},[])).sort(te)}catch{return dr(this,Zn)}var ie=0,Z=de?function(he){return 0<A(he,J[ie][1])}:function(he){return 0<=A(he,J[ie][1])},ee=X?function(he){return 0<N(he,J[ie][0])}:function(he){return 0<=N(he,J[ie][0])},pe=Z,xe=new this.Collection(this,function(){return $r(J[0][0],J[J.length-1][1],!X,!de)});return xe._ondirectionchange=function(he){Q=he==="next"?(pe=Z,A):(pe=ee,N),J.sort(te)},xe._addAlgorithm(function(he,ke,Ae){for(var Le,Be=he.key;pe(Be);)if(++ie===J.length)return ke(Ae),!1;return!Z(Le=Be)&&!ee(Le)||(E._cmp(Be,J[ie][1])===0||E._cmp(Be,J[ie][0])===0||ke(function(){Q===A?he.continue(J[ie][0]):he.continue(J[ie][1])}),!1)}),xe},$t.prototype.startsWithAnyOf=function(){var g=le.apply(oe,arguments);return g.every(function(S){return typeof S=="string"})?g.length===0?fi(this):this.inAnyRange(g.map(function(S){return[S,S+Dr]})):dr(this,"startsWithAnyOf() only works with strings")};var Yi=$t;function $t(){}function Rr(g){return Ht(function(S){return Gi(S),g(S.target.error),!1})}function Gi(g){g.stopPropagation&&g.stopPropagation(),g.preventDefault&&g.preventDefault()}var _a="storagemutated",Qi="x-storagemutated-1",jn=Us(null,_a),Jl=(er.prototype._lock=function(){return F(!He.global),++this._reculock,this._reculock!==1||He.global||(He.lockOwnerFor=this),this},er.prototype._unlock=function(){if(F(!He.global),--this._reculock==0)for(He.global||(He.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var g=this._blockedFuncs.shift();try{Nr(g[1],g[0])}catch{}}return this},er.prototype._locked=function(){return this._reculock&&He.lockOwnerFor!==this},er.prototype.create=function(g){var S=this;if(this.mode){var E=this.db.idbdb,k=this.db._state.dbOpenError;if(F(!this.idbtrans),!g&&!E)switch(k&&k.name){case"DatabaseClosedError":throw new ze.DatabaseClosed(k);case"MissingAPIError":throw new ze.MissingAPI(k.message,k);default:throw new ze.OpenFailed(k)}if(!this.active)throw new ze.TransactionInactive;F(this._completion._state===null),(g=this.idbtrans=g||(this.db.core||E).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ht(function(A){Gi(A),S._reject(g.error)}),g.onabort=Ht(function(A){Gi(A),S.active&&S._reject(new ze.Abort(g.error)),S.active=!1,S.on("abort").fire(A)}),g.oncomplete=Ht(function(){S.active=!1,S._resolve(),"mutatedParts"in g&&jn.storagemutated.fire(g.mutatedParts)})}return this},er.prototype._promise=function(g,S,E){var k,A=this;return g==="readwrite"&&this.mode!=="readwrite"?_t(new ze.ReadOnly("Transaction is readonly")):this.active?this._locked()?new je(function(N,j){A._blockedFuncs.push([function(){A._promise(g,S,E).then(N,j)},He])}):E?Pt(function(){var N=new je(function(j,H){A._lock();var X=S(j,H,A);X&&X.then&&X.then(j,H)});return N.finally(function(){return A._unlock()}),N._lib=!0,N}):((k=new je(function(N,j){var H=S(N,j,A);H&&H.then&&H.then(N,j)}))._lib=!0,k):_t(new ze.TransactionInactive)},er.prototype._root=function(){return this.parent?this.parent._root():this},er.prototype.waitFor=function(g){var S,E=this._root(),k=je.resolve(g),A=(E._waitingFor?E._waitingFor=E._waitingFor.then(function(){return k}):(E._waitingFor=k,E._waitingQueue=[],S=E.idbtrans.objectStore(E.storeNames[0]),(function N(){for(++E._spinCount;E._waitingQueue.length;)E._waitingQueue.shift()();E._waitingFor&&(S.get(-1/0).onsuccess=N)})()),E._waitingFor);return new je(function(N,j){k.then(function(H){return E._waitingQueue.push(Ht(N.bind(null,H)))},function(H){return E._waitingQueue.push(Ht(j.bind(null,H)))}).finally(function(){E._waitingFor===A&&(E._waitingFor=null)})})},er.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ze.Abort))},er.prototype.table=function(g){var S=this._memoizedTables||(this._memoizedTables={});if(m(S,g))return S[g];var E=this.schema[g];if(E)return(E=new this.db.Table(g,E,this)).core=this.db.core.table(g),S[g]=E;throw new ze.NotFound("Table "+g+" not part of transaction")},er);function er(){}function Yr(g,S,E,k,A,N,j,H){return{name:g,keyPath:S,unique:E,multi:k,auto:A,compound:N,src:(E&&!j?"&":"")+(k?"*":"")+(A?"++":"")+zo(S),type:H}}function zo(g){return typeof g=="string"?g:g?"["+[].join.call(g,"+")+"]":""}function za(g,S,E){return{name:g,primKey:S,indexes:E,mappedClass:null,idxByName:(k=function(A){return[A.name,A]},E.reduce(function(A,N,j){return N=k(N,j),N&&(A[N[0]]=N[1]),A},{}))};var k}var ja=function(g){try{return g.only([[]]),ja=function(){return[[]]},[[]]}catch{return ja=function(){return Dr},Dr}};function La(g){return g==null?function(){}:typeof g=="string"?(S=g).split(".").length===1?function(E){return E[S]}:function(E){return U(E,S)}:function(E){return U(E,g)};var S}function qs(g){return[].slice.call(g)}var Uc=0;function wn(g){return g==null?":id":typeof g=="string"?g:"[".concat(g.join("+"),"]")}function Wi(g,S,X){function k(Z){if(Z.type===3)return null;if(Z.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Q=Z.lower,te=Z.upper,ie=Z.lowerOpen,Z=Z.upperOpen;return Q===void 0?te===void 0?null:S.upperBound(te,!!Z):te===void 0?S.lowerBound(Q,!!ie):S.bound(Q,te,!!ie,!!Z)}function A(J){var Q,te=J.name;return{name:te,schema:J,mutate:function(ie){var Z=ie.trans,ee=ie.type,pe=ie.keys,xe=ie.values,he=ie.range;return new Promise(function(ke,Ae){ke=Ht(ke);var Le=Z.objectStore(te),Be=Le.keyPath==null,Oe=ee==="put"||ee==="add";if(!Oe&&ee!=="delete"&&ee!=="deleteRange")throw new Error("Invalid operation type: "+ee);var Ie,Ue=(pe||xe||{length:1}).length;if(pe&&xe&&pe.length!==xe.length)throw new Error("Given keys array must have same length as given values array.");if(Ue===0)return ke({numFailures:0,failures:{},results:[],lastResult:void 0});function Ne(kt){++ct,Gi(kt)}var qe=[],et=[],ct=0;if(ee==="deleteRange"){if(he.type===4)return ke({numFailures:ct,failures:et,results:[],lastResult:void 0});he.type===3?qe.push(Ie=Le.clear()):qe.push(Ie=Le.delete(k(he)))}else{var Be=Oe?Be?[xe,pe]:[xe,null]:[pe,null],$e=Be[0],nt=Be[1];if(Oe)for(var zt=0;zt<Ue;++zt)qe.push(Ie=nt&&nt[zt]!==void 0?Le[ee]($e[zt],nt[zt]):Le[ee]($e[zt])),Ie.onerror=Ne;else for(zt=0;zt<Ue;++zt)qe.push(Ie=Le[ee]($e[zt])),Ie.onerror=Ne}function nr(kt){kt=kt.target.result,qe.forEach(function(Ni,Pa){return Ni.error!=null&&(et[Pa]=Ni.error)}),ke({numFailures:ct,failures:et,results:ee==="delete"?pe:qe.map(function(Ni){return Ni.result}),lastResult:kt})}Ie.onerror=function(kt){Ne(kt),nr(kt)},Ie.onsuccess=nr})},getMany:function(ie){var Z=ie.trans,ee=ie.keys;return new Promise(function(pe,xe){pe=Ht(pe);for(var he,ke=Z.objectStore(te),Ae=ee.length,Le=new Array(Ae),Be=0,Oe=0,Ie=function(qe){qe=qe.target,Le[qe._pos]=qe.result,++Oe===Be&&pe(Le)},Ue=Rr(xe),Ne=0;Ne<Ae;++Ne)ee[Ne]!=null&&((he=ke.get(ee[Ne]))._pos=Ne,he.onsuccess=Ie,he.onerror=Ue,++Be);Be===0&&pe(Le)})},get:function(ie){var Z=ie.trans,ee=ie.key;return new Promise(function(pe,xe){pe=Ht(pe);var he=Z.objectStore(te).get(ee);he.onsuccess=function(ke){return pe(ke.target.result)},he.onerror=Rr(xe)})},query:(Q=H,function(ie){return new Promise(function(Z,ee){Z=Ht(Z);var pe,xe,he,Oe=ie.trans,ke=ie.values,Ae=ie.limit,Be=ie.query,Le=Ae===1/0?void 0:Ae,Ie=Be.index,Be=Be.range,Oe=Oe.objectStore(te),Oe=Ie.isPrimaryKey?Oe:Oe.index(Ie.name),Ie=k(Be);if(Ae===0)return Z({result:[]});Q?((Be=ke?Oe.getAll(Ie,Le):Oe.getAllKeys(Ie,Le)).onsuccess=function(Ue){return Z({result:Ue.target.result})},Be.onerror=Rr(ee)):(pe=0,xe=!ke&&"openKeyCursor"in Oe?Oe.openKeyCursor(Ie):Oe.openCursor(Ie),he=[],xe.onsuccess=function(Ue){var Ne=xe.result;return!Ne||(he.push(ke?Ne.value:Ne.primaryKey),++pe===Ae)?Z({result:he}):void Ne.continue()},xe.onerror=Rr(ee))})}),openCursor:function(ie){var Z=ie.trans,ee=ie.values,pe=ie.query,xe=ie.reverse,he=ie.unique;return new Promise(function(ke,Ae){ke=Ht(ke);var Oe=pe.index,Le=pe.range,Be=Z.objectStore(te),Be=Oe.isPrimaryKey?Be:Be.index(Oe.name),Oe=xe?he?"prevunique":"prev":he?"nextunique":"next",Ie=!ee&&"openKeyCursor"in Be?Be.openKeyCursor(k(Le),Oe):Be.openCursor(k(Le),Oe);Ie.onerror=Rr(Ae),Ie.onsuccess=Ht(function(Ue){var Ne,qe,et,ct,$e=Ie.result;$e?($e.___id=++Uc,$e.done=!1,Ne=$e.continue.bind($e),qe=(qe=$e.continuePrimaryKey)&&qe.bind($e),et=$e.advance.bind($e),ct=function(){throw new Error("Cursor not stopped")},$e.trans=Z,$e.stop=$e.continue=$e.continuePrimaryKey=$e.advance=function(){throw new Error("Cursor not started")},$e.fail=Ht(Ae),$e.next=function(){var nt=this,zt=1;return this.start(function(){return zt--?nt.continue():nt.stop()}).then(function(){return nt})},$e.start=function(nt){function zt(){if(Ie.result)try{nt()}catch(kt){$e.fail(kt)}else $e.done=!0,$e.start=function(){throw new Error("Cursor behind last entry")},$e.stop()}var nr=new Promise(function(kt,Ni){kt=Ht(kt),Ie.onerror=Rr(Ni),$e.fail=Ni,$e.stop=function(Pa){$e.stop=$e.continue=$e.continuePrimaryKey=$e.advance=ct,kt(Pa)}});return Ie.onsuccess=Ht(function(kt){Ie.onsuccess=zt,zt()}),$e.continue=Ne,$e.continuePrimaryKey=qe,$e.advance=et,zt(),nr},ke($e)):ke(null)},Ae)})},count:function(ie){var Z=ie.query,ee=ie.trans,pe=Z.index,xe=Z.range;return new Promise(function(he,ke){var Ae=ee.objectStore(te),Ae=pe.isPrimaryKey?Ae:Ae.index(pe.name),Le=k(xe),Le=Le?Ae.count(Le):Ae.count();Le.onsuccess=Ht(function(Be){return he(Be.target.result)}),Le.onerror=Rr(ke)})}}}N=X,j=qs((X=g).objectStoreNames);var N,X={schema:{name:X.name,tables:j.map(function(J){return N.objectStore(J)}).map(function(J){var Q=J.keyPath,te=J.autoIncrement,Z=c(Q),ie={},Z={name:J.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Q==null,compound:Z,keyPath:Q,autoIncrement:te,unique:!0,extractKey:La(Q)},indexes:qs(J.indexNames).map(function(ee){return J.index(ee)}).map(function(he){var ke=he.name,pe=he.unique,xe=he.multiEntry,he=he.keyPath,ke={name:ke,compound:c(he),keyPath:he,unique:pe,multiEntry:xe,extractKey:La(he)};return ie[wn(he)]=ke}),getIndexByKeyPath:function(ee){return ie[wn(ee)]}};return ie[":id"]=Z.primaryKey,Q!=null&&(ie[wn(Q)]=Z.primaryKey),Z})},hasGetAll:0<j.length&&"getAll"in N.objectStore(j[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},j=X.schema,H=X.hasGetAll,X=j.tables.map(A),de={};return X.forEach(function(J){return de[J.name]=J}),{stack:"dbcore",transaction:g.transaction.bind(g),table:function(J){if(de[J])return de[J];throw new Error("Table '".concat(J,"' not found"))},MIN_KEY:-1/0,MAX_KEY:ja(S),schema:j}}function jo(g,S,E,k){return E=E.IDBKeyRange,S=Wi(S,E,k),{dbcore:g.dbcore.reduce(function(A,N){return N=N.create,r(r({},A),N(A))},S)}}function Mi(g,S){var E=S.db,E=jo(g._middlewares,E,g._deps,S);g.core=E.dbcore,g.tables.forEach(function(k){var A=k.name;g.core.schema.tables.some(function(N){return N.name===A})&&(k.core=g.core.table(A),g[A]instanceof g.Table)&&(g[A].core=k.core)})}function Lo(g,S,E,k){E.forEach(function(A){var N=k[A];S.forEach(function(j){var H=(function X(de,J){return M(de,J)||(de=h(de))&&X(de,J)})(j,A);(!H||"value"in H&&H.value===void 0)&&(j===g.Transaction.prototype||j instanceof g.Transaction?w(j,A,{get:function(){return this.table(A)},set:function(X){x(this,A,{value:X,writable:!0,configurable:!0,enumerable:!0})}}):j[A]=new g.Table(A,N))})})}function Ps(g,S){S.forEach(function(E){for(var k in E)E[k]instanceof g.Table&&delete E[k]})}function Zl(g,S){return g._cfg.version-S._cfg.version}function Vs(g,S,E,k){var A=g._dbSchema,N=(E.objectStoreNames.contains("$meta")&&!A.$meta&&(A.$meta=za("$meta",Ic("")[0],[]),g._storeNames.push("$meta")),g._createTransaction("readwrite",g._storeNames,A)),j=(N.create(E),N._completion.catch(k),N._reject.bind(N)),H=He.transless||He;Pt(function(){if(He.trans=N,He.transless=H,S!==0)return Mi(g,E),de=S,((X=N).storeNames.includes("$meta")?X.table("$meta").get("version").then(function(J){return J??de}):je.resolve(de)).then(function(pe){var Q=g,te=pe,ie=N,Z=E,ee=[],pe=Q._versions,xe=Q._dbSchema=Ba(0,Q.idbdb,Z);return(pe=pe.filter(function(he){return he._cfg.version>=te})).length===0?je.resolve():(pe.forEach(function(he){ee.push(function(){var ke,Ae,Le,Be=xe,Oe=he._cfg.dbschema,Ie=(Io(Q,Be,Z),Io(Q,Oe,Z),xe=Q._dbSchema=Oe,Uo(Be,Oe)),Ue=(Ie.add.forEach(function(Ne){eu(Z,Ne[0],Ne[1].primKey,Ne[1].indexes)}),Ie.change.forEach(function(Ne){if(Ne.recreate)throw new ze.Upgrade("Not yet support for changing primary key");var qe=Z.objectStore(Ne.name);Ne.add.forEach(function(et){return Ho(qe,et)}),Ne.change.forEach(function(et){qe.deleteIndex(et.name),Ho(qe,et)}),Ne.del.forEach(function(et){return qe.deleteIndex(et)})}),he._cfg.contentUpgrade);if(Ue&&he._cfg.version>te)return Mi(Q,Z),ie._memoizedTables={},ke=z(Oe),Ie.del.forEach(function(Ne){ke[Ne]=Be[Ne]}),Ps(Q,[Q.Transaction.prototype]),Lo(Q,[Q.Transaction.prototype],l(ke),ke),ie.schema=ke,(Ae=I(Ue))&&hn(),Oe=je.follow(function(){var Ne;(Le=Ue(ie))&&Ae&&(Ne=fr.bind(null,null),Le.then(Ne,Ne))}),Le&&typeof Le.then=="function"?je.resolve(Le):Oe.then(function(){return Le})}),ee.push(function(ke){var Ae,Le,Be=he._cfg.dbschema;Ae=Be,Le=ke,[].slice.call(Le.db.objectStoreNames).forEach(function(Oe){return Ae[Oe]==null&&Le.db.deleteObjectStore(Oe)}),Ps(Q,[Q.Transaction.prototype]),Lo(Q,[Q.Transaction.prototype],Q._storeNames,Q._dbSchema),ie.schema=Q._dbSchema}),ee.push(function(ke){Q.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(Q.idbdb.version/10)===he._cfg.version?(Q.idbdb.deleteObjectStore("$meta"),delete Q._dbSchema.$meta,Q._storeNames=Q._storeNames.filter(function(Ae){return Ae!=="$meta"})):ke.objectStore("$meta").put(he._cfg.version,"version"))})}),(function he(){return ee.length?je.resolve(ee.shift()(ie.idbtrans)).then(he):je.resolve()})().then(function(){Hc(xe,Z)}))}).catch(j);var X,de;l(A).forEach(function(J){eu(E,J,A[J].primKey,A[J].indexes)}),Mi(g,E),je.follow(function(){return g.on.populate.fire(N)}).catch(j)})}function Bo(g,S){Hc(g._dbSchema,S),S.db.version%10!=0||S.objectStoreNames.contains("$meta")||S.db.createObjectStore("$meta").add(Math.ceil(S.db.version/10-1),"version");var E=Ba(0,g.idbdb,S);Io(g,g._dbSchema,S);for(var k=0,A=Uo(E,g._dbSchema).change;k<A.length;k++){var N=(j=>{if(j.change.length||j.recreate)return console.warn("Unable to patch indexes of table ".concat(j.name," because it has changes on the type of index or primary key.")),{value:void 0};var H=S.objectStore(j.name);j.add.forEach(function(X){mt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(j.name,".").concat(X.src)),Ho(H,X)})})(A[k]);if(typeof N=="object")return N.value}}function Uo(g,S){var E,k={del:[],add:[],change:[]};for(E in g)S[E]||k.del.push(E);for(E in S){var A=g[E],N=S[E];if(A){var j={name:E,def:N,recreate:!1,del:[],add:[],change:[]};if(""+(A.primKey.keyPath||"")!=""+(N.primKey.keyPath||"")||A.primKey.auto!==N.primKey.auto)j.recreate=!0,k.change.push(j);else{var H=A.idxByName,X=N.idxByName,de=void 0;for(de in H)X[de]||j.del.push(de);for(de in X){var J=H[de],Q=X[de];J?J.src!==Q.src&&j.change.push(Q):j.add.push(Q)}(0<j.del.length||0<j.add.length||0<j.change.length)&&k.change.push(j)}}else k.add.push([E,N])}return k}function eu(g,S,E,k){var A=g.db.createObjectStore(S,E.keyPath?{keyPath:E.keyPath,autoIncrement:E.auto}:{autoIncrement:E.auto});k.forEach(function(N){return Ho(A,N)})}function Hc(g,S){l(g).forEach(function(E){S.db.objectStoreNames.contains(E)||(mt&&console.debug("Dexie: Creating missing table",E),eu(S,E,g[E].primKey,g[E].indexes))})}function Ho(g,S){g.createIndex(S.name,S.keyPath,{unique:S.unique,multiEntry:S.multi})}function Ba(g,S,E){var k={};return q(S.objectStoreNames,0).forEach(function(A){for(var N=E.objectStore(A),j=Yr(zo(de=N.keyPath),de||"",!0,!1,!!N.autoIncrement,de&&typeof de!="string",!0),H=[],X=0;X<N.indexNames.length;++X){var J=N.index(N.indexNames[X]),de=J.keyPath,J=Yr(J.name,de,!!J.unique,!!J.multiEntry,!1,de&&typeof de!="string",!1);H.push(J)}k[A]=za(A,j,H)}),k}function Io(g,S,E){for(var k=E.db.objectStoreNames,A=0;A<k.length;++A){var N=k[A],j=E.objectStore(N);g._hasGetAll="getAll"in j;for(var H=0;H<j.indexNames.length;++H){var X,de=j.indexNames[H],J=j.index(de).keyPath,J=typeof J=="string"?J:"["+q(J).join("+")+"]";S[N]&&(X=S[N].idxByName[J])&&(X.name=de,delete S[N].idxByName[J],S[N].idxByName[de]=X)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(g._hasGetAll=!1)}function Ic(g){return g.split(",").map(function(S,E){var A=S.split(":"),k=(k=A[1])==null?void 0:k.trim(),A=(S=A[0].trim()).replace(/([&*]|\+\+)/g,""),N=/^\[/.test(A)?A.match(/^\[(.*)\]$/)[1].split("+"):A;return Yr(A,N||null,/\&/.test(S),/\*/.test(S),/\+\+/.test(S),c(N),E===0,k)})}Ua.prototype._createTableSchema=za,Ua.prototype._parseIndexSyntax=Ic,Ua.prototype._parseStoresSpec=function(g,S){var E=this;l(g).forEach(function(k){if(g[k]!==null){var A=E._parseIndexSyntax(g[k]),N=A.shift();if(!N)throw new ze.Schema("Invalid schema for table "+k+": "+g[k]);if(N.unique=!0,N.multi)throw new ze.Schema("Primary key cannot be multiEntry*");A.forEach(function(j){if(j.auto)throw new ze.Schema("Only primary key can be marked as autoIncrement (++)");if(!j.keyPath)throw new ze.Schema("Index must have a name and cannot be an empty string")}),N=E._createTableSchema(k,N,A),S[k]=N}})},Ua.prototype.stores=function(E){var S=this.db,E=(this._cfg.storesSource=this._cfg.storesSource?d(this._cfg.storesSource,E):E,S._versions),k={},A={};return E.forEach(function(N){d(k,N._cfg.storesSource),A=N._cfg.dbschema={},N._parseStoresSpec(k,A)}),S._dbSchema=A,Ps(S,[S._allTables,S,S.Transaction.prototype]),Lo(S,[S._allTables,S,S.Transaction.prototype,this._cfg.tables],l(A),A),S._storeNames=l(A),this},Ua.prototype.upgrade=function(g){return this._cfg.contentUpgrade=en(this._cfg.contentUpgrade||Xe,g),this};var Hh=Ua;function Ua(){}function tu(g,S){var E=g._dbNamesDB;return E||(E=g._dbNamesDB=new Gr(js,{addons:[],indexedDB:g,IDBKeyRange:S})).version(1).stores({dbnames:"name"}),E.table("dbnames")}function qo(g){return g&&typeof g.databases=="function"}function nu(g){return Pt(function(){return He.letThrough=!0,g()})}function ru(g){return!("from"in g)}var Ln=function(g,S){var E;if(!this)return E=new Ln,g&&"d"in g&&d(E,g),E;d(this,arguments.length?{d:1,from:g,to:1<arguments.length?S:g}:{d:0})};function Fs(g,S,E){var k=ot(S,E);if(!isNaN(k)){if(0<k)throw RangeError();if(ru(g))return d(g,{from:S,to:E,d:1});var k=g.l,A=g.r;if(ot(E,g.from)<0)return k?Fs(k,S,E):g.l={from:S,to:E,d:1,l:null,r:null},Pc(g);if(0<ot(S,g.to))return A?Fs(A,S,E):g.r={from:S,to:E,d:1,l:null,r:null},Pc(g);ot(S,g.from)<0&&(g.from=S,g.l=null,g.d=A?A.d+1:1),0<ot(E,g.to)&&(g.to=E,g.r=null,g.d=g.l?g.l.d+1:1),S=!g.r,k&&!g.l&&Xi(g,k),A&&S&&Xi(g,A)}}function Xi(g,S){ru(S)||(function E(k,A){var N=A.from,j=A.l,H=A.r;Fs(k,N,A.to),j&&E(k,j),H&&E(k,H)})(g,S)}function qc(g,S){var E=Po(S),k=E.next();if(!k.done)for(var A=k.value,N=Po(g),j=N.next(A.from),H=j.value;!k.done&&!j.done;){if(ot(H.from,A.to)<=0&&0<=ot(H.to,A.from))return!0;ot(A.from,H.from)<0?A=(k=E.next(H.from)).value:H=(j=N.next(A.from)).value}return!1}function Po(g){var S=ru(g)?null:{s:0,n:g};return{next:function(E){for(var k=0<arguments.length;S;)switch(S.s){case 0:if(S.s=1,k)for(;S.n.l&&ot(E,S.n.from)<0;)S={up:S,n:S.n.l,s:1};else for(;S.n.l;)S={up:S,n:S.n.l,s:1};case 1:if(S.s=2,!k||ot(E,S.n.to)<=0)return{value:S.n,done:!1};case 2:if(S.n.r){S.s=3,S={up:S,n:S.n.r,s:0};continue}case 3:S=S.up}return{done:!0}}}}function Pc(g){var S,E,k,A=(((A=g.r)==null?void 0:A.d)||0)-(((A=g.l)==null?void 0:A.d)||0),A=1<A?"r":A<-1?"l":"";A&&(S=A=="r"?"l":"r",E=r({},g),k=g[A],g.from=k.from,g.to=k.to,g[A]=k[A],E[A]=k[S],(g[S]=E).d=iu(E)),g.d=iu(g)}function iu(E){var S=E.r,E=E.l;return(S?E?Math.max(S.d,E.d):S.d:E?E.d:0)+1}function Vo(g,S){return l(S).forEach(function(E){g[E]?Xi(g[E],S[E]):g[E]=(function k(A){var N,j,H={};for(N in A)m(A,N)&&(j=A[N],H[N]=!j||typeof j!="object"||se.has(j.constructor)?j:k(j));return H})(S[E])}),g}function au(g,S){return g.all||S.all||Object.keys(g).some(function(E){return S[E]&&qc(S[E],g[E])})}v(Ln.prototype,((Vt={add:function(g){return Xi(this,g),this},addKey:function(g){return Fs(this,g,g),this},addKeys:function(g){var S=this;return g.forEach(function(E){return Fs(S,E,E)}),this},hasKey:function(g){var S=Po(this).next(g).value;return S&&ot(S.from,g)<=0&&0<=ot(S.to,g)}})[D]=function(){return Po(this)},Vt));var Ji={},su={},ou=!1;function Fo(g){Vo(su,g),ou||(ou=!0,setTimeout(function(){ou=!1,lu(su,!(su={}))},0))}function lu(g,S){S===void 0&&(S=!1);var E=new Set;if(g.all)for(var k=0,A=Object.values(Ji);k<A.length;k++)Vc(H=A[k],g,E,S);else for(var N in g){var j,H,N=/^idb\:\/\/(.*)\/(.*)\//.exec(N);N&&(j=N[1],N=N[2],H=Ji["idb://".concat(j,"/").concat(N)])&&Vc(H,g,E,S)}E.forEach(function(X){return X()})}function Vc(g,S,E,k){for(var A=[],N=0,j=Object.entries(g.queries.query);N<j.length;N++){for(var H=j[N],X=H[0],de=[],J=0,Q=H[1];J<Q.length;J++){var te=Q[J];au(S,te.obsSet)?te.subscribers.forEach(function(pe){return E.add(pe)}):k&&de.push(te)}k&&A.push([X,de])}if(k)for(var ie=0,Z=A;ie<Z.length;ie++){var ee=Z[ie],X=ee[0],de=ee[1];g.queries.query[X]=de}}function Ih(g){var S=g._state,E=g._deps.indexedDB;if(S.isBeingOpened||g.idbdb)return S.dbReadyPromise.then(function(){return S.dbOpenError?_t(S.dbOpenError):g});S.isBeingOpened=!0,S.dbOpenError=null,S.openComplete=!1;var k=S.openCanceller,A=Math.round(10*g.verno),N=!1;function j(){if(S.openCanceller!==k)throw new ze.DatabaseClosed("db.open() was cancelled")}function H(){return new je(function(te,ie){if(j(),!E)throw new ze.MissingAPI;var Z=g.name,ee=S.autoSchema||!A?E.open(Z):E.open(Z,A);if(!ee)throw new ze.MissingAPI;ee.onerror=Rr(ie),ee.onblocked=Ht(g._fireOnBlocked),ee.onupgradeneeded=Ht(function(pe){var xe;J=ee.transaction,S.autoSchema&&!g._options.allowEmptyDB?(ee.onerror=Gi,J.abort(),ee.result.close(),(xe=E.deleteDatabase(Z)).onsuccess=xe.onerror=Ht(function(){ie(new ze.NoSuchDatabase("Database ".concat(Z," doesnt exist")))})):(J.onerror=Rr(ie),xe=pe.oldVersion>Math.pow(2,62)?0:pe.oldVersion,Q=xe<1,g.idbdb=ee.result,N&&Bo(g,J),Vs(g,xe/10,J,ie))},ie),ee.onsuccess=Ht(function(){J=null;var pe,xe,he,ke,Ae,Le,Be=g.idbdb=ee.result,Oe=q(Be.objectStoreNames);if(0<Oe.length)try{var Ie=Be.transaction((Ae=Oe).length===1?Ae[0]:Ae,"readonly");if(S.autoSchema)Le=Be,ke=Ie,(he=g).verno=Le.version/10,ke=he._dbSchema=Ba(0,Le,ke),he._storeNames=q(Le.objectStoreNames,0),Lo(he,[he._allTables],l(ke),ke);else if(Io(g,g._dbSchema,Ie),xe=Ie,((xe=Uo(Ba(0,(pe=g).idbdb,xe),pe._dbSchema)).add.length||xe.change.some(function(Ue){return Ue.add.length||Ue.change.length}))&&!N)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Be.close(),A=Be.version+1,N=!0,te(H());Mi(g,Ie)}catch{}Fi.push(g),Be.onversionchange=Ht(function(Ue){S.vcFired=!0,g.on("versionchange").fire(Ue)}),Be.onclose=Ht(function(){g.close({disableAutoOpen:!1})}),Q&&(Oe=g._deps,Ae=Z,qo(Le=Oe.indexedDB)||Ae===js||tu(Le,Oe.IDBKeyRange).put({name:Ae}).catch(Xe)),te()},ie)}).catch(function(te){switch(te?.name){case"UnknownError":if(0<S.PR1398_maxLoop)return S.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),H();break;case"VersionError":if(0<A)return A=0,H()}return je.reject(te)})}var X,de=S.dbReadyResolve,J=null,Q=!1;return je.race([k,(typeof navigator>"u"?je.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(te){function ie(){return indexedDB.databases().finally(te)}X=setInterval(ie,100),ie()}).finally(function(){return clearInterval(X)}):Promise.resolve()).then(H)]).then(function(){return j(),S.onReadyBeingFired=[],je.resolve(nu(function(){return g.on.ready.fire(g.vip)})).then(function te(){var ie;if(0<S.onReadyBeingFired.length)return ie=S.onReadyBeingFired.reduce(en,Xe),S.onReadyBeingFired=[],je.resolve(nu(function(){return ie(g.vip)})).then(te)})}).finally(function(){S.openCanceller===k&&(S.onReadyBeingFired=null,S.isBeingOpened=!1)}).catch(function(te){S.dbOpenError=te;try{J&&J.abort()}catch{}return k===S.openCanceller&&g._close(),_t(te)}).finally(function(){S.openComplete=!0,de()}).then(function(){var te;return Q&&(te={},g.tables.forEach(function(ie){ie.schema.indexes.forEach(function(Z){Z.name&&(te["idb://".concat(g.name,"/").concat(ie.name,"/").concat(Z.name)]=new Ln(-1/0,[[[]]]))}),te["idb://".concat(g.name,"/").concat(ie.name,"/")]=te["idb://".concat(g.name,"/").concat(ie.name,"/:dels")]=new Ln(-1/0,[[[]]])}),jn(_a).fire(te),lu(te,!0)),g})}function Ks(g){function S(N){return g.next(N)}var E=A(S),k=A(function(N){return g.throw(N)});function A(N){return function(H){var H=N(H),X=H.value;return H.done?X:X&&typeof X.then=="function"?X.then(E,k):c(X)?Promise.all(X).then(E,k):E(X)}}return A(S)()}function Ai(g,S,E){for(var k=c(g)?g.slice():[g],A=0;A<E;++A)k.push(S);return k}var qh={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(g){return r(r({},g),{table:function(k){var E=g.table(k),k=E.schema,A={},N=[];function j(te,ie,Z){var he=wn(te),ee=A[he]=A[he]||[],pe=te==null?0:typeof te=="string"?1:te.length,xe=0<ie,he=r(r({},Z),{name:xe?"".concat(he,"(virtual-from:").concat(Z.name,")"):Z.name,lowLevelIndex:Z,isVirtual:xe,keyTail:ie,keyLength:pe,extractKey:La(te),unique:!xe&&Z.unique});return ee.push(he),he.isPrimaryKey||N.push(he),1<pe&&j(pe===2?te[0]:te.slice(0,pe-1),ie+1,Z),ee.sort(function(ke,Ae){return ke.keyTail-Ae.keyTail}),he}var H=j(k.primaryKey.keyPath,0,k.primaryKey);A[":id"]=[H];for(var X=0,de=k.indexes;X<de.length;X++){var J=de[X];j(J.keyPath,0,J)}function Q(te){var ie,Z=te.query.index;return Z.isVirtual?r(r({},te),{query:{index:Z.lowLevelIndex,range:(ie=te.query.range,Z=Z.keyTail,{type:ie.type===1?2:ie.type,lower:Ai(ie.lower,ie.lowerOpen?g.MAX_KEY:g.MIN_KEY,Z),lowerOpen:!0,upper:Ai(ie.upper,ie.upperOpen?g.MIN_KEY:g.MAX_KEY,Z),upperOpen:!0})}}):te}return r(r({},E),{schema:r(r({},k),{primaryKey:H,indexes:N,getIndexByKeyPath:function(te){return(te=A[wn(te)])&&te[0]}}),count:function(te){return E.count(Q(te))},query:function(te){return E.query(Q(te))},openCursor:function(te){var ie=te.query.index,Z=ie.keyTail,ee=ie.keyLength;return ie.isVirtual?E.openCursor(Q(te)).then(function(xe){return xe&&pe(xe)}):E.openCursor(te);function pe(xe){return Object.create(xe,{continue:{value:function(he){he!=null?xe.continue(Ai(he,te.reverse?g.MAX_KEY:g.MIN_KEY,Z)):te.unique?xe.continue(xe.key.slice(0,ee).concat(te.reverse?g.MIN_KEY:g.MAX_KEY,Z)):xe.continue()}},continuePrimaryKey:{value:function(he,ke){xe.continuePrimaryKey(Ai(he,g.MAX_KEY,Z),ke)}},primaryKey:{get:function(){return xe.primaryKey}},key:{get:function(){var he=xe.key;return ee===1?he[0]:he.slice(0,ee)}},value:{get:function(){return xe.value}}})}}})}})}};function Ko(g,S,E,k){return E=E||{},k=k||"",l(g).forEach(function(A){var N,j,H;m(S,A)?(N=g[A],j=S[A],typeof N=="object"&&typeof j=="object"&&N&&j?(H=fe(N))!==fe(j)?E[k+A]=S[A]:H==="Object"?Ko(N,j,E,k+A+"."):N!==j&&(E[k+A]=S[A]):N!==j&&(E[k+A]=S[A])):E[k+A]=void 0}),l(S).forEach(function(A){m(g,A)||(E[k+A]=S[A])}),E}function $o(g,S){return S.type==="delete"?S.keys:S.keys||S.values.map(g.extractKey)}var Fc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(g){return r(r({},g),{table:function(S){var E=g.table(S),k=E.schema.primaryKey;return r(r({},E),{mutate:function(A){var N=He.trans,j=N.table(S).hook,H=j.deleting,X=j.creating,de=j.updating;switch(A.type){case"add":if(X.fire===Xe)break;return N._promise("readwrite",function(){return J(A)},!0);case"put":if(X.fire===Xe&&de.fire===Xe)break;return N._promise("readwrite",function(){return J(A)},!0);case"delete":if(H.fire===Xe)break;return N._promise("readwrite",function(){return J(A)},!0);case"deleteRange":if(H.fire===Xe)break;return N._promise("readwrite",function(){return(function Q(te,ie,Z){return E.query({trans:te,values:!1,query:{index:k,range:ie},limit:Z}).then(function(ee){var pe=ee.result;return J({type:"delete",keys:pe,trans:te}).then(function(xe){return 0<xe.numFailures?Promise.reject(xe.failures[0]):pe.length<Z?{failures:[],numFailures:0,lastResult:void 0}:Q(te,r(r({},ie),{lower:pe[pe.length-1],lowerOpen:!0}),Z)})})})(A.trans,A.range,1e4)},!0)}return E.mutate(A);function J(Q){var te,ie,Z,ee=He.trans,pe=Q.keys||$o(k,Q);if(pe)return(Q=Q.type==="add"||Q.type==="put"?r(r({},Q),{keys:pe}):r({},Q)).type!=="delete"&&(Q.values=a([],Q.values)),Q.keys&&(Q.keys=a([],Q.keys)),te=E,Z=pe,((ie=Q).type==="add"?Promise.resolve([]):te.getMany({trans:ie.trans,keys:Z,cache:"immutable"})).then(function(xe){var he=pe.map(function(ke,Ae){var Le,Be,Oe,Ie=xe[Ae],Ue={onerror:null,onsuccess:null};return Q.type==="delete"?H.fire.call(Ue,ke,Ie,ee):Q.type==="add"||Ie===void 0?(Le=X.fire.call(Ue,ke,Q.values[Ae],ee),ke==null&&Le!=null&&(Q.keys[Ae]=ke=Le,k.outbound||P(Q.values[Ae],k.keyPath,ke))):(Le=Ko(Ie,Q.values[Ae]),(Be=de.fire.call(Ue,Le,ke,Ie,ee))&&(Oe=Q.values[Ae],Object.keys(Be).forEach(function(Ne){m(Oe,Ne)?Oe[Ne]=Be[Ne]:P(Oe,Ne,Be[Ne])}))),Ue});return E.mutate(Q).then(function(ke){for(var Ae=ke.failures,Le=ke.results,Be=ke.numFailures,ke=ke.lastResult,Oe=0;Oe<pe.length;++Oe){var Ie=(Le||pe)[Oe],Ue=he[Oe];Ie==null?Ue.onerror&&Ue.onerror(Ae[Oe]):Ue.onsuccess&&Ue.onsuccess(Q.type==="put"&&xe[Oe]?Q.values[Oe]:Ie)}return{failures:Ae,results:Le,numFailures:Be,lastResult:ke}}).catch(function(ke){return he.forEach(function(Ae){return Ae.onerror&&Ae.onerror(ke)}),Promise.reject(ke)})});throw new Error("Keys missing")}}})}})}};function uu(g,S,E){try{if(!S||S.keys.length<g.length)return null;for(var k=[],A=0,N=0;A<S.keys.length&&N<g.length;++A)ot(S.keys[A],g[N])===0&&(k.push(E?ce(S.values[A]):S.values[A]),++N);return k.length===g.length?k:null}catch{return null}}var Kc={stack:"dbcore",level:-1,create:function(g){return{table:function(S){var E=g.table(S);return r(r({},E),{getMany:function(k){var A;return k.cache?(A=uu(k.keys,k.trans._cache,k.cache==="clone"))?je.resolve(A):E.getMany(k).then(function(N){return k.trans._cache={keys:k.keys,values:k.cache==="clone"?ce(N):N},N}):E.getMany(k)},mutate:function(k){return k.type!=="add"&&(k.trans._cache=null),E.mutate(k)}})}}}};function Zi(g,S){return g.trans.mode==="readonly"&&!!g.subscr&&!g.trans.explicit&&g.trans.db._options.cache!=="disabled"&&!S.schema.primaryKey.outbound}function $c(g,S){switch(g){case"query":return S.values&&!S.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ph={stack:"dbcore",level:0,name:"Observability",create:function(g){var S=g.schema.name,E=new Ln(g.MIN_KEY,g.MAX_KEY);return r(r({},g),{transaction:function(k,A,N){if(He.subscr&&A!=="readonly")throw new ze.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(He.querier));return g.transaction(k,A,N)},table:function(k){function A(pe){var ee,pe=pe.query;return[ee=pe.index,new Ln((ee=(pe=pe.range).lower)!=null?ee:g.MIN_KEY,(ee=pe.upper)!=null?ee:g.MAX_KEY)]}var N=g.table(k),j=N.schema,H=j.primaryKey,X=j.indexes,de=H.extractKey,J=H.outbound,Q=H.autoIncrement&&X.filter(function(Z){return Z.compound&&Z.keyPath.includes(H.keyPath)}),te=r(r({},N),{mutate:function(Z){function ee(qe){return qe="idb://".concat(S,"/").concat(k,"/").concat(qe),Ae[qe]||(Ae[qe]=new Ln)}var pe,xe,he,ke=Z.trans,Ae=Z.mutatedParts||(Z.mutatedParts={}),Le=ee(""),Be=ee(":dels"),Oe=Z.type,Ue=Z.type==="deleteRange"?[Z.range]:Z.type==="delete"?[Z.keys]:Z.values.length<50?[$o(H,Z).filter(function(qe){return qe}),Z.values]:[],Ie=Ue[0],Ue=Ue[1],Ne=Z.trans._cache;return c(Ie)?(Le.addKeys(Ie),(Oe=Oe==="delete"||Ie.length===Ue.length?uu(Ie,Ne):null)||Be.addKeys(Ie),(Oe||Ue)&&(pe=ee,xe=Oe,he=Ue,j.indexes.forEach(function(qe){var et=pe(qe.name||"");function ct(nt){return nt!=null?qe.extractKey(nt):null}function $e(nt){qe.multiEntry&&c(nt)?nt.forEach(function(zt){return et.addKey(zt)}):et.addKey(nt)}(xe||he).forEach(function(nt,kt){var nr=xe&&ct(xe[kt]),kt=he&&ct(he[kt]);ot(nr,kt)!==0&&(nr!=null&&$e(nr),kt!=null)&&$e(kt)})}))):Ie?(Ue={from:(Ne=Ie.lower)!=null?Ne:g.MIN_KEY,to:(Oe=Ie.upper)!=null?Oe:g.MAX_KEY},Be.add(Ue),Le.add(Ue)):(Le.add(E),Be.add(E),j.indexes.forEach(function(qe){return ee(qe.name).add(E)})),N.mutate(Z).then(function(qe){return!Ie||Z.type!=="add"&&Z.type!=="put"||(Le.addKeys(qe.results),Q&&Q.forEach(function(et){for(var ct=Z.values.map(function(nr){return et.extractKey(nr)}),$e=et.keyPath.findIndex(function(nr){return nr===H.keyPath}),nt=0,zt=qe.results.length;nt<zt;++nt)ct[nt][$e]=qe.results[nt];ee(et.name).addKeys(ct)})),ke.mutatedParts=Vo(ke.mutatedParts||{},Ae),qe})}}),ie={get:function(Z){return[H,new Ln(Z.key)]},getMany:function(Z){return[H,new Ln().addKeys(Z.keys)]},count:A,query:A,openCursor:A};return l(ie).forEach(function(Z){te[Z]=function(ee){var pe=He.subscr,xe=!!pe,he=Zi(He,N)&&$c(Z,ee)?ee.obsSet={}:pe;if(xe){var ke,pe=function(Ue){return Ue="idb://".concat(S,"/").concat(k,"/").concat(Ue),he[Ue]||(he[Ue]=new Ln)},Ae=pe(""),Le=pe(":dels"),xe=ie[Z](ee),Be=xe[0],xe=xe[1];if((Z==="query"&&Be.isPrimaryKey&&!ee.values?Le:pe(Be.name||"")).add(xe),!Be.isPrimaryKey){if(Z!=="count")return ke=Z==="query"&&J&&ee.values&&N.query(r(r({},ee),{values:!1})),N[Z].apply(this,arguments).then(function(Ue){if(Z==="query"){if(J&&ee.values)return ke.then(function(ct){return ct=ct.result,Ae.addKeys(ct),Ue});var Ne=ee.values?Ue.result.map(de):Ue.result;(ee.values?Ae:Le).addKeys(Ne)}else{var qe,et;if(Z==="openCursor")return et=ee.values,(qe=Ue)&&Object.create(qe,{key:{get:function(){return Le.addKey(qe.primaryKey),qe.key}},primaryKey:{get:function(){var ct=qe.primaryKey;return Le.addKey(ct),ct}},value:{get:function(){return et&&Ae.addKey(qe.primaryKey),qe.value}}})}return Ue});Le.add(E)}}return N[Z].apply(this,arguments)}}),te}})}};function Yc(g,S,E){var k;return E.numFailures===0?S:S.type==="deleteRange"||(k=S.keys?S.keys.length:"values"in S&&S.values?S.values.length:1,E.numFailures===k)?null:(k=r({},S),c(k.keys)&&(k.keys=k.keys.filter(function(A,N){return!(N in E.failures)})),"values"in k&&c(k.values)&&(k.values=k.values.filter(function(A,N){return!(N in E.failures)})),k)}function Yo(g,S){return E=g,((k=S).lower===void 0||(k.lowerOpen?0<ot(E,k.lower):0<=ot(E,k.lower)))&&(E=g,(k=S).upper===void 0||(k.upperOpen?ot(E,k.upper)<0:ot(E,k.upper)<=0));var E,k}function cu(g,S,E,k,A,N){var j,H,X,de,J,Q;return!E||E.length===0||(j=S.query.index,H=j.multiEntry,X=S.query.range,de=k.schema.primaryKey.extractKey,J=j.extractKey,Q=(j.lowLevelIndex||j).extractKey,(k=E.reduce(function(te,ie){var Z=te,ee=[];if(ie.type==="add"||ie.type==="put")for(var pe=new Ln,xe=ie.values.length-1;0<=xe;--xe){var he,ke=ie.values[xe],Ae=de(ke);!pe.hasKey(Ae)&&(he=J(ke),H&&c(he)?he.some(function(Ue){return Yo(Ue,X)}):Yo(he,X))&&(pe.addKey(Ae),ee.push(ke))}switch(ie.type){case"add":var Le=new Ln().addKeys(S.values?te.map(function(Ne){return de(Ne)}):te),Z=te.concat(S.values?ee.filter(function(Ne){return Ne=de(Ne),!Le.hasKey(Ne)&&(Le.addKey(Ne),!0)}):ee.map(function(Ne){return de(Ne)}).filter(function(Ne){return!Le.hasKey(Ne)&&(Le.addKey(Ne),!0)}));break;case"put":var Be=new Ln().addKeys(ie.values.map(function(Ne){return de(Ne)}));Z=te.filter(function(Ne){return!Be.hasKey(S.values?de(Ne):Ne)}).concat(S.values?ee:ee.map(function(Ne){return de(Ne)}));break;case"delete":var Oe=new Ln().addKeys(ie.keys);Z=te.filter(function(Ne){return!Oe.hasKey(S.values?de(Ne):Ne)});break;case"deleteRange":var Ie=ie.range;Z=te.filter(function(Ne){return!Yo(de(Ne),Ie)})}return Z},g))===g)?g:(k.sort(function(te,ie){return ot(Q(te),Q(ie))||ot(de(te),de(ie))}),S.limit&&S.limit<1/0&&(k.length>S.limit?k.length=S.limit:g.length===S.limit&&k.length<S.limit&&(A.dirty=!0)),N?Object.freeze(k):k)}function Ha(g,S){return ot(g.lower,S.lower)===0&&ot(g.upper,S.upper)===0&&!!g.lowerOpen==!!S.lowerOpen&&!!g.upperOpen==!!S.upperOpen}function $s(g,S){return((E,k,A,N)=>{if(E===void 0)return k!==void 0?-1:0;if(k===void 0)return 1;if((E=ot(E,k))===0){if(A&&N)return 0;if(A)return 1;if(N)return-1}return E})(g.lower,S.lower,g.lowerOpen,S.lowerOpen)<=0&&0<=((E,k,A,N)=>{if(E===void 0)return k!==void 0?1:0;if(k===void 0)return-1;if((E=ot(E,k))===0){if(A&&N)return 0;if(A)return-1;if(N)return 1}return E})(g.upper,S.upper,g.upperOpen,S.upperOpen)}function Vh(g,S,E,k){g.subscribers.add(E),k.addEventListener("abort",function(){var A,N;g.subscribers.delete(E),g.subscribers.size===0&&(A=g,N=S,setTimeout(function(){A.subscribers.size===0&&ve(N,A)},3e3))})}var Go={stack:"dbcore",level:0,name:"Cache",create:function(g){var S=g.schema.name;return r(r({},g),{transaction:function(E,k,A){var N,j,H=g.transaction(E,k,A);return k==="readwrite"&&(A=(N=new AbortController).signal,H.addEventListener("abort",(j=function(X){return function(){if(N.abort(),k==="readwrite"){for(var de=new Set,J=0,Q=E;J<Q.length;J++){var te=Q[J],ie=Ji["idb://".concat(S,"/").concat(te)];if(ie){var Z=g.table(te),ee=ie.optimisticOps.filter(function(qe){return qe.trans===H});if(H._explicit&&X&&H.mutatedParts)for(var pe=0,xe=Object.values(ie.queries.query);pe<xe.length;pe++)for(var he=0,ke=(Be=xe[pe]).slice();he<ke.length;he++)au((Oe=ke[he]).obsSet,H.mutatedParts)&&(ve(Be,Oe),Oe.subscribers.forEach(function(qe){return de.add(qe)}));else if(0<ee.length){ie.optimisticOps=ie.optimisticOps.filter(function(qe){return qe.trans!==H});for(var Ae=0,Le=Object.values(ie.queries.query);Ae<Le.length;Ae++)for(var Be,Oe,Ie,Ue=0,Ne=(Be=Le[Ae]).slice();Ue<Ne.length;Ue++)(Oe=Ne[Ue]).res!=null&&H.mutatedParts&&(X&&!Oe.dirty?(Ie=Object.isFrozen(Oe.res),Ie=cu(Oe.res,Oe.req,ee,Z,Oe,Ie),Oe.dirty?(ve(Be,Oe),Oe.subscribers.forEach(function(qe){return de.add(qe)})):Ie!==Oe.res&&(Oe.res=Ie,Oe.promise=je.resolve({result:Ie}))):(Oe.dirty&&ve(Be,Oe),Oe.subscribers.forEach(function(qe){return de.add(qe)})))}}}de.forEach(function(qe){return qe()})}}})(!1),{signal:A}),H.addEventListener("error",j(!1),{signal:A}),H.addEventListener("complete",j(!0),{signal:A})),H},table:function(E){var k=g.table(E),A=k.schema.primaryKey;return r(r({},k),{mutate:function(N){var j,H=He.trans;return!A.outbound&&H.db._options.cache!=="disabled"&&!H.explicit&&H.idbtrans.mode==="readwrite"&&(j=Ji["idb://".concat(S,"/").concat(E)])?(H=k.mutate(N),N.type!=="add"&&N.type!=="put"||!(50<=N.values.length||$o(A,N).some(function(X){return X==null}))?(j.optimisticOps.push(N),N.mutatedParts&&Fo(N.mutatedParts),H.then(function(X){0<X.numFailures&&(ve(j.optimisticOps,N),(X=Yc(0,N,X))&&j.optimisticOps.push(X),N.mutatedParts)&&Fo(N.mutatedParts)}),H.catch(function(){ve(j.optimisticOps,N),N.mutatedParts&&Fo(N.mutatedParts)})):H.then(function(X){var de=Yc(0,r(r({},N),{values:N.values.map(function(J,Q){var te;return X.failures[Q]?J:(P(te=(te=A.keyPath)!=null&&te.includes(".")?ce(J):r({},J),A.keyPath,X.results[Q]),te)})}),X);j.optimisticOps.push(de),queueMicrotask(function(){return N.mutatedParts&&Fo(N.mutatedParts)})}),H):k.mutate(N)},query:function(N){var j,H,X,de,J,Q,te;return Zi(He,k)&&$c("query",N)?(j=((X=He.trans)==null?void 0:X.db._options.cache)==="immutable",H=(X=He).requery,X=X.signal,Q=((ie,Z,ee,pe)=>{var xe=Ji["idb://".concat(ie,"/").concat(Z)];if(!xe)return[];if(!(ie=xe.queries[ee]))return[null,!1,xe,null];var he=ie[(pe.query?pe.query.index.name:null)||""];if(!he)return[null,!1,xe,null];switch(ee){case"query":var ke=he.find(function(Ae){return Ae.req.limit===pe.limit&&Ae.req.values===pe.values&&Ha(Ae.req.query.range,pe.query.range)});return ke?[ke,!0,xe,he]:[he.find(function(Ae){return("limit"in Ae.req?Ae.req.limit:1/0)>=pe.limit&&(!pe.values||Ae.req.values)&&$s(Ae.req.query.range,pe.query.range)}),!1,xe,he];case"count":return ke=he.find(function(Ae){return Ha(Ae.req.query.range,pe.query.range)}),[ke,!!ke,xe,he]}})(S,E,"query",N),te=Q[0],de=Q[2],J=Q[3],te&&Q[1]?te.obsSet=N.obsSet:(Q=k.query(N).then(function(ie){var Z=ie.result;if(te&&(te.res=Z),j){for(var ee=0,pe=Z.length;ee<pe;++ee)Object.freeze(Z[ee]);Object.freeze(Z)}else ie.result=ce(Z);return ie}).catch(function(ie){return J&&te&&ve(J,te),Promise.reject(ie)}),te={obsSet:N.obsSet,promise:Q,subscribers:new Set,type:"query",req:N,dirty:!1},J?J.push(te):(J=[te],(de=de||(Ji["idb://".concat(S,"/").concat(E)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[N.query.index.name||""]=J)),Vh(te,J,H,X),te.promise.then(function(ie){return{result:cu(ie.result,N,de?.optimisticOps,k,te,j)}})):k.query(N)}})}})}};function Ys(g,S){return new Proxy(g,{get:function(E,k,A){return k==="db"?S:Reflect.get(E,k,A)}})}Yt.prototype.version=function(g){if(isNaN(g)||g<.1)throw new ze.Type("Given version is not a positive number");if(g=Math.round(10*g)/10,this.idbdb||this._state.isBeingOpened)throw new ze.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,g);var S=this._versions,E=S.filter(function(k){return k._cfg.version===g})[0];return E||(E=new this.Version(g),S.push(E),S.sort(Zl),E.stores({}),this._state.autoSchema=!1),E},Yt.prototype._whenReady=function(g){var S=this;return this.idbdb&&(this._state.openComplete||He.letThrough||this._vip)?g():new je(function(E,k){if(S._state.openComplete)return k(new ze.DatabaseClosed(S._state.dbOpenError));if(!S._state.isBeingOpened){if(!S._state.autoOpen)return void k(new ze.DatabaseClosed);S.open().catch(Xe)}S._state.dbReadyPromise.then(E,k)}).then(g)},Yt.prototype.use=function(A){var S=A.stack,E=A.create,k=A.level,A=A.name,N=(A&&this.unuse({stack:S,name:A}),this._middlewares[S]||(this._middlewares[S]=[]));return N.push({stack:S,create:E,level:k??10,name:A}),N.sort(function(j,H){return j.level-H.level}),this},Yt.prototype.unuse=function(g){var S=g.stack,E=g.name,k=g.create;return S&&this._middlewares[S]&&(this._middlewares[S]=this._middlewares[S].filter(function(A){return k?A.create!==k:!!E&&A.name!==E})),this},Yt.prototype.open=function(){var g=this;return Nr(Kt,function(){return Ih(g)})},Yt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var g=this._state,S=Fi.indexOf(this);if(0<=S&&Fi.splice(S,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}g.isBeingOpened||(g.dbReadyPromise=new je(function(E){g.dbReadyResolve=E}),g.openCanceller=new je(function(E,k){g.cancelOpen=k}))},Yt.prototype.close=function(S){var S=(S===void 0?{disableAutoOpen:!0}:S).disableAutoOpen,E=this._state;S?(E.isBeingOpened&&E.cancelOpen(new ze.DatabaseClosed),this._close(),E.autoOpen=!1,E.dbOpenError=new ze.DatabaseClosed):(this._close(),E.autoOpen=this._options.autoOpen||E.isBeingOpened,E.openComplete=!1,E.dbOpenError=null)},Yt.prototype.delete=function(g){var S=this,E=(g===void 0&&(g={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),k=this._state;return new je(function(A,N){function j(){S.close(g);var H=S._deps.indexedDB.deleteDatabase(S.name);H.onsuccess=Ht(function(){var X,de,J;X=S._deps,de=S.name,qo(J=X.indexedDB)||de===js||tu(J,X.IDBKeyRange).delete(de).catch(Xe),A()}),H.onerror=Rr(N),H.onblocked=S._fireOnBlocked}if(E)throw new ze.InvalidArgument("Invalid closeOptions argument to db.delete()");k.isBeingOpened?k.dbReadyPromise.then(j):j()})},Yt.prototype.backendDB=function(){return this.idbdb},Yt.prototype.isOpen=function(){return this.idbdb!==null},Yt.prototype.hasBeenClosed=function(){var g=this._state.dbOpenError;return g&&g.name==="DatabaseClosed"},Yt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Yt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Yt.prototype,"tables",{get:function(){var g=this;return l(this._allTables).map(function(S){return g._allTables[S]})},enumerable:!1,configurable:!0}),Yt.prototype.transaction=function(){var g=(function(S,E,k){var A=arguments.length;if(A<2)throw new ze.InvalidArgument("Too few arguments");for(var N=new Array(A-1);--A;)N[A-1]=arguments[A];return k=N.pop(),[S,G(N),k]}).apply(this,arguments);return this._transaction.apply(this,g)},Yt.prototype._transaction=function(g,S,E){var k,A,N=this,j=He.trans,H=(j&&j.db===this&&g.indexOf("!")===-1||(j=null),g.indexOf("?")!==-1);g=g.replace("!","").replace("?","");try{if(A=S.map(function(de){if(de=de instanceof N.Table?de.name:de,typeof de!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return de}),g=="r"||g===ui)k=ui;else{if(g!="rw"&&g!=Ti)throw new ze.InvalidArgument("Invalid transaction mode: "+g);k=Ti}if(j){if(j.mode===ui&&k===Ti){if(!H)throw new ze.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");j=null}j&&A.forEach(function(de){if(j&&j.storeNames.indexOf(de)===-1){if(!H)throw new ze.SubTransaction("Table "+de+" not included in parent transaction.");j=null}}),H&&j&&!j.active&&(j=null)}}catch(de){return j?j._promise(null,function(J,Q){Q(de)}):_t(de)}var X=(function de(J,Q,te,ie,Z){return je.resolve().then(function(){var he=He.transless||He,ee=J._createTransaction(Q,te,J._dbSchema,ie),he=(ee.explicit=!0,{trans:ee,transless:he});if(ie)ee.idbtrans=ie.idbtrans;else try{ee.create(),ee.idbtrans._explicit=!0,J._state.PR1398_maxLoop=3}catch(ke){return ke.name===Ze.InvalidState&&J.isOpen()&&0<--J._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),J.close({disableAutoOpen:!1}),J.open().then(function(){return de(J,Q,te,null,Z)})):_t(ke)}var pe,xe=I(Z),he=(xe&&hn(),je.follow(function(){var ke;(pe=Z.call(ee,ee))&&(xe?(ke=fr.bind(null,null),pe.then(ke,ke)):typeof pe.next=="function"&&typeof pe.throw=="function"&&(pe=Ks(pe)))},he));return(pe&&typeof pe.then=="function"?je.resolve(pe).then(function(ke){return ee.active?ke:_t(new ze.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):he.then(function(){return pe})).then(function(ke){return ie&&ee._resolve(),ee._completion.then(function(){return ke})}).catch(function(ke){return ee._reject(ke),_t(ke)})})}).bind(null,this,k,A,j,E);return j?j._promise(k,X,"lock"):He.trans?Nr(He.transless,function(){return N._whenReady(X)}):this._whenReady(X)},Yt.prototype.table=function(g){if(m(this._allTables,g))return this._allTables[g];throw new ze.InvalidTable("Table ".concat(g," does not exist"))};var Gr=Yt;function Yt(g,S){var E,k,A,N,j,H=this,X=(this._middlewares={},this.verno=0,Yt.dependencies),X=(this._options=S=r({addons:Yt.addons,autoOpen:!0,indexedDB:X.indexedDB,IDBKeyRange:X.IDBKeyRange,cache:"cloned"},S),this._deps={indexedDB:S.indexedDB,IDBKeyRange:S.IDBKeyRange},S.addons),de=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Xe,dbReadyPromise:null,cancelOpen:Xe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:S.autoOpen}),J=(de.dbReadyPromise=new je(function(Q){de.dbReadyResolve=Q}),de.openCanceller=new je(function(Q,te){de.cancelOpen=te}),this._state=de,this.name=g,this.on=Us(this,"populate","blocked","versionchange","close",{ready:[en,Xe]}),this.once=function(Q,te){var ie=function(){for(var Z=[],ee=0;ee<arguments.length;ee++)Z[ee]=arguments[ee];H.on(Q).unsubscribe(ie),te.apply(H,Z)};return H.on(Q,ie)},this.on.ready.subscribe=V(this.on.ready.subscribe,function(Q){return function(te,ie){Yt.vip(function(){var Z,ee=H._state;ee.openComplete?(ee.dbOpenError||je.resolve().then(te),ie&&Q(te)):ee.onReadyBeingFired?(ee.onReadyBeingFired.push(te),ie&&Q(te)):(Q(te),Z=H,ie||Q(function pe(){Z.on.ready.unsubscribe(te),Z.on.ready.unsubscribe(pe)}))})}}),this.Collection=(E=this,zn(Bh.prototype,function(pe,ee){this.db=E;var ie=Yl,Z=null;if(ee)try{ie=ee()}catch(he){Z=he}var ee=pe._ctx,pe=ee.table,xe=pe.hook.reading.fire;this._ctx={table:pe,index:ee.index,isPrimKey:!ee.index||pe.schema.primKey.keyPath&&ee.index===pe.schema.primKey.name,range:ie,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Z,or:ee.or,valueMapper:xe!==Xn?xe:null}})),this.Table=(k=this,zn(Gl.prototype,function(Q,te,ie){this.db=k,this._tx=ie,this.name=Q,this.schema=te,this.hook=k._allTables[Q]?k._allTables[Q].hook:Us(null,{creating:[rn,Xe],reading:[bn,Xn],updating:[Et,Xe],deleting:[Nt,Xe]})})),this.Transaction=(A=this,zn(Jl.prototype,function(Q,te,ie,Z,ee){var pe=this;Q!=="readonly"&&te.forEach(function(xe){xe=(xe=ie[xe])==null?void 0:xe.yProps,xe&&(te=te.concat(xe.map(function(he){return he.updatesTable})))}),this.db=A,this.mode=Q,this.storeNames=te,this.schema=ie,this.chromeTransactionDurability=Z,this.idbtrans=null,this.on=Us(this,"complete","error","abort"),this.parent=ee||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new je(function(xe,he){pe._resolve=xe,pe._reject=he}),this._completion.then(function(){pe.active=!1,pe.on.complete.fire()},function(xe){var he=pe.active;return pe.active=!1,pe.on.error.fire(xe),pe.parent?pe.parent._reject(xe):he&&pe.idbtrans&&pe.idbtrans.abort(),_t(xe)})})),this.Version=(N=this,zn(Hh.prototype,function(Q){this.db=N,this._cfg={version:Q,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(j=this,zn(Yi.prototype,function(Q,te,ie){if(this.db=j,this._ctx={table:Q,index:te===":id"?null:te,or:ie},this._cmp=this._ascending=ot,this._descending=function(Z,ee){return ot(ee,Z)},this._max=function(Z,ee){return 0<ot(Z,ee)?Z:ee},this._min=function(Z,ee){return ot(Z,ee)<0?Z:ee},this._IDBKeyRange=j._deps.IDBKeyRange,!this._IDBKeyRange)throw new ze.MissingAPI})),this.on("versionchange",function(Q){0<Q.newVersion?console.warn("Another connection wants to upgrade database '".concat(H.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(H.name,"'. Closing db now to resume the delete request.")),H.close({disableAutoOpen:!1})}),this.on("blocked",function(Q){!Q.newVersion||Q.newVersion<Q.oldVersion?console.warn("Dexie.delete('".concat(H.name,"') was blocked")):console.warn("Upgrade '".concat(H.name,"' blocked by other connection holding version ").concat(Q.oldVersion/10))}),this._maxKey=ja(S.IDBKeyRange),this._createTransaction=function(Q,te,ie,Z){return new H.Transaction(Q,te,ie,H._options.chromeTransactionDurability,Z)},this._fireOnBlocked=function(Q){H.on("blocked").fire(Q),Fi.filter(function(te){return te.name===H.name&&te!==H&&!te._state.vcFired}).map(function(te){return te.on("versionchange").fire(Q)})},this.use(Kc),this.use(Go),this.use(Ph),this.use(qh),this.use(Fc),new Proxy(this,{get:function(Q,te,ie){var Z;return te==="_vip"||(te==="table"?function(ee){return Ys(H.table(ee),J)}:(Z=Reflect.get(Q,te,ie))instanceof Gl?Ys(Z,J):te==="tables"?Z.map(function(ee){return Ys(ee,J)}):te==="_createTransaction"?function(){return Ys(Z.apply(this,arguments),J)}:Z)}}));this.vip=J,X.forEach(function(Q){return Q(H)})}var Ia,ea=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Gc=(Qo.prototype.subscribe=function(g,S,E){return this._subscribe(g&&typeof g!="function"?g:{next:g,error:S,complete:E})},Qo.prototype[ea]=function(){return this},Qo);function Qo(g){this._subscribe=g}try{Ia={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{Ia={indexedDB:null,IDBKeyRange:null}}function Qc(g){var S,E=!1,k=new Gc(function(A){var N=I(g),j,H=!1,X={},de={},J={get closed(){return H},unsubscribe:function(){H||(H=!0,j&&j.abort(),Q&&jn.storagemutated.unsubscribe(ie))}},Q=(A.start&&A.start(J),!1),te=function(){return ki(Z)},ie=function(ee){Vo(X,ee),au(de,X)&&te()},Z=function(){var ee,pe,xe;!H&&Ia.indexedDB&&(X={},ee={},j&&j.abort(),j=new AbortController,xe=(he=>{var ke=_n();try{N&&hn();var Ae=Pt(g,he);return Ae=N?Ae.finally(fr):Ae}finally{ke&&Fr()}})(pe={subscr:ee,signal:j.signal,requery:te,querier:g,trans:null}),Promise.resolve(xe).then(function(he){E=!0,S=he,H||pe.signal.aborted||(X={},(ke=>{for(var Ae in ke)if(m(ke,Ae))return;return 1})(de=ee)||Q||(jn(_a,ie),Q=!0),ki(function(){return!H&&A.next&&A.next(he)}))},function(he){E=!1,["DatabaseClosedError","AbortError"].includes(he?.name)||H||ki(function(){H||A.error&&A.error(he)})}))};return setTimeout(te,0),J});return k.hasValue=function(){return E},k.getValue=function(){return S},k}var ta=Gr;function fu(g){var S=Oi;try{Oi=!0,jn.storagemutated.fire(g),lu(g,!0)}finally{Oi=S}}v(ta,r(r({},Y),{delete:function(g){return new ta(g,{addons:[]}).delete()},exists:function(g){return new ta(g,{addons:[]}).open().then(function(S){return S.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(g){try{return S=ta.dependencies,E=S.indexedDB,S=S.IDBKeyRange,(qo(E)?Promise.resolve(E.databases()).then(function(k){return k.map(function(A){return A.name}).filter(function(A){return A!==js})}):tu(E,S).toCollection().primaryKeys()).then(g)}catch{return _t(new ze.MissingAPI)}var S,E},defineClass:function(){return function(g){d(this,g)}},ignoreTransaction:function(g){return He.trans?Nr(He.transless,g):g()},vip:nu,async:function(g){return function(){try{var S=Ks(g.apply(this,arguments));return S&&typeof S.then=="function"?S:je.resolve(S)}catch(E){return _t(E)}}},spawn:function(g,S,E){try{var k=Ks(g.apply(E,S||[]));return k&&typeof k.then=="function"?k:je.resolve(k)}catch(A){return _t(A)}},currentTransaction:{get:function(){return He.trans||null}},waitFor:function(g,S){return g=je.resolve(typeof g=="function"?ta.ignoreTransaction(g):g).timeout(S||6e4),He.trans?He.trans.waitFor(g):g},Promise:je,debug:{get:function(){return mt},set:function(g){Dn(g)}},derive:T,extend:d,props:v,override:V,Events:Us,on:jn,liveQuery:Qc,extendObservabilitySet:Vo,getByKeyPath:U,setByKeyPath:P,delByKeyPath:function(g,S){typeof S=="string"?P(g,S,void 0):"length"in S&&[].map.call(S,function(E){P(g,E,void 0)})},shallowClone:z,deepClone:ce,getObjectDiff:Ko,cmp:ot,asap:$,minKey:-1/0,addons:[],connections:Fi,errnames:Ze,dependencies:Ia,cache:Ji,semVer:"4.3.0",version:"4.3.0".split(".").map(function(g){return parseInt(g)}).reduce(function(g,S,E){return g+S/Math.pow(10,2*E)})})),ta.maxKey=ja(ta.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(jn(_a,function(g){Oi||(g=new CustomEvent(Qi,{detail:g}),Oi=!0,dispatchEvent(g),Oi=!1)}),addEventListener(Qi,function(g){g=g.detail,Oi||fu(g)}));var qa,Oi=!1,tr=function(){};return typeof BroadcastChannel<"u"&&((tr=function(){(qa=new BroadcastChannel(Qi)).onmessage=function(g){return g.data&&fu(g.data)}})(),typeof qa.unref=="function"&&qa.unref(),jn(_a,function(g){Oi||qa.postMessage(g)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(g){if(!Gr.disableBfCache&&g.persisted){mt&&console.debug("Dexie: handling persisted pagehide"),qa?.close();for(var S=0,E=Fi;S<E.length;S++)E[S].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(g){!Gr.disableBfCache&&g.persisted&&(mt&&console.debug("Dexie: handling persisted pageshow"),tr(),fu({all:new Ln(-1/0,[[]])}))})),je.rejectionMapper=function(g,S){return!g||g instanceof ge||g instanceof TypeError||g instanceof SyntaxError||!g.name||!Tt[g.name]?g:(S=new Tt[g.name](S||g.message,g),"stack"in g&&w(S,"stack",{get:function(){return this.inner.stack}}),S)},Dn(mt),r(Gr,Object.freeze({__proto__:null,Dexie:Gr,Entity:Lc,PropModification:Ra,RangeSet:Ln,add:function(g){return new Ra({add:g})},cmp:ot,default:Gr,liveQuery:Qc,mergeRanges:Xi,rangesOverlap:qc,remove:function(g){return new Ra({remove:g})},replacePrefix:function(g,S){return new Ra({replacePrefix:[g,S]})}}),{default:Gr}),Gr})})(dd)),dd.exports}var SO=xO();const wg=Zg(SO),wb=Symbol.for("Dexie"),Rl=globalThis[wb]||(globalThis[wb]=wg);if(wg.semVer!==Rl.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${wg.semVer} and ${Rl.semVer}`);const{liveQuery:f6,mergeRanges:d6,rangesOverlap:h6,RangeSet:p6,cmp:m6,Entity:g6,PropModification:y6,replacePrefix:v6,add:b6,remove:x6,DexieYProvider:S6}=Rl;function wO(t,e,n){var r,a;typeof t=="function"?(r=e||[],a=n):(r=[],a=e);var o=ai.useRef({hasResult:!1,result:a,error:null}),l=ai.useReducer(function(h){return h+1},0);l[0];var c=l[1],d=ai.useMemo(function(){var h=typeof t=="function"?t():t;if(!h||typeof h.subscribe!="function")throw t===h?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!o.current.hasResult&&typeof window<"u"&&(typeof h.hasValue!="function"||h.hasValue()))if(typeof h.getValue=="function")o.current.result=h.getValue(),o.current.hasResult=!0;else{var p=h.subscribe(function(m){o.current.result=m,o.current.hasResult=!0});typeof p=="function"?p():p.unsubscribe()}return h},r);if(ai.useDebugValue(o.current.result),ai.useEffect(function(){var h=d.subscribe(function(p){var m=o.current;(m.error!==null||m.result!==p)&&(m.error=null,m.result=p,m.hasResult=!0,c())},function(p){var m=o.current;m.error!==p&&(m.error=p,c())});return typeof h=="function"?h:h.unsubscribe.bind(h)},r),o.current.error)throw o.current.error;return o.current.result}function $S(t,e,n){return wO(function(){return Rl.liveQuery(t)},e||[],n)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(t){var e=Rl.DexieYProvider;e&&e.release(t)});const $n=[];for(let t=0;t<256;++t)$n.push((t+256).toString(16).slice(1));function EO(t,e=0){return($n[t[e+0]]+$n[t[e+1]]+$n[t[e+2]]+$n[t[e+3]]+"-"+$n[t[e+4]]+$n[t[e+5]]+"-"+$n[t[e+6]]+$n[t[e+7]]+"-"+$n[t[e+8]]+$n[t[e+9]]+"-"+$n[t[e+10]]+$n[t[e+11]]+$n[t[e+12]]+$n[t[e+13]]+$n[t[e+14]]+$n[t[e+15]]).toLowerCase()}let Hm;const kO=new Uint8Array(16);function TO(){if(!Hm){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Hm=crypto.getRandomValues.bind(crypto)}return Hm(kO)}const CO=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Eb={randomUUID:CO};function MO(t,e,n){t=t||{};const r=t.random??t.rng?.()??TO();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,EO(r)}function AO(t,e,n){return Eb.randomUUID&&!t?Eb.randomUUID():MO(t)}class OO extends Rl{entries;settings;constructor(){super("DayZeroDB"),this.version(2).stores({entries:"id, createdAt, updatedAt, date, isFavorite, *tags",settings:"theme, userName"})}}const Ir=new OO,wd=async()=>await Ir.entries.orderBy("createdAt").reverse().toArray(),NO=async t=>{const e=t.toLowerCase().trim();return e?(await wd()).filter(r=>{const a=r.content.toLowerCase().includes(e),o=r.tags.some(c=>c.toLowerCase().includes(e)),l=r.location?.toLowerCase().includes(e)||!1;return a||o||l}):await wd()},DO=async()=>{const t=await wd(),e=new Set;return t.forEach(n=>{n.tags.forEach(r=>e.add(r))}),Array.from(e).sort()},YS=async()=>{const t=await Ir.settings.get("theme");if(!t){const e={theme:"system",userName:""};return await Ir.settings.put({...e,theme:"system"}),e}return t},RO=async t=>{const n={...await YS(),...t};return await Ir.settings.put(n),n},_O=async()=>{const t=await wd(),e=await YS();return{entries:t,settings:e}},zO=async t=>{const e=[];let n=0;if(t.entries&&Array.isArray(t.entries))for(const r of t.entries)try{if(!r.id||!r.content||!r.date){e.push("Invalid entry skipped: Missing required fields");continue}await Ir.entries.get(r.id)?await Ir.entries.put({...r,updatedAt:Date.now()}):await Ir.entries.add(r),n++}catch(a){e.push(`Failed to import entry ${r.id}: ${a instanceof Error?a.message:"Unknown error"}`)}if(t.settings&&typeof t.settings=="object")try{await RO(t.settings)}catch(r){e.push(`Failed to import settings: ${r instanceof Error?r.message:"Unknown error"}`)}return{success:n>0,importedEntries:n,errors:e}},oy=()=>{const t=$S(()=>Ir.entries.orderBy("createdAt").reverse().toArray(),[]);return{entries:t||[],isLoading:t===void 0}},jO=()=>{const[t,e]=ae.useState([]),[n,r]=ae.useState(!0);return ae.useEffect(()=>{(async()=>{const o=await DO();e(o),r(!1)})()},[]),{tags:t,isLoading:n}},GS=t=>{const[e,n]=ae.useState([]),[r,a]=ae.useState(!1);return ae.useEffect(()=>{const l=setTimeout(async()=>{a(!0);try{let c=await NO(t.query);t.tags.length>0&&(c=c.filter(d=>t.tags.some(h=>d.tags.includes(h)))),t.favoritesOnly&&(c=c.filter(d=>d.isFavorite)),t.dateFrom&&(c=c.filter(d=>d.date>=t.dateFrom)),t.dateTo&&(c=c.filter(d=>d.date<=t.dateTo)),n(c)}catch(c){console.error("Search failed:",c)}finally{a(!1)}},300);return()=>clearTimeout(l)},[t]),{results:e,isLoading:r}},LO=()=>{const[t,e]=ae.useState(!1);return{exportToFile:ae.useCallback(async()=>{e(!0);try{const r=await _O(),a=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),o=URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download=`day-zero-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)}catch(r){throw console.error("Export failed:",r),r}finally{e(!1)}},[]),isExporting:t}},BO=()=>{const[t,e]=ae.useState(!1),[n,r]=ae.useState(null),a=ae.useCallback(async l=>{e(!0),r(null);try{const c=await l.text(),d=JSON.parse(c),h=await zO(d);let p=`Successfully imported ${h.importedEntries} entries.`;return h.errors.length>0&&(p+=` Skipped ${h.errors.length} invalid entries.`,console.warn("Import warnings:",h.errors)),r({success:h.success,message:p}),h}catch(c){const d=c instanceof Error?c.message:"Failed to import data";throw r({success:!1,message:d}),c}finally{e(!1)}},[]),o=ae.useCallback(()=>{r(null)},[]);return{importFromFile:a,isImporting:t,importResult:n,clearImportResult:o}},UO=()=>{const t=$S(()=>Ir.entries.where("isFavorite").equals(1).reverse().toArray(),[]);return{favorites:t||[],isLoading:t===void 0}},HO=({children:t})=>{const{theme:e,toggleTheme:n}=yO(),[r,a]=ae.useState(!1),[o,l]=ae.useState(()=>localStorage.getItem("sidebarCollapsed")==="true"),c=qi(),{exportToFile:d,isExporting:h}=LO(),{importFromFile:p,isImporting:m}=BO(),v=c.pathname.includes("/editor");ae.useEffect(()=>{localStorage.setItem("sidebarCollapsed",o.toString())},[o]);const x=async T=>{const M=T.target.files?.[0];if(M)try{await p(M)}catch(O){console.error("Import failed:",O)}T.target.value=""},w=[{path:"/",icon:RS},{path:"/calendar",icon:sM},{path:"/gallery",icon:Dc},{path:"/atlas",icon:CM}];return B.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-background-dark flex",children:[B.jsx("button",{onClick:()=>a(!r),className:"lg:hidden fixed top-3 left-3 z-50 p-1.5 rounded-lg bg-white dark:bg-gray-900 shadow-lg border border-gray-200 dark:border-gray-800","aria-label":"Toggle menu",children:r?B.jsx(Dl,{size:16}):B.jsx(AM,{size:16})}),B.jsxs("aside",{className:`
            fixed lg:sticky lg:top-0 lg:h-screen z-40
            ${o?"w-16":"w-56"}
            bg-sidebar-light dark:bg-sidebar-dark
            border-r border-gray-200 dark:border-gray-700
            transform transition-all duration-300 ease-in-out
            ${r?"translate-x-0":"-translate-x-full lg:translate-x-0"}
            flex flex-col overflow-hidden
          `,children:[B.jsx("div",{className:`px-2 pb-2 pt-4 lg:pt-2 shrink-0 ${o?"flex justify-center":""}`,children:B.jsxs(xg,{to:"/editor/new",className:`
              flex items-center justify-center gap-1.5 
              ${o?"w-10 h-10 px-0":"w-full px-3 py-2"}
              bg-primary-500 text-white rounded-xl font-bold text-xs 
              shadow-lg shadow-primary-500/20 hover:bg-primary-600 
              transition-all active:scale-95 hover:shadow-xl hover:shadow-primary-500/30
            `,onClick:()=>a(!1),children:[B.jsx(zS,{size:o?20:16,strokeWidth:o?2.5:2}),!o&&B.jsx("span",{children:"New Entry"})]})}),B.jsx("nav",{className:`px-2 space-y-1 shrink-0 ${o?"flex flex-col items-center":""}`,children:w.map(T=>B.jsxs(xg,{to:T.path,className:({isActive:M})=>`
                sidebar-link 
                ${o?"justify-center w-10 h-10 p-0":"py-2 px-3 text-xs"}
                ${M?"active":""}
                rounded-xl transition-all duration-200 hover:scale-105
              `,onClick:()=>a(!1),title:o?T.path.replace("/","").charAt(0).toUpperCase()+T.path.slice(2):void 0,children:[B.jsx(T.icon,{size:o?20:16,strokeWidth:o?2:1.5}),!o&&B.jsx("span",{className:"font-medium",children:T.path==="/"?"Timeline":T.path.replace("/","").charAt(0).toUpperCase()+T.path.slice(2)})]},T.path))}),B.jsx("div",{className:"flex-1 min-h-0"}),B.jsxs("div",{className:`p-2 border-t border-gray-200 dark:border-gray-700 space-y-1 shrink-0 ${o?"flex flex-col items-center":""}`,children:[B.jsxs("div",{className:`flex gap-1 ${o?"flex-col items-center":""}`,children:[B.jsxs("button",{className:`sidebar-link ${o?"w-8 h-8 p-0 justify-center":"flex-1 py-1.5 px-2 text-[10px]"}`,title:"Search",children:[B.jsx(Sg,{size:o?16:12}),!o&&B.jsx("span",{children:"Search"})]}),B.jsxs("button",{className:`sidebar-link ${o?"w-8 h-8 p-0 justify-center":"flex-1 py-1.5 px-2 text-[10px]"}`,title:"Settings",children:[B.jsx(IM,{size:o?16:12}),!o&&B.jsx("span",{children:"Settings"})]})]}),B.jsxs("div",{className:`flex gap-1 ${o?"flex-col items-center":""}`,children:[B.jsxs("button",{onClick:d,disabled:h,className:`btn-secondary flex items-center justify-center gap-1 text-[9px] ${o?"w-8 h-8 p-0":"flex-1 py-1 px-1"}`,title:"Export",children:[B.jsx(pM,{size:o?14:10}),!o&&B.jsx("span",{children:h?"...":"Export"})]}),B.jsxs("label",{className:`btn-secondary flex items-center justify-center gap-1 text-[9px] cursor-pointer ${o?"w-8 h-8 p-0":"flex-1 py-1 px-1"}`,title:"Import",children:[B.jsx(YM,{size:o?14:10}),!o&&B.jsx("span",{children:m?"...":"Import"}),B.jsx("input",{type:"file",accept:".json",onChange:x,className:"hidden",disabled:m})]})]}),B.jsxs("button",{onClick:n,className:`w-full flex items-center justify-center gap-1 rounded-lg text-[9px] text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${o?"w-8 h-8 p-0":"px-2 py-1"}`,title:e==="dark"?"Light mode":"Dark mode",children:[e==="dark"?B.jsx(PM,{size:o?16:10}):B.jsx(RM,{size:o?16:10}),!o&&B.jsx("span",{children:e==="dark"?"Light":"Dark"})]})]})]}),r&&B.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>a(!1)}),B.jsxs("main",{className:"flex-1 min-h-screen overflow-auto bg-white dark:bg-black",children:[B.jsxs("div",{className:"sticky top-0 z-20 flex items-center justify-between px-4 py-3 bg-white/80 dark:bg-black/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-800",children:[B.jsxs("div",{className:"flex items-center gap-3",children:[B.jsx("button",{onClick:()=>l(!o),className:"p-1.5 rounded-lg text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors hidden lg:flex",title:o?"Expand sidebar":"Collapse sidebar",children:B.jsx(zM,{size:18})}),B.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-800 hidden lg:block"}),B.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:Ea(new Date,"MMM d, yyyy")})]}),B.jsxs("div",{className:"flex items-center gap-3",children:[B.jsx("button",{className:"p-1.5 rounded-lg text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:B.jsx(Sg,{size:18})}),B.jsx("div",{className:"w-7 h-7 rounded-full overflow-hidden border border-gray-200 dark:border-gray-800",children:B.jsx("img",{src:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=80&h=80&fit=crop",alt:"Profile",className:"w-full h-full object-cover"})})]})]}),B.jsx("div",{className:`${v?"max-w-4xl mx-auto":"p-4"} pb-20`,children:t})]})]})},kb=()=>{const[t,e]=ae.useState(""),[n,r]=ae.useState([]),[a,o]=ae.useState(!1),[l,c]=ae.useState(!1),d=vO(t,300),{tags:h}=jO(),p={query:d,tags:n,favoritesOnly:a},{results:m,isLoading:v}=GS(p),x=M=>{r(O=>O.includes(M)?O.filter(q=>q!==M):[...O,M])},w=()=>{e(""),r([]),o(!1)},T=t||n.length>0||a;return B.jsxs("div",{className:"mb-6",children:[B.jsxs("div",{className:"flex gap-2",children:[B.jsxs("div",{className:"relative flex-1",children:[B.jsx(Sg,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),B.jsx("input",{type:"text",value:t,onChange:M=>e(M.target.value),placeholder:"Search entries...",className:"input-field pl-10 pr-10"}),t&&B.jsx("button",{onClick:()=>e(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:B.jsx(Dl,{size:16})})]}),B.jsx("button",{onClick:()=>c(!l),className:`p-2 rounded-lg border transition-colors ${l||T?"border-primary-500 text-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,title:"Toggle filters",children:B.jsx(gM,{size:20})})]}),l&&B.jsxs("div",{className:"mt-3 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[B.jsx("div",{className:"flex items-center gap-2 mb-4",children:B.jsxs("button",{onClick:()=>o(!a),className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm transition-colors ${a?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[B.jsx(mc,{size:14,className:a?"fill-current":""}),B.jsx("span",{children:"Favorites only"})]})}),h.length>0&&B.jsxs("div",{children:[B.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm text-gray-600 dark:text-gray-400",children:[B.jsx(jS,{size:14}),B.jsx("span",{children:"Filter by tags:"})]}),B.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(M=>B.jsxs("button",{onClick:()=>x(M),className:`px-3 py-1 rounded-full text-sm transition-colors ${n.includes(M)?"bg-primary-500 text-white":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-400 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:["#",M]},M))})]}),T&&B.jsx("button",{onClick:w,className:"mt-4 text-sm text-primary-500 hover:text-primary-600",children:"Clear all filters"})]}),T&&B.jsx("div",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:v?"Searching...":B.jsxs(B.Fragment,{children:["Found ",B.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:m.length})," ",m.length===1?"entry":"entries"]})})]})},ly=({entry:t})=>{const e=To(),n=FS(t.date),r=Ea(n,"d"),a=Ea(n,"EEE"),o=d=>{const h=document.createElement("div");return h.innerHTML=d,h.textContent||h.innerText||""},l=o(t.content).slice(0,100),c=o(t.content).length>100;return B.jsxs("div",{onClick:()=>e(`/editor/${t.id}`),className:"card overflow-hidden cursor-pointer hover:shadow-md transition-shadow group",children:[t.heroImage&&B.jsxs("div",{className:"relative w-full h-32 overflow-hidden",children:[B.jsx("img",{src:t.heroImage,alt:t.title,className:"w-full h-full object-cover",loading:"lazy"}),t.isFavorite&&B.jsx("div",{className:"absolute top-2 right-2 p-1 bg-white/90 dark:bg-black/70 rounded-full",children:B.jsx(mc,{size:14,className:"text-red-500 fill-red-500"})})]}),B.jsx("div",{className:"p-3",children:B.jsxs("div",{className:"flex gap-3",children:[B.jsxs("div",{className:"flex-shrink-0 w-12 text-center",children:[B.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white leading-none",children:r}),B.jsx("div",{className:"text-[10px] text-gray-500 dark:text-gray-400 uppercase mt-0.5",children:a})]}),B.jsxs("div",{className:"flex-1 min-w-0",children:[B.jsx("div",{className:"flex items-start justify-between gap-2 mb-1",children:B.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[!t.heroImage&&t.isFavorite&&B.jsx(mc,{size:12,className:"text-red-500 fill-red-500"}),t.location&&B.jsxs("span",{className:"flex items-center gap-0.5 text-[10px] text-gray-500 dark:text-gray-400",children:[B.jsx(kM,{size:10}),t.location]})]})}),t.title&&t.title!=="Untitled Entry"&&B.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1 line-clamp-1",children:t.title}),B.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-sm line-clamp-2 mb-2",children:[l,c&&B.jsx("span",{className:"text-primary-500 ml-1",children:"..."})]}),t.tags.length>0&&B.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.tags.slice(0,3).map(d=>B.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300",children:["#",d]},d)),t.tags.length>3&&B.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300",children:["+",t.tags.length-3]})]}),!t.heroImage&&t.images.length>0&&B.jsxs("div",{className:"flex gap-1.5 mt-2",children:[B.jsx("div",{className:"relative w-16 h-16 rounded overflow-hidden bg-gray-100 dark:bg-gray-800",children:B.jsx("img",{src:t.images[0],alt:"Entry thumbnail",className:"w-full h-full object-cover",loading:"lazy"})}),t.images.length>1&&B.jsxs("div",{className:"w-16 h-16 rounded bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-xs text-gray-500 dark:text-gray-400",children:["+",t.images.length-1]})]})]})]})})]})},IO=t=>{const e=FS(t);return Ea(e,"MMMM yyyy")},qO=t=>{const e=new Map;return t.forEach(n=>{const r=IO(n.date);e.has(r)||e.set(r,[]),e.get(r).push(n)}),e},PO=(t,e)=>new Date(t,e,0).getDate(),VO=(t,e)=>new Date(t,e-1,1).getDay(),FO=(t,e)=>{const n=PO(t,e),r=VO(t,e),a=[];for(let o=0;o<r;o++)a.push(null);for(let o=1;o<=n;o++)a.push(o);return a},KO=()=>{const t=To(),[e,n]=ae.useState({query:"",tags:[],favoritesOnly:!1}),{results:r,isLoading:a}=GS(e);if(a&&!e.query&&e.tags.length===0&&!e.favoritesOnly)return B.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[B.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"}),[1,2,3].map(c=>B.jsx("div",{className:"card p-6 animate-pulse",children:B.jsxs("div",{className:"flex gap-4",children:[B.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-lg"}),B.jsxs("div",{className:"flex-1 space-y-3",children:[B.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),B.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),B.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})]})},c))]});const o=e.query||e.tags.length>0||e.favoritesOnly;if(r.length===0&&!o)return B.jsxs("div",{className:"max-w-3xl mx-auto",children:[B.jsx(kb,{}),B.jsxs("div",{className:"text-center py-20",children:[B.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center",children:B.jsx(Dc,{className:"text-primary-500",size:32})}),B.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"No entries yet"}),B.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"Start your journaling journey by creating your first entry. Capture your thoughts, memories, and moments."}),B.jsx("button",{onClick:()=>t("/editor/new"),className:"btn-primary",children:"Create Your First Entry"})]})]});const l=qO(r);return B.jsxs("div",{className:"max-w-3xl mx-auto",children:[B.jsx(kb,{}),o&&r.length===0?B.jsxs("div",{className:"text-center py-12",children:[B.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No entries match your search criteria"}),B.jsx("button",{onClick:()=>n({query:"",tags:[],favoritesOnly:!1}),className:"mt-4 text-primary-500 hover:text-primary-600 text-sm",children:"Clear filters"})]}):B.jsxs("div",{className:"space-y-8",children:[!o&&B.jsxs("div",{className:"flex items-center justify-between",children:[B.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"All Entries"}),B.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.length," ",r.length===1?"entry":"entries"]})]}),Array.from(l.entries()).map(([c,d])=>B.jsxs("div",{className:"space-y-4",children:[B.jsx("h2",{className:"text-lg font-semibold text-gray-500 dark:text-gray-400 sticky top-0 bg-background-light dark:bg-background-dark py-2 z-10",children:c}),B.jsx("div",{className:"space-y-4",children:d.map(h=>B.jsx(ly,{entry:h},h.id))})]},c))]})]})},$O=()=>{const t=To(),[e,n]=ae.useState(new Date),[r,a]=ae.useState(null),{entries:o}=oy(),l=e.getFullYear(),c=e.getMonth()+1,d=FO(l,c),h=()=>{n(x=>gO(x)),a(null)},p=()=>{n(x=>HS(x,1)),a(null)},m=()=>{const x=new Date;n(x),a(Ea(x,"yyyy-MM-dd"))},v=x=>{if(x){const w=Ea(new Date(l,c-1,x),"yyyy-MM-dd");a(r===w?null:w)}};return B.jsxs("div",{className:"relative min-h-[calc(100vh-80px)]",children:[B.jsxs("div",{className:"flex items-center justify-between mb-4",children:[B.jsxs("div",{className:"flex items-center gap-3",children:[B.jsx("h1",{className:"text-2xl font-extrabold text-gray-900 dark:text-white",children:Ea(e,"MMMM yyyy")}),B.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-gray-900 rounded-lg p-0.5",children:[B.jsx("button",{onClick:h,className:"p-1 hover:bg-white dark:hover:bg-gray-800 rounded-md transition-all",children:B.jsx(lM,{size:16})}),B.jsx("button",{onClick:m,className:"px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider hover:bg-white dark:hover:bg-gray-800 rounded-md transition-all",children:"Today"}),B.jsx("button",{onClick:p,className:"p-1 hover:bg-white dark:hover:bg-gray-800 rounded-md transition-all",children:B.jsx(cM,{size:16})})]})]}),B.jsx("div",{className:"flex items-center bg-gray-100 dark:bg-gray-900 rounded-lg p-0.5",children:["Week","Month","Year"].map(x=>B.jsx("button",{className:`px-3 py-1 text-[10px] font-bold rounded-md transition-all ${x==="Month"?"bg-white dark:bg-gray-800 shadow-sm text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-600 hover:text-gray-600"}`,children:x},x))})]}),B.jsx("div",{className:"grid grid-cols-7 gap-px mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(x=>B.jsx("div",{className:"text-center text-[9px] font-bold text-gray-400 dark:text-gray-600 uppercase tracking-widest py-1",children:x},x))}),B.jsx("div",{className:"grid grid-cols-7 gap-px bg-gray-100 dark:bg-gray-900 border border-gray-100 dark:border-gray-900 rounded-2xl overflow-hidden shadow-xl",children:d.map((x,w)=>{const T=x?new Date(l,c-1,x):null,M=T&&ZM(T,new Date),O=T?Ea(T,"yyyy-MM-dd"):null,q=r===O,V=o.filter(U=>U.date===O),F=V.length>0,$=V.find(U=>U.heroImage||U.images&&U.images.length>0);return B.jsx("div",{className:`relative aspect-[4/5] bg-white dark:bg-black p-1.5 transition-all ${x===null?"opacity-50":"hover:z-10 hover:shadow-2xl"}`,children:x!==null&&B.jsxs("button",{onClick:()=>v(x),className:"w-full h-full flex flex-col items-start gap-0.5",children:[B.jsxs("div",{className:"flex items-center justify-between w-full mb-0.5",children:[B.jsx("span",{className:`text-xs font-bold ${M?"w-6 h-6 flex items-center justify-center bg-primary-500 text-white rounded-full":q?"text-primary-500":"text-gray-400 dark:text-gray-600"}`,children:x}),F&&!$&&B.jsx("div",{className:"w-1 h-1 rounded-full bg-primary-500"})]}),$&&B.jsx("div",{className:"flex-1 w-full rounded-xl overflow-hidden mb-0.5 shadow-sm",children:B.jsx("img",{src:$.heroImage||$.images?.[0],alt:"",className:"w-full h-full object-cover"})}),M&&B.jsx("div",{className:"mt-auto",children:B.jsx("span",{className:"text-[9px] font-bold text-primary-500 uppercase tracking-wider",children:"Today"})})]})},w)})}),B.jsx("button",{onClick:()=>t("/editor/new"),className:"fixed bottom-6 right-6 w-14 h-14 bg-primary-500 text-white rounded-2xl flex items-center justify-center shadow-2xl shadow-primary-500/40 hover:bg-primary-600 transition-all hover:scale-110 active:scale-95 z-50",children:B.jsx(zS,{size:28})})]})},YO=()=>{const{entries:t}=oy(),e=To(),[n,r]=ae.useState(null),a=t.flatMap(o=>o.images.map((l,c)=>({src:l,entryId:o.id,entryDate:o.date,index:c,totalImages:o.images.length})));return a.length===0?B.jsxs("div",{className:"max-w-4xl mx-auto text-center py-20",children:[B.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center",children:B.jsx(Dc,{className:"text-primary-500",size:32})}),B.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"No images yet"}),B.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"Your journal photos will appear here. Add images to your entries to build your visual timeline."})]}):B.jsxs("div",{className:"max-w-6xl mx-auto",children:[B.jsxs("div",{className:"flex items-center justify-between mb-6",children:[B.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gallery"}),B.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a.length," ",a.length===1?"photo":"photos"]})]}),B.jsx("div",{className:"columns-2 md:columns-3 lg:columns-4 gap-4 space-y-4",children:a.map((o,l)=>B.jsx("div",{className:"break-inside-avoid cursor-pointer group",onClick:()=>r({src:o.src,entryId:o.entryId}),children:B.jsxs("div",{className:"relative overflow-hidden rounded-lg bg-gray-100 dark:bg-gray-800",children:[B.jsx("img",{src:o.src,alt:`Journal photo ${l+1}`,className:"w-full h-auto object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"}),B.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300"})]})},`${o.entryId}-${o.index}`))}),n&&B.jsxs("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4",onClick:()=>r(null),children:[B.jsx("button",{onClick:()=>r(null),className:"absolute top-4 right-4 p-2 rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors","aria-label":"Close",children:B.jsx(Dl,{size:24})}),B.jsxs("div",{className:"max-w-4xl max-h-[85vh] w-full",onClick:o=>o.stopPropagation(),children:[B.jsx("img",{src:n.src,alt:"Gallery photo",className:"w-full h-full object-contain rounded-lg"}),B.jsx("div",{className:"mt-4 flex justify-center",children:B.jsx("button",{onClick:()=>e(`/editor/${n.entryId}`),className:"btn-primary",children:"View Entry"})})]})]})]})},GO=()=>{const{favorites:t,isLoading:e}=UO();return e?B.jsx("div",{className:"max-w-3xl mx-auto space-y-6",children:[1,2,3].map(n=>B.jsx("div",{className:"card p-6 animate-pulse",children:B.jsxs("div",{className:"flex gap-4",children:[B.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-lg"}),B.jsxs("div",{className:"flex-1 space-y-3",children:[B.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),B.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-3/4"})]})]})},n))}):t.length===0?B.jsxs("div",{className:"max-w-3xl mx-auto text-center py-20",children:[B.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:B.jsx(mc,{className:"text-red-500",size:32})}),B.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"No favorites yet"}),B.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-md mx-auto",children:"Mark your favorite entries by clicking the heart icon. They'll appear here for quick access."})]}):B.jsxs("div",{className:"max-w-3xl mx-auto",children:[B.jsxs("div",{className:"flex items-center justify-between mb-6",children:[B.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[B.jsx(mc,{className:"text-red-500 fill-red-500",size:24}),"Favorites"]}),B.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.length," ",t.length===1?"entry":"entries"]})]}),B.jsx("div",{className:"space-y-4",children:t.map(n=>B.jsx(ly,{entry:n},n.id))})]})},QO=()=>{const{tag:t}=xS(),{entries:e}=oy(),n=t?e.filter(r=>r.tags.includes(t)):[];return B.jsxs("div",{className:"max-w-3xl mx-auto",children:[B.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[B.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center",children:B.jsx(jS,{className:"text-primary-500",size:20})}),B.jsxs("div",{children:[B.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["#",t]}),B.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n.length," ",n.length===1?"entry":"entries"]})]})]}),n.length===0?B.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No entries found with this tag"}):B.jsx("div",{className:"space-y-4",children:n.map(r=>B.jsx(ly,{entry:r},r.id))})]})};function WO(t,e){return e.forEach((function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach((function(r){if(r!=="default"&&!(r in t)){var a=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return n[r]}})}}))})),Object.freeze(t)}function QS(t,e){return new Promise((function(n,r){let a;return XO(t).then((function(o){try{return a=o,n(new Blob([e.slice(0,2),a,e.slice(2)],{type:"image/jpeg"}))}catch(l){return r(l)}}),r)}))}const XO=t=>new Promise(((e,n)=>{const r=new FileReader;r.addEventListener("load",(({target:{result:a}})=>{const o=new DataView(a);let l=0;if(o.getUint16(l)!==65496)return n("not a valid JPEG");for(l+=2;;){const c=o.getUint16(l);if(c===65498)break;const d=o.getUint16(l+2);if(c===65505&&o.getUint32(l+4)===1165519206){const h=l+10;let p;switch(o.getUint16(h)){case 18761:p=!0;break;case 19789:p=!1;break;default:return n("TIFF header contains invalid endian")}if(o.getUint16(h+2,p)!==42)return n("TIFF header contains invalid version");const m=o.getUint32(h+4,p),v=h+m+2+12*o.getUint16(h+m,p);for(let x=h+m+2;x<v;x+=12)if(o.getUint16(x,p)==274){if(o.getUint16(x+2,p)!==3)return n("Orientation data type is invalid");if(o.getUint32(x+4,p)!==1)return n("Orientation data count is invalid");o.setUint16(x+8,1,p);break}return e(a.slice(l,l+2+d))}l+=2+d}return e(new Blob)})),r.readAsArrayBuffer(t)}));var Ed={},JO={get exports(){return Ed},set exports(t){Ed=t}};(function(t){var e,n,r={};JO.exports=r,r.parse=function(a,o){for(var l=r.bin.readUshort,c=r.bin.readUint,d=0,h={},p=new Uint8Array(a),m=p.length-4;c(p,m)!=101010256;)m--;d=m,d+=4;var v=l(p,d+=4);l(p,d+=2);var x=c(p,d+=2),w=c(p,d+=4);d+=4,d=w;for(var T=0;T<v;T++){c(p,d),d+=4,d+=4,d+=4,c(p,d+=4),x=c(p,d+=4);var M=c(p,d+=4),O=l(p,d+=4),q=l(p,d+2),V=l(p,d+4);d+=6;var F=c(p,d+=8);d+=4,d+=O+q+V,r._readLocal(p,F,h,x,M,o)}return h},r._readLocal=function(a,o,l,c,d,h){var p=r.bin.readUshort,m=r.bin.readUint;m(a,o),p(a,o+=4),p(a,o+=2);var v=p(a,o+=2);m(a,o+=2),m(a,o+=4),o+=4;var x=p(a,o+=8),w=p(a,o+=2);o+=2;var T=r.bin.readUTF8(a,o,x);if(o+=x,o+=w,h)l[T]={size:d,csize:c};else{var M=new Uint8Array(a.buffer,o);if(v==0)l[T]=new Uint8Array(M.buffer.slice(o,o+c));else{if(v!=8)throw"unknown compression method: "+v;var O=new Uint8Array(d);r.inflateRaw(M,O),l[T]=O}}},r.inflateRaw=function(a,o){return r.F.inflate(a,o)},r.inflate=function(a,o){return a[0],a[1],r.inflateRaw(new Uint8Array(a.buffer,a.byteOffset+2,a.length-6),o)},r.deflate=function(a,o){o==null&&(o={level:6});var l=0,c=new Uint8Array(50+Math.floor(1.1*a.length));c[l]=120,c[l+1]=156,l+=2,l=r.F.deflateRaw(a,c,l,o.level);var d=r.adler(a,0,a.length);return c[l+0]=d>>>24&255,c[l+1]=d>>>16&255,c[l+2]=d>>>8&255,c[l+3]=d>>>0&255,new Uint8Array(c.buffer,0,l+4)},r.deflateRaw=function(a,o){o==null&&(o={level:6});var l=new Uint8Array(50+Math.floor(1.1*a.length)),c=r.F.deflateRaw(a,l,c,o.level);return new Uint8Array(l.buffer,0,c)},r.encode=function(a,o){o==null&&(o=!1);var l=0,c=r.bin.writeUint,d=r.bin.writeUshort,h={};for(var p in a){var m=!r._noNeed(p)&&!o,v=a[p],x=r.crc.crc(v,0,v.length);h[p]={cpr:m,usize:v.length,crc:x,file:m?r.deflateRaw(v):v}}for(var p in h)l+=h[p].file.length+30+46+2*r.bin.sizeUTF8(p);l+=22;var w=new Uint8Array(l),T=0,M=[];for(var p in h){var O=h[p];M.push(T),T=r._writeHeader(w,T,p,O,0)}var q=0,V=T;for(var p in h)O=h[p],M.push(T),T=r._writeHeader(w,T,p,O,1,M[q++]);var F=T-V;return c(w,T,101010256),T+=4,d(w,T+=4,q),d(w,T+=2,q),c(w,T+=2,F),c(w,T+=4,V),T+=4,T+=2,w.buffer},r._noNeed=function(a){var o=a.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},r._writeHeader=function(a,o,l,c,d,h){var p=r.bin.writeUint,m=r.bin.writeUshort,v=c.file;return p(a,o,d==0?67324752:33639248),o+=4,d==1&&(o+=2),m(a,o,20),m(a,o+=2,0),m(a,o+=2,c.cpr?8:0),p(a,o+=2,0),p(a,o+=4,c.crc),p(a,o+=4,v.length),p(a,o+=4,c.usize),m(a,o+=4,r.bin.sizeUTF8(l)),m(a,o+=2,0),o+=2,d==1&&(o+=2,o+=2,p(a,o+=6,h),o+=4),o+=r.bin.writeUTF8(a,o,l),d==0&&(a.set(v,o),o+=v.length),o},r.crc={table:(function(){for(var a=new Uint32Array(256),o=0;o<256;o++){for(var l=o,c=0;c<8;c++)1&l?l=3988292384^l>>>1:l>>>=1;a[o]=l}return a})(),update:function(a,o,l,c){for(var d=0;d<c;d++)a=r.crc.table[255&(a^o[l+d])]^a>>>8;return a},crc:function(a,o,l){return 4294967295^r.crc.update(4294967295,a,o,l)}},r.adler=function(a,o,l){for(var c=1,d=0,h=o,p=o+l;h<p;){for(var m=Math.min(h+5552,p);h<m;)d+=c+=a[h++];c%=65521,d%=65521}return d<<16|c},r.bin={readUshort:function(a,o){return a[o]|a[o+1]<<8},writeUshort:function(a,o,l){a[o]=255&l,a[o+1]=l>>8&255},readUint:function(a,o){return 16777216*a[o+3]+(a[o+2]<<16|a[o+1]<<8|a[o])},writeUint:function(a,o,l){a[o]=255&l,a[o+1]=l>>8&255,a[o+2]=l>>16&255,a[o+3]=l>>24&255},readASCII:function(a,o,l){for(var c="",d=0;d<l;d++)c+=String.fromCharCode(a[o+d]);return c},writeASCII:function(a,o,l){for(var c=0;c<l.length;c++)a[o+c]=l.charCodeAt(c)},pad:function(a){return a.length<2?"0"+a:a},readUTF8:function(a,o,l){for(var c,d="",h=0;h<l;h++)d+="%"+r.bin.pad(a[o+h].toString(16));try{c=decodeURIComponent(d)}catch{return r.bin.readASCII(a,o,l)}return c},writeUTF8:function(a,o,l){for(var c=l.length,d=0,h=0;h<c;h++){var p=l.charCodeAt(h);if((4294967168&p)==0)a[o+d]=p,d++;else if((4294965248&p)==0)a[o+d]=192|p>>6,a[o+d+1]=128|p>>0&63,d+=2;else if((4294901760&p)==0)a[o+d]=224|p>>12,a[o+d+1]=128|p>>6&63,a[o+d+2]=128|p>>0&63,d+=3;else{if((4292870144&p)!=0)throw"e";a[o+d]=240|p>>18,a[o+d+1]=128|p>>12&63,a[o+d+2]=128|p>>6&63,a[o+d+3]=128|p>>0&63,d+=4}}return d},sizeUTF8:function(a){for(var o=a.length,l=0,c=0;c<o;c++){var d=a.charCodeAt(c);if((4294967168&d)==0)l++;else if((4294965248&d)==0)l+=2;else if((4294901760&d)==0)l+=3;else{if((4292870144&d)!=0)throw"e";l+=4}}return l}},r.F={},r.F.deflateRaw=function(a,o,l,c){var d=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][c],h=r.F.U,p=r.F._goodIndex;r.F._hash;var m=r.F._putsE,v=0,x=l<<3,w=0,T=a.length;if(c==0){for(;v<T;)m(o,x,v+(se=Math.min(65535,T-v))==T?1:0),x=r.F._copyExact(a,v,se,o,x+8),v+=se;return x>>>3}var M=h.lits,O=h.strt,q=h.prev,V=0,F=0,$=0,U=0,P=0,z=0;for(T>2&&(O[z=r.F._hash(a,0)]=0),v=0;v<T;v++){if(P=z,v+1<T-2){z=r.F._hash(a,v+1);var L=v+1&32767;q[L]=O[z],O[z]=L}if(w<=v){(V>14e3||F>26697)&&T-v>100&&(w<v&&(M[V]=v-w,V+=2,w=v),x=r.F._writeBlock(v==T-1||w==T?1:0,M,V,U,a,$,v-$,o,x),V=F=U=0,$=v);var G=0;v<T-2&&(G=r.F._bestMatch(a,v,q,P,Math.min(d[2],T-v),d[3]));var se=G>>>16,re=65535&G;if(G!=0){re=65535&G;var ce=p(se=G>>>16,h.of0);h.lhst[257+ce]++;var W=p(re,h.df0);h.dhst[W]++,U+=h.exb[ce]+h.dxb[W],M[V]=se<<23|v-w,M[V+1]=re<<16|ce<<8|W,V+=2,w=v+se}else h.lhst[a[v]]++;F++}}for($==v&&a.length!=0||(w<v&&(M[V]=v-w,V+=2,w=v),x=r.F._writeBlock(1,M,V,U,a,$,v-$,o,x),V=0,F=0,V=F=U=0,$=v);(7&x)!=0;)x++;return x>>>3},r.F._bestMatch=function(a,o,l,c,d,h){var p=32767&o,m=l[p],v=p-m+32768&32767;if(m==p||c!=r.F._hash(a,o-v))return 0;for(var x=0,w=0,T=Math.min(32767,o);v<=T&&--h!=0&&m!=p;){if(x==0||a[o+x]==a[o+x-v]){var M=r.F._howLong(a,o,v);if(M>x){if(w=v,(x=M)>=d)break;v+2<M&&(M=v+2);for(var O=0,q=0;q<M-2;q++){var V=o-v+q+32768&32767,F=V-l[V]+32768&32767;F>O&&(O=F,m=V)}}}v+=(p=m)-(m=l[p])+32768&32767}return x<<16|w},r.F._howLong=function(a,o,l){if(a[o]!=a[o-l]||a[o+1]!=a[o+1-l]||a[o+2]!=a[o+2-l])return 0;var c=o,d=Math.min(a.length,o+258);for(o+=3;o<d&&a[o]==a[o-l];)o++;return o-c},r.F._hash=function(a,o){return(a[o]<<8|a[o+1])+(a[o+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(a,o,l,c,d,h,p,m,v){var x,w,T,M,O,q,V,F,$,U=r.F.U,P=r.F._putsF,z=r.F._putsE;U.lhst[256]++,w=(x=r.F.getTrees())[0],T=x[1],M=x[2],O=x[3],q=x[4],V=x[5],F=x[6],$=x[7];var L=32+((v+3&7)==0?0:8-(v+3&7))+(p<<3),G=c+r.F.contSize(U.fltree,U.lhst)+r.F.contSize(U.fdtree,U.dhst),se=c+r.F.contSize(U.ltree,U.lhst)+r.F.contSize(U.dtree,U.dhst);se+=14+3*V+r.F.contSize(U.itree,U.ihst)+(2*U.ihst[16]+3*U.ihst[17]+7*U.ihst[18]);for(var re=0;re<286;re++)U.lhst[re]=0;for(re=0;re<30;re++)U.dhst[re]=0;for(re=0;re<19;re++)U.ihst[re]=0;var ce=L<G&&L<se?0:G<se?1:2;if(P(m,v,a),P(m,v+1,ce),v+=3,ce==0){for(;(7&v)!=0;)v++;v=r.F._copyExact(d,h,p,m,v)}else{var W,fe;if(ce==1&&(W=U.fltree,fe=U.fdtree),ce==2){r.F.makeCodes(U.ltree,w),r.F.revCodes(U.ltree,w),r.F.makeCodes(U.dtree,T),r.F.revCodes(U.dtree,T),r.F.makeCodes(U.itree,M),r.F.revCodes(U.itree,M),W=U.ltree,fe=U.dtree,z(m,v,O-257),z(m,v+=5,q-1),z(m,v+=5,V-4),v+=4;for(var D=0;D<V;D++)z(m,v+3*D,U.itree[1+(U.ordr[D]<<1)]);v+=3*V,v=r.F._codeTiny(F,U.itree,m,v),v=r.F._codeTiny($,U.itree,m,v)}for(var R=h,ve=0;ve<l;ve+=2){for(var oe=o[ve],le=oe>>>23,I=R+(8388607&oe);R<I;)v=r.F._writeLit(d[R++],W,m,v);if(le!=0){var Y=o[ve+1],we=Y>>16,ge=Y>>8&255,me=255&Y;z(m,v=r.F._writeLit(257+ge,W,m,v),le-U.of0[ge]),v+=U.exb[ge],P(m,v=r.F._writeLit(me,fe,m,v),we-U.df0[me]),v+=U.dxb[me],R+=le}}v=r.F._writeLit(256,W,m,v)}return v},r.F._copyExact=function(a,o,l,c,d){var h=d>>>3;return c[h]=l,c[h+1]=l>>>8,c[h+2]=255-c[h],c[h+3]=255-c[h+1],h+=4,c.set(new Uint8Array(a.buffer,o,l),h),d+(l+4<<3)},r.F.getTrees=function(){for(var a=r.F.U,o=r.F._hufTree(a.lhst,a.ltree,15),l=r.F._hufTree(a.dhst,a.dtree,15),c=[],d=r.F._lenCodes(a.ltree,c),h=[],p=r.F._lenCodes(a.dtree,h),m=0;m<c.length;m+=2)a.ihst[c[m]]++;for(m=0;m<h.length;m+=2)a.ihst[h[m]]++;for(var v=r.F._hufTree(a.ihst,a.itree,7),x=19;x>4&&a.itree[1+(a.ordr[x-1]<<1)]==0;)x--;return[o,l,v,d,p,x,c,h]},r.F.getSecond=function(a){for(var o=[],l=0;l<a.length;l+=2)o.push(a[l+1]);return o},r.F.nonZero=function(a){for(var o="",l=0;l<a.length;l+=2)a[l+1]!=0&&(o+=(l>>1)+",");return o},r.F.contSize=function(a,o){for(var l=0,c=0;c<o.length;c++)l+=o[c]*a[1+(c<<1)];return l},r.F._codeTiny=function(a,o,l,c){for(var d=0;d<a.length;d+=2){var h=a[d],p=a[d+1];c=r.F._writeLit(h,o,l,c);var m=h==16?2:h==17?3:7;h>15&&(r.F._putsE(l,c,p,m),c+=m)}return c},r.F._lenCodes=function(a,o){for(var l=a.length;l!=2&&a[l-1]==0;)l-=2;for(var c=0;c<l;c+=2){var d=a[c+1],h=c+3<l?a[c+3]:-1,p=c+5<l?a[c+5]:-1,m=c==0?-1:a[c-1];if(d==0&&h==d&&p==d){for(var v=c+5;v+2<l&&a[v+2]==d;)v+=2;(x=Math.min(v+1-c>>>1,138))<11?o.push(17,x-3):o.push(18,x-11),c+=2*x-2}else if(d==m&&h==d&&p==d){for(v=c+5;v+2<l&&a[v+2]==d;)v+=2;var x=Math.min(v+1-c>>>1,6);o.push(16,x-3),c+=2*x-2}else o.push(d,0)}return l>>>1},r.F._hufTree=function(a,o,l){var c=[],d=a.length,h=o.length,p=0;for(p=0;p<h;p+=2)o[p]=0,o[p+1]=0;for(p=0;p<d;p++)a[p]!=0&&c.push({lit:p,f:a[p]});var m=c.length,v=c.slice(0);if(m==0)return 0;if(m==1){var x=c[0].lit;return v=x==0?1:0,o[1+(x<<1)]=1,o[1+(v<<1)]=1,1}c.sort((function(F,$){return F.f-$.f}));var w=c[0],T=c[1],M=0,O=1,q=2;for(c[0]={lit:-1,f:w.f+T.f,l:w,r:T,d:0};O!=m-1;)w=M!=O&&(q==m||c[M].f<c[q].f)?c[M++]:c[q++],T=M!=O&&(q==m||c[M].f<c[q].f)?c[M++]:c[q++],c[O++]={lit:-1,f:w.f+T.f,l:w,r:T};var V=r.F.setDepth(c[O-1],0);for(V>l&&(r.F.restrictDepth(v,l,V),V=l),p=0;p<m;p++)o[1+(v[p].lit<<1)]=v[p].d;return V},r.F.setDepth=function(a,o){return a.lit!=-1?(a.d=o,o):Math.max(r.F.setDepth(a.l,o+1),r.F.setDepth(a.r,o+1))},r.F.restrictDepth=function(a,o,l){var c=0,d=1<<l-o,h=0;for(a.sort((function(m,v){return v.d==m.d?m.f-v.f:v.d-m.d})),c=0;c<a.length&&a[c].d>o;c++){var p=a[c].d;a[c].d=o,h+=d-(1<<l-p)}for(h>>>=l-o;h>0;)(p=a[c].d)<o?(a[c].d++,h-=1<<o-p-1):c++;for(;c>=0;c--)a[c].d==o&&h<0&&(a[c].d--,h++);h!=0&&console.log("debt left")},r.F._goodIndex=function(a,o){var l=0;return o[16|l]<=a&&(l|=16),o[8|l]<=a&&(l|=8),o[4|l]<=a&&(l|=4),o[2|l]<=a&&(l|=2),o[1|l]<=a&&(l|=1),l},r.F._writeLit=function(a,o,l,c){return r.F._putsF(l,c,o[a<<1]),c+o[1+(a<<1)]},r.F.inflate=function(a,o){var l=Uint8Array;if(a[0]==3&&a[1]==0)return o||new l(0);var c=r.F,d=c._bitsF,h=c._bitsE,p=c._decodeTiny,m=c.makeCodes,v=c.codes2map,x=c._get17,w=c.U,T=o==null;T&&(o=new l(a.length>>>2<<3));for(var M,O,q=0,V=0,F=0,$=0,U=0,P=0,z=0,L=0,G=0;q==0;)if(q=d(a,G,1),V=d(a,G+1,2),G+=3,V!=0){if(T&&(o=r.F._check(o,L+(1<<17))),V==1&&(M=w.flmap,O=w.fdmap,P=511,z=31),V==2){F=h(a,G,5)+257,$=h(a,G+5,5)+1,U=h(a,G+10,4)+4,G+=14;for(var se=0;se<38;se+=2)w.itree[se]=0,w.itree[se+1]=0;var re=1;for(se=0;se<U;se++){var ce=h(a,G+3*se,3);w.itree[1+(w.ordr[se]<<1)]=ce,ce>re&&(re=ce)}G+=3*U,m(w.itree,re),v(w.itree,re,w.imap),M=w.lmap,O=w.dmap,G=p(w.imap,(1<<re)-1,F+$,a,G,w.ttree);var W=c._copyOut(w.ttree,0,F,w.ltree);P=(1<<W)-1;var fe=c._copyOut(w.ttree,F,$,w.dtree);z=(1<<fe)-1,m(w.ltree,W),v(w.ltree,W,M),m(w.dtree,fe),v(w.dtree,fe,O)}for(;;){var D=M[x(a,G)&P];G+=15&D;var R=D>>>4;if(!(R>>>8))o[L++]=R;else{if(R==256)break;var ve=L+R-254;if(R>264){var oe=w.ldef[R-257];ve=L+(oe>>>3)+h(a,G,7&oe),G+=7&oe}var le=O[x(a,G)&z];G+=15&le;var I=le>>>4,Y=w.ddef[I],we=(Y>>>4)+d(a,G,15&Y);for(G+=15&Y,T&&(o=r.F._check(o,L+(1<<17)));L<ve;)o[L]=o[L++-we],o[L]=o[L++-we],o[L]=o[L++-we],o[L]=o[L++-we];L=ve}}}else{(7&G)!=0&&(G+=8-(7&G));var ge=4+(G>>>3),me=a[ge-4]|a[ge-3]<<8;T&&(o=r.F._check(o,L+me)),o.set(new l(a.buffer,a.byteOffset+ge,me),L),G=ge+me<<3,L+=me}return o.length==L?o:o.slice(0,L)},r.F._check=function(a,o){var l=a.length;if(o<=l)return a;var c=new Uint8Array(Math.max(l<<1,o));return c.set(a,0),c},r.F._decodeTiny=function(a,o,l,c,d,h){for(var p=r.F._bitsE,m=r.F._get17,v=0;v<l;){var x=a[m(c,d)&o];d+=15&x;var w=x>>>4;if(w<=15)h[v]=w,v++;else{var T=0,M=0;w==16?(M=3+p(c,d,2),d+=2,T=h[v-1]):w==17?(M=3+p(c,d,3),d+=3):w==18&&(M=11+p(c,d,7),d+=7);for(var O=v+M;v<O;)h[v]=T,v++}}return d},r.F._copyOut=function(a,o,l,c){for(var d=0,h=0,p=c.length>>>1;h<l;){var m=a[h+o];c[h<<1]=0,c[1+(h<<1)]=m,m>d&&(d=m),h++}for(;h<p;)c[h<<1]=0,c[1+(h<<1)]=0,h++;return d},r.F.makeCodes=function(a,o){for(var l,c,d,h,p=r.F.U,m=a.length,v=p.bl_count,x=0;x<=o;x++)v[x]=0;for(x=1;x<m;x+=2)v[a[x]]++;var w=p.next_code;for(l=0,v[0]=0,c=1;c<=o;c++)l=l+v[c-1]<<1,w[c]=l;for(d=0;d<m;d+=2)(h=a[d+1])!=0&&(a[d]=w[h],w[h]++)},r.F.codes2map=function(a,o,l){for(var c=a.length,d=r.F.U.rev15,h=0;h<c;h+=2)if(a[h+1]!=0)for(var p=h>>1,m=a[h+1],v=p<<4|m,x=o-m,w=a[h]<<x,T=w+(1<<x);w!=T;)l[d[w]>>>15-o]=v,w++},r.F.revCodes=function(a,o){for(var l=r.F.U.rev15,c=15-o,d=0;d<a.length;d+=2){var h=a[d]<<o-a[d+1];a[d]=l[h]>>>c}},r.F._putsE=function(a,o,l){l<<=7&o;var c=o>>>3;a[c]|=l,a[c+1]|=l>>>8},r.F._putsF=function(a,o,l){l<<=7&o;var c=o>>>3;a[c]|=l,a[c+1]|=l>>>8,a[c+2]|=l>>>16},r.F._bitsE=function(a,o,l){return(a[o>>>3]|a[1+(o>>>3)]<<8)>>>(7&o)&(1<<l)-1},r.F._bitsF=function(a,o,l){return(a[o>>>3]|a[1+(o>>>3)]<<8|a[2+(o>>>3)]<<16)>>>(7&o)&(1<<l)-1},r.F._get17=function(a,o){return(a[o>>>3]|a[1+(o>>>3)]<<8|a[2+(o>>>3)]<<16)>>>(7&o)},r.F._get25=function(a,o){return(a[o>>>3]|a[1+(o>>>3)]<<8|a[2+(o>>>3)]<<16|a[3+(o>>>3)]<<24)>>>(7&o)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var a=r.F.U,o=0;o<32768;o++){var l=o;l=(4278255360&(l=(4042322160&(l=(3435973836&(l=(2863311530&l)>>>1|(1431655765&l)<<1))>>>2|(858993459&l)<<2))>>>4|(252645135&l)<<4))>>>8|(16711935&l)<<8,a.rev15[o]=(l>>>16|l<<16)>>>17}function c(d,h,p){for(;h--!=0;)d.push(0,p)}for(o=0;o<32;o++)a.ldef[o]=a.of0[o]<<3|a.exb[o],a.ddef[o]=a.df0[o]<<4|a.dxb[o];c(a.fltree,144,8),c(a.fltree,112,9),c(a.fltree,24,7),c(a.fltree,8,8),r.F.makeCodes(a.fltree,9),r.F.codes2map(a.fltree,9,a.flmap),r.F.revCodes(a.fltree,9),c(a.fdtree,32,5),r.F.makeCodes(a.fdtree,5),r.F.codes2map(a.fdtree,5,a.fdmap),r.F.revCodes(a.fdtree,5),c(a.itree,19,0),c(a.ltree,286,0),c(a.dtree,30,0),c(a.ttree,320,0)})()})();var ZO=WO({__proto__:null,default:Ed},[Ed]);const pi=(function(){var t={nextZero(p,m){for(;p[m]!=0;)m++;return m},readUshort:(p,m)=>p[m]<<8|p[m+1],writeUshort(p,m,v){p[m]=v>>8&255,p[m+1]=255&v},readUint:(p,m)=>16777216*p[m]+(p[m+1]<<16|p[m+2]<<8|p[m+3]),writeUint(p,m,v){p[m]=v>>24&255,p[m+1]=v>>16&255,p[m+2]=v>>8&255,p[m+3]=255&v},readASCII(p,m,v){let x="";for(let w=0;w<v;w++)x+=String.fromCharCode(p[m+w]);return x},writeASCII(p,m,v){for(let x=0;x<v.length;x++)p[m+x]=v.charCodeAt(x)},readBytes(p,m,v){const x=[];for(let w=0;w<v;w++)x.push(p[m+w]);return x},pad:p=>p.length<2?`0${p}`:p,readUTF8(p,m,v){let x,w="";for(let T=0;T<v;T++)w+=`%${t.pad(p[m+T].toString(16))}`;try{x=decodeURIComponent(w)}catch{return t.readASCII(p,m,v)}return x}};function e(p,m,v,x){const w=m*v,T=o(x),M=Math.ceil(m*T/8),O=new Uint8Array(4*w),q=new Uint32Array(O.buffer),{ctype:V}=x,{depth:F}=x,$=t.readUshort;if(V==6){const oe=w<<2;if(F==8)for(var U=0;U<oe;U+=4)O[U]=p[U],O[U+1]=p[U+1],O[U+2]=p[U+2],O[U+3]=p[U+3];if(F==16)for(U=0;U<oe;U++)O[U]=p[U<<1]}else if(V==2){const oe=x.tabs.tRNS;if(oe==null){if(F==8)for(U=0;U<w;U++){var P=3*U;q[U]=255<<24|p[P+2]<<16|p[P+1]<<8|p[P]}if(F==16)for(U=0;U<w;U++)P=6*U,q[U]=255<<24|p[P+4]<<16|p[P+2]<<8|p[P]}else{var z=oe[0];const le=oe[1],I=oe[2];if(F==8)for(U=0;U<w;U++){var L=U<<2;P=3*U,q[U]=255<<24|p[P+2]<<16|p[P+1]<<8|p[P],p[P]==z&&p[P+1]==le&&p[P+2]==I&&(O[L+3]=0)}if(F==16)for(U=0;U<w;U++)L=U<<2,P=6*U,q[U]=255<<24|p[P+4]<<16|p[P+2]<<8|p[P],$(p,P)==z&&$(p,P+2)==le&&$(p,P+4)==I&&(O[L+3]=0)}}else if(V==3){const oe=x.tabs.PLTE,le=x.tabs.tRNS,I=le?le.length:0;if(F==1)for(var G=0;G<v;G++){var se=G*M,re=G*m;for(U=0;U<m;U++){L=re+U<<2;var ce=3*(W=p[se+(U>>3)]>>7-((7&U)<<0)&1);O[L]=oe[ce],O[L+1]=oe[ce+1],O[L+2]=oe[ce+2],O[L+3]=W<I?le[W]:255}}if(F==2)for(G=0;G<v;G++)for(se=G*M,re=G*m,U=0;U<m;U++)L=re+U<<2,ce=3*(W=p[se+(U>>2)]>>6-((3&U)<<1)&3),O[L]=oe[ce],O[L+1]=oe[ce+1],O[L+2]=oe[ce+2],O[L+3]=W<I?le[W]:255;if(F==4)for(G=0;G<v;G++)for(se=G*M,re=G*m,U=0;U<m;U++)L=re+U<<2,ce=3*(W=p[se+(U>>1)]>>4-((1&U)<<2)&15),O[L]=oe[ce],O[L+1]=oe[ce+1],O[L+2]=oe[ce+2],O[L+3]=W<I?le[W]:255;if(F==8)for(U=0;U<w;U++){var W;L=U<<2,ce=3*(W=p[U]),O[L]=oe[ce],O[L+1]=oe[ce+1],O[L+2]=oe[ce+2],O[L+3]=W<I?le[W]:255}}else if(V==4){if(F==8)for(U=0;U<w;U++){L=U<<2;var fe=p[D=U<<1];O[L]=fe,O[L+1]=fe,O[L+2]=fe,O[L+3]=p[D+1]}if(F==16)for(U=0;U<w;U++){var D;L=U<<2,fe=p[D=U<<2],O[L]=fe,O[L+1]=fe,O[L+2]=fe,O[L+3]=p[D+2]}}else if(V==0)for(z=x.tabs.tRNS?x.tabs.tRNS:-1,G=0;G<v;G++){const oe=G*M,le=G*m;if(F==1)for(var R=0;R<m;R++){var ve=(fe=255*(p[oe+(R>>>3)]>>>7-(7&R)&1))==255*z?0:255;q[le+R]=ve<<24|fe<<16|fe<<8|fe}else if(F==2)for(R=0;R<m;R++)ve=(fe=85*(p[oe+(R>>>2)]>>>6-((3&R)<<1)&3))==85*z?0:255,q[le+R]=ve<<24|fe<<16|fe<<8|fe;else if(F==4)for(R=0;R<m;R++)ve=(fe=17*(p[oe+(R>>>1)]>>>4-((1&R)<<2)&15))==17*z?0:255,q[le+R]=ve<<24|fe<<16|fe<<8|fe;else if(F==8)for(R=0;R<m;R++)ve=(fe=p[oe+R])==z?0:255,q[le+R]=ve<<24|fe<<16|fe<<8|fe;else if(F==16)for(R=0;R<m;R++)fe=p[oe+(R<<1)],ve=$(p,oe+(R<<1))==z?0:255,q[le+R]=ve<<24|fe<<16|fe<<8|fe}return O}function n(p,m,v,x){const w=o(p),T=Math.ceil(v*w/8),M=new Uint8Array((T+1+p.interlace)*x);return m=p.tabs.CgBI?a(m,M):r(m,M),p.interlace==0?m=l(m,p,0,v,x):p.interlace==1&&(m=(function(q,V){const F=V.width,$=V.height,U=o(V),P=U>>3,z=Math.ceil(F*U/8),L=new Uint8Array($*z);let G=0;const se=[0,0,4,0,2,0,1],re=[0,4,0,2,0,1,0],ce=[8,8,8,4,4,2,2],W=[8,8,4,4,2,2,1];let fe=0;for(;fe<7;){const R=ce[fe],ve=W[fe];let oe=0,le=0,I=se[fe];for(;I<$;)I+=R,le++;let Y=re[fe];for(;Y<F;)Y+=ve,oe++;const we=Math.ceil(oe*U/8);l(q,V,G,oe,le);let ge=0,me=se[fe];for(;me<$;){let _e=re[fe],Fe=G+ge*we<<3;for(;_e<F;){var D;if(U==1&&(D=(D=q[Fe>>3])>>7-(7&Fe)&1,L[me*z+(_e>>3)]|=D<<7-((7&_e)<<0)),U==2&&(D=(D=q[Fe>>3])>>6-(7&Fe)&3,L[me*z+(_e>>2)]|=D<<6-((3&_e)<<1)),U==4&&(D=(D=q[Fe>>3])>>4-(7&Fe)&15,L[me*z+(_e>>1)]|=D<<4-((1&_e)<<2)),U>=8){const Ze=me*z+_e*P;for(let Qe=0;Qe<P;Qe++)L[Ze+Qe]=q[(Fe>>3)+Qe]}Fe+=U,_e+=ve}ge++,me+=R}oe*le!=0&&(G+=le*(1+we)),fe+=1}return L})(m,p)),m}function r(p,m){return a(new Uint8Array(p.buffer,2,p.length-6),m)}var a=(function(){const p={H:{}};return p.H.N=function(m,v){const x=Uint8Array;let w,T,M=0,O=0,q=0,V=0,F=0,$=0,U=0,P=0,z=0;if(m[0]==3&&m[1]==0)return v||new x(0);const L=p.H,G=L.b,se=L.e,re=L.R,ce=L.n,W=L.A,fe=L.Z,D=L.m,R=v==null;for(R&&(v=new x(m.length>>>2<<5));M==0;)if(M=G(m,z,1),O=G(m,z+1,2),z+=3,O!=0){if(R&&(v=p.H.W(v,P+(1<<17))),O==1&&(w=D.J,T=D.h,$=511,U=31),O==2){q=se(m,z,5)+257,V=se(m,z+5,5)+1,F=se(m,z+10,4)+4,z+=14;let oe=1;for(var ve=0;ve<38;ve+=2)D.Q[ve]=0,D.Q[ve+1]=0;for(ve=0;ve<F;ve++){const Y=se(m,z+3*ve,3);D.Q[1+(D.X[ve]<<1)]=Y,Y>oe&&(oe=Y)}z+=3*F,ce(D.Q,oe),W(D.Q,oe,D.u),w=D.w,T=D.d,z=re(D.u,(1<<oe)-1,q+V,m,z,D.v);const le=L.V(D.v,0,q,D.C);$=(1<<le)-1;const I=L.V(D.v,q,V,D.D);U=(1<<I)-1,ce(D.C,le),W(D.C,le,w),ce(D.D,I),W(D.D,I,T)}for(;;){const oe=w[fe(m,z)&$];z+=15&oe;const le=oe>>>4;if(!(le>>>8))v[P++]=le;else{if(le==256)break;{let I=P+le-254;if(le>264){const _e=D.q[le-257];I=P+(_e>>>3)+se(m,z,7&_e),z+=7&_e}const Y=T[fe(m,z)&U];z+=15&Y;const we=Y>>>4,ge=D.c[we],me=(ge>>>4)+G(m,z,15&ge);for(z+=15&ge;P<I;)v[P]=v[P++-me],v[P]=v[P++-me],v[P]=v[P++-me],v[P]=v[P++-me];P=I}}}}else{(7&z)!=0&&(z+=8-(7&z));const oe=4+(z>>>3),le=m[oe-4]|m[oe-3]<<8;R&&(v=p.H.W(v,P+le)),v.set(new x(m.buffer,m.byteOffset+oe,le),P),z=oe+le<<3,P+=le}return v.length==P?v:v.slice(0,P)},p.H.W=function(m,v){const x=m.length;if(v<=x)return m;const w=new Uint8Array(x<<1);return w.set(m,0),w},p.H.R=function(m,v,x,w,T,M){const O=p.H.e,q=p.H.Z;let V=0;for(;V<x;){const F=m[q(w,T)&v];T+=15&F;const $=F>>>4;if($<=15)M[V]=$,V++;else{let U=0,P=0;$==16?(P=3+O(w,T,2),T+=2,U=M[V-1]):$==17?(P=3+O(w,T,3),T+=3):$==18&&(P=11+O(w,T,7),T+=7);const z=V+P;for(;V<z;)M[V]=U,V++}}return T},p.H.V=function(m,v,x,w){let T=0,M=0;const O=w.length>>>1;for(;M<x;){const q=m[M+v];w[M<<1]=0,w[1+(M<<1)]=q,q>T&&(T=q),M++}for(;M<O;)w[M<<1]=0,w[1+(M<<1)]=0,M++;return T},p.H.n=function(m,v){const x=p.H.m,w=m.length;let T,M,O,q;const V=x.j;for(var F=0;F<=v;F++)V[F]=0;for(F=1;F<w;F+=2)V[m[F]]++;const $=x.K;for(T=0,V[0]=0,M=1;M<=v;M++)T=T+V[M-1]<<1,$[M]=T;for(O=0;O<w;O+=2)q=m[O+1],q!=0&&(m[O]=$[q],$[q]++)},p.H.A=function(m,v,x){const w=m.length,T=p.H.m.r;for(let M=0;M<w;M+=2)if(m[M+1]!=0){const O=M>>1,q=m[M+1],V=O<<4|q,F=v-q;let $=m[M]<<F;const U=$+(1<<F);for(;$!=U;)x[T[$]>>>15-v]=V,$++}},p.H.l=function(m,v){const x=p.H.m.r,w=15-v;for(let T=0;T<m.length;T+=2){const M=m[T]<<v-m[T+1];m[T]=x[M]>>>w}},p.H.M=function(m,v,x){x<<=7&v;const w=v>>>3;m[w]|=x,m[w+1]|=x>>>8},p.H.I=function(m,v,x){x<<=7&v;const w=v>>>3;m[w]|=x,m[w+1]|=x>>>8,m[w+2]|=x>>>16},p.H.e=function(m,v,x){return(m[v>>>3]|m[1+(v>>>3)]<<8)>>>(7&v)&(1<<x)-1},p.H.b=function(m,v,x){return(m[v>>>3]|m[1+(v>>>3)]<<8|m[2+(v>>>3)]<<16)>>>(7&v)&(1<<x)-1},p.H.Z=function(m,v){return(m[v>>>3]|m[1+(v>>>3)]<<8|m[2+(v>>>3)]<<16)>>>(7&v)},p.H.i=function(m,v){return(m[v>>>3]|m[1+(v>>>3)]<<8|m[2+(v>>>3)]<<16|m[3+(v>>>3)]<<24)>>>(7&v)},p.H.m=(function(){const m=Uint16Array,v=Uint32Array;return{K:new m(16),j:new m(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new m(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new v(32),J:new m(512),_:[],h:new m(32),$:[],w:new m(32768),C:[],v:[],d:new m(32768),D:[],u:new m(512),Q:[],r:new m(32768),s:new v(286),Y:new v(30),a:new v(19),t:new v(15e3),k:new m(65536),g:new m(32768)}})(),(function(){const m=p.H.m;for(var v=0;v<32768;v++){let w=v;w=(2863311530&w)>>>1|(1431655765&w)<<1,w=(3435973836&w)>>>2|(858993459&w)<<2,w=(4042322160&w)>>>4|(252645135&w)<<4,w=(4278255360&w)>>>8|(16711935&w)<<8,m.r[v]=(w>>>16|w<<16)>>>17}function x(w,T,M){for(;T--!=0;)w.push(0,M)}for(v=0;v<32;v++)m.q[v]=m.S[v]<<3|m.T[v],m.c[v]=m.p[v]<<4|m.z[v];x(m._,144,8),x(m._,112,9),x(m._,24,7),x(m._,8,8),p.H.n(m._,9),p.H.A(m._,9,m.J),p.H.l(m._,9),x(m.$,32,5),p.H.n(m.$,5),p.H.A(m.$,5,m.h),p.H.l(m.$,5),x(m.Q,19,0),x(m.C,286,0),x(m.D,30,0),x(m.v,320,0)})(),p.H.N})();function o(p){return[1,null,3,1,2,null,4][p.ctype]*p.depth}function l(p,m,v,x,w){let T=o(m);const M=Math.ceil(x*T/8);let O,q;T=Math.ceil(T/8);let V=p[v],F=0;if(V>1&&(p[v]=[0,0,1][V-2]),V==3)for(F=T;F<M;F++)p[F+1]=p[F+1]+(p[F+1-T]>>>1)&255;for(let $=0;$<w;$++)if(O=v+$*M,q=O+$+1,V=p[q-1],F=0,V==0)for(;F<M;F++)p[O+F]=p[q+F];else if(V==1){for(;F<T;F++)p[O+F]=p[q+F];for(;F<M;F++)p[O+F]=p[q+F]+p[O+F-T]}else if(V==2)for(;F<M;F++)p[O+F]=p[q+F]+p[O+F-M];else if(V==3){for(;F<T;F++)p[O+F]=p[q+F]+(p[O+F-M]>>>1);for(;F<M;F++)p[O+F]=p[q+F]+(p[O+F-M]+p[O+F-T]>>>1)}else{for(;F<T;F++)p[O+F]=p[q+F]+c(0,p[O+F-M],0);for(;F<M;F++)p[O+F]=p[q+F]+c(p[O+F-T],p[O+F-M],p[O+F-T-M])}return p}function c(p,m,v){const x=p+m-v,w=x-p,T=x-m,M=x-v;return w*w<=T*T&&w*w<=M*M?p:T*T<=M*M?m:v}function d(p,m,v){v.width=t.readUint(p,m),m+=4,v.height=t.readUint(p,m),m+=4,v.depth=p[m],m++,v.ctype=p[m],m++,v.compress=p[m],m++,v.filter=p[m],m++,v.interlace=p[m],m++}function h(p,m,v,x,w,T,M,O,q){const V=Math.min(m,w),F=Math.min(v,T);let $=0,U=0;for(let fe=0;fe<F;fe++)for(let D=0;D<V;D++)if(M>=0&&O>=0?($=fe*m+D<<2,U=(O+fe)*w+M+D<<2):($=(-O+fe)*m-M+D<<2,U=fe*w+D<<2),q==0)x[U]=p[$],x[U+1]=p[$+1],x[U+2]=p[$+2],x[U+3]=p[$+3];else if(q==1){var P=p[$+3]*.00392156862745098,z=p[$]*P,L=p[$+1]*P,G=p[$+2]*P,se=x[U+3]*(1/255),re=x[U]*se,ce=x[U+1]*se,W=x[U+2]*se;const R=1-P,ve=P+se*R,oe=ve==0?0:1/ve;x[U+3]=255*ve,x[U+0]=(z+re*R)*oe,x[U+1]=(L+ce*R)*oe,x[U+2]=(G+W*R)*oe}else if(q==2)P=p[$+3],z=p[$],L=p[$+1],G=p[$+2],se=x[U+3],re=x[U],ce=x[U+1],W=x[U+2],P==se&&z==re&&L==ce&&G==W?(x[U]=0,x[U+1]=0,x[U+2]=0,x[U+3]=0):(x[U]=z,x[U+1]=L,x[U+2]=G,x[U+3]=P);else if(q==3){if(P=p[$+3],z=p[$],L=p[$+1],G=p[$+2],se=x[U+3],re=x[U],ce=x[U+1],W=x[U+2],P==se&&z==re&&L==ce&&G==W)continue;if(P<220&&se>20)return!1}return!0}return{decode:function(m){const v=new Uint8Array(m);let x=8;const w=t,T=w.readUshort,M=w.readUint,O={tabs:{},frames:[]},q=new Uint8Array(v.length);let V,F=0,$=0;const U=[137,80,78,71,13,10,26,10];for(var P=0;P<8;P++)if(v[P]!=U[P])throw"The input is not a PNG file!";for(;x<v.length;){const fe=w.readUint(v,x);x+=4;const D=w.readASCII(v,x,4);if(x+=4,D=="IHDR")d(v,x,O);else if(D=="iCCP"){for(var z=x;v[z]!=0;)z++;w.readASCII(v,x,z-x),v[z+1];const R=v.slice(z+2,x+fe);let ve=null;try{ve=r(R)}catch{ve=a(R)}O.tabs[D]=ve}else if(D=="CgBI")O.tabs[D]=v.slice(x,x+4);else if(D=="IDAT"){for(P=0;P<fe;P++)q[F+P]=v[x+P];F+=fe}else if(D=="acTL")O.tabs[D]={num_frames:M(v,x),num_plays:M(v,x+4)},V=new Uint8Array(v.length);else if(D=="fcTL"){$!=0&&((W=O.frames[O.frames.length-1]).data=n(O,V.slice(0,$),W.rect.width,W.rect.height),$=0);const R={x:M(v,x+12),y:M(v,x+16),width:M(v,x+4),height:M(v,x+8)};let ve=T(v,x+22);ve=T(v,x+20)/(ve==0?100:ve);const oe={rect:R,delay:Math.round(1e3*ve),dispose:v[x+24],blend:v[x+25]};O.frames.push(oe)}else if(D=="fdAT"){for(P=0;P<fe-4;P++)V[$+P]=v[x+P+4];$+=fe-4}else if(D=="pHYs")O.tabs[D]=[w.readUint(v,x),w.readUint(v,x+4),v[x+8]];else if(D=="cHRM")for(O.tabs[D]=[],P=0;P<8;P++)O.tabs[D].push(w.readUint(v,x+4*P));else if(D=="tEXt"||D=="zTXt"){O.tabs[D]==null&&(O.tabs[D]={});var L=w.nextZero(v,x),G=w.readASCII(v,x,L-x),se=x+fe-L-1;if(D=="tEXt")ce=w.readASCII(v,L+1,se);else{var re=r(v.slice(L+2,L+2+se));ce=w.readUTF8(re,0,re.length)}O.tabs[D][G]=ce}else if(D=="iTXt"){O.tabs[D]==null&&(O.tabs[D]={}),L=0,z=x,L=w.nextZero(v,z),G=w.readASCII(v,z,L-z);const R=v[z=L+1];var ce;v[z+1],z+=2,L=w.nextZero(v,z),w.readASCII(v,z,L-z),z=L+1,L=w.nextZero(v,z),w.readUTF8(v,z,L-z),se=fe-((z=L+1)-x),R==0?ce=w.readUTF8(v,z,se):(re=r(v.slice(z,z+se)),ce=w.readUTF8(re,0,re.length)),O.tabs[D][G]=ce}else if(D=="PLTE")O.tabs[D]=w.readBytes(v,x,fe);else if(D=="hIST"){const R=O.tabs.PLTE.length/3;for(O.tabs[D]=[],P=0;P<R;P++)O.tabs[D].push(T(v,x+2*P))}else if(D=="tRNS")O.ctype==3?O.tabs[D]=w.readBytes(v,x,fe):O.ctype==0?O.tabs[D]=T(v,x):O.ctype==2&&(O.tabs[D]=[T(v,x),T(v,x+2),T(v,x+4)]);else if(D=="gAMA")O.tabs[D]=w.readUint(v,x)/1e5;else if(D=="sRGB")O.tabs[D]=v[x];else if(D=="bKGD")O.ctype==0||O.ctype==4?O.tabs[D]=[T(v,x)]:O.ctype==2||O.ctype==6?O.tabs[D]=[T(v,x),T(v,x+2),T(v,x+4)]:O.ctype==3&&(O.tabs[D]=v[x]);else if(D=="IEND")break;x+=fe,w.readUint(v,x),x+=4}var W;return $!=0&&((W=O.frames[O.frames.length-1]).data=n(O,V.slice(0,$),W.rect.width,W.rect.height)),O.data=n(O,q,O.width,O.height),delete O.compress,delete O.interlace,delete O.filter,O},toRGBA8:function(m){const v=m.width,x=m.height;if(m.tabs.acTL==null)return[e(m.data,v,x,m).buffer];const w=[];m.frames[0].data==null&&(m.frames[0].data=m.data);const T=v*x*4,M=new Uint8Array(T),O=new Uint8Array(T),q=new Uint8Array(T);for(let F=0;F<m.frames.length;F++){const $=m.frames[F],U=$.rect.x,P=$.rect.y,z=$.rect.width,L=$.rect.height,G=e($.data,z,L,m);if(F!=0)for(var V=0;V<T;V++)q[V]=M[V];if($.blend==0?h(G,z,L,M,v,x,U,P,0):$.blend==1&&h(G,z,L,M,v,x,U,P,1),w.push(M.buffer.slice(0)),$.dispose!=0){if($.dispose==1)h(O,z,L,M,v,x,U,P,0);else if($.dispose==2)for(V=0;V<T;V++)M[V]=q[V]}}return w},_paeth:c,_copyTile:h,_bin:t}})();(function(){const{_copyTile:t}=pi,{_bin:e}=pi,n=pi._paeth;var r={table:(function(){const z=new Uint32Array(256);for(let L=0;L<256;L++){let G=L;for(let se=0;se<8;se++)1&G?G=3988292384^G>>>1:G>>>=1;z[L]=G}return z})(),update(z,L,G,se){for(let re=0;re<se;re++)z=r.table[255&(z^L[G+re])]^z>>>8;return z},crc:(z,L,G)=>4294967295^r.update(4294967295,z,L,G)};function a(z,L,G,se){L[G]+=z[0]*se>>4,L[G+1]+=z[1]*se>>4,L[G+2]+=z[2]*se>>4,L[G+3]+=z[3]*se>>4}function o(z){return Math.max(0,Math.min(255,z))}function l(z,L){const G=z[0]-L[0],se=z[1]-L[1],re=z[2]-L[2],ce=z[3]-L[3];return G*G+se*se+re*re+ce*ce}function c(z,L,G,se,re,ce,W){W==null&&(W=1);const fe=se.length,D=[];for(var R=0;R<fe;R++){const me=se[R];D.push([me>>>0&255,me>>>8&255,me>>>16&255,me>>>24&255])}for(R=0;R<fe;R++){let me=4294967295;for(var ve=0,oe=0;oe<fe;oe++){var le=l(D[R],D[oe]);oe!=R&&le<me&&(me=le,ve=oe)}}const I=new Uint32Array(re.buffer),Y=new Int16Array(L*G*4),we=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(R=0;R<we.length;R++)we[R]=255*((we[R]+.5)/16-.5);for(let me=0;me<G;me++)for(let _e=0;_e<L;_e++){var ge;R=4*(me*L+_e),W!=2?ge=[o(z[R]+Y[R]),o(z[R+1]+Y[R+1]),o(z[R+2]+Y[R+2]),o(z[R+3]+Y[R+3])]:(le=we[4*(3&me)+(3&_e)],ge=[o(z[R]+le),o(z[R+1]+le),o(z[R+2]+le),o(z[R+3]+le)]),ve=0;let Fe=16777215;for(oe=0;oe<fe;oe++){const ze=l(ge,D[oe]);ze<Fe&&(Fe=ze,ve=oe)}const Ze=D[ve],Qe=[ge[0]-Ze[0],ge[1]-Ze[1],ge[2]-Ze[2],ge[3]-Ze[3]];W==1&&(_e!=L-1&&a(Qe,Y,R+4,7),me!=G-1&&(_e!=0&&a(Qe,Y,R+4*L-4,3),a(Qe,Y,R+4*L,5),_e!=L-1&&a(Qe,Y,R+4*L+4,1))),ce[R>>2]=ve,I[R>>2]=se[ve]}}function d(z,L,G,se,re){re==null&&(re={});const{crc:ce}=r,W=e.writeUint,fe=e.writeUshort,D=e.writeASCII;let R=8;const ve=z.frames.length>1;let oe,le=!1,I=33+(ve?20:0);if(re.sRGB!=null&&(I+=13),re.pHYs!=null&&(I+=21),re.iCCP!=null&&(oe=pako.deflate(re.iCCP),I+=21+oe.length+4),z.ctype==3){for(var Y=z.plte.length,we=0;we<Y;we++)z.plte[we]>>>24!=255&&(le=!0);I+=8+3*Y+4+(le?8+1*Y+4:0)}for(var ge=0;ge<z.frames.length;ge++)ve&&(I+=38),I+=(Ze=z.frames[ge]).cimg.length+12,ge!=0&&(I+=4);I+=12;const me=new Uint8Array(I),_e=[137,80,78,71,13,10,26,10];for(we=0;we<8;we++)me[we]=_e[we];if(W(me,R,13),R+=4,D(me,R,"IHDR"),R+=4,W(me,R,L),R+=4,W(me,R,G),R+=4,me[R]=z.depth,R++,me[R]=z.ctype,R++,me[R]=0,R++,me[R]=0,R++,me[R]=0,R++,W(me,R,ce(me,R-17,17)),R+=4,re.sRGB!=null&&(W(me,R,1),R+=4,D(me,R,"sRGB"),R+=4,me[R]=re.sRGB,R++,W(me,R,ce(me,R-5,5)),R+=4),re.iCCP!=null){const Qe=13+oe.length;W(me,R,Qe),R+=4,D(me,R,"iCCP"),R+=4,D(me,R,"ICC profile"),R+=11,R+=2,me.set(oe,R),R+=oe.length,W(me,R,ce(me,R-(Qe+4),Qe+4)),R+=4}if(re.pHYs!=null&&(W(me,R,9),R+=4,D(me,R,"pHYs"),R+=4,W(me,R,re.pHYs[0]),R+=4,W(me,R,re.pHYs[1]),R+=4,me[R]=re.pHYs[2],R++,W(me,R,ce(me,R-13,13)),R+=4),ve&&(W(me,R,8),R+=4,D(me,R,"acTL"),R+=4,W(me,R,z.frames.length),R+=4,W(me,R,re.loop!=null?re.loop:0),R+=4,W(me,R,ce(me,R-12,12)),R+=4),z.ctype==3){for(W(me,R,3*(Y=z.plte.length)),R+=4,D(me,R,"PLTE"),R+=4,we=0;we<Y;we++){const Qe=3*we,ze=z.plte[we],Tt=255&ze,Xe=ze>>>8&255,Xn=ze>>>16&255;me[R+Qe+0]=Tt,me[R+Qe+1]=Xe,me[R+Qe+2]=Xn}if(R+=3*Y,W(me,R,ce(me,R-3*Y-4,3*Y+4)),R+=4,le){for(W(me,R,Y),R+=4,D(me,R,"tRNS"),R+=4,we=0;we<Y;we++)me[R+we]=z.plte[we]>>>24&255;R+=Y,W(me,R,ce(me,R-Y-4,Y+4)),R+=4}}let Fe=0;for(ge=0;ge<z.frames.length;ge++){var Ze=z.frames[ge];ve&&(W(me,R,26),R+=4,D(me,R,"fcTL"),R+=4,W(me,R,Fe++),R+=4,W(me,R,Ze.rect.width),R+=4,W(me,R,Ze.rect.height),R+=4,W(me,R,Ze.rect.x),R+=4,W(me,R,Ze.rect.y),R+=4,fe(me,R,se[ge]),R+=2,fe(me,R,1e3),R+=2,me[R]=Ze.dispose,R++,me[R]=Ze.blend,R++,W(me,R,ce(me,R-30,30)),R+=4);const Qe=Ze.cimg;W(me,R,(Y=Qe.length)+(ge==0?0:4)),R+=4;const ze=R;D(me,R,ge==0?"IDAT":"fdAT"),R+=4,ge!=0&&(W(me,R,Fe++),R+=4),me.set(Qe,R),R+=Y,W(me,R,ce(me,ze,R-ze)),R+=4}return W(me,R,0),R+=4,D(me,R,"IEND"),R+=4,W(me,R,ce(me,R-4,4)),R+=4,me.buffer}function h(z,L,G){for(let se=0;se<z.frames.length;se++){const re=z.frames[se];re.rect.width;const ce=re.rect.height,W=new Uint8Array(ce*re.bpl+ce);re.cimg=x(re.img,ce,re.bpp,re.bpl,W,L,G)}}function p(z,L,G,se,re){const ce=re[0],W=re[1],fe=re[2],D=re[3],R=re[4],ve=re[5];let oe=6,le=8,I=255;for(var Y=0;Y<z.length;Y++){const rn=new Uint8Array(z[Y]);for(var we=rn.length,ge=0;ge<we;ge+=4)I&=rn[ge+3]}const me=I!=255,_e=(function(Nt,Et,Zt,en,mt,Dn){const Dt=[];for(var it=0;it<Nt.length;it++){const an=new Uint8Array(Nt[it]),Rn=new Uint32Array(an.buffer);var fn;let sn=0,xn=0,Rt=Et,Kt=Zt,He=en?1:0;if(it!=0){const Pi=Dn||en||it==1||Dt[it-2].dispose!=0?1:2;let Or=0,Vi=1e9;for(let je=0;je<Pi;je++){var Vt=new Uint8Array(Nt[it-1-je]);const Si=new Uint32Array(Nt[it-1-je]);let Jn=Et,Sn=Zt,yr=-1,cr=-1;for(let Vr=0;Vr<Zt;Vr++)for(let _n=0;_n<Et;_n++)Rn[Ft=Vr*Et+_n]!=Si[Ft]&&(_n<Jn&&(Jn=_n),_n>yr&&(yr=_n),Vr<Sn&&(Sn=Vr),Vr>cr&&(cr=Vr));yr==-1&&(Jn=Sn=yr=cr=0),mt&&((1&Jn)==1&&Jn--,(1&Sn)==1&&Sn--);const Oo=(yr-Jn+1)*(cr-Sn+1);Oo<Vi&&(Vi=Oo,Or=je,sn=Jn,xn=Sn,Rt=yr-Jn+1,Kt=cr-Sn+1)}Vt=new Uint8Array(Nt[it-1-Or]),Or==1&&(Dt[it-1].dispose=2),fn=new Uint8Array(Rt*Kt*4),t(Vt,Et,Zt,fn,Rt,Kt,-sn,-xn,0),He=t(an,Et,Zt,fn,Rt,Kt,-sn,-xn,3)?1:0,He==1?v(an,Et,Zt,fn,{x:sn,y:xn,width:Rt,height:Kt}):t(an,Et,Zt,fn,Rt,Kt,-sn,-xn,0)}else fn=an.slice(0);Dt.push({rect:{x:sn,y:xn,width:Rt,height:Kt},img:fn,blend:He,dispose:0})}if(en)for(it=0;it<Dt.length;it++){if((ur=Dt[it]).blend==1)continue;const an=ur.rect,Rn=Dt[it-1].rect,sn=Math.min(an.x,Rn.x),xn=Math.min(an.y,Rn.y),Rt={x:sn,y:xn,width:Math.max(an.x+an.width,Rn.x+Rn.width)-sn,height:Math.max(an.y+an.height,Rn.y+Rn.height)-xn};Dt[it-1].dispose=1,it-1!=0&&m(Nt,Et,Zt,Dt,it-1,Rt,mt),m(Nt,Et,Zt,Dt,it,Rt,mt)}let lr=0;if(Nt.length!=1)for(var Ft=0;Ft<Dt.length;Ft++){var ur;lr+=(ur=Dt[Ft]).rect.width*ur.rect.height}return Dt})(z,L,G,ce,W,fe),Fe={},Ze=[],Qe=[];if(se!=0){const rn=[];for(ge=0;ge<_e.length;ge++)rn.push(_e[ge].img.buffer);const Nt=(function(mt){let Dn=0;for(var Dt=0;Dt<mt.length;Dt++)Dn+=mt[Dt].byteLength;const it=new Uint8Array(Dn);let fn=0;for(Dt=0;Dt<mt.length;Dt++){const Vt=new Uint8Array(mt[Dt]),lr=Vt.length;for(let Ft=0;Ft<lr;Ft+=4){let ur=Vt[Ft],an=Vt[Ft+1],Rn=Vt[Ft+2];const sn=Vt[Ft+3];sn==0&&(ur=an=Rn=0),it[fn+Ft]=ur,it[fn+Ft+1]=an,it[fn+Ft+2]=Rn,it[fn+Ft+3]=sn}fn+=lr}return it.buffer})(rn),Et=T(Nt,se);for(ge=0;ge<Et.plte.length;ge++)Ze.push(Et.plte[ge].est.rgba);let Zt=0;for(ge=0;ge<_e.length;ge++){const en=(Tt=_e[ge]).img.length;var ze=new Uint8Array(Et.inds.buffer,Zt>>2,en>>2);Qe.push(ze);const mt=new Uint8Array(Et.abuf,Zt,en);ve&&c(Tt.img,Tt.rect.width,Tt.rect.height,Ze,mt,ze),Tt.img.set(mt),Zt+=en}}else for(Y=0;Y<_e.length;Y++){var Tt=_e[Y];const rn=new Uint32Array(Tt.img.buffer);var Xe=Tt.rect.width;for(we=rn.length,ze=new Uint8Array(we),Qe.push(ze),ge=0;ge<we;ge++){const Nt=rn[ge];if(ge!=0&&Nt==rn[ge-1])ze[ge]=ze[ge-1];else if(ge>Xe&&Nt==rn[ge-Xe])ze[ge]=ze[ge-Xe];else{let Et=Fe[Nt];if(Et==null&&(Fe[Nt]=Et=Ze.length,Ze.push(Nt),Ze.length>=300))break;ze[ge]=Et}}}const Xn=Ze.length;for(Xn<=256&&R==0&&(le=Xn<=2?1:Xn<=4?2:Xn<=16?4:8,le=Math.max(le,D)),Y=0;Y<_e.length;Y++){(Tt=_e[Y]).rect.x,Tt.rect.y,Xe=Tt.rect.width;const rn=Tt.rect.height;let Nt=Tt.img;new Uint32Array(Nt.buffer);let Et=4*Xe,Zt=4;if(Xn<=256&&R==0){Et=Math.ceil(le*Xe/8);var bn=new Uint8Array(Et*rn);const en=Qe[Y];for(let mt=0;mt<rn;mt++){ge=mt*Et;const Dn=mt*Xe;if(le==8)for(var vt=0;vt<Xe;vt++)bn[ge+vt]=en[Dn+vt];else if(le==4)for(vt=0;vt<Xe;vt++)bn[ge+(vt>>1)]|=en[Dn+vt]<<4-4*(1&vt);else if(le==2)for(vt=0;vt<Xe;vt++)bn[ge+(vt>>2)]|=en[Dn+vt]<<6-2*(3&vt);else if(le==1)for(vt=0;vt<Xe;vt++)bn[ge+(vt>>3)]|=en[Dn+vt]<<7-1*(7&vt)}Nt=bn,oe=3,Zt=1}else if(me==0&&_e.length==1){bn=new Uint8Array(Xe*rn*3);const en=Xe*rn;for(ge=0;ge<en;ge++){const mt=3*ge,Dn=4*ge;bn[mt]=Nt[Dn],bn[mt+1]=Nt[Dn+1],bn[mt+2]=Nt[Dn+2]}Nt=bn,oe=2,Zt=3,Et=3*Xe}Tt.img=Nt,Tt.bpl=Et,Tt.bpp=Zt}return{ctype:oe,depth:le,plte:Ze,frames:_e}}function m(z,L,G,se,re,ce,W){const fe=Uint8Array,D=Uint32Array,R=new fe(z[re-1]),ve=new D(z[re-1]),oe=re+1<z.length?new fe(z[re+1]):null,le=new fe(z[re]),I=new D(le.buffer);let Y=L,we=G,ge=-1,me=-1;for(let Fe=0;Fe<ce.height;Fe++)for(let Ze=0;Ze<ce.width;Ze++){const Qe=ce.x+Ze,ze=ce.y+Fe,Tt=ze*L+Qe,Xe=I[Tt];Xe==0||se[re-1].dispose==0&&ve[Tt]==Xe&&(oe==null||oe[4*Tt+3]!=0)||(Qe<Y&&(Y=Qe),Qe>ge&&(ge=Qe),ze<we&&(we=ze),ze>me&&(me=ze))}ge==-1&&(Y=we=ge=me=0),W&&((1&Y)==1&&Y--,(1&we)==1&&we--),ce={x:Y,y:we,width:ge-Y+1,height:me-we+1};const _e=se[re];_e.rect=ce,_e.blend=1,_e.img=new Uint8Array(ce.width*ce.height*4),se[re-1].dispose==0?(t(R,L,G,_e.img,ce.width,ce.height,-ce.x,-ce.y,0),v(le,L,G,_e.img,ce)):t(le,L,G,_e.img,ce.width,ce.height,-ce.x,-ce.y,0)}function v(z,L,G,se,re){t(z,L,G,se,re.width,re.height,-re.x,-re.y,2)}function x(z,L,G,se,re,ce,W){const fe=[];let D,R=[0,1,2,3,4];ce!=-1?R=[ce]:(L*se>5e5||G==1)&&(R=[0]),W&&(D={level:0});const ve=ZO;for(var oe=0;oe<R.length;oe++){for(let Y=0;Y<L;Y++)w(re,z,Y,se,G,R[oe]);fe.push(ve.deflate(re,D))}let le,I=1e9;for(oe=0;oe<fe.length;oe++)fe[oe].length<I&&(le=oe,I=fe[oe].length);return fe[le]}function w(z,L,G,se,re,ce){const W=G*se;let fe=W+G;if(z[fe]=ce,fe++,ce==0)if(se<500)for(var D=0;D<se;D++)z[fe+D]=L[W+D];else z.set(new Uint8Array(L.buffer,W,se),fe);else if(ce==1){for(D=0;D<re;D++)z[fe+D]=L[W+D];for(D=re;D<se;D++)z[fe+D]=L[W+D]-L[W+D-re]+256&255}else if(G==0){for(D=0;D<re;D++)z[fe+D]=L[W+D];if(ce==2)for(D=re;D<se;D++)z[fe+D]=L[W+D];if(ce==3)for(D=re;D<se;D++)z[fe+D]=L[W+D]-(L[W+D-re]>>1)+256&255;if(ce==4)for(D=re;D<se;D++)z[fe+D]=L[W+D]-n(L[W+D-re],0,0)+256&255}else{if(ce==2)for(D=0;D<se;D++)z[fe+D]=L[W+D]+256-L[W+D-se]&255;if(ce==3){for(D=0;D<re;D++)z[fe+D]=L[W+D]+256-(L[W+D-se]>>1)&255;for(D=re;D<se;D++)z[fe+D]=L[W+D]+256-(L[W+D-se]+L[W+D-re]>>1)&255}if(ce==4){for(D=0;D<re;D++)z[fe+D]=L[W+D]+256-n(0,L[W+D-se],0)&255;for(D=re;D<se;D++)z[fe+D]=L[W+D]+256-n(L[W+D-re],L[W+D-se],L[W+D-re-se])&255}}}function T(z,L){const G=new Uint8Array(z),se=G.slice(0),re=new Uint32Array(se.buffer),ce=M(se,L),W=ce[0],fe=ce[1],D=G.length,R=new Uint8Array(D>>2);let ve;if(G.length<2e7)for(var oe=0;oe<D;oe+=4)ve=O(W,le=G[oe]*(1/255),I=G[oe+1]*(1/255),Y=G[oe+2]*(1/255),we=G[oe+3]*(1/255)),R[oe>>2]=ve.ind,re[oe>>2]=ve.est.rgba;else for(oe=0;oe<D;oe+=4){var le=G[oe]*.00392156862745098,I=G[oe+1]*(1/255),Y=G[oe+2]*(1/255),we=G[oe+3]*(1/255);for(ve=W;ve.left;)ve=q(ve.est,le,I,Y,we)<=0?ve.left:ve.right;R[oe>>2]=ve.ind,re[oe>>2]=ve.est.rgba}return{abuf:se.buffer,inds:R,plte:fe}}function M(z,L,G){G==null&&(G=1e-4);const se=new Uint32Array(z.buffer),re={i0:0,i1:z.length,bst:null,est:null,tdst:0,left:null,right:null};re.bst=$(z,re.i0,re.i1),re.est=U(re.bst);const ce=[re];for(;ce.length<L;){let fe=0,D=0;for(var W=0;W<ce.length;W++)ce[W].est.L>fe&&(fe=ce[W].est.L,D=W);if(fe<G)break;const R=ce[D],ve=V(z,se,R.i0,R.i1,R.est.e,R.est.eMq255);if(R.i0>=ve||R.i1<=ve){R.est.L=0;continue}const oe={i0:R.i0,i1:ve,bst:null,est:null,tdst:0,left:null,right:null};oe.bst=$(z,oe.i0,oe.i1),oe.est=U(oe.bst);const le={i0:ve,i1:R.i1,bst:null,est:null,tdst:0,left:null,right:null};for(le.bst={R:[],m:[],N:R.bst.N-oe.bst.N},W=0;W<16;W++)le.bst.R[W]=R.bst.R[W]-oe.bst.R[W];for(W=0;W<4;W++)le.bst.m[W]=R.bst.m[W]-oe.bst.m[W];le.est=U(le.bst),R.left=oe,R.right=le,ce[D]=oe,ce.push(le)}for(ce.sort(((fe,D)=>D.bst.N-fe.bst.N)),W=0;W<ce.length;W++)ce[W].ind=W;return[re,ce]}function O(z,L,G,se,re){if(z.left==null)return z.tdst=(function(oe,le,I,Y,we){const ge=le-oe[0],me=I-oe[1],_e=Y-oe[2],Fe=we-oe[3];return ge*ge+me*me+_e*_e+Fe*Fe})(z.est.q,L,G,se,re),z;const ce=q(z.est,L,G,se,re);let W=z.left,fe=z.right;ce>0&&(W=z.right,fe=z.left);const D=O(W,L,G,se,re);if(D.tdst<=ce*ce)return D;const R=O(fe,L,G,se,re);return R.tdst<D.tdst?R:D}function q(z,L,G,se,re){const{e:ce}=z;return ce[0]*L+ce[1]*G+ce[2]*se+ce[3]*re-z.eMq}function V(z,L,G,se,re,ce){for(se-=4;G<se;){for(;F(z,G,re)<=ce;)G+=4;for(;F(z,se,re)>ce;)se-=4;if(G>=se)break;const W=L[G>>2];L[G>>2]=L[se>>2],L[se>>2]=W,G+=4,se-=4}for(;F(z,G,re)>ce;)G-=4;return G+4}function F(z,L,G){return z[L]*G[0]+z[L+1]*G[1]+z[L+2]*G[2]+z[L+3]*G[3]}function $(z,L,G){const se=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],re=[0,0,0,0],ce=G-L>>2;for(let W=L;W<G;W+=4){const fe=z[W]*.00392156862745098,D=z[W+1]*(1/255),R=z[W+2]*(1/255),ve=z[W+3]*(1/255);re[0]+=fe,re[1]+=D,re[2]+=R,re[3]+=ve,se[0]+=fe*fe,se[1]+=fe*D,se[2]+=fe*R,se[3]+=fe*ve,se[5]+=D*D,se[6]+=D*R,se[7]+=D*ve,se[10]+=R*R,se[11]+=R*ve,se[15]+=ve*ve}return se[4]=se[1],se[8]=se[2],se[9]=se[6],se[12]=se[3],se[13]=se[7],se[14]=se[11],{R:se,m:re,N:ce}}function U(z){const{R:L}=z,{m:G}=z,{N:se}=z,re=G[0],ce=G[1],W=G[2],fe=G[3],D=se==0?0:1/se,R=[L[0]-re*re*D,L[1]-re*ce*D,L[2]-re*W*D,L[3]-re*fe*D,L[4]-ce*re*D,L[5]-ce*ce*D,L[6]-ce*W*D,L[7]-ce*fe*D,L[8]-W*re*D,L[9]-W*ce*D,L[10]-W*W*D,L[11]-W*fe*D,L[12]-fe*re*D,L[13]-fe*ce*D,L[14]-fe*W*D,L[15]-fe*fe*D],ve=R,oe=P;let le=[Math.random(),Math.random(),Math.random(),Math.random()],I=0,Y=0;if(se!=0)for(let ge=0;ge<16&&(le=oe.multVec(ve,le),Y=Math.sqrt(oe.dot(le,le)),le=oe.sml(1/Y,le),!(ge!=0&&Math.abs(Y-I)<1e-9));ge++)I=Y;const we=[re*D,ce*D,W*D,fe*D];return{Cov:R,q:we,e:le,L:I,eMq255:oe.dot(oe.sml(255,we),le),eMq:oe.dot(le,we),rgba:(Math.round(255*we[3])<<24|Math.round(255*we[2])<<16|Math.round(255*we[1])<<8|Math.round(255*we[0])<<0)>>>0}}var P={multVec:(z,L)=>[z[0]*L[0]+z[1]*L[1]+z[2]*L[2]+z[3]*L[3],z[4]*L[0]+z[5]*L[1]+z[6]*L[2]+z[7]*L[3],z[8]*L[0]+z[9]*L[1]+z[10]*L[2]+z[11]*L[3],z[12]*L[0]+z[13]*L[1]+z[14]*L[2]+z[15]*L[3]],dot:(z,L)=>z[0]*L[0]+z[1]*L[1]+z[2]*L[2]+z[3]*L[3],sml:(z,L)=>[z*L[0],z*L[1],z*L[2],z*L[3]]};pi.encode=function(L,G,se,re,ce,W,fe){re==null&&(re=0),fe==null&&(fe=!1);const D=p(L,G,se,re,[!1,!1,!1,0,fe,!1]);return h(D,-1),d(D,G,se,ce,W)},pi.encodeLL=function(L,G,se,re,ce,W,fe,D){const R={ctype:0+(re==1?0:2)+(ce==0?0:4),depth:W,frames:[]},ve=(re+ce)*W,oe=ve*G;for(let le=0;le<L.length;le++)R.frames.push({rect:{x:0,y:0,width:G,height:se},img:new Uint8Array(L[le]),blend:0,dispose:1,bpp:Math.ceil(ve/8),bpl:Math.ceil(oe/8)});return h(R,0,!0),d(R,G,se,fe,D)},pi.encode.compress=p,pi.encode.dither=c,pi.quantize=T,pi.quantize.getKDtree=M,pi.quantize.getNearest=O})();const WS={toArrayBuffer(t,e){const n=t.width,r=t.height,a=n<<2,o=t.getContext("2d").getImageData(0,0,n,r),l=new Uint32Array(o.data.buffer),c=(32*n+31)/32<<2,d=c*r,h=122+d,p=new ArrayBuffer(h),m=new DataView(p),v=1<<20;let x,w,T,M,O=v,q=0,V=0,F=0;function $(z){m.setUint16(V,z,!0),V+=2}function U(z){m.setUint32(V,z,!0),V+=4}function P(z){V+=z}$(19778),U(h),P(4),U(122),U(108),U(n),U(-r>>>0),$(1),$(32),U(3),U(d),U(2835),U(2835),P(8),U(16711680),U(65280),U(255),U(4278190080),U(1466527264),(function z(){for(;q<r&&O>0;){for(M=122+q*c,x=0;x<a;)O--,w=l[F++],T=w>>>24,m.setUint32(M+x,w<<8|T),x+=4;q++}F<l.length?(O=v,setTimeout(z,WS._dly)):e(p)})()},toBlob(t,e){this.toArrayBuffer(t,(n=>{e(new Blob([n],{type:"image/bmp"}))}))},_dly:9};var kr={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},eN={[kr.CHROME]:16384,[kr.FIREFOX]:11180,[kr.DESKTOP_SAFARI]:16384,[kr.IE]:8192,[kr.IOS]:4096,[kr.ETC]:8192};const uy=typeof window<"u",XS=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,kd=uy&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),tN=(uy||XS)&&(kd&&kd.getOriginalSymbol(window,"File")||typeof File<"u"&&File),JS=(uy||XS)&&(kd&&kd.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function cy(t,e,n=Date.now()){return new Promise((r=>{const a=t.split(","),o=a[0].match(/:(.*?);/)[1],l=globalThis.atob(a[1]);let c=l.length;const d=new Uint8Array(c);for(;c--;)d[c]=l.charCodeAt(c);const h=new Blob([d],{type:o});h.name=e,h.lastModified=n,r(h)}))}function ZS(t){return new Promise(((e,n)=>{const r=new JS;r.onload=()=>e(r.result),r.onerror=a=>n(a),r.readAsDataURL(t)}))}function ew(t){return new Promise(((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=a=>n(a),r.src=t}))}function uo(){if(uo.cachedResult!==void 0)return uo.cachedResult;let t=kr.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=kr.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=kr.IOS:/Safari/i.test(e)?t=kr.DESKTOP_SAFARI:/Firefox/i.test(e)?t=kr.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=kr.IE),uo.cachedResult=t,uo.cachedResult}function tw(t,e){const n=uo(),r=eN[n];let a=t,o=e,l=a*o;const c=a>o?o/a:a/o;for(;l>r*r;){const d=(r+a)/2,h=(r+o)/2;d<h?(o=h,a=h*c):(o=d*c,a=d),l=a*o}return{width:a,height:o}}function xh(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function nw(t,e){const{width:n,height:r}=tw(t.width,t.height),[a,o]=xh(n,r);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,a.width,a.height)),o.drawImage(t,0,0,a.width,a.height),a}function hd(){return hd.cachedResult!==void 0||(hd.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),hd.cachedResult}function Td(t,e={}){return new Promise((function(n,r){let a,o;var l=function(){try{return o=nw(a,e.fileType||t.type),n([a,o])}catch(d){return r(d)}},c=function(d){try{var h=function(p){try{throw p}catch(m){return r(m)}};try{let p;return ZS(t).then((function(m){try{return p=m,ew(p).then((function(v){try{return a=v,(function(){try{return l()}catch(x){return r(x)}})()}catch(x){return h(x)}}),h)}catch(v){return h(v)}}),h)}catch(p){h(p)}}catch(p){return r(p)}};try{if(hd()||[kr.DESKTOP_SAFARI,kr.MOBILE_SAFARI].includes(uo()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then((function(d){try{return a=d,l()}catch{return c()}}),c)}catch{c()}}))}function Cd(t,e,n,r,a=1){return new Promise((function(o,l){let c;if(e==="image/png"){let m,v,x;return m=t.getContext("2d"),{data:v}=m.getImageData(0,0,t.width,t.height),x=pi.encode([v.buffer],t.width,t.height,4096*a),c=new Blob([x],{type:e}),c.name=n,c.lastModified=r,d.call(this)}{let m=function(){return d.call(this)};var h=m;if(e==="image/bmp")return new Promise((v=>WS.toBlob(t,v))).then((function(v){try{return c=v,c.name=n,c.lastModified=r,m.call(this)}catch(x){return l(x)}}).bind(this),l);{let v=function(){return m.call(this)};var p=v;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:a}).then((function(x){try{return c=x,c.name=n,c.lastModified=r,v.call(this)}catch(w){return l(w)}}).bind(this),l);{let x;return x=t.toDataURL(e,a),cy(x,n,r).then((function(w){try{return c=w,v.call(this)}catch(T){return l(T)}}).bind(this),l)}}}function d(){return o(c)}}))}function Ui(t){t.width=0,t.height=0}function Ml(){return new Promise((function(t,e){let n,r,a,o;return Ml.cachedResult!==void 0?t(Ml.cachedResult):cy("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(l){try{return n=l,Td(n).then((function(c){try{return r=c[1],Cd(r,n.type,n.name,n.lastModified).then((function(d){try{return a=d,Ui(r),Td(a).then((function(h){try{return o=h[0],Ml.cachedResult=o.width===1&&o.height===2,t(Ml.cachedResult)}catch(p){return e(p)}}),e)}catch(h){return e(h)}}),e)}catch(d){return e(d)}}),e)}catch(c){return e(c)}}),e)}))}function rw(t){return new Promise(((e,n)=>{const r=new JS;r.onload=a=>{const o=new DataView(a.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const l=o.byteLength;let c=2;for(;c<l;){if(o.getUint16(c+2,!1)<=8)return e(-1);const d=o.getUint16(c,!1);if(c+=2,d==65505){if(o.getUint32(c+=2,!1)!=1165519206)return e(-1);const h=o.getUint16(c+=6,!1)==18761;c+=o.getUint32(c+4,h);const p=o.getUint16(c,h);c+=2;for(let m=0;m<p;m++)if(o.getUint16(c+12*m,h)==274)return e(o.getUint16(c+12*m+8,h))}else{if((65280&d)!=65280)break;c+=o.getUint16(c,!1)}}return e(-1)},r.onerror=a=>n(a),r.readAsArrayBuffer(t)}))}function iw(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:a}=e;let o,l=t;return isFinite(a)&&(n>a||r>a)&&([l,o]=xh(n,r),n>r?(l.width=a,l.height=r/n*a):(l.width=n/r*a,l.height=a),o.drawImage(t,0,0,l.width,l.height),Ui(t)),l}function aw(t,e){const{width:n}=t,{height:r}=t,[a,o]=xh(n,r);switch(e>4&&e<9?(a.width=r,a.height=n):(a.width=n,a.height=r),e){case 2:o.transform(-1,0,0,1,n,0);break;case 3:o.transform(-1,0,0,-1,n,r);break;case 4:o.transform(1,0,0,-1,0,r);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,r,0);break;case 7:o.transform(0,-1,-1,0,r,n);break;case 8:o.transform(0,-1,1,0,0,n)}return o.drawImage(t,0,0,n,r),Ui(t),a}function Tb(t,e,n=0){return new Promise((function(r,a){let o,l,c,d,h,p,m,v,x,w,T,M,O,q,V,F,$,U,P,z;function L(se=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=se,e.onProgress(Math.min(o,100))}function G(se){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(se,o),100),e.onProgress(o)}return o=n,l=e.maxIteration||10,c=1024*e.maxSizeMB*1024,L(),Td(t,e).then((function(se){try{return[,d]=se,L(),h=iw(d,e),L(),new Promise((function(re,ce){var W;if(!(W=e.exifOrientation))return rw(t).then((function(D){try{return W=D,fe.call(this)}catch(R){return ce(R)}}).bind(this),ce);function fe(){return re(W)}return fe.call(this)})).then((function(re){try{return p=re,L(),Ml().then((function(ce){try{return m=ce?h:aw(h,p),L(),v=e.initialQuality||1,x=e.fileType||t.type,Cd(m,x,t.name,t.lastModified,v).then((function(W){try{{let ve=function(){if(l--&&(V>c||V>O)){let le,I;return le=z?.95*P.width:P.width,I=z?.95*P.height:P.height,[$,U]=xh(le,I),U.drawImage(P,0,0,le,I),v*=x==="image/png"?.85:.95,Cd($,x,t.name,t.lastModified,v).then((function(Y){try{return F=Y,Ui(P),P=$,V=F.size,G(Math.min(99,Math.floor((q-V)/(q-c)*100))),ve}catch(we){return a(we)}}),a)}return[1]},oe=function(){return Ui(P),Ui($),Ui(h),Ui(m),Ui(d),G(100),r(F)};var D=ve,R=oe;if(w=W,L(),T=w.size>c,M=w.size>t.size,!T&&!M)return G(100),r(w);var fe;return O=t.size,q=w.size,V=q,P=m,z=!e.alwaysKeepResolution&&T,(fe=(function(le){for(;le;){if(le.then)return void le.then(fe,a);try{if(le.pop){if(le.length)return le.pop()?oe.call(this):le;le=ve}else le=le.call(this)}catch(I){return a(I)}}}).bind(this))(ve)}}catch(ve){return a(ve)}}).bind(this),a)}catch(W){return a(W)}}).bind(this),a)}catch(ce){return a(ce)}}).bind(this),a)}catch(re){return a(re)}}).bind(this),a)}))}const nN=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Im;function rN(t,e){return new Promise(((n,r)=>{Im||(Im=(function(l){const c=[];return c.push(l),URL.createObjectURL(new Blob(c))})(nN));const a=new Worker(Im);a.addEventListener("message",(function(l){if(e.signal&&e.signal.aborted)a.terminate();else if(l.data.progress===void 0){if(l.data.error)return r(new Error(l.data.error)),void a.terminate();n(l.data.file),a.terminate()}else e.onProgress(l.data.progress)})),a.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",(()=>{r(e.signal.reason),a.terminate()})),a.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function ir(t,e){return new Promise((function(n,r){let a,o,l,c,d,h;if(a={...e},l=0,{onProgress:c}=a,a.maxSizeMB=a.maxSizeMB||Number.POSITIVE_INFINITY,d=typeof a.useWebWorker!="boolean"||a.useWebWorker,delete a.useWebWorker,a.onProgress=x=>{l=x,typeof c=="function"&&c(l)},!(t instanceof Blob||t instanceof tN))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(h=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!d||typeof Worker!="function"||h)return Tb(t,a).then((function(x){try{return o=x,v.call(this)}catch(w){return r(w)}}).bind(this),r);var p=(function(){try{return v.call(this)}catch(x){return r(x)}}).bind(this),m=function(x){try{return Tb(t,a).then((function(w){try{return o=w,p()}catch(T){return r(T)}}),r)}catch(w){return r(w)}};try{return a.libURL=a.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",rN(t,a).then((function(x){try{return o=x,p()}catch{return m()}}),m)}catch{m()}function v(){try{o.name=t.name,o.lastModified=t.lastModified}catch{}try{a.preserveExif&&t.type==="image/jpeg"&&(!a.fileType||a.fileType&&a.fileType===t.type)&&(o=QS(t,o))}catch{}return n(o)}}))}ir.getDataUrlFromFile=ZS,ir.getFilefromDataUrl=cy,ir.loadImage=ew,ir.drawImageInCanvas=nw,ir.drawFileInCanvas=Td,ir.canvasToFile=Cd,ir.getExifOrientation=rw,ir.handleMaxWidthOrHeight=iw,ir.followExifOrientation=aw,ir.cleanupCanvasMemory=Ui,ir.isAutoOrientationInBrowser=Ml,ir.approximateBelowMaximumCanvasSizeOfBrowser=tw,ir.copyExifWithoutOrientation=QS,ir.getBrowserName=uo,ir.version="2.0.2";const iN={maxWidth:800,maxHeight:800,quality:.8},aN=async(t,e=iN)=>{const n={maxWidthOrHeight:Math.max(e.maxWidth||800,e.maxHeight||800),useWebWorker:!0,fileType:t.type,initialQuality:e.quality||.8,alwaysKeepResolution:!1,preserveExif:!1};try{return await ir(t,n)}catch(r){throw console.error("Image compression failed:",r),new Error("Failed to compress image. Please try a different image.")}},sN=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=a=>n(a)}),Cb=async(t,e)=>{const n=await aN(t,e);return await sN(n)},Mb=t=>["image/jpeg","image/png","image/webp","image/gif"].includes(t.type)?t.size>10485760?{valid:!1,error:"File too large. Maximum size is 10MB."}:{valid:!0}:{valid:!1,error:"Invalid file type. Please upload JPEG, PNG, WebP, or GIF."};var qm={exports:{}},Pm={};var Ab;function oN(){if(Ab)return Pm;Ab=1;var t=Ac();function e(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,a=t.useEffect,o=t.useLayoutEffect,l=t.useDebugValue;function c(m,v){var x=v(),w=r({inst:{value:x,getSnapshot:v}}),T=w[0].inst,M=w[1];return o(function(){T.value=x,T.getSnapshot=v,d(T)&&M({inst:T})},[m,x,v]),a(function(){return d(T)&&M({inst:T}),m(function(){d(T)&&M({inst:T})})},[m]),l(x),x}function d(m){var v=m.getSnapshot;m=m.value;try{var x=v();return!n(m,x)}catch{return!0}}function h(m,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return Pm.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,Pm}var Ob;function sw(){return Ob||(Ob=1,qm.exports=oN()),qm.exports}var ow=sw();function Yn(t){this.content=t}Yn.prototype={constructor:Yn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,a=r.find(t),o=r.content.slice();return a==-1?o.push(n||t,e):(o[a+1]=e,n&&(o[a]=n)),new Yn(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Yn(n)},addToStart:function(t,e){return new Yn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Yn(n)},addBefore:function(t,e,n){var r=this.remove(e),a=r.content.slice(),o=r.find(t);return a.splice(o==-1?a.length:o,0,e,n),new Yn(a)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Yn.from(t),t.size?new Yn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Yn.from(t),t.size?new Yn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Yn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Yn.from=function(t){if(t instanceof Yn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Yn(e)};function lw(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let a=t.child(r),o=e.child(r);if(a==o){n+=a.nodeSize;continue}if(!a.sameMarkup(o))return n;if(a.isText&&a.text!=o.text){for(let l=0;a.text[l]==o.text[l];l++)n++;return n}if(a.content.size||o.content.size){let l=lw(a.content,o.content,n+1);if(l!=null)return l}n+=a.nodeSize}}function uw(t,e,n,r){for(let a=t.childCount,o=e.childCount;;){if(a==0||o==0)return a==o?null:{a:n,b:r};let l=t.child(--a),c=e.child(--o),d=l.nodeSize;if(l==c){n-=d,r-=d;continue}if(!l.sameMarkup(c))return{a:n,b:r};if(l.isText&&l.text!=c.text){let h=0,p=Math.min(l.text.length,c.text.length);for(;h<p&&l.text[l.text.length-h-1]==c.text[c.text.length-h-1];)h++,n--,r--;return{a:n,b:r}}if(l.content.size||c.content.size){let h=uw(l.content,c.content,n-1,r-1);if(h)return h}n-=d,r-=d}}class De{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,a=0,o){for(let l=0,c=0;c<n;l++){let d=this.content[l],h=c+d.nodeSize;if(h>e&&r(d,a+c,o||null,l)!==!1&&d.content.size){let p=c+1;d.nodesBetween(Math.max(0,e-p),Math.min(d.content.size,n-p),r,a+p)}c=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,a){let o="",l=!0;return this.nodesBetween(e,n,(c,d)=>{let h=c.isText?c.text.slice(Math.max(e,d)-d,n-d):c.isLeaf?a?typeof a=="function"?a(c):a:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&h||c.isTextblock)&&r&&(l?l=!1:o+=r),o+=h},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,a=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(a[a.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)a.push(e.content[o]);return new De(a,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],a=0;if(n>e)for(let o=0,l=0;l<n;o++){let c=this.content[o],d=l+c.nodeSize;d>e&&((l<e||d>n)&&(c.isText?c=c.cut(Math.max(0,e-l),Math.min(c.text.length,n-l)):c=c.cut(Math.max(0,e-l-1),Math.min(c.content.size,n-l-1))),r.push(c),a+=c.nodeSize),l=d}return new De(r,a)}cutByIndex(e,n){return e==n?De.empty:e==0&&n==this.content.length?this:new De(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let a=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return a[e]=n,new De(a,o)}addToStart(e){return new De([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new De(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let a=this.content[n];e(a,r,n),r+=a.nodeSize}}findDiffStart(e,n=0){return lw(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return uw(this,e,n,r)}findIndex(e){if(e==0)return Xf(0,e);if(e==this.size)return Xf(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let a=this.child(n),o=r+a.nodeSize;if(o>=e)return o==e?Xf(n+1,o):Xf(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return De.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new De(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return De.empty;let n,r=0;for(let a=0;a<e.length;a++){let o=e[a];r+=o.nodeSize,a&&o.isText&&e[a-1].sameMarkup(o)?(n||(n=e.slice(0,a)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new De(n||e,r)}static from(e){if(!e)return De.empty;if(e instanceof De)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new De([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}De.empty=new De([],0);const Vm={index:0,offset:0};function Xf(t,e){return Vm.index=t,Vm.offset=e,Vm}function Md(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Md(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Md(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let qt=class Eg{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let a=0;a<e.length;a++){let o=e[a];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,a));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,a)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Md(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let a=r.create(n.attrs);return r.checkAttrs(a.attrs),a}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Eg.none;if(e instanceof Eg)return[e];let n=e.slice();return n.sort((r,a)=>r.type.rank-a.type.rank),n}};qt.none=[];class Ad extends Error{}class Pe{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=fw(this.content,e+this.openStart,n);return r&&new Pe(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Pe(cw(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Pe.empty;let r=n.openStart||0,a=n.openEnd||0;if(typeof r!="number"||typeof a!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Pe(De.fromJSON(e,n.content),r,a)}static maxOpen(e,n=!0){let r=0,a=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)a++;return new Pe(e,r,a)}}Pe.empty=new Pe(De.empty,0,0);function cw(t,e,n){let{index:r,offset:a}=t.findIndex(e),o=t.maybeChild(r),{index:l,offset:c}=t.findIndex(n);if(a==e||o.isText){if(c!=n&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(cw(o.content,e-a-1,n-a-1)))}function fw(t,e,n,r){let{index:a,offset:o}=t.findIndex(e),l=t.maybeChild(a);if(o==e||l.isText)return r&&!r.canReplace(a,a,n)?null:t.cut(0,e).append(n).append(t.cut(e));let c=fw(l.content,e-o-1,n,l);return c&&t.replaceChild(a,l.copy(c))}function lN(t,e,n){if(n.openStart>t.depth)throw new Ad("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Ad("Inconsistent open depths");return dw(t,e,n,0)}function dw(t,e,n,r){let a=t.index(r),o=t.node(r);if(a==e.index(r)&&r<t.depth-n.openStart){let l=dw(t,e,n,r+1);return o.copy(o.content.replaceChild(a,l))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let l=t.parent,c=l.content;return go(l,c.cut(0,t.parentOffset).append(n.content).append(c.cut(e.parentOffset)))}else{let{start:l,end:c}=uN(n,t);return go(o,pw(t,l,c,e,r))}else return go(o,Od(t,e,r))}function hw(t,e){if(!e.type.compatibleContent(t.type))throw new Ad("Cannot join "+e.type.name+" onto "+t.type.name)}function kg(t,e,n){let r=t.node(n);return hw(r,e.node(n)),r}function mo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function ic(t,e,n,r){let a=(e||t).node(n),o=0,l=e?e.index(n):a.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(mo(t.nodeAfter,r),o++));for(let c=o;c<l;c++)mo(a.child(c),r);e&&e.depth==n&&e.textOffset&&mo(e.nodeBefore,r)}function go(t,e){return t.type.checkContent(e),t.copy(e)}function pw(t,e,n,r,a){let o=t.depth>a&&kg(t,e,a+1),l=r.depth>a&&kg(n,r,a+1),c=[];return ic(null,t,a,c),o&&l&&e.index(a)==n.index(a)?(hw(o,l),mo(go(o,pw(t,e,n,r,a+1)),c)):(o&&mo(go(o,Od(t,e,a+1)),c),ic(e,n,a,c),l&&mo(go(l,Od(n,r,a+1)),c)),ic(r,null,a,c),new De(c)}function Od(t,e,n){let r=[];if(ic(null,t,n,r),t.depth>n){let a=kg(t,e,n+1);mo(go(a,Od(t,e,n+1)),r)}return ic(e,null,n,r),new De(r)}function uN(t,e){let n=e.depth-t.openStart,a=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)a=e.node(o).copy(De.from(a));return{start:a.resolveNoCache(t.openStart+n),end:a.resolveNoCache(a.content.size-t.openEnd-n)}}class yc{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],a=e.child(n);return r?e.child(n).cut(r):a}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],a=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)a+=r.child(o).nodeSize;return a}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return qt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),a=e.maybeChild(n);if(!r){let c=r;r=a,a=c}let o=r.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!a||!o[l].isInSet(a.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,a=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!a||!r[o].isInSet(a.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Nd(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],a=0,o=n;for(let l=e;;){let{index:c,offset:d}=l.content.findIndex(o),h=o-d;if(r.push(l,c,a+d),!h||(l=l.child(c),l.isText))break;o=h-1,a+=d+1}return new yc(n,r,o)}static resolveCached(e,n){let r=Nb.get(e);if(r)for(let o=0;o<r.elts.length;o++){let l=r.elts[o];if(l.pos==n)return l}else Nb.set(e,r=new cN);let a=r.elts[r.i]=yc.resolve(e,n);return r.i=(r.i+1)%fN,a}}class cN{constructor(){this.elts=[],this.i=0}}const fN=12,Nb=new WeakMap;class Nd{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const dN=Object.create(null);class yi{constructor(e,n,r,a=qt.none){this.type=e,this.attrs=n,this.marks=a,this.content=r||De.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,a=0){this.content.nodesBetween(e,n,r,a,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,a){return this.content.textBetween(e,n,r,a)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Md(this.attrs,n||e.defaultAttrs||dN)&&qt.sameSet(this.marks,r||qt.none)}copy(e=null){return e==this.content?this:new yi(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new yi(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Pe.empty;let a=this.resolve(e),o=this.resolve(n),l=r?0:a.sharedDepth(n),c=a.start(l),h=a.node(l).content.cut(a.pos-c,o.pos-c);return new Pe(h,a.depth-l,o.depth-l)}replace(e,n,r){return lN(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:a}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(a==e||n.isText)return n;e-=a+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let a=this.content.child(n-1);return{node:a,index:n-1,offset:r-a.nodeSize}}resolve(e){return yc.resolveCached(this,e)}resolveNoCache(e){return yc.resolve(this,e)}rangeHasMark(e,n,r){let a=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(a=!0),!a)),a}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),mw(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=De.empty,a=0,o=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,a,o),c=l&&l.matchFragment(this.content,n);if(!c||!c.validEnd)return!1;for(let d=a;d<o;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(e,n,r,a){if(a&&!this.type.allowsMarks(a))return!1;let o=this.contentMatchAt(e).matchType(r),l=o&&o.matchFragment(this.content,n);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=qt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!qt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let a=De.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,a,r);return o.type.checkAttrs(o.attrs),o}}yi.prototype.text=void 0;class Dd extends yi{constructor(e,n,r,a){if(super(e,n,null,a),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):mw(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Dd(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Dd(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function mw(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class xo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new hN(e,n);if(r.next==null)return xo.empty;let a=gw(r);r.next&&r.err("Unexpected trailing text");let o=xN(bN(a));return SN(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let a=this;for(let o=n;a&&o<r;o++)a=a.matchType(e.child(o).type);return a}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let a=[this];function o(l,c){let d=l.matchFragment(e,r);if(d&&(!n||d.validEnd))return De.from(c.map(h=>h.createAndFill()));for(let h=0;h<l.next.length;h++){let{type:p,next:m}=l.next[h];if(!(p.isText||p.hasRequiredAttrs())&&a.indexOf(m)==-1){a.push(m);let v=o(m,c.concat(p));if(v)return v}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let a=r.shift(),o=a.match;if(o.matchType(e)){let l=[];for(let c=a;c.type;c=c.via)l.push(c.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:c,next:d}=o.next[l];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in n)&&(!a.type||d.validEnd)&&(r.push({match:c.contentMatch,type:c,via:a}),n[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let a=0;a<r.next.length;a++)e.indexOf(r.next[a].next)==-1&&n(r.next[a].next)}return n(this),e.map((r,a)=>{let o=a+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)o+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return o}).join(`
`)}}xo.empty=new xo(!0);class hN{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function gw(t){let e=[];do e.push(pN(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function pN(t){let e=[];do e.push(mN(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function mN(t){let e=vN(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=gN(t,e);else break;return e}function Db(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function gN(t,e){let n=Db(t),r=n;return t.eat(",")&&(t.next!="}"?r=Db(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function yN(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let a=[];for(let o in n){let l=n[o];l.isInGroup(e)&&a.push(l)}return a.length==0&&t.err("No node type or group '"+e+"' found"),a}function vN(t){if(t.eat("(")){let e=gw(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=yN(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function bN(t){let e=[[]];return a(o(t,0),n()),e;function n(){return e.push([])-1}function r(l,c,d){let h={term:d,to:c};return e[l].push(h),h}function a(l,c){l.forEach(d=>d.to=c)}function o(l,c){if(l.type=="choice")return l.exprs.reduce((d,h)=>d.concat(o(h,c)),[]);if(l.type=="seq")for(let d=0;;d++){let h=o(l.exprs[d],c);if(d==l.exprs.length-1)return h;a(h,c=n())}else if(l.type=="star"){let d=n();return r(c,d),a(o(l.expr,d),d),[r(d)]}else if(l.type=="plus"){let d=n();return a(o(l.expr,c),d),a(o(l.expr,d),d),[r(d)]}else{if(l.type=="opt")return[r(c)].concat(o(l.expr,c));if(l.type=="range"){let d=c;for(let h=0;h<l.min;h++){let p=n();a(o(l.expr,d),p),d=p}if(l.max==-1)a(o(l.expr,d),d);else for(let h=l.min;h<l.max;h++){let p=n();r(d,p),a(o(l.expr,d),p),d=p}return[r(d)]}else{if(l.type=="name")return[r(c,void 0,l.value)];throw new Error("Unknown expr type")}}}}function yw(t,e){return e-t}function Rb(t,e){let n=[];return r(e),n.sort(yw);function r(a){let o=t[a];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(a);for(let l=0;l<o.length;l++){let{term:c,to:d}=o[l];!c&&n.indexOf(d)==-1&&r(d)}}}function xN(t){let e=Object.create(null);return n(Rb(t,0));function n(r){let a=[];r.forEach(l=>{t[l].forEach(({term:c,to:d})=>{if(!c)return;let h;for(let p=0;p<a.length;p++)a[p][0]==c&&(h=a[p][1]);Rb(t,d).forEach(p=>{h||a.push([c,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let o=e[r.join(",")]=new xo(r.indexOf(t.length-1)>-1);for(let l=0;l<a.length;l++){let c=a[l][1].sort(yw);o.next.push({type:a[l][0],next:e[c.join(",")]||n(c)})}return o}}function SN(t,e){for(let n=0,r=[t];n<r.length;n++){let a=r[n],o=!a.validEnd,l=[];for(let c=0;c<a.next.length;c++){let{type:d,next:h}=a.next[c];l.push(d.name),o&&!(d.isText||d.hasRequiredAttrs())&&(o=!1),r.indexOf(h)==-1&&r.push(h)}o&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function vw(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function bw(t,e){let n=Object.create(null);for(let r in t){let a=e&&e[r];if(a===void 0){let o=t[r];if(o.hasDefault)a=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=a}return n}function xw(t,e,n,r){for(let a in e)if(!(a in t))throw new RangeError(`Unsupported attribute ${a} for ${n} of type ${a}`);for(let a in t){let o=t[a];o.validate&&o.validate(e[a])}}function Sw(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new EN(t,r,e[r]);return n}let _b=class ww{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Sw(e,r.attrs),this.defaultAttrs=vw(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==xo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:bw(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new yi(this,this.computeAttrs(e),De.from(n),qt.setFrom(r))}createChecked(e=null,n,r){return n=De.from(n),this.checkContent(n),new yi(this,this.computeAttrs(e),n,qt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=De.from(n),n.size){let l=this.contentMatch.fillBefore(n);if(!l)return null;n=l.append(n)}let a=this.contentMatch.matchFragment(n),o=a&&a.fillBefore(De.empty,!0);return o?new yi(this,e,n.append(o),qt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){xw(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:qt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,l)=>r[o]=new ww(o,n,l));let a=n.spec.topNode||"doc";if(!r[a])throw new RangeError("Schema is missing its top node type ('"+a+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function wN(t,e,n){let r=n.split("|");return a=>{let o=a===null?"null":typeof a;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class EN{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?wN(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Sh{constructor(e,n,r,a){this.name=e,this.rank=n,this.schema=r,this.spec=a,this.attrs=Sw(e,a.attrs),this.excluded=null;let o=vw(this.attrs);this.instance=o?new qt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new qt(this,bw(this.attrs,e))}static compile(e,n){let r=Object.create(null),a=0;return e.forEach((o,l)=>r[o]=new Sh(o,a++,n,l)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){xw(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Ew{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let a in e)n[a]=e[a];n.nodes=Yn.from(e.nodes),n.marks=Yn.from(e.marks||{}),this.nodes=_b.compile(this.spec.nodes,this),this.marks=Sh.compile(this.spec.marks,this);let r=Object.create(null);for(let a in this.nodes){if(a in this.marks)throw new RangeError(a+" can not be both a node and a mark");let o=this.nodes[a],l=o.spec.content||"",c=o.spec.marks;if(o.contentMatch=r[l]||(r[l]=xo.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=c=="_"?null:c?zb(this,c.split(" ")):c==""||!o.inlineContent?[]:null}for(let a in this.marks){let o=this.marks[a],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:zb(this,l.split(" "))}this.nodeFromJSON=a=>yi.fromJSON(this,a),this.markFromJSON=a=>qt.fromJSON(this,a),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,a){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof _b){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,a)}text(e,n){let r=this.nodes.text;return new Dd(r,r.defaultAttrs,e,qt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function zb(t,e){let n=[];for(let r=0;r<e.length;r++){let a=e[r],o=t.marks[a],l=o;if(o)n.push(o);else for(let c in t.marks){let d=t.marks[c];(a=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(a)>-1)&&n.push(l=d)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function kN(t){return t.tag!=null}function TN(t){return t.style!=null}class Es{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(a=>{if(kN(a))this.tags.push(a);else if(TN(a)){let o=/[^=]*/.exec(a.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(a)}}),this.normalizeLists=!this.tags.some(a=>{if(!/^(ul|ol)\b/.test(a.tag)||!a.node)return!1;let o=e.nodes[a.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new Lb(this,n,!1);return r.addAll(e,qt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Lb(this,n,!0);return r.addAll(e,qt.none,n.from,n.to),Pe.maxOpen(r.finish())}matchTag(e,n,r){for(let a=r?this.tags.indexOf(r)+1:0;a<this.tags.length;a++){let o=this.tags[a];if(AN(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(e,n,r,a){for(let o=a?this.styles.indexOf(a)+1:0;o<this.styles.length;o++){let l=this.styles[o],c=l.style;if(!(c.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||c.length>e.length&&(c.charCodeAt(e.length)!=61||c.slice(e.length+1)!=n))){if(l.getAttrs){let d=l.getAttrs(n);if(d===!1)continue;l.attrs=d||void 0}return l}}}static schemaRules(e){let n=[];function r(a){let o=a.priority==null?50:a.priority,l=0;for(;l<n.length;l++){let c=n[l];if((c.priority==null?50:c.priority)<o)break}n.splice(l,0,a)}for(let a in e.marks){let o=e.marks[a].spec.parseDOM;o&&o.forEach(l=>{r(l=Bb(l)),l.mark||l.ignore||l.clearMark||(l.mark=a)})}for(let a in e.nodes){let o=e.nodes[a].spec.parseDOM;o&&o.forEach(l=>{r(l=Bb(l)),l.node||l.ignore||l.mark||(l.node=a)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Es(e,Es.schemaRules(e)))}}const kw={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},CN={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Tw={ol:!0,ul:!0},vc=1,Tg=2,ac=4;function jb(t,e,n){return e!=null?(e?vc:0)|(e==="full"?Tg:0):t&&t.whitespace=="pre"?vc|Tg:n&~ac}class Jf{constructor(e,n,r,a,o,l){this.type=e,this.attrs=n,this.marks=r,this.solid=a,this.options=l,this.content=[],this.activeMarks=qt.none,this.match=o||(l&ac?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(De.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,a;return(a=r.findWrapping(e.type))?(this.match=r,a):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&vc)){let r=this.content[this.content.length-1],a;if(r&&r.isText&&(a=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==a[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-a[0].length))}}let n=De.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(De.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!kw.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Lb{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let a=n.topNode,o,l=jb(null,n.preserveWhitespace,0)|(r?ac:0);a?o=new Jf(a.type,a.attrs,qt.none,!0,n.topMatch||a.type.contentMatch,l):r?o=new Jf(null,null,qt.none,!0,null,l):o=new Jf(e.schema.topNodeType,null,qt.none,!0,null,l),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,a=this.top,o=a.options&Tg?"full":this.localPreserveWS||(a.options&vc)>0,{schema:l}=this.parser;if(o==="full"||a.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(l.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(l.linebreakReplacement.create())){let c=r.split(/\r?\n|\r/);for(let d=0;d<c.length;d++)d&&this.insertNode(l.linebreakReplacement.create(),n,!0),c[d]&&this.insertNode(l.text(c[d]),n,!/\S/.test(c[d]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let c=a.content[a.content.length-1],d=e.previousSibling;(!c||d&&d.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(r=r.slice(1))}r&&this.insertNode(l.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let a=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),c;Tw.hasOwnProperty(l)&&this.parser.normalizeLists&&MN(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(c=this.parser.matchTag(e,this,r));e:if(d?d.ignore:CN.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,n);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let h,p=this.needsBlock;if(kw.hasOwnProperty(l))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),h=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let m=d&&d.skip?n:this.readStyles(e,n);m&&this.addAll(e,m),h&&this.sync(o),this.needsBlock=p}else{let h=this.readStyles(e,n);h&&this.addElementByRule(e,d,h,d.consuming===!1?c:void 0)}this.localPreserveWS=a}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let a=0;a<this.parser.matchedStyles.length;a++){let o=this.parser.matchedStyles[a],l=r.getPropertyValue(o);if(l)for(let c=void 0;;){let d=this.parser.matchStyle(o,l,this,c);if(!d)break;if(d.ignore)return null;if(d.clearMark?n=n.filter(h=>!d.clearMark(h)):n=n.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)c=d;else break}}return n}addElementByRule(e,n,r,a){let o,l;if(n.node)if(l=this.parser.schema.nodes[n.node],l.isLeaf)this.insertNode(l.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let d=this.enter(l,n.attrs||null,r,n.preserveWhitespace);d&&(o=!0,r=d)}else{let d=this.parser.schema.marks[n.mark];r=r.concat(d.create(n.attrs))}let c=this.top;if(l&&l.isLeaf)this.findInside(e);else if(a)this.addElement(e,r,a);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,r,!1));else{let d=e;typeof n.contentElement=="string"?d=e.querySelector(n.contentElement):typeof n.contentElement=="function"?d=n.contentElement(e):n.contentElement&&(d=n.contentElement),this.findAround(e,d,!0),this.addAll(d,r),this.findAround(e,d,!1)}o&&this.sync(c)&&this.open--}addAll(e,n,r,a){let o=r||0;for(let l=r?e.childNodes[r]:e.firstChild,c=a==null?null:e.childNodes[a];l!=c;l=l.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(l,n);this.findAtPoint(e,o)}findPlace(e,n,r){let a,o;for(let l=this.open,c=0;l>=0;l--){let d=this.nodes[l],h=d.findWrapping(e);if(h&&(!a||a.length>h.length+c)&&(a=h,o=d,!h.length))break;if(d.solid){if(r)break;c+=2}}if(!a)return null;this.sync(o);for(let l=0;l<a.length;l++)n=this.enterInner(a[l],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let a=this.findPlace(e,n,r);if(a){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let l=qt.none;for(let c of a.concat(e.marks))(o.type?o.type.allowsMarkType(c.type):Ub(c.type,e.type))&&(l=c.addToSet(l));return o.content.push(e.mark(l)),!0}return!1}enter(e,n,r,a){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,a)),o}enterInner(e,n,r,a=!1,o){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let c=jb(e,o,l.options);l.options&ac&&l.content.length==0&&(c|=ac);let d=qt.none;return r=r.filter(h=>(l.type?l.type.allowsMarkType(h.type):Ub(h.type,e))?(d=h.addToSet(d),!1):!0),this.nodes.push(new Jf(e,n,d,a,null,c)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=vc)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let a=r.length-1;a>=0;a--)e+=r[a].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let a=0;a<this.find.length;a++)this.find[a].pos==null&&e.nodeType==1&&e.contains(this.find[a].node)&&n.compareDocumentPosition(this.find[a].node)&(r?2:4)&&(this.find[a].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,a=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(a?0:1),l=(c,d)=>{for(;c>=0;c--){let h=n[c];if(h==""){if(c==n.length-1||c==0)continue;for(;d>=o;d--)if(l(c-1,d))return!0;return!1}else{let p=d>0||d==0&&a?this.nodes[d].type:r&&d>=o?r.node(d-o).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;d--}}return!0};return l(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function MN(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Tw.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function AN(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Bb(t){let e={};for(let n in t)e[n]=t[n];return e}function Ub(t,e){let n=e.schema.nodes;for(let r in n){let a=n[r];if(!a.allowsMarkType(t))continue;let o=[],l=c=>{o.push(c);for(let d=0;d<c.edgeCount;d++){let{type:h,next:p}=c.edge(d);if(h==e||o.indexOf(p)<0&&l(p))return!0}};if(l(a.contentMatch))return!0}}class Co{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Fm(n).createDocumentFragment());let a=r,o=[];return e.forEach(l=>{if(o.length||l.marks.length){let c=0,d=0;for(;c<o.length&&d<l.marks.length;){let h=l.marks[d];if(!this.marks[h.type.name]){d++;continue}if(!h.eq(o[c][0])||h.type.spec.spanning===!1)break;c++,d++}for(;c<o.length;)a=o.pop()[1];for(;d<l.marks.length;){let h=l.marks[d++],p=this.serializeMark(h,l.isInline,n);p&&(o.push([h,a]),a.appendChild(p.dom),a=p.contentDOM||p.dom)}}a.appendChild(this.serializeNodeInner(l,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:a}=pd(Fm(n),this.nodes[e.type.name](e),null,e.attrs);if(a){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,a)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let a=e.marks.length-1;a>=0;a--){let o=this.serializeMark(e.marks[a],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let a=this.marks[e.type.name];return a&&pd(Fm(r),a(e,n),null,e.attrs)}static renderSpec(e,n,r=null,a){return pd(e,n,r,a)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Co(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Hb(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Hb(e.marks)}}function Hb(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Fm(t){return t.document||window.document}const Ib=new WeakMap;function ON(t){let e=Ib.get(t);return e===void 0&&Ib.set(t,e=NN(t)),e}function NN(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let a=0;a<r.length;a++)n(r[a]);else for(let a in r)n(r[a])}return n(t),e}function pd(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let a=e[0],o;if(typeof a!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=ON(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=a.indexOf(" ");l>0&&(n=a.slice(0,l),a=a.slice(l+1));let c,d=n?t.createElementNS(n,a):t.createElement(a),h=e[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let m in h)if(h[m]!=null){let v=m.indexOf(" ");v>0?d.setAttributeNS(m.slice(0,v),m.slice(v+1),h[m]):m=="style"&&d.style?d.style.cssText=h[m]:d.setAttribute(m,h[m])}}for(let m=p;m<e.length;m++){let v=e[m];if(v===0){if(m<e.length-1||m>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:x,contentDOM:w}=pd(t,v,n,r);if(d.appendChild(x),w){if(c)throw new RangeError("Multiple content holes");c=w}}}return{dom:d,contentDOM:c}}const Cw=65535,Mw=Math.pow(2,16);function DN(t,e){return t+e*Mw}function qb(t){return t&Cw}function RN(t){return(t-(t&Cw))/Mw}const Aw=1,Ow=2,md=4,Nw=8;class Cg{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Nw)>0}get deletedBefore(){return(this.delInfo&(Aw|md))>0}get deletedAfter(){return(this.delInfo&(Ow|md))>0}get deletedAcross(){return(this.delInfo&md)>0}}class Hr{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Hr.empty)return Hr.empty}recover(e){let n=0,r=qb(e);if(!this.inverted)for(let a=0;a<r;a++)n+=this.ranges[a*3+2]-this.ranges[a*3+1];return this.ranges[r*3]+n+RN(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let a=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?a:0);if(d>e)break;let h=this.ranges[c+o],p=this.ranges[c+l],m=d+h;if(e<=m){let v=h?e==d?-1:e==m?1:n:n,x=d+a+(v<0?0:p);if(r)return x;let w=e==(n<0?d:m)?null:DN(c/3,e-d),T=e==d?Ow:e==m?Aw:md;return(n<0?e!=d:e!=m)&&(T|=Nw),new Cg(x,T,w)}a+=p-h}return r?e+a:new Cg(e+a,0,null)}touches(e,n){let r=0,a=qb(n),o=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?r:0);if(d>e)break;let h=this.ranges[c+o],p=d+h;if(e<=p&&c==a*3)return!0;r+=this.ranges[c+l]-h}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let a=0,o=0;a<this.ranges.length;a+=3){let l=this.ranges[a],c=l-(this.inverted?o:0),d=l+(this.inverted?0:o),h=this.ranges[a+n],p=this.ranges[a+r];e(c,c+h,d,d+p),o+=p-h}}invert(){return new Hr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Hr.empty:new Hr(e<0?[0,-e,0]:[0,0,e])}}Hr.empty=new Hr([]);class bc{constructor(e,n,r=0,a=e?e.length:0){this.mirror=n,this.from=r,this.to=a,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new bc(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let a=e.getMirror(n);this.appendMap(e._maps[n],a!=null&&a<n?r+a:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let a=e.getMirror(n);this.appendMap(e._maps[n].invert(),a!=null&&a>n?r-a-1:void 0)}}invert(){let e=new bc;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let a=0;for(let o=this.from;o<this.to;o++){let l=this._maps[o],c=l.mapResult(e,n);if(c.recover!=null){let d=this.getMirror(o);if(d!=null&&d>o&&d<this.to){o=d,e=this._maps[d].recover(c.recover);continue}}a|=c.delInfo,e=c.pos}return r?e:new Cg(e,a,null)}}const Km=Object.create(null);class or{getMap(){return Hr.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Km[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Km)throw new RangeError("Duplicate use of step JSON ID "+e);return Km[e]=n,n.prototype.jsonID=e,n}}class Mn{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Mn(e,null)}static fail(e){return new Mn(null,e)}static fromReplace(e,n,r,a){try{return Mn.ok(e.replace(n,r,a))}catch(o){if(o instanceof Ad)return Mn.fail(o.message);throw o}}}function fy(t,e,n){let r=[];for(let a=0;a<t.childCount;a++){let o=t.child(a);o.content.size&&(o=o.copy(fy(o.content,e,o))),o.isInline&&(o=e(o,n,a)),r.push(o)}return De.fromArray(r)}class xs extends or{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),a=r.node(r.sharedDepth(this.to)),o=new Pe(fy(n.content,(l,c)=>!l.isAtom||!c.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),a),n.openStart,n.openEnd);return Mn.fromReplace(e,this.from,this.to,o)}invert(){return new gi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new xs(n.pos,r.pos,this.mark)}merge(e){return e instanceof xs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new xs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new xs(n.from,n.to,e.markFromJSON(n.mark))}}or.jsonID("addMark",xs);class gi extends or{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Pe(fy(n.content,a=>a.mark(this.mark.removeFromSet(a.marks)),e),n.openStart,n.openEnd);return Mn.fromReplace(e,this.from,this.to,r)}invert(){return new xs(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new gi(n.pos,r.pos,this.mark)}merge(e){return e instanceof gi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new gi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new gi(n.from,n.to,e.markFromJSON(n.mark))}}or.jsonID("removeMark",gi);class Ss extends or{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Mn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Mn.fromReplace(e,this.pos,this.pos+1,new Pe(De.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let a=0;a<n.marks.length;a++)if(!n.marks[a].isInSet(r))return new Ss(this.pos,n.marks[a]);return new Ss(this.pos,this.mark)}}return new So(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ss(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ss(n.pos,e.markFromJSON(n.mark))}}or.jsonID("addNodeMark",Ss);class So extends or{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Mn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Mn.fromReplace(e,this.pos,this.pos+1,new Pe(De.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ss(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new So(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new So(n.pos,e.markFromJSON(n.mark))}}or.jsonID("removeNodeMark",So);class Un extends or{constructor(e,n,r,a=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=a}apply(e){return this.structure&&Mg(e,this.from,this.to)?Mn.fail("Structure replace would overwrite content"):Mn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Hr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Un(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Un(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Un)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Pe.empty:new Pe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Un(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Pe.empty:new Pe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Un(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Un(n.from,n.to,Pe.fromJSON(e,n.slice),!!n.structure)}}or.jsonID("replace",Un);class Hn extends or{constructor(e,n,r,a,o,l,c=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=a,this.slice=o,this.insert=l,this.structure=c}apply(e){if(this.structure&&(Mg(e,this.from,this.gapFrom)||Mg(e,this.gapTo,this.to)))return Mn.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Mn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Mn.fromReplace(e,this.from,this.to,r):Mn.fail("Content does not fit in gap")}getMap(){return new Hr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Hn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),a=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||a<n.pos||o>r.pos?null:new Hn(n.pos,r.pos,a,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Hn(n.from,n.to,n.gapFrom,n.gapTo,Pe.fromJSON(e,n.slice),n.insert,!!n.structure)}}or.jsonID("replaceAround",Hn);function Mg(t,e,n){let r=t.resolve(e),a=n-e,o=r.depth;for(;a>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,a--;if(a>0){let l=r.node(o).maybeChild(r.indexAfter(o));for(;a>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,a--}}return!1}function _N(t,e,n,r){let a=[],o=[],l,c;t.doc.nodesBetween(e,n,(d,h,p)=>{if(!d.isInline)return;let m=d.marks;if(!r.isInSet(m)&&p.type.allowsMarkType(r.type)){let v=Math.max(h,e),x=Math.min(h+d.nodeSize,n),w=r.addToSet(m);for(let T=0;T<m.length;T++)m[T].isInSet(w)||(l&&l.to==v&&l.mark.eq(m[T])?l.to=x:a.push(l=new gi(v,x,m[T])));c&&c.to==v?c.to=x:o.push(c=new xs(v,x,r))}}),a.forEach(d=>t.step(d)),o.forEach(d=>t.step(d))}function zN(t,e,n,r){let a=[],o=0;t.doc.nodesBetween(e,n,(l,c)=>{if(!l.isInline)return;o++;let d=null;if(r instanceof Sh){let h=l.marks,p;for(;p=r.isInSet(h);)(d||(d=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(l.marks)&&(d=[r]):d=l.marks;if(d&&d.length){let h=Math.min(c+l.nodeSize,n);for(let p=0;p<d.length;p++){let m=d[p],v;for(let x=0;x<a.length;x++){let w=a[x];w.step==o-1&&m.eq(a[x].style)&&(v=w)}v?(v.to=h,v.step=o):a.push({style:m,from:Math.max(c,e),to:h,step:o})}}}),a.forEach(l=>t.step(new gi(l.from,l.to,l.style)))}function dy(t,e,n,r=n.contentMatch,a=!0){let o=t.doc.nodeAt(e),l=[],c=e+1;for(let d=0;d<o.childCount;d++){let h=o.child(d),p=c+h.nodeSize,m=r.matchType(h.type);if(!m)l.push(new Un(c,p,Pe.empty));else{r=m;for(let v=0;v<h.marks.length;v++)n.allowsMarkType(h.marks[v].type)||t.step(new gi(c,p,h.marks[v]));if(a&&h.isText&&n.whitespace!="pre"){let v,x=/\r?\n|\r/g,w;for(;v=x.exec(h.text);)w||(w=new Pe(De.from(n.schema.text(" ",n.allowedMarks(h.marks))),0,0)),l.push(new Un(c+v.index,c+v.index+v[0].length,w))}}c=p}if(!r.validEnd){let d=r.fillBefore(De.empty,!0);t.replace(c,c,new Pe(d,0,0))}for(let d=l.length-1;d>=0;d--)t.step(l[d])}function jN(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Vl(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,a=0,o=0;;--r){let l=t.$from.node(r),c=t.$from.index(r)+a,d=t.$to.indexAfter(r)-o;if(r<t.depth&&l.canReplace(c,d,n))return r;if(r==0||l.type.spec.isolating||!jN(l,c,d))break;c&&(a=1),d<l.childCount&&(o=1)}return null}function LN(t,e,n){let{$from:r,$to:a,depth:o}=e,l=r.before(o+1),c=a.after(o+1),d=l,h=c,p=De.empty,m=0;for(let w=o,T=!1;w>n;w--)T||r.index(w)>0?(T=!0,p=De.from(r.node(w).copy(p)),m++):d--;let v=De.empty,x=0;for(let w=o,T=!1;w>n;w--)T||a.after(w+1)<a.end(w)?(T=!0,v=De.from(a.node(w).copy(v)),x++):h++;t.step(new Hn(d,h,l,c,new Pe(p.append(v),m,x),p.size-m,!0))}function hy(t,e,n=null,r=t){let a=BN(t,e),o=a&&UN(r,e);return o?a.map(Pb).concat({type:e,attrs:n}).concat(o.map(Pb)):null}function Pb(t){return{type:t,attrs:null}}function BN(t,e){let{parent:n,startIndex:r,endIndex:a}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let l=o.length?o[0]:e;return n.canReplaceWith(r,a,l)?o:null}function UN(t,e){let{parent:n,startIndex:r,endIndex:a}=t,o=n.child(r),l=e.contentMatch.findWrapping(o.type);if(!l)return null;let d=(l.length?l[l.length-1]:e).contentMatch;for(let h=r;d&&h<a;h++)d=d.matchType(n.child(h).type);return!d||!d.validEnd?null:l}function HN(t,e,n){let r=De.empty;for(let l=n.length-1;l>=0;l--){if(r.size){let c=n[l].type.contentMatch.matchFragment(r);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=De.from(n[l].type.create(n[l].attrs,r))}let a=e.start,o=e.end;t.step(new Hn(a,o,a,o,new Pe(r,0,0),n.length,!0))}function IN(t,e,n,r,a){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(l,c)=>{let d=typeof a=="function"?a(l):a;if(l.isTextblock&&!l.hasMarkup(r,d)&&qN(t.doc,t.mapping.slice(o).map(c),r)){let h=null;if(r.schema.linebreakReplacement){let x=r.whitespace=="pre",w=!!r.contentMatch.matchType(r.schema.linebreakReplacement);x&&!w?h=!1:!x&&w&&(h=!0)}h===!1&&Rw(t,l,c,o),dy(t,t.mapping.slice(o).map(c,1),r,void 0,h===null);let p=t.mapping.slice(o),m=p.map(c,1),v=p.map(c+l.nodeSize,1);return t.step(new Hn(m,v,m+1,v-1,new Pe(De.from(r.create(d,null,l.marks)),0,0),1,!0)),h===!0&&Dw(t,l,c,o),!1}})}function Dw(t,e,n,r){e.forEach((a,o)=>{if(a.isText){let l,c=/\r?\n|\r/g;for(;l=c.exec(a.text);){let d=t.mapping.slice(r).map(n+1+o+l.index);t.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function Rw(t,e,n,r){e.forEach((a,o)=>{if(a.type==a.type.schema.linebreakReplacement){let l=t.mapping.slice(r).map(n+1+o);t.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function qN(t,e,n){let r=t.resolve(e),a=r.index();return r.parent.canReplaceWith(a,a+1,n)}function PN(t,e,n,r,a){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let l=n.create(r,null,a||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,l);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Hn(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new Pe(De.from(l),0,0),1,!0))}function Ca(t,e,n=1,r){let a=t.resolve(e),o=a.depth-n,l=r&&r[r.length-1]||a.parent;if(o<0||a.parent.type.spec.isolating||!a.parent.canReplace(a.index(),a.parent.childCount)||!l.type.validContent(a.parent.content.cutByIndex(a.index(),a.parent.childCount)))return!1;for(let h=a.depth-1,p=n-2;h>o;h--,p--){let m=a.node(h),v=a.index(h);if(m.type.spec.isolating)return!1;let x=m.content.cutByIndex(v,m.childCount),w=r&&r[p+1];w&&(x=x.replaceChild(0,w.type.create(w.attrs)));let T=r&&r[p]||m;if(!m.canReplace(v+1,m.childCount)||!T.type.validContent(x))return!1}let c=a.indexAfter(o),d=r&&r[0];return a.node(o).canReplaceWith(c,c,d?d.type:a.node(o+1).type)}function VN(t,e,n=1,r){let a=t.doc.resolve(e),o=De.empty,l=De.empty;for(let c=a.depth,d=a.depth-n,h=n-1;c>d;c--,h--){o=De.from(a.node(c).copy(o));let p=r&&r[h];l=De.from(p?p.type.create(p.attrs,l):a.node(c).copy(l))}t.step(new Un(e,e,new Pe(o.append(l),n,n),!0))}function Os(t,e){let n=t.resolve(e),r=n.index();return _w(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function FN(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let a=0;a<e.childCount;a++){let o=e.child(a),l=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(l),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function _w(t,e){return!!(t&&e&&!t.isLeaf&&FN(t,e))}function wh(t,e,n=-1){let r=t.resolve(e);for(let a=r.depth;;a--){let o,l,c=r.index(a);if(a==r.depth?(o=r.nodeBefore,l=r.nodeAfter):n>0?(o=r.node(a+1),c++,l=r.node(a).maybeChild(c)):(o=r.node(a).maybeChild(c-1),l=r.node(a+1)),o&&!o.isTextblock&&_w(o,l)&&r.node(a).canReplace(c,c+1))return e;if(a==0)break;e=n<0?r.before(a):r.after(a)}}function KN(t,e,n){let r=null,{linebreakReplacement:a}=t.doc.type.schema,o=t.doc.resolve(e-n),l=o.node().type;if(a&&l.inlineContent){let p=l.whitespace=="pre",m=!!l.contentMatch.matchType(a);p&&!m?r=!1:!p&&m&&(r=!0)}let c=t.steps.length;if(r===!1){let p=t.doc.resolve(e+n);Rw(t,p.node(),p.before(),c)}l.inlineContent&&dy(t,e+n-1,l,o.node().contentMatchAt(o.index()),r==null);let d=t.mapping.slice(c),h=d.map(e-n);if(t.step(new Un(h,d.map(e+n,-1),Pe.empty,!0)),r===!0){let p=t.doc.resolve(h);Dw(t,p.node(),p.before(),t.steps.length)}return t}function $N(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let a=r.depth-1;a>=0;a--){let o=r.index(a);if(r.node(a).canReplaceWith(o,o,n))return r.before(a+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let a=r.depth-1;a>=0;a--){let o=r.indexAfter(a);if(r.node(a).canReplaceWith(o,o,n))return r.after(a+1);if(o<r.node(a).childCount)return null}return null}function zw(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let a=n.content;for(let o=0;o<n.openStart;o++)a=a.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let l=r.depth;l>=0;l--){let c=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,d=r.index(l)+(c>0?1:0),h=r.node(l),p=!1;if(o==1)p=h.canReplace(d,d,a);else{let m=h.contentMatchAt(d).findWrapping(a.firstChild.type);p=m&&h.canReplaceWith(d,d,m[0])}if(p)return c==0?r.pos:c<0?r.before(l+1):r.after(l+1)}return null}function Eh(t,e,n=e,r=Pe.empty){if(e==n&&!r.size)return null;let a=t.resolve(e),o=t.resolve(n);return jw(a,o,r)?new Un(e,n,r):new YN(a,o,r).fit()}function jw(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class YN{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=De.empty;for(let a=0;a<=e.depth;a++){let o=e.node(a);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(a))})}for(let a=e.depth;a>0;a--)this.placed=De.from(e.node(a).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,a=this.close(e<0?this.$to:r.doc.resolve(e));if(!a)return null;let o=this.placed,l=r.depth,c=a.depth;for(;l&&c&&o.childCount==1;)o=o.firstChild.content,l--,c--;let d=new Pe(o,l,c);return e>-1?new Hn(r.pos,e,this.$to.pos,this.$to.end(),d,n):d.size||r.pos!=this.$to.pos?new Un(r.pos,a.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,a=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(a=0),o.type.spec.isolating&&a<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let a,o=null;r?(o=$m(this.unplaced.content,r-1).firstChild,a=o.content):a=this.unplaced.content;let l=a.firstChild;for(let c=this.depth;c>=0;c--){let{type:d,match:h}=this.frontier[c],p,m=null;if(n==1&&(l?h.matchType(l.type)||(m=h.fillBefore(De.from(l),!1)):o&&d.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:c,parent:o,inject:m};if(n==2&&l&&(p=h.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:c,parent:o,wrap:p};if(o&&h.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,a=$m(e,n);return!a.childCount||a.firstChild.isLeaf?!1:(this.unplaced=new Pe(e,n+1,Math.max(r,a.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,a=$m(e,n);if(a.childCount<=1&&n>0){let o=e.size-n<=n+a.size;this.unplaced=new Pe(Zu(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new Pe(Zu(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:a,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let T=0;T<o.length;T++)this.openFrontierNode(o[T]);let l=this.unplaced,c=r?r.content:l.content,d=l.openStart-e,h=0,p=[],{match:m,type:v}=this.frontier[n];if(a){for(let T=0;T<a.childCount;T++)p.push(a.child(T));m=m.matchFragment(a)}let x=c.size+e-(l.content.size-l.openEnd);for(;h<c.childCount;){let T=c.child(h),M=m.matchType(T.type);if(!M)break;h++,(h>1||d==0||T.content.size)&&(m=M,p.push(Lw(T.mark(v.allowedMarks(T.marks)),h==1?d:0,h==c.childCount?x:-1)))}let w=h==c.childCount;w||(x=-1),this.placed=ec(this.placed,n,De.from(p)),this.frontier[n].match=m,w&&x<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let T=0,M=c;T<x;T++){let O=M.lastChild;this.frontier.push({type:O.type,match:O.contentMatchAt(O.childCount)}),M=O.content}this.unplaced=w?e==0?Pe.empty:new Pe(Zu(l.content,e-1,1),e-1,x<0?l.openEnd:e-1):new Pe(Zu(l.content,e,h),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Ym(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,a=this.$to.after(r);for(;r>1&&a==this.$to.end(--r);)++a;return a}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:a}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),l=Ym(e,n,a,r,o);if(l){for(let c=n-1;c>=0;c--){let{match:d,type:h}=this.frontier[c],p=Ym(e,c,h,d,!0);if(!p||p.childCount)continue e}return{depth:n,fit:l,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=ec(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let a=e.node(r),o=a.type.contentMatch.fillBefore(a.content,!0,e.index(r));this.openFrontierNode(a.type,a.attrs,o)}return e}openFrontierNode(e,n=null,r){let a=this.frontier[this.depth];a.match=a.match.matchType(e),this.placed=ec(this.placed,this.depth,De.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(De.empty,!0);n.childCount&&(this.placed=ec(this.placed,this.frontier.length,n))}}function Zu(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Zu(t.firstChild.content,e-1,n)))}function ec(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(ec(t.lastChild.content,e-1,n)))}function $m(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Lw(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Lw(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(De.empty,!0)))),t.copy(r)}function Ym(t,e,n,r,a){let o=t.node(e),l=a?t.indexAfter(e):t.index(e);if(l==o.childCount&&!n.compatibleContent(o.type))return null;let c=r.fillBefore(o.content,!0,l);return c&&!GN(n,o.content,l)?c:null}function GN(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function QN(t){return t.spec.defining||t.spec.definingForContent}function WN(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let a=t.doc.resolve(e),o=t.doc.resolve(n);if(jw(a,o,r))return t.step(new Un(e,n,r));let l=Uw(a,o);l[l.length-1]==0&&l.pop();let c=-(a.depth+1);l.unshift(c);for(let v=a.depth,x=a.pos-1;v>0;v--,x--){let w=a.node(v).type.spec;if(w.defining||w.definingAsContext||w.isolating)break;l.indexOf(v)>-1?c=v:a.before(v)==x&&l.splice(1,0,-v)}let d=l.indexOf(c),h=[],p=r.openStart;for(let v=r.content,x=0;;x++){let w=v.firstChild;if(h.push(w),x==r.openStart)break;v=w.content}for(let v=p-1;v>=0;v--){let x=h[v],w=QN(x.type);if(w&&!x.sameMarkup(a.node(Math.abs(c)-1)))p=v;else if(w||!x.type.isTextblock)break}for(let v=r.openStart;v>=0;v--){let x=(v+p+1)%(r.openStart+1),w=h[x];if(w)for(let T=0;T<l.length;T++){let M=l[(T+d)%l.length],O=!0;M<0&&(O=!1,M=-M);let q=a.node(M-1),V=a.index(M-1);if(q.canReplaceWith(V,V,w.type,w.marks))return t.replace(a.before(M),O?o.after(M):n,new Pe(Bw(r.content,0,r.openStart,x),x,r.openEnd))}}let m=t.steps.length;for(let v=l.length-1;v>=0&&(t.replace(e,n,r),!(t.steps.length>m));v--){let x=l[v];x<0||(e=a.before(x),n=o.after(x))}}function Bw(t,e,n,r,a){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(Bw(o.content,e+1,n,r,o)))}if(e>r){let o=a.contentMatchAt(0),l=o.fillBefore(t).append(t);t=l.append(o.matchFragment(l).fillBefore(De.empty,!0))}return t}function XN(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let a=$N(t.doc,e,r.type);a!=null&&(e=n=a)}t.replaceRange(e,n,new Pe(De.from(r),0,0))}function JN(t,e,n){let r=t.doc.resolve(e),a=t.doc.resolve(n),o=Uw(r,a);for(let l=0;l<o.length;l++){let c=o[l],d=l==o.length-1;if(d&&c==0||r.node(c).type.contentMatch.validEnd)return t.delete(r.start(c),a.end(c));if(c>0&&(d||r.node(c-1).canReplace(r.index(c-1),a.indexAfter(c-1))))return t.delete(r.before(c),a.after(c))}for(let l=1;l<=r.depth&&l<=a.depth;l++)if(e-r.start(l)==r.depth-l&&n>r.end(l)&&a.end(l)-n!=a.depth-l&&r.start(l-1)==a.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),a.index(l-1)))return t.delete(r.before(l),n);t.delete(e,n)}function Uw(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let a=r;a>=0;a--){let o=t.start(a);if(o<t.pos-(t.depth-a)||e.end(a)>e.pos+(e.depth-a)||t.node(a).type.spec.isolating||e.node(a).type.spec.isolating)break;(o==e.start(a)||a==t.depth&&a==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&a&&e.start(a-1)==o-1)&&n.push(a)}return n}class Ol extends or{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Mn.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let a=n.type.create(r,null,n.marks);return Mn.fromReplace(e,this.pos,this.pos+1,new Pe(De.from(a),0,n.isLeaf?0:1))}getMap(){return Hr.empty}invert(e){return new Ol(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ol(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ol(n.pos,n.attr,n.value)}}or.jsonID("attr",Ol);class xc extends or{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let a in e.attrs)n[a]=e.attrs[a];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Mn.ok(r)}getMap(){return Hr.empty}invert(e){return new xc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new xc(n.attr,n.value)}}or.jsonID("docAttr",xc);let _l=class extends Error{};_l=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};_l.prototype=Object.create(Error.prototype);_l.prototype.constructor=_l;_l.prototype.name="TransformError";class Hw{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new bc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new _l(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let a=this.mapping.maps[r];r&&(e=a.map(e,1),n=a.map(n,-1)),a.forEach((o,l,c,d)=>{e=Math.min(e,c),n=Math.max(n,d)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Pe.empty){let a=Eh(this.doc,e,n,r);return a&&this.step(a),this}replaceWith(e,n,r){return this.replace(e,n,new Pe(De.from(r),0,0))}delete(e,n){return this.replace(e,n,Pe.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return WN(this,e,n,r),this}replaceRangeWith(e,n,r){return XN(this,e,n,r),this}deleteRange(e,n){return JN(this,e,n),this}lift(e,n){return LN(this,e,n),this}join(e,n=1){return KN(this,e,n),this}wrap(e,n){return HN(this,e,n),this}setBlockType(e,n=e,r,a=null){return IN(this,e,n,r,a),this}setNodeMarkup(e,n,r=null,a){return PN(this,e,n,r,a),this}setNodeAttribute(e,n,r){return this.step(new Ol(e,n,r)),this}setDocAttribute(e,n){return this.step(new xc(e,n)),this}addNodeMark(e,n){return this.step(new Ss(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof qt)n.isInSet(r.marks)&&this.step(new So(e,n));else{let a=r.marks,o,l=[];for(;o=n.isInSet(a);)l.push(new So(e,o)),a=o.removeFromSet(a);for(let c=l.length-1;c>=0;c--)this.step(l[c])}return this}split(e,n=1,r){return VN(this,e,n,r),this}addMark(e,n,r){return _N(this,e,n,r),this}removeMark(e,n,r){return zN(this,e,n,r),this}clearIncompatible(e,n,r){return dy(this,e,n,r),this}}const Gm=Object.create(null);class ut{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new ZN(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Pe.empty){let r=n.content.lastChild,a=null;for(let c=0;c<n.openEnd;c++)a=r,r=r.lastChild;let o=e.steps.length,l=this.ranges;for(let c=0;c<l.length;c++){let{$from:d,$to:h}=l[c],p=e.mapping.slice(o);e.replaceRange(p.map(d.pos),p.map(h.pos),c?Pe.empty:n),c==0&&Kb(e,o,(r?r.isInline:a&&a.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,a=this.ranges;for(let o=0;o<a.length;o++){let{$from:l,$to:c}=a[o],d=e.mapping.slice(r),h=d.map(l.pos),p=d.map(c.pos);o?e.deleteRange(h,p):(e.replaceRangeWith(h,p,n),Kb(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let a=e.parent.inlineContent?new tt(e):kl(e.node(0),e.parent,e.pos,e.index(),n,r);if(a)return a;for(let o=e.depth-1;o>=0;o--){let l=n<0?kl(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):kl(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(l)return l}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new qr(e.node(0))}static atStart(e){return kl(e,e,0,0,1)||new qr(e)}static atEnd(e){return kl(e,e,e.content.size,e.childCount,-1)||new qr(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Gm[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Gm)throw new RangeError("Duplicate use of selection JSON ID "+e);return Gm[e]=n,n.prototype.jsonID=e,n}getBookmark(){return tt.between(this.$anchor,this.$head).getBookmark()}}ut.prototype.visible=!0;class ZN{constructor(e,n){this.$from=e,this.$to=n}}let Vb=!1;function Fb(t){!Vb&&!t.parent.inlineContent&&(Vb=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class tt extends ut{constructor(e,n=e){Fb(e),Fb(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ut.near(r);let a=e.resolve(n.map(this.anchor));return new tt(a.parent.inlineContent?a:r,r)}replace(e,n=Pe.empty){if(super.replace(e,n),n==Pe.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof tt&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new kh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new tt(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let a=e.resolve(n);return new this(a,r==n?a:e.resolve(r))}static between(e,n,r){let a=e.pos-n.pos;if((!r||a)&&(r=a>=0?1:-1),!n.parent.inlineContent){let o=ut.findFrom(n,r,!0)||ut.findFrom(n,-r,!0);if(o)n=o.$head;else return ut.near(n,r)}return e.parent.inlineContent||(a==0?e=n:(e=(ut.findFrom(e,-r,!0)||ut.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=a<0&&(e=n))),new tt(e,n)}}ut.jsonID("text",tt);class kh{constructor(e,n){this.anchor=e,this.head=n}map(e){return new kh(e.map(this.anchor),e.map(this.head))}resolve(e){return tt.between(e.resolve(this.anchor),e.resolve(this.head))}}class We extends ut{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:a}=n.mapResult(this.anchor),o=e.resolve(a);return r?ut.near(o):new We(o)}content(){return new Pe(De.from(this.node),0,0)}eq(e){return e instanceof We&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new py(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new We(e.resolve(n.anchor))}static create(e,n){return new We(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}We.prototype.visible=!1;ut.jsonID("node",We);class py{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new kh(r,r):new py(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&We.isSelectable(r)?new We(n):ut.near(n)}}class qr extends ut{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Pe.empty){if(n==Pe.empty){e.delete(0,e.doc.content.size);let r=ut.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new qr(e)}map(e){return new qr(e)}eq(e){return e instanceof qr}getBookmark(){return e3}}ut.jsonID("all",qr);const e3={map(){return this},resolve(t){return new qr(t)}};function kl(t,e,n,r,a,o=!1){if(e.inlineContent)return tt.create(t,n);for(let l=r-(a>0?0:1);a>0?l<e.childCount:l>=0;l+=a){let c=e.child(l);if(c.isAtom){if(!o&&We.isSelectable(c))return We.create(t,n-(a<0?c.nodeSize:0))}else{let d=kl(t,c,n+a,a<0?c.childCount:0,a,o);if(d)return d}n+=c.nodeSize*a}return null}function Kb(t,e,n){let r=t.steps.length-1;if(r<e)return;let a=t.steps[r];if(!(a instanceof Un||a instanceof Hn))return;let o=t.mapping.maps[r],l;o.forEach((c,d,h,p)=>{l==null&&(l=p)}),t.setSelection(ut.near(t.doc.resolve(l),n))}const $b=1,Zf=2,Yb=4;class t3 extends Hw{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|$b)&~Zf,this.storedMarks=null,this}get selectionSet(){return(this.updated&$b)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Zf,this}ensureMarks(e){return qt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Zf)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Zf,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||qt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let a=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(a.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let l=this.doc.resolve(n);o=r==n?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,a.text(e,o)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(ut.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Yb,this}get scrolledIntoView(){return(this.updated&Yb)>0}}function Gb(t,e){return!e||!t?t:t.bind(e)}class tc{constructor(e,n,r){this.name=e,this.init=Gb(n.init,r),this.apply=Gb(n.apply,r)}}const n3=[new tc("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new tc("selection",{init(t,e){return t.selection||ut.atStart(e.doc)},apply(t){return t.selection}}),new tc("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new tc("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Qm{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=n3.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new tc(r.key,r.spec.state,r))})}}class Al{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let a=this.config.plugins[r];if(a.spec.filterTransaction&&!a.spec.filterTransaction.call(a,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),a=null;for(;;){let o=!1;for(let l=0;l<this.config.plugins.length;l++){let c=this.config.plugins[l];if(c.spec.appendTransaction){let d=a?a[l].n:0,h=a?a[l].state:this,p=d<n.length&&c.spec.appendTransaction.call(c,d?n.slice(d):n,h,r);if(p&&r.filterTransaction(p,l)){if(p.setMeta("appendedTransaction",e),!a){a=[];for(let m=0;m<this.config.plugins.length;m++)a.push(m<l?{state:r,n:n.length}:{state:this,n:0})}n.push(p),r=r.applyInner(p),o=!0}a&&(a[l]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Al(this.config),r=this.config.fields;for(let a=0;a<r.length;a++){let o=r[a];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new t3(this)}static create(e){let n=new Qm(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Al(n);for(let a=0;a<n.fields.length;a++)r[n.fields[a].name]=n.fields[a].init(e,r);return r}reconfigure(e){let n=new Qm(this.schema,e.plugins),r=n.fields,a=new Al(n);for(let o=0;o<r.length;o++){let l=r[o].name;a[l]=this.hasOwnProperty(l)?this[l]:r[o].init(e,a)}return a}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let a=e[r],o=a.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(a,this[a.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let a=new Qm(e.schema,e.plugins),o=new Al(a);return a.fields.forEach(l=>{if(l.name=="doc")o.doc=yi.fromJSON(e.schema,n.doc);else if(l.name=="selection")o.selection=ut.fromJSON(o.doc,n.selection);else if(l.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let c in r){let d=r[c],h=d.spec.state;if(d.key==l.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(n,c)){o[l.name]=h.fromJSON.call(d,e,n[c],o);return}}o[l.name]=l.init(e,o)}}),o}}function Iw(t,e,n){for(let r in t){let a=t[r];a instanceof Function?a=a.bind(e):r=="handleDOMEvents"&&(a=Iw(a,e,{})),n[r]=a}return n}class nn{constructor(e){this.spec=e,this.props={},e.props&&Iw(e.props,this,this.props),this.key=e.key?e.key.key:qw("plugin")}getState(e){return e[this.key]}}const Wm=Object.create(null);function qw(t){return t in Wm?t+"$"+ ++Wm[t]:(Wm[t]=0,t+"$")}class Nn{constructor(e="key"){this.key=qw(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const my=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Pw(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Vw=(t,e,n)=>{let r=Pw(t,n);if(!r)return!1;let a=gy(r);if(!a){let l=r.blockRange(),c=l&&Vl(l);return c==null?!1:(e&&e(t.tr.lift(l,c).scrollIntoView()),!0)}let o=a.nodeBefore;if(Jw(t,a,e,-1))return!0;if(r.parent.content.size==0&&(zl(o,"end")||We.isSelectable(o)))for(let l=r.depth;;l--){let c=Eh(t.doc,r.before(l),r.after(l),Pe.empty);if(c&&c.slice.size<c.to-c.from){if(e){let d=t.tr.step(c);d.setSelection(zl(o,"end")?ut.findFrom(d.doc.resolve(d.mapping.map(a.pos,-1)),-1):We.create(d.doc,a.pos-o.nodeSize)),e(d.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return o.isAtom&&a.depth==r.depth-1?(e&&e(t.tr.delete(a.pos-o.nodeSize,a.pos).scrollIntoView()),!0):!1},r3=(t,e,n)=>{let r=Pw(t,n);if(!r)return!1;let a=gy(r);return a?Fw(t,a,e):!1},i3=(t,e,n)=>{let r=$w(t,n);if(!r)return!1;let a=yy(r);return a?Fw(t,a,e):!1};function Fw(t,e,n){let r=e.nodeBefore,a=r,o=e.pos-1;for(;!a.isTextblock;o--){if(a.type.spec.isolating)return!1;let p=a.lastChild;if(!p)return!1;a=p}let l=e.nodeAfter,c=l,d=e.pos+1;for(;!c.isTextblock;d++){if(c.type.spec.isolating)return!1;let p=c.firstChild;if(!p)return!1;c=p}let h=Eh(t.doc,o,d,Pe.empty);if(!h||h.from!=o||h instanceof Un&&h.slice.size>=d-o)return!1;if(n){let p=t.tr.step(h);p.setSelection(tt.create(p.doc,o)),n(p.scrollIntoView())}return!0}function zl(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Kw=(t,e,n)=>{let{$head:r,empty:a}=t.selection,o=r;if(!a)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=gy(r)}let l=o&&o.nodeBefore;return!l||!We.isSelectable(l)?!1:(e&&e(t.tr.setSelection(We.create(t.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function gy(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function $w(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Yw=(t,e,n)=>{let r=$w(t,n);if(!r)return!1;let a=yy(r);if(!a)return!1;let o=a.nodeAfter;if(Jw(t,a,e,1))return!0;if(r.parent.content.size==0&&(zl(o,"start")||We.isSelectable(o))){let l=Eh(t.doc,r.before(),r.after(),Pe.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=t.tr.step(l);c.setSelection(zl(o,"start")?ut.findFrom(c.doc.resolve(c.mapping.map(a.pos)),1):We.create(c.doc,c.mapping.map(a.pos))),e(c.scrollIntoView())}return!0}}return o.isAtom&&a.depth==r.depth-1?(e&&e(t.tr.delete(a.pos,a.pos+o.nodeSize).scrollIntoView()),!0):!1},Gw=(t,e,n)=>{let{$head:r,empty:a}=t.selection,o=r;if(!a)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=yy(r)}let l=o&&o.nodeAfter;return!l||!We.isSelectable(l)?!1:(e&&e(t.tr.setSelection(We.create(t.doc,o.pos)).scrollIntoView()),!0)};function yy(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const a3=(t,e)=>{let n=t.selection,r=n instanceof We,a;if(r){if(n.node.isTextblock||!Os(t.doc,n.from))return!1;a=n.from}else if(a=wh(t.doc,n.from,-1),a==null)return!1;if(e){let o=t.tr.join(a);r&&o.setSelection(We.create(o.doc,a-t.doc.resolve(a).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},s3=(t,e)=>{let n=t.selection,r;if(n instanceof We){if(n.node.isTextblock||!Os(t.doc,n.to))return!1;r=n.to}else if(r=wh(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},o3=(t,e)=>{let{$from:n,$to:r}=t.selection,a=n.blockRange(r),o=a&&Vl(a);return o==null?!1:(e&&e(t.tr.lift(a,o).scrollIntoView()),!0)},Qw=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function vy(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const l3=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let a=n.node(-1),o=n.indexAfter(-1),l=vy(a.contentMatchAt(o));if(!l||!a.canReplaceWith(o,o,l))return!1;if(e){let c=n.after(),d=t.tr.replaceWith(c,c,l.createAndFill());d.setSelection(ut.near(d.doc.resolve(c),1)),e(d.scrollIntoView())}return!0},Ww=(t,e)=>{let n=t.selection,{$from:r,$to:a}=n;if(n instanceof qr||r.parent.inlineContent||a.parent.inlineContent)return!1;let o=vy(a.parent.contentMatchAt(a.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let l=(!r.parentOffset&&a.index()<a.parent.childCount?r:a).pos,c=t.tr.insert(l,o.createAndFill());c.setSelection(tt.create(c.doc,l+1)),e(c.scrollIntoView())}return!0},Xw=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Ca(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),a=r&&Vl(r);return a==null?!1:(e&&e(t.tr.lift(r,a).scrollIntoView()),!0)};function u3(t){return(e,n)=>{let{$from:r,$to:a}=e.selection;if(e.selection instanceof We&&e.selection.node.isBlock)return!r.parentOffset||!Ca(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],l,c,d=!1,h=!1;for(let x=r.depth;;x--)if(r.node(x).isBlock){d=r.end(x)==r.pos+(r.depth-x),h=r.start(x)==r.pos-(r.depth-x),c=vy(r.node(x-1).contentMatchAt(r.indexAfter(x-1))),o.unshift(d&&c?{type:c}:null),l=x;break}else{if(x==1)return!1;o.unshift(null)}let p=e.tr;(e.selection instanceof tt||e.selection instanceof qr)&&p.deleteSelection();let m=p.mapping.map(r.pos),v=Ca(p.doc,m,o.length,o);if(v||(o[0]=c?{type:c}:null,v=Ca(p.doc,m,o.length,o)),!v)return!1;if(p.split(m,o.length,o),!d&&h&&r.node(l).type!=c){let x=p.mapping.map(r.before(l)),w=p.doc.resolve(x);c&&r.node(l-1).canReplaceWith(w.index(),w.index()+1,c)&&p.setNodeMarkup(p.mapping.map(r.before(l)),c)}return n&&n(p.scrollIntoView()),!0}}const c3=u3(),f3=(t,e)=>{let{$from:n,to:r}=t.selection,a,o=n.sharedDepth(r);return o==0?!1:(a=n.before(o),e&&e(t.tr.setSelection(We.create(t.doc,a))),!0)};function d3(t,e,n){let r=e.nodeBefore,a=e.nodeAfter,o=e.index();return!r||!a||!r.type.compatibleContent(a.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(a.isTextblock||Os(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Jw(t,e,n,r){let a=e.nodeBefore,o=e.nodeAfter,l,c,d=a.type.spec.isolating||o.type.spec.isolating;if(!d&&d3(t,e,n))return!0;let h=!d&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(l=(c=a.contentMatchAt(a.childCount)).findWrapping(o.type))&&c.matchType(l[0]||o.type).validEnd){if(n){let x=e.pos+o.nodeSize,w=De.empty;for(let O=l.length-1;O>=0;O--)w=De.from(l[O].create(null,w));w=De.from(a.copy(w));let T=t.tr.step(new Hn(e.pos-1,x,e.pos,x,new Pe(w,1,0),l.length,!0)),M=T.doc.resolve(x+2*l.length);M.nodeAfter&&M.nodeAfter.type==a.type&&Os(T.doc,M.pos)&&T.join(M.pos),n(T.scrollIntoView())}return!0}let p=o.type.spec.isolating||r>0&&d?null:ut.findFrom(e,1),m=p&&p.$from.blockRange(p.$to),v=m&&Vl(m);if(v!=null&&v>=e.depth)return n&&n(t.tr.lift(m,v).scrollIntoView()),!0;if(h&&zl(o,"start",!0)&&zl(a,"end")){let x=a,w=[];for(;w.push(x),!x.isTextblock;)x=x.lastChild;let T=o,M=1;for(;!T.isTextblock;T=T.firstChild)M++;if(x.canReplace(x.childCount,x.childCount,T.content)){if(n){let O=De.empty;for(let V=w.length-1;V>=0;V--)O=De.from(w[V].copy(O));let q=t.tr.step(new Hn(e.pos-w.length,e.pos+o.nodeSize,e.pos+M,e.pos+o.nodeSize-M,new Pe(O,w.length,0),0,!0));n(q.scrollIntoView())}return!0}}return!1}function Zw(t){return function(e,n){let r=e.selection,a=t<0?r.$from:r.$to,o=a.depth;for(;a.node(o).isInline;){if(!o)return!1;o--}return a.node(o).isTextblock?(n&&n(e.tr.setSelection(tt.create(e.doc,t<0?a.start(o):a.end(o)))),!0):!1}}const h3=Zw(-1),p3=Zw(1);function m3(t,e=null){return function(n,r){let{$from:a,$to:o}=n.selection,l=a.blockRange(o),c=l&&hy(l,t,e);return c?(r&&r(n.tr.wrap(l,c).scrollIntoView()),!0):!1}}function Qb(t,e=null){return function(n,r){let a=!1;for(let o=0;o<n.selection.ranges.length&&!a;o++){let{$from:{pos:l},$to:{pos:c}}=n.selection.ranges[o];n.doc.nodesBetween(l,c,(d,h)=>{if(a)return!1;if(!(!d.isTextblock||d.hasMarkup(t,e)))if(d.type==t)a=!0;else{let p=n.doc.resolve(h),m=p.index();a=p.parent.canReplaceWith(m,m+1,t)}})}if(!a)return!1;if(r){let o=n.tr;for(let l=0;l<n.selection.ranges.length;l++){let{$from:{pos:c},$to:{pos:d}}=n.selection.ranges[l];o.setBlockType(c,d,t,e)}r(o.scrollIntoView())}return!0}}function by(...t){return function(e,n,r){for(let a=0;a<t.length;a++)if(t[a](e,n,r))return!0;return!1}}by(my,Vw,Kw);by(my,Yw,Gw);by(Qw,Ww,Xw,c3);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function g3(t,e=null){return function(n,r){let{$from:a,$to:o}=n.selection,l=a.blockRange(o);if(!l)return!1;let c=r?n.tr:null;return y3(c,l,t,e)?(r&&r(c.scrollIntoView()),!0):!1}}function y3(t,e,n,r=null){let a=!1,o=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=l.resolve(e.start-2);o=new Nd(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Nd(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),a=!0}let c=hy(o,n,r,e);return c?(t&&v3(t,e,c,a,n),!0):!1}function v3(t,e,n,r,a){let o=De.empty;for(let p=n.length-1;p>=0;p--)o=De.from(n[p].type.create(n[p].attrs,o));t.step(new Hn(e.start-(r?2:0),e.end,e.start,e.end,new Pe(o,0,0),n.length,!0));let l=0;for(let p=0;p<n.length;p++)n[p].type==a&&(l=p+1);let c=n.length-l,d=e.start+n.length-(r?2:0),h=e.parent;for(let p=e.startIndex,m=e.endIndex,v=!0;p<m;p++,v=!1)!v&&Ca(t.doc,d,c)&&(t.split(d,c),d+=2*c),d+=h.child(p).nodeSize;return t}function b3(t){return function(e,n){let{$from:r,$to:a}=e.selection,o=r.blockRange(a,l=>l.childCount>0&&l.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?x3(e,n,t,o):S3(e,n,o):!0:!1}}function x3(t,e,n,r){let a=t.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(a.step(new Hn(o-1,l,o,l,new Pe(De.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Nd(a.doc.resolve(r.$from.pos),a.doc.resolve(l),r.depth));const c=Vl(r);if(c==null)return!1;a.lift(r,c);let d=a.doc.resolve(a.mapping.map(o,-1)-1);return Os(a.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&a.join(d.pos),e(a.scrollIntoView()),!0}function S3(t,e,n){let r=t.tr,a=n.parent;for(let x=n.end,w=n.endIndex-1,T=n.startIndex;w>T;w--)x-=a.child(w).nodeSize,r.delete(x-1,x+1);let o=r.doc.resolve(n.start),l=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let c=n.startIndex==0,d=n.endIndex==a.childCount,h=o.node(-1),p=o.index(-1);if(!h.canReplace(p+(c?0:1),p+1,l.content.append(d?De.empty:De.from(a))))return!1;let m=o.pos,v=m+l.nodeSize;return r.step(new Hn(m-(c?1:0),v+(d?1:0),m+1,v-1,new Pe((c?De.empty:De.from(a.copy(De.empty))).append(d?De.empty:De.from(a.copy(De.empty))),c?0:1,d?0:1),c?0:1)),e(r.scrollIntoView()),!0}function w3(t){return function(e,n){let{$from:r,$to:a}=e.selection,o=r.blockRange(a,h=>h.childCount>0&&h.firstChild.type==t);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let c=o.parent,d=c.child(l-1);if(d.type!=t)return!1;if(n){let h=d.lastChild&&d.lastChild.type==c.type,p=De.from(h?t.create():null),m=new Pe(De.from(t.create(null,De.from(c.type.create(null,p)))),h?3:1,0),v=o.start,x=o.end;n(e.tr.step(new Hn(v-(h?3:1),x,v,x,m,1,!0)).scrollIntoView())}return!0}}const Gn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},jl=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Ag=null;const wa=function(t,e,n){let r=Ag||(Ag=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},E3=function(){Ag=null},wo=function(t,e,n,r){return n&&(Wb(t,e,n,r,-1)||Wb(t,e,n,r,1))},k3=/^(img|br|input|textarea|hr)$/i;function Wb(t,e,n,r,a){for(var o;;){if(t==n&&e==r)return!0;if(e==(a<0?0:si(t))){let l=t.parentNode;if(!l||l.nodeType!=1||Rc(t)||k3.test(t.nodeName)||t.contentEditable=="false")return!1;e=Gn(t)+(a<0?0:1),t=l}else if(t.nodeType==1){let l=t.childNodes[e+(a<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((o=l.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=a;else return!1;else t=l,e=a<0?si(t):0}else return!1}}function si(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function T3(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=si(t)}else if(t.parentNode&&!Rc(t))e=Gn(t),t=t.parentNode;else return null}}function C3(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Rc(t))e=Gn(t)+1,t=t.parentNode;else return null}}function M3(t,e,n){for(let r=e==0,a=e==si(t);r||a;){if(t==n)return!0;let o=Gn(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,a=a&&o==si(t)}}function Rc(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Th=function(t){return t.focusNode&&wo(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function lo(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function A3(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function O3(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(si(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(si(r.startContainer),r.startOffset)}}}const Hi=typeof navigator<"u"?navigator:null,Xb=typeof document<"u"?document:null,Ns=Hi&&Hi.userAgent||"",Og=/Edge\/(\d+)/.exec(Ns),e2=/MSIE \d/.exec(Ns),Ng=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ns),Cr=!!(e2||Ng||Og),ks=e2?document.documentMode:Ng?+Ng[1]:Og?+Og[1]:0,oi=!Cr&&/gecko\/(\d+)/i.test(Ns);oi&&+(/Firefox\/(\d+)/.exec(Ns)||[0,0])[1];const Dg=!Cr&&/Chrome\/(\d+)/.exec(Ns),Wn=!!Dg,t2=Dg?+Dg[1]:0,sr=!Cr&&!!Hi&&/Apple Computer/.test(Hi.vendor),Ll=sr&&(/Mobile\/\w+/.test(Ns)||!!Hi&&Hi.maxTouchPoints>2),ii=Ll||(Hi?/Mac/.test(Hi.platform):!1),n2=Hi?/Win/.test(Hi.platform):!1,ka=/Android \d/.test(Ns),_c=!!Xb&&"webkitFontSmoothing"in Xb.documentElement.style,N3=_c?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function D3(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function ya(t,e){return typeof t=="number"?t:t[e]}function R3(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Jb(t,e,n){let r=t.someProp("scrollThreshold")||0,a=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let l=n||t.dom;l;){if(l.nodeType!=1){l=jl(l);continue}let c=l,d=c==o.body,h=d?D3(o):R3(c),p=0,m=0;if(e.top<h.top+ya(r,"top")?m=-(h.top-e.top+ya(a,"top")):e.bottom>h.bottom-ya(r,"bottom")&&(m=e.bottom-e.top>h.bottom-h.top?e.top+ya(a,"top")-h.top:e.bottom-h.bottom+ya(a,"bottom")),e.left<h.left+ya(r,"left")?p=-(h.left-e.left+ya(a,"left")):e.right>h.right-ya(r,"right")&&(p=e.right-h.right+ya(a,"right")),p||m)if(d)o.defaultView.scrollBy(p,m);else{let x=c.scrollLeft,w=c.scrollTop;m&&(c.scrollTop+=m),p&&(c.scrollLeft+=p);let T=c.scrollLeft-x,M=c.scrollTop-w;e={left:e.left-T,top:e.top-M,right:e.right-T,bottom:e.bottom-M}}let v=d?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(v))break;l=v=="absolute"?l.offsetParent:jl(l)}}function _3(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,a;for(let o=(e.left+e.right)/2,l=n+1;l<Math.min(innerHeight,e.bottom);l+=5){let c=t.root.elementFromPoint(o,l);if(!c||c==t.dom||!t.dom.contains(c))continue;let d=c.getBoundingClientRect();if(d.top>=n-20){r=c,a=d.top;break}}return{refDOM:r,refTop:a,stack:r2(t.dom)}}function r2(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=jl(r));return e}function z3({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;i2(n,r==0?0:r-e)}function i2(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:a,left:o}=t[n];r.scrollTop!=a+e&&(r.scrollTop=a+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let wl=null;function j3(t){if(t.setActive)return t.setActive();if(wl)return t.focus(wl);let e=r2(t);t.focus(wl==null?{get preventScroll(){return wl={preventScroll:!0},!0}}:void 0),wl||(wl=!1,i2(e,0))}function a2(t,e){let n,r=2e8,a,o=0,l=e.top,c=e.top,d,h;for(let p=t.firstChild,m=0;p;p=p.nextSibling,m++){let v;if(p.nodeType==1)v=p.getClientRects();else if(p.nodeType==3)v=wa(p).getClientRects();else continue;for(let x=0;x<v.length;x++){let w=v[x];if(w.top<=l&&w.bottom>=c){l=Math.max(w.bottom,l),c=Math.min(w.top,c);let T=w.left>e.left?w.left-e.left:w.right<e.left?e.left-w.right:0;if(T<r){n=p,r=T,a=T&&n.nodeType==3?{left:w.right<e.left?w.right:w.left,top:e.top}:e,p.nodeType==1&&T&&(o=m+(e.left>=(w.left+w.right)/2?1:0));continue}}else w.top>e.top&&!d&&w.left<=e.left&&w.right>=e.left&&(d=p,h={left:Math.max(w.left,Math.min(w.right,e.left)),top:w.top});!n&&(e.left>=w.right&&e.top>=w.top||e.left>=w.left&&e.top>=w.bottom)&&(o=m+1)}}return!n&&d&&(n=d,a=h,r=0),n&&n.nodeType==3?L3(n,a):!n||r&&n.nodeType==1?{node:t,offset:o}:a2(n,a)}function L3(t,e){let n=t.nodeValue.length,r=document.createRange(),a;for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let l=ps(r,1);if(l.top!=l.bottom&&xy(e,l)){a={node:t,offset:o+(e.left>=(l.left+l.right)/2?1:0)};break}}return r.detach(),a||{node:t,offset:0}}function xy(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function B3(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function U3(t,e,n){let{node:r,offset:a}=a2(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();o=l.left!=l.right&&n.left>(l.left+l.right)/2?1:-1}return t.docView.posFromDOM(r,a,o)}function H3(t,e,n,r){let a=-1;for(let o=e,l=!1;o!=t.dom;){let c=t.docView.nearestDesc(o,!0),d;if(!c)return null;if(c.dom.nodeType==1&&(c.node.isBlock&&c.parent||!c.contentDOM)&&((d=c.dom.getBoundingClientRect()).width||d.height)&&(c.node.isBlock&&c.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(c.dom.nodeName)&&(!l&&d.left>r.left||d.top>r.top?a=c.posBefore:(!l&&d.right<r.left||d.bottom<r.top)&&(a=c.posAfter),l=!0),!c.contentDOM&&a<0&&!c.node.isText))return(c.node.isBlock?r.top<(d.top+d.bottom)/2:r.left<(d.left+d.right)/2)?c.posBefore:c.posAfter;o=c.dom.parentNode}return a>-1?a:t.docView.posFromDOM(e,n,-1)}function s2(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let a=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=a;;){let l=t.childNodes[o];if(l.nodeType==1){let c=l.getClientRects();for(let d=0;d<c.length;d++){let h=c[d];if(xy(e,h))return s2(l,e,h)}}if((o=(o+1)%r)==a)break}return t}function I3(t,e){let n=t.dom.ownerDocument,r,a=0,o=O3(n,e.left,e.top);o&&({node:r,offset:a}=o);let l=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),c;if(!l||!t.dom.contains(l.nodeType!=1?l.parentNode:l)){let h=t.dom.getBoundingClientRect();if(!xy(e,h)||(l=s2(t.dom,e,h),!l))return null}if(sr)for(let h=l;r&&h;h=jl(h))h.draggable&&(r=void 0);if(l=B3(l,e),r){if(oi&&r.nodeType==1&&(a=Math.min(a,r.childNodes.length),a<r.childNodes.length)){let p=r.childNodes[a],m;p.nodeName=="IMG"&&(m=p.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&a++}let h;_c&&a&&r.nodeType==1&&(h=r.childNodes[a-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&a--,r==t.dom&&a==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?c=t.state.doc.content.size:(a==0||r.nodeType!=1||r.childNodes[a-1].nodeName!="BR")&&(c=H3(t,r,a,e))}c==null&&(c=U3(t,l,e));let d=t.docView.nearestDesc(l,!0);return{pos:c,inside:d?d.posAtStart-d.border:-1}}function Zb(t){return t.top<t.bottom||t.left<t.right}function ps(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Zb(r))return r}return Array.prototype.find.call(n,Zb)||t.getBoundingClientRect()}const q3=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function o2(t,e,n){let{node:r,offset:a,atom:o}=t.docView.domFromPos(e,n<0?-1:1),l=_c||oi;if(r.nodeType==3)if(l&&(q3.test(r.nodeValue)||(n<0?!a:a==r.nodeValue.length))){let d=ps(wa(r,a,a),n);if(oi&&a&&/\s/.test(r.nodeValue[a-1])&&a<r.nodeValue.length){let h=ps(wa(r,a-1,a-1),-1);if(h.top==d.top){let p=ps(wa(r,a,a+1),-1);if(p.top!=d.top)return Wu(p,p.left<h.left)}}return d}else{let d=a,h=a,p=n<0?1:-1;return n<0&&!a?(h++,p=-1):n>=0&&a==r.nodeValue.length?(d--,p=1):n<0?d--:h++,Wu(ps(wa(r,d,h),p),p<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&a&&(n<0||a==si(r))){let d=r.childNodes[a-1];if(d.nodeType==1)return Xm(d.getBoundingClientRect(),!1)}if(o==null&&a<si(r)){let d=r.childNodes[a];if(d.nodeType==1)return Xm(d.getBoundingClientRect(),!0)}return Xm(r.getBoundingClientRect(),n>=0)}if(o==null&&a&&(n<0||a==si(r))){let d=r.childNodes[a-1],h=d.nodeType==3?wa(d,si(d)-(l?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(h)return Wu(ps(h,1),!1)}if(o==null&&a<si(r)){let d=r.childNodes[a];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let h=d?d.nodeType==3?wa(d,0,l?0:1):d.nodeType==1?d:null:null;if(h)return Wu(ps(h,-1),!0)}return Wu(ps(r.nodeType==3?wa(r):r,-n),n>=0)}function Wu(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Xm(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function l2(t,e,n){let r=t.state,a=t.root.activeElement;r!=e&&t.updateState(e),a!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),a!=t.dom&&a&&a.focus()}}function P3(t,e,n){let r=e.selection,a=n=="up"?r.$from:r.$to;return l2(t,e,()=>{let{node:o}=t.docView.domFromPos(a.pos,n=="up"?-1:1);for(;;){let c=t.docView.nearestDesc(o,!0);if(!c)break;if(c.node.isBlock){o=c.contentDOM||c.dom;break}o=c.dom.parentNode}let l=o2(t,a.pos,1);for(let c=o.firstChild;c;c=c.nextSibling){let d;if(c.nodeType==1)d=c.getClientRects();else if(c.nodeType==3)d=wa(c,0,c.nodeValue.length).getClientRects();else continue;for(let h=0;h<d.length;h++){let p=d[h];if(p.bottom>p.top+1&&(n=="up"?l.top-p.top>(p.bottom-l.top)*2:p.bottom-l.bottom>(l.bottom-p.top)*2))return!1}}return!0})}const V3=/[\u0590-\u08ac]/;function F3(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let a=r.parentOffset,o=!a,l=a==r.parent.content.size,c=t.domSelection();return c?!V3.test(r.parent.textContent)||!c.modify?n=="left"||n=="backward"?o:l:l2(t,e,()=>{let{focusNode:d,focusOffset:h,anchorNode:p,anchorOffset:m}=t.domSelectionRange(),v=c.caretBidiLevel;c.modify("move",n,"character");let x=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:w,focusOffset:T}=t.domSelectionRange(),M=w&&!x.contains(w.nodeType==1?w:w.parentNode)||d==w&&h==T;try{c.collapse(p,m),d&&(d!=p||h!=m)&&c.extend&&c.extend(d,h)}catch{}return v!=null&&(c.caretBidiLevel=v),M}):r.pos==r.start()||r.pos==r.end()}let ex=null,tx=null,nx=!1;function K3(t,e,n){return ex==e&&tx==n?nx:(ex=e,tx=n,nx=n=="up"||n=="down"?P3(t,e,n):F3(t,e,n))}const li=0,rx=1,co=2,Ii=3;class zc{constructor(e,n,r,a){this.parent=e,this.children=n,this.dom=r,this.contentDOM=a,this.dirty=li,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let a=this.children[n];if(a==e)return r;r+=a.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,l;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(l)+l.size:this.posAtStart}else{let o,l;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(l):this.posAtEnd}let a;if(e==this.dom&&this.contentDOM)a=n>Gn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){a=!1;break}if(o.previousSibling)break}if(a==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){a=!0;break}if(o.nextSibling)break}}return a??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,a=e;a;a=a.parentNode){let o=this.getDesc(a),l;if(o&&(!n||o.node))if(r&&(l=o.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let a=e;a;a=a.parentNode){let o=this.getDesc(a);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let a=this.children[n],o=r+a.size;if(r==e&&o!=r){for(;!a.border&&a.children.length;)for(let l=0;l<a.children.length;l++){let c=a.children[l];if(c.size){a=c;break}}return a}if(e<o)return a.descAt(e-r-a.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,a=0;for(let o=0;r<this.children.length;r++){let l=this.children[r],c=o+l.size;if(c>e||l instanceof c2){a=e-o;break}o=c}if(a)return this.children[r].domFromPos(a-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof u2&&o.side>=0;r--);if(n<=0){let o,l=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,l=!1);return o&&n&&l&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Gn(o.dom)+1:0}}else{let o,l=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,l=!1);return o&&l&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Gn(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let a=-1,o=-1;for(let l=r,c=0;;c++){let d=this.children[c],h=l+d.size;if(a==-1&&e<=h){let p=l+d.border;if(e>=p&&n<=h-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,n,p);e=l;for(let m=c;m>0;m--){let v=this.children[m-1];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(1)){a=Gn(v.dom)+1;break}e-=v.size}a==-1&&(a=0)}if(a>-1&&(h>n||c==this.children.length-1)){n=h;for(let p=c+1;p<this.children.length;p++){let m=this.children[p];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){o=Gn(m.dom);break}n+=m.size}o==-1&&(o=this.contentDOM.childNodes.length);break}l=h}return{node:this.contentDOM,from:e,to:n,fromOffset:a,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,a=!1){let o=Math.min(e,n),l=Math.max(e,n);for(let x=0,w=0;x<this.children.length;x++){let T=this.children[x],M=w+T.size;if(o>w&&l<M)return T.setSelection(e-w-T.border,n-w-T.border,r,a);w=M}let c=this.domFromPos(e,e?-1:1),d=n==e?c:this.domFromPos(n,n?-1:1),h=r.root.getSelection(),p=r.domSelectionRange(),m=!1;if((oi||sr)&&e==n){let{node:x,offset:w}=c;if(x.nodeType==3){if(m=!!(w&&x.nodeValue[w-1]==`
`),m&&w==x.nodeValue.length)for(let T=x,M;T;T=T.parentNode){if(M=T.nextSibling){M.nodeName=="BR"&&(c=d={node:M.parentNode,offset:Gn(M)+1});break}let O=T.pmViewDesc;if(O&&O.node&&O.node.isBlock)break}}else{let T=x.childNodes[w-1];m=T&&(T.nodeName=="BR"||T.contentEditable=="false")}}if(oi&&p.focusNode&&p.focusNode!=d.node&&p.focusNode.nodeType==1){let x=p.focusNode.childNodes[p.focusOffset];x&&x.contentEditable=="false"&&(a=!0)}if(!(a||m&&sr)&&wo(c.node,c.offset,p.anchorNode,p.anchorOffset)&&wo(d.node,d.offset,p.focusNode,p.focusOffset))return;let v=!1;if((h.extend||e==n)&&!(m&&oi)){h.collapse(c.node,c.offset);try{e!=n&&h.extend(d.node,d.offset),v=!0}catch{}}if(!v){if(e>n){let w=c;c=d,d=w}let x=document.createRange();x.setEnd(d.node,d.offset),x.setStart(c.node,c.offset),h.removeAllRanges(),h.addRange(x)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,a=0;a<this.children.length;a++){let o=this.children[a],l=r+o.size;if(r==l?e<=l&&n>=r:e<l&&n>r){let c=r+o.border,d=l-o.border;if(e>=c&&n<=d){this.dirty=e==r||n==l?co:rx,e==c&&n==d&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Ii:o.markDirty(e-c,n-c);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?co:Ii}r=l}this.dirty=co}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?co:rx;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class u2 extends zc{constructor(e,n,r,a){let o,l=n.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!o)return a;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(l.nodeType!=1){let c=document.createElement("span");c.appendChild(l),l=c}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==li&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class $3 extends zc{constructor(e,n,r,a){super(e,[],n,null),this.textDOM=r,this.text=a}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Eo extends zc{constructor(e,n,r,a,o){super(e,[],r,a),this.mark=n,this.spec=o}static create(e,n,r,a){let o=a.nodeViews[n.type.name],l=o&&o(n,a,r);return(!l||!l.dom)&&(l=Co.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Eo(e,n,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&Ii||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ii&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=li){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=li}}slice(e,n,r){let a=Eo.create(this.parent,this.mark,!0,r),o=this.children,l=this.size;n<l&&(o=_g(o,n,l,r)),e>0&&(o=_g(o,0,e,r));for(let c=0;c<o.length;c++)o[c].parent=a;return a.children=o,a}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ts extends zc{constructor(e,n,r,a,o,l,c,d,h){super(e,[],o,l),this.node=n,this.outerDeco=r,this.innerDeco=a,this.nodeDOM=c}static create(e,n,r,a,o,l){let c=o.nodeViews[n.type.name],d,h=c&&c(n,o,()=>{if(!d)return l;if(d.parent)return d.parent.posBeforeChild(d)},r,a),p=h&&h.dom,m=h&&h.contentDOM;if(n.isText){if(!p)p=document.createTextNode(n.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:m}=Co.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!m&&!n.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),n.type.spec.draggable&&(p.draggable=!0));let v=p;return p=h2(p,r,n),h?d=new Y3(e,n,r,a,p,m||null,v,h,o,l+1):n.isText?new Ch(e,n,r,a,p,v,o):new Ts(e,n,r,a,p,m||null,v,o,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>De.empty)}return e}matchesNode(e,n,r){return this.dirty==li&&e.eq(this.node)&&Rd(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,a=n,o=e.composing?this.localCompositionInfo(e,n):null,l=o&&o.pos>-1?o:null,c=o&&o.pos<0,d=new Q3(this,l&&l.node,e);J3(this.node,this.innerDeco,(h,p,m)=>{h.spec.marks?d.syncToMarks(h.spec.marks,r,e,p):h.type.side>=0&&!m&&d.syncToMarks(p==this.node.childCount?qt.none:this.node.child(p).marks,r,e,p),d.placeWidget(h,e,a)},(h,p,m,v)=>{d.syncToMarks(h.marks,r,e,v);let x;d.findNodeMatch(h,p,m,v)||c&&e.state.selection.from>a&&e.state.selection.to<a+h.nodeSize&&(x=d.findIndexWithChild(o.node))>-1&&d.updateNodeAt(h,p,m,x,e)||d.updateNextNode(h,p,m,e,v,a)||d.addNode(h,p,m,e,a),a+=h.nodeSize}),d.syncToMarks([],r,e,0),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==co)&&(l&&this.protectLocalComposition(e,l),f2(this.contentDOM,this.children,e),Ll&&Z3(this.dom))}localCompositionInfo(e,n){let{from:r,to:a}=e.state.selection;if(!(e.state.selection instanceof tt)||r<n||a>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,c=eD(this.node.content,l,r-n,a-n);return c<0?null:{node:o,pos:c,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:a}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let l=new $3(this,o,n,a);e.input.compositionNodes.push(l),this.children=_g(this.children,r,r+a.length,e,l)}update(e,n,r,a){return this.dirty==Ii||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,a),!0)}updateInner(e,n,r,a){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(a,this.posAtStart),this.dirty=li}updateOuterDeco(e){if(Rd(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=d2(this.dom,this.nodeDOM,Rg(this.outerDeco,this.node,n),Rg(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function ix(t,e,n,r,a){h2(r,e,t);let o=new Ts(void 0,t,e,n,r,r,r,a,0);return o.contentDOM&&o.updateChildren(a,0),o}class Ch extends Ts{constructor(e,n,r,a,o,l,c){super(e,n,r,a,o,null,l,c,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,a){return this.dirty==Ii||this.dirty!=li&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=li||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,a.trackWrites==this.nodeDOM&&(a.trackWrites=null)),this.node=e,this.dirty=li,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let a=this.node.cut(e,n),o=document.createTextNode(a.text);return new Ch(this.parent,a,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ii)}get domAtom(){return!1}isText(e){return this.node.text==e}}class c2 extends zc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==li&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Y3 extends Ts{constructor(e,n,r,a,o,l,c,d,h,p){super(e,n,r,a,o,l,c,h,p),this.spec=d}update(e,n,r,a){if(this.dirty==Ii)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,a),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,a)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,a){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,a)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function f2(t,e,n){let r=t.firstChild,a=!1;for(let o=0;o<e.length;o++){let l=e[o],c=l.dom;if(c.parentNode==t){for(;c!=r;)r=ax(r),a=!0;r=r.nextSibling}else a=!0,t.insertBefore(c,r);if(l instanceof Eo){let d=r?r.previousSibling:t.lastChild;f2(l.contentDOM,l.children,n),r=d?d.nextSibling:t.firstChild}}for(;r;)r=ax(r),a=!0;a&&n.trackWrites==t&&(n.trackWrites=null)}const sc=function(t){t&&(this.nodeName=t)};sc.prototype=Object.create(null);const fo=[new sc];function Rg(t,e,n){if(t.length==0)return fo;let r=n?fo[0]:new sc,a=[r];for(let o=0;o<t.length;o++){let l=t[o].type.attrs;if(l){l.nodeName&&a.push(r=new sc(l.nodeName));for(let c in l){let d=l[c];d!=null&&(n&&a.length==1&&a.push(r=new sc(e.isInline?"span":"div")),c=="class"?r.class=(r.class?r.class+" ":"")+d:c=="style"?r.style=(r.style?r.style+";":"")+d:c!="nodeName"&&(r[c]=d))}}}return a}function d2(t,e,n,r){if(n==fo&&r==fo)return e;let a=e;for(let o=0;o<r.length;o++){let l=r[o],c=n[o];if(o){let d;c&&c.nodeName==l.nodeName&&a!=t&&(d=a.parentNode)&&d.nodeName.toLowerCase()==l.nodeName||(d=document.createElement(l.nodeName),d.pmIsDeco=!0,d.appendChild(a),c=fo[0]),a=d}G3(a,c||fo[0],l)}return a}function G3(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],a=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)a.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<a.length;o++)r.indexOf(a[o])==-1&&t.classList.add(a[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,a;for(;a=r.exec(e.style);)t.style.removeProperty(a[1])}n.style&&(t.style.cssText+=n.style)}}function h2(t,e,n){return d2(t,t,fo,Rg(e,n,t.nodeType!=1))}function Rd(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function ax(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Q3{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=W3(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,a){let o=0,l=this.stack.length>>1,c=Math.min(l,e.length);for(;o<c&&(o==l-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<l;)this.destroyRest(),this.top.dirty=li,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let d=-1,h=this.top.children.length;a<this.preMatch.index&&(h=Math.min(this.index+3,h));for(let p=this.index;p<h;p++){let m=this.top.children[p];if(m.matchesMark(e[l])&&!this.isLocked(m.dom)){d=p;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let p=Eo.create(this.top,e[l],n,r);this.top.children.splice(this.index,0,p),this.top=p,this.changed=!0}this.index=0,l++}}findNodeMatch(e,n,r,a){let o=-1,l;if(a>=this.preMatch.index&&(l=this.preMatch.matches[a-this.preMatch.index]).parent==this.top&&l.matchesNode(e,n,r))o=this.top.children.indexOf(l,this.index);else for(let c=this.index,d=Math.min(this.top.children.length,c+5);c<d;c++){let h=this.top.children[c];if(h.matchesNode(e,n,r)&&!this.preMatch.matched.has(h)){o=c;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,a,o){let l=this.top.children[a];return l.dirty==Ii&&l.dom==l.contentDOM&&(l.dirty=co),l.update(e,n,r,o)?(this.destroyBetween(this.index,a),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let a=this.index;a<this.top.children.length;a++)if(this.top.children[a]==r)return a}return-1}e=n}}updateNextNode(e,n,r,a,o,l){for(let c=this.index;c<this.top.children.length;c++){let d=this.top.children[c];if(d instanceof Ts){let h=this.preMatch.matched.get(d);if(h!=null&&h!=o)return!1;let p=d.dom,m,v=this.isLocked(p)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=Ii&&Rd(n,d.outerDeco));if(!v&&d.update(e,n,r,a))return this.destroyBetween(this.index,c),d.dom!=p&&(this.changed=!0),this.index++,!0;if(!v&&(m=this.recreateWrapper(d,e,n,r,a,l)))return this.destroyBetween(this.index,c),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=co,m.updateChildren(a,l+1),m.dirty=li),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,a,o,l){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Rd(r,e.outerDeco)||!a.eq(e.innerDeco))return null;let c=Ts.create(this.top,n,r,a,o,l);if(c.contentDOM){c.children=e.children,e.children=[];for(let d of c.children)d.parent=c}return e.destroy(),c}addNode(e,n,r,a,o){let l=Ts.create(this.top,e,n,r,a,o);l.contentDOM&&l.updateChildren(a,o+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,n,r){let a=this.index<this.top.children.length?this.top.children[this.index]:null;if(a&&a.matchesWidget(e)&&(e==a.widget||!a.widget.type.toDOM.parentNode))this.index++;else{let o=new u2(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Eo;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Ch)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((sr||Wn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let a=new c2(this.top,[],r,null);n!=this.top?n.children.push(a):n.children.splice(this.index++,0,a),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function W3(t,e){let n=e,r=n.children.length,a=t.childCount,o=new Map,l=[];e:for(;a>0;){let c;for(;;)if(r){let h=n.children[r-1];if(h instanceof Eo)n=h,r=h.children.length;else{c=h,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let d=c.node;if(d){if(d!=t.child(a-1))break;--a,o.set(c,a),l.push(c)}}return{index:a,matched:o,matches:l.reverse()}}function X3(t,e){return t.type.side-e.type.side}function J3(t,e,n,r){let a=e.locals(t),o=0;if(a.length==0){for(let h=0;h<t.childCount;h++){let p=t.child(h);r(p,a,e.forChild(o,p),h),o+=p.nodeSize}return}let l=0,c=[],d=null;for(let h=0;;){let p,m;for(;l<a.length&&a[l].to==o;){let M=a[l++];M.widget&&(p?(m||(m=[p])).push(M):p=M)}if(p)if(m){m.sort(X3);for(let M=0;M<m.length;M++)n(m[M],h,!!d)}else n(p,h,!!d);let v,x;if(d)x=-1,v=d,d=null;else if(h<t.childCount)x=h,v=t.child(h++);else break;for(let M=0;M<c.length;M++)c[M].to<=o&&c.splice(M--,1);for(;l<a.length&&a[l].from<=o&&a[l].to>o;)c.push(a[l++]);let w=o+v.nodeSize;if(v.isText){let M=w;l<a.length&&a[l].from<M&&(M=a[l].from);for(let O=0;O<c.length;O++)c[O].to<M&&(M=c[O].to);M<w&&(d=v.cut(M-o),v=v.cut(0,M-o),w=M,x=-1)}else for(;l<a.length&&a[l].to<w;)l++;let T=v.isInline&&!v.isLeaf?c.filter(M=>!M.inline):c.slice();r(v,T,e.forChild(o,v),x),o=w}}function Z3(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function eD(t,e,n,r){for(let a=0,o=0;a<t.childCount&&o<=r;){let l=t.child(a++),c=o;if(o+=l.nodeSize,!l.isText)continue;let d=l.text;for(;a<t.childCount;){let h=t.child(a++);if(o+=h.nodeSize,!h.isText)break;d+=h.text}if(o>=n){if(o>=r&&d.slice(r-e.length-c,r-c)==e)return r-e.length;let h=c<r?d.lastIndexOf(e,r-c-1):-1;if(h>=0&&h+e.length+c>=n)return c+h;if(n==r&&d.length>=r+e.length-c&&d.slice(r-c,r-c+e.length)==e)return r}}return-1}function _g(t,e,n,r,a){let o=[];for(let l=0,c=0;l<t.length;l++){let d=t[l],h=c,p=c+=d.size;h>=n||p<=e?o.push(d):(h<e&&o.push(d.slice(0,e-h,r)),a&&(o.push(a),a=void 0),p>n&&o.push(d.slice(n-h,d.size,r)))}return o}function Sy(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let a=t.docView.nearestDesc(n.focusNode),o=a&&a.size==0,l=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(l<0)return null;let c=r.resolve(l),d,h;if(Th(n)){for(d=l;a&&!a.node;)a=a.parent;let m=a.node;if(a&&m.isAtom&&We.isSelectable(m)&&a.parent&&!(m.isInline&&M3(n.focusNode,n.focusOffset,a.dom))){let v=a.posBefore;h=new We(l==v?c:r.resolve(v))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let m=l,v=l;for(let x=0;x<n.rangeCount;x++){let w=n.getRangeAt(x);m=Math.min(m,t.docView.posFromDOM(w.startContainer,w.startOffset,1)),v=Math.max(v,t.docView.posFromDOM(w.endContainer,w.endOffset,-1))}if(m<0)return null;[d,l]=v==t.state.selection.anchor?[v,m]:[m,v],c=r.resolve(l)}else d=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(d<0)return null}let p=r.resolve(d);if(!h){let m=e=="pointer"||t.state.selection.head<c.pos&&!o?1:-1;h=wy(t,p,c,m)}return h}function p2(t){return t.editable?t.hasFocus():g2(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ma(t,e=!1){let n=t.state.selection;if(m2(t,n),!!p2(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Wn){let r=t.domSelectionRange(),a=t.domObserver.currentSelection;if(r.anchorNode&&a.anchorNode&&wo(r.anchorNode,r.anchorOffset,a.anchorNode,a.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)nD(t);else{let{anchor:r,head:a}=n,o,l;sx&&!(n instanceof tt)&&(n.$from.parent.inlineContent||(o=ox(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(l=ox(t,n.to))),t.docView.setSelection(r,a,t,e),sx&&(o&&lx(o),l&&lx(l)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&tD(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const sx=sr||Wn&&t2<63;function ox(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),a=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(sr&&a&&a.contentEditable=="false")return Jm(a);if((!a||a.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(a)return Jm(a);if(o)return Jm(o)}}function Jm(t){return t.contentEditable="true",sr&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function lx(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function tD(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,a=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=a)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!p2(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function nD(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Gn(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Cr&&ks<=11&&(n.disabled=!0,n.disabled=!1)}function m2(t,e){if(e instanceof We){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(ux(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else ux(t)}function ux(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function wy(t,e,n,r){return t.someProp("createSelectionBetween",a=>a(t,e,n))||tt.between(e,n,r)}function cx(t){return t.editable&&!t.hasFocus()?!1:g2(t)}function g2(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function rD(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return wo(e.node,e.offset,n.anchorNode,n.anchorOffset)}function zg(t,e){let{$anchor:n,$head:r}=t.selection,a=e>0?n.max(r):n.min(r),o=a.parent.inlineContent?a.depth?t.doc.resolve(e>0?a.after():a.before()):null:a;return o&&ut.findFrom(o,e)}function ms(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function fx(t,e,n){let r=t.state.selection;if(r instanceof tt)if(n.indexOf("s")>-1){let{$head:a}=r,o=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=t.state.doc.resolve(a.pos+o.nodeSize*(e<0?-1:1));return ms(t,new tt(r.$anchor,l))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let a=zg(t.state,e);return a&&a instanceof We?ms(t,a):!1}else if(!(ii&&n.indexOf("m")>-1)){let a=r.$head,o=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter,l;if(!o||o.isText)return!1;let c=e<0?a.pos-o.nodeSize:a.pos;return o.isAtom||(l=t.docView.descAt(c))&&!l.contentDOM?We.isSelectable(o)?ms(t,new We(e<0?t.state.doc.resolve(a.pos-o.nodeSize):a)):_c?ms(t,new tt(t.state.doc.resolve(e<0?c:c+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof We&&r.node.isInline)return ms(t,new tt(e>0?r.$to:r.$from));{let a=zg(t.state,e);return a?ms(t,a):!1}}}function _d(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function oc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function El(t,e){return e<0?iD(t):aD(t)}function iD(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let a,o,l=!1;for(oi&&n.nodeType==1&&r<_d(n)&&oc(n.childNodes[r],-1)&&(l=!0);;)if(r>0){if(n.nodeType!=1)break;{let c=n.childNodes[r-1];if(oc(c,-1))a=n,o=--r;else if(c.nodeType==3)n=c,r=n.nodeValue.length;else break}}else{if(y2(n))break;{let c=n.previousSibling;for(;c&&oc(c,-1);)a=n.parentNode,o=Gn(c),c=c.previousSibling;if(c)n=c,r=_d(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}l?jg(t,n,r):a&&jg(t,a,o)}function aD(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let a=_d(n),o,l;for(;;)if(r<a){if(n.nodeType!=1)break;let c=n.childNodes[r];if(oc(c,1))o=n,l=++r;else break}else{if(y2(n))break;{let c=n.nextSibling;for(;c&&oc(c,1);)o=c.parentNode,l=Gn(c)+1,c=c.nextSibling;if(c)n=c,r=0,a=_d(n);else{if(n=n.parentNode,n==t.dom)break;r=a=0}}}o&&jg(t,o,l)}function y2(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function sD(t,e){for(;t&&e==t.childNodes.length&&!Rc(t);)e=Gn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function oD(t,e){for(;t&&!e&&!Rc(t);)e=Gn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function jg(t,e,n){if(e.nodeType!=3){let o,l;(l=sD(e,n))?(e=l,n=0):(o=oD(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Th(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:a}=t;setTimeout(()=>{t.state==a&&Ma(t)},50)}function dx(t,e){let n=t.state.doc.resolve(e);if(!(Wn||n2)&&n.parent.inlineContent){let a=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),l=(o.top+o.bottom)/2;if(l>a.top&&l<a.bottom&&Math.abs(o.left-a.left)>1)return o.left<a.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),l=(o.top+o.bottom)/2;if(l>a.top&&l<a.bottom&&Math.abs(o.left-a.left)>1)return o.left>a.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function hx(t,e,n){let r=t.state.selection;if(r instanceof tt&&!r.empty||n.indexOf("s")>-1||ii&&n.indexOf("m")>-1)return!1;let{$from:a,$to:o}=r;if(!a.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let l=zg(t.state,e);if(l&&l instanceof We)return ms(t,l)}if(!a.parent.inlineContent){let l=e<0?a:o,c=r instanceof qr?ut.near(l,e):ut.findFrom(l,e);return c?ms(t,c):!1}return!1}function px(t,e){if(!(t.state.selection instanceof tt))return!0;let{$head:n,$anchor:r,empty:a}=t.state.selection;if(!n.sameParent(r))return!0;if(!a)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let l=t.state.tr;return e<0?l.delete(n.pos-o.nodeSize,n.pos):l.delete(n.pos,n.pos+o.nodeSize),t.dispatch(l),!0}return!1}function mx(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function lD(t){if(!sr||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;mx(t,r,"true"),setTimeout(()=>mx(t,r,"false"),20)}return!1}function uD(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function cD(t,e){let n=e.keyCode,r=uD(e);if(n==8||ii&&n==72&&r=="c")return px(t,-1)||El(t,-1);if(n==46&&!e.shiftKey||ii&&n==68&&r=="c")return px(t,1)||El(t,1);if(n==13||n==27)return!0;if(n==37||ii&&n==66&&r=="c"){let a=n==37?dx(t,t.state.selection.from)=="ltr"?-1:1:-1;return fx(t,a,r)||El(t,a)}else if(n==39||ii&&n==70&&r=="c"){let a=n==39?dx(t,t.state.selection.from)=="ltr"?1:-1:1;return fx(t,a,r)||El(t,a)}else{if(n==38||ii&&n==80&&r=="c")return hx(t,-1,r)||El(t,-1);if(n==40||ii&&n==78&&r=="c")return lD(t)||hx(t,1,r)||El(t,1);if(r==(ii?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Ey(t,e){t.someProp("transformCopied",x=>{e=x(e,t)});let n=[],{content:r,openStart:a,openEnd:o}=e;for(;a>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){a--,o--;let x=r.firstChild;n.push(x.type.name,x.attrs!=x.type.defaultAttrs?x.attrs:null),r=x.content}let l=t.someProp("clipboardSerializer")||Co.fromSchema(t.state.schema),c=E2(),d=c.createElement("div");d.appendChild(l.serializeFragment(r,{document:c}));let h=d.firstChild,p,m=0;for(;h&&h.nodeType==1&&(p=w2[h.nodeName.toLowerCase()]);){for(let x=p.length-1;x>=0;x--){let w=c.createElement(p[x]);for(;d.firstChild;)w.appendChild(d.firstChild);d.appendChild(w),m++}h=d.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${a} ${o}${m?` -${m}`:""} ${JSON.stringify(n)}`);let v=t.someProp("clipboardTextSerializer",x=>x(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:v,slice:e}}function v2(t,e,n,r,a){let o=a.parent.type.spec.code,l,c;if(!n&&!e)return null;let d=!!e&&(r||o||!n);if(d){if(t.someProp("transformPastedText",v=>{e=v(e,o||r,t)}),o)return c=new Pe(De.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",v=>{c=v(c,t,!0)}),c;let m=t.someProp("clipboardTextParser",v=>v(e,a,r,t));if(m)c=m;else{let v=a.marks(),{schema:x}=t.state,w=Co.fromSchema(x);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(T=>{let M=l.appendChild(document.createElement("p"));T&&M.appendChild(w.serializeNode(x.text(T,v)))})}}else t.someProp("transformPastedHTML",m=>{n=m(n,t)}),l=pD(n),_c&&mD(l);let h=l&&l.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let m=+p[3];m>0;m--){let v=l.firstChild;for(;v&&v.nodeType!=1;)v=v.nextSibling;if(!v)break;l=v}if(c||(c=(t.someProp("clipboardParser")||t.someProp("domParser")||Es.fromSchema(t.state.schema)).parseSlice(l,{preserveWhitespace:!!(d||p),context:a,ruleFromNode(v){return v.nodeName=="BR"&&!v.nextSibling&&v.parentNode&&!fD.test(v.parentNode.nodeName)?{ignore:!0}:null}})),p)c=gD(gx(c,+p[1],+p[2]),p[4]);else if(c=Pe.maxOpen(dD(c.content,a),!0),c.openStart||c.openEnd){let m=0,v=0;for(let x=c.content.firstChild;m<c.openStart&&!x.type.spec.isolating;m++,x=x.firstChild);for(let x=c.content.lastChild;v<c.openEnd&&!x.type.spec.isolating;v++,x=x.lastChild);c=gx(c,m,v)}return t.someProp("transformPasted",m=>{c=m(c,t,d)}),c}const fD=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function dD(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let a=e.node(n).contentMatchAt(e.index(n)),o,l=[];if(t.forEach(c=>{if(!l)return;let d=a.findWrapping(c.type),h;if(!d)return l=null;if(h=l.length&&o.length&&x2(d,o,c,l[l.length-1],0))l[l.length-1]=h;else{l.length&&(l[l.length-1]=S2(l[l.length-1],o.length));let p=b2(c,d);l.push(p),a=a.matchType(p.type),o=d}}),l)return De.from(l)}return t}function b2(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,De.from(t));return t}function x2(t,e,n,r,a){if(a<t.length&&a<e.length&&t[a]==e[a]){let o=x2(t,e,n,r.lastChild,a+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(a==t.length-1?n.type:t[a+1]))return r.copy(r.content.append(De.from(b2(n,t,a+1))))}}function S2(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,S2(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(De.empty,!0);return t.copy(n.append(r))}function Lg(t,e,n,r,a,o){let l=e<0?t.firstChild:t.lastChild,c=l.content;return t.childCount>1&&(o=0),a<r-1&&(c=Lg(c,e,n,r,a+1,o)),a>=n&&(c=e<0?l.contentMatchAt(0).fillBefore(c,o<=a).append(c):c.append(l.contentMatchAt(l.childCount).fillBefore(De.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,l.copy(c))}function gx(t,e,n){return e<t.openStart&&(t=new Pe(Lg(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Pe(Lg(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const w2={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let yx=null;function E2(){return yx||(yx=document.implementation.createHTMLDocument("title"))}let Zm=null;function hD(t){let e=window.trustedTypes;return e?(Zm||(Zm=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Zm.createHTML(t)):t}function pD(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=E2().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),a;if((a=r&&w2[r[1].toLowerCase()])&&(t=a.map(o=>"<"+o+">").join("")+t+a.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=hD(t),a)for(let o=0;o<a.length;o++)n=n.querySelector(a[o])||n;return n}function mD(t){let e=t.querySelectorAll(Wn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function gD(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:a,openStart:o,openEnd:l}=t;for(let c=r.length-2;c>=0;c-=2){let d=n.nodes[r[c]];if(!d||d.hasRequiredAttrs())break;a=De.from(d.create(r[c+1],a)),o++,l++}return new Pe(a,o,l)}const mr={},gr={},yD={touchstart:!0,touchmove:!0};class vD{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function bD(t){for(let e in mr){let n=mr[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{SD(t,r)&&!ky(t,r)&&(t.editable||!(r.type in gr))&&n(t,r)},yD[e]?{passive:!0}:void 0)}sr&&t.dom.addEventListener("input",()=>null),Bg(t)}function ws(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function xD(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Bg(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>ky(t,r))})}function ky(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function SD(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function wD(t,e){!ky(t,e)&&mr[e.type]&&(t.editable||!(e.type in gr))&&mr[e.type](t,e)}gr.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!T2(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ka&&Wn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Ll&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",a=>a(t,lo(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||cD(t,n)?n.preventDefault():ws(t,"key")};gr.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};gr.keypress=(t,e)=>{let n=e;if(T2(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||ii&&n.metaKey)return;if(t.someProp("handleKeyPress",a=>a(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof tt)||!r.$from.sameParent(r.$to)){let a=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(a).scrollIntoView();!/[\r\n]/.test(a)&&!t.someProp("handleTextInput",l=>l(t,r.$from.pos,r.$to.pos,a,o))&&t.dispatch(o()),n.preventDefault()}};function Mh(t){return{left:t.clientX,top:t.clientY}}function ED(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Ty(t,e,n,r,a){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let l=o.depth+1;l>0;l--)if(t.someProp(e,c=>l>o.depth?c(t,n,o.nodeAfter,o.before(l),a,!0):c(t,n,o.node(l),o.before(l),a,!1)))return!0;return!1}function Nl(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function kD(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&We.isSelectable(r)?(Nl(t,new We(n)),!0):!1}function TD(t,e){if(e==-1)return!1;let n=t.state.selection,r,a;n instanceof We&&(r=n.node);let o=t.state.doc.resolve(e);for(let l=o.depth+1;l>0;l--){let c=l>o.depth?o.nodeAfter:o.node(l);if(We.isSelectable(c)){r&&n.$from.depth>0&&l>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?a=o.before(n.$from.depth):a=o.before(l);break}}return a!=null?(Nl(t,We.create(t.state.doc,a)),!0):!1}function CD(t,e,n,r,a){return Ty(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(a?TD(t,n):kD(t,n))}function MD(t,e,n,r){return Ty(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",a=>a(t,e,r))}function AD(t,e,n,r){return Ty(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",a=>a(t,e,r))||OD(t,n,r)}function OD(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Nl(t,tt.create(r,0,r.content.size)),!0):!1;let a=r.resolve(e);for(let o=a.depth+1;o>0;o--){let l=o>a.depth?a.nodeAfter:a.node(o),c=a.before(o);if(l.inlineContent)Nl(t,tt.create(r,c+1,c+1+l.content.size));else if(We.isSelectable(l))Nl(t,We.create(r,c));else continue;return!0}}function Cy(t){return zd(t)}const k2=ii?"metaKey":"ctrlKey";mr.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Cy(t),a=Date.now(),o="singleClick";a-t.input.lastClick.time<500&&ED(n,t.input.lastClick)&&!n[k2]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:a,x:n.clientX,y:n.clientY,type:o,button:n.button};let l=t.posAtCoords(Mh(n));l&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new ND(t,l,n,!!r)):(o=="doubleClick"?MD:AD)(t,l.pos,l.inside,n)?n.preventDefault():ws(t,"pointer"))};class ND{constructor(e,n,r,a){this.view=e,this.pos=n,this.event=r,this.flushed=a,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[k2],this.allowDefault=r.shiftKey;let o,l;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),l=n.inside;else{let p=e.state.doc.resolve(n.pos);o=p.parent,l=p.depth?p.before():0}const c=a?null:r.target,d=c?e.docView.nearestDesc(c,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:h}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof We&&h.from<=l&&h.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&oi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ws(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ma(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Mh(e))),this.updateAllowDefault(e),this.allowDefault||!n?ws(this.view,"pointer"):CD(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||sr&&this.mightDrag&&!this.mightDrag.node.isAtom||Wn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Nl(this.view,ut.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):ws(this.view,"pointer")}move(e){this.updateAllowDefault(e),ws(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}mr.touchstart=t=>{t.input.lastTouch=Date.now(),Cy(t),ws(t,"pointer")};mr.touchmove=t=>{t.input.lastTouch=Date.now(),ws(t,"pointer")};mr.contextmenu=t=>Cy(t);function T2(t,e){return t.composing?!0:sr&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const DD=ka?5e3:-1;gr.compositionstart=gr.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof tt&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Wn&&n2&&RD(t)))t.markCursor=t.state.storedMarks||n.marks(),zd(t,!0),t.markCursor=null;else if(zd(t,!e.selection.empty),oi&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let a=r.focusNode,o=r.focusOffset;a&&a.nodeType==1&&o!=0;){let l=o<0?a.lastChild:a.childNodes[o-1];if(!l)break;if(l.nodeType==3){let c=t.domSelection();c&&c.collapse(l,l.nodeValue.length);break}else a=l,o=-1}}t.input.composing=!0}C2(t,DD)};function RD(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}gr.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,C2(t,20))};function C2(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>zd(t),e))}function M2(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=zD());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function _D(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=T3(e.focusNode,e.focusOffset),r=C3(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let a=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!a||!a.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let l=n.pmViewDesc;if(!(!l||!l.isText(n.nodeValue)))return r}}return n||r}function zD(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function zd(t,e=!1){if(!(ka&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),M2(t),e||t.docView&&t.docView.dirty){let n=Sy(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function jD(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),a=document.createRange();a.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(a),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Sc=Cr&&ks<15||Ll&&N3<604;mr.copy=gr.cut=(t,e)=>{let n=e,r=t.state.selection,a=n.type=="cut";if(r.empty)return;let o=Sc?null:n.clipboardData,l=r.content(),{dom:c,text:d}=Ey(t,l);o?(n.preventDefault(),o.clearData(),o.setData("text/html",c.innerHTML),o.setData("text/plain",d)):jD(t,c),a&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function LD(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function BD(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let a=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?wc(t,r.value,null,a,e):wc(t,r.textContent,r.innerHTML,a,e)},50)}function wc(t,e,n,r,a){let o=v2(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",d=>d(t,a,o||Pe.empty)))return!0;if(!o)return!1;let l=LD(o),c=l?t.state.tr.replaceSelectionWith(l,r):t.state.tr.replaceSelection(o);return t.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function A2(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}gr.paste=(t,e)=>{let n=e;if(t.composing&&!ka)return;let r=Sc?null:n.clipboardData,a=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&wc(t,A2(r),r.getData("text/html"),a,n)?n.preventDefault():BD(t,n)};class O2{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const UD=ii?"altKey":"ctrlKey";function N2(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[UD]}mr.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let a=t.state.selection,o=a.empty?null:t.posAtCoords(Mh(n)),l;if(!(o&&o.pos>=a.from&&o.pos<=(a instanceof We?a.to-1:a.to))){if(r&&r.mightDrag)l=We.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let m=t.docView.nearestDesc(n.target,!0);m&&m.node.type.spec.draggable&&m!=t.docView&&(l=We.create(t.state.doc,m.posBefore))}}let c=(l||t.state.selection).content(),{dom:d,text:h,slice:p}=Ey(t,c);(!n.dataTransfer.files.length||!Wn||t2>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Sc?"Text":"text/html",d.innerHTML),n.dataTransfer.effectAllowed="copyMove",Sc||n.dataTransfer.setData("text/plain",h),t.dragging=new O2(p,N2(t,n),l)};mr.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};gr.dragover=gr.dragenter=(t,e)=>e.preventDefault();gr.drop=(t,e)=>{try{HD(t,e,t.dragging)}finally{t.dragging=null}};function HD(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(Mh(e));if(!r)return;let a=t.state.doc.resolve(r.pos),o=n&&n.slice;o?t.someProp("transformPasted",x=>{o=x(o,t,!1)}):o=v2(t,A2(e.dataTransfer),Sc?null:e.dataTransfer.getData("text/html"),!1,a);let l=!!(n&&N2(t,e));if(t.someProp("handleDrop",x=>x(t,e,o||Pe.empty,l))){e.preventDefault();return}if(!o)return;e.preventDefault();let c=o?zw(t.state.doc,a.pos,o):a.pos;c==null&&(c=a.pos);let d=t.state.tr;if(l){let{node:x}=n;x?x.replace(d):d.deleteSelection()}let h=d.mapping.map(c),p=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,m=d.doc;if(p?d.replaceRangeWith(h,h,o.content.firstChild):d.replaceRange(h,h,o),d.doc.eq(m))return;let v=d.doc.resolve(h);if(p&&We.isSelectable(o.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new We(v));else{let x=d.mapping.map(c);d.mapping.maps[d.mapping.maps.length-1].forEach((w,T,M,O)=>x=O),d.setSelection(wy(t,v,d.doc.resolve(x)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))}mr.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ma(t)},20))};mr.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};mr.beforeinput=(t,e)=>{if(Wn&&ka&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,lo(8,"Backspace")))))return;let{$cursor:a}=t.state.selection;a&&a.pos>0&&t.dispatch(t.state.tr.delete(a.pos-1,a.pos).scrollIntoView())},50)}};for(let t in gr)mr[t]=gr[t];function Ec(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class jd{constructor(e,n){this.toDOM=e,this.spec=n||yo,this.side=this.spec.side||0}map(e,n,r,a){let{pos:o,deleted:l}=e.mapResult(n.from+a,this.side<0?-1:1);return l?null:new pr(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof jd&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ec(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Cs{constructor(e,n){this.attrs=e,this.spec=n||yo}map(e,n,r,a){let o=e.map(n.from+a,this.spec.inclusiveStart?-1:1)-r,l=e.map(n.to+a,this.spec.inclusiveEnd?1:-1)-r;return o>=l?null:new pr(o,l,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Cs&&Ec(this.attrs,e.attrs)&&Ec(this.spec,e.spec)}static is(e){return e.type instanceof Cs}destroy(){}}class My{constructor(e,n){this.attrs=e,this.spec=n||yo}map(e,n,r,a){let o=e.mapResult(n.from+a,1);if(o.deleted)return null;let l=e.mapResult(n.to+a,-1);return l.deleted||l.pos<=o.pos?null:new pr(o.pos-r,l.pos-r,this)}valid(e,n){let{index:r,offset:a}=e.content.findIndex(n.from),o;return a==n.from&&!(o=e.child(r)).isText&&a+o.nodeSize==n.to}eq(e){return this==e||e instanceof My&&Ec(this.attrs,e.attrs)&&Ec(this.spec,e.spec)}destroy(){}}class pr{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new pr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new pr(e,e,new jd(n,r))}static inline(e,n,r,a){return new pr(e,n,new Cs(r,a))}static node(e,n,r,a){return new pr(e,n,new My(r,a))}get spec(){return this.type.spec}get inline(){return this.type instanceof Cs}get widget(){return this.type instanceof jd}}const Tl=[],yo={};class tn{constructor(e,n){this.local=e.length?e:Tl,this.children=n.length?n:Tl}static create(e,n){return n.length?Ld(n,e,0,yo):ar}find(e,n,r){let a=[];return this.findInner(e??0,n??1e9,a,0,r),a}findInner(e,n,r,a,o){for(let l=0;l<this.local.length;l++){let c=this.local[l];c.from<=n&&c.to>=e&&(!o||o(c.spec))&&r.push(c.copy(c.from+a,c.to+a))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<n&&this.children[l+1]>e){let c=this.children[l]+1;this.children[l+2].findInner(e-c,n-c,r,a+c,o)}}map(e,n,r){return this==ar||e.maps.length==0?this:this.mapInner(e,n,0,0,r||yo)}mapInner(e,n,r,a,o){let l;for(let c=0;c<this.local.length;c++){let d=this.local[c].map(e,r,a);d&&d.type.valid(n,d)?(l||(l=[])).push(d):o.onRemove&&o.onRemove(this.local[c].spec)}return this.children.length?ID(this.children,l||[],e,n,r,a,o):l?new tn(l.sort(vo),Tl):ar}add(e,n){return n.length?this==ar?tn.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let a,o=0;e.forEach((c,d)=>{let h=d+r,p;if(p=R2(n,c,h)){for(a||(a=this.children.slice());o<a.length&&a[o]<d;)o+=3;a[o]==d?a[o+2]=a[o+2].addInner(c,p,h+1):a.splice(o,0,d,d+c.nodeSize,Ld(p,c,h+1,yo)),o+=3}});let l=D2(o?_2(n):n,-r);for(let c=0;c<l.length;c++)l[c].type.valid(e,l[c])||l.splice(c--,1);return new tn(l.length?this.local.concat(l).sort(vo):this.local,a||this.children)}remove(e){return e.length==0||this==ar?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,a=this.local;for(let o=0;o<r.length;o+=3){let l,c=r[o]+n,d=r[o+1]+n;for(let p=0,m;p<e.length;p++)(m=e[p])&&m.from>c&&m.to<d&&(e[p]=null,(l||(l=[])).push(m));if(!l)continue;r==this.children&&(r=this.children.slice());let h=r[o+2].removeInner(l,c+1);h!=ar?r[o+2]=h:(r.splice(o,3),o-=3)}if(a.length){for(let o=0,l;o<e.length;o++)if(l=e[o])for(let c=0;c<a.length;c++)a[c].eq(l,n)&&(a==this.local&&(a=this.local.slice()),a.splice(c--,1))}return r==this.children&&a==this.local?this:a.length||r.length?new tn(a,r):ar}forChild(e,n){if(this==ar)return this;if(n.isLeaf)return tn.empty;let r,a;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=e){this.children[c]==e&&(r=this.children[c+2]);break}let o=e+1,l=o+n.content.size;for(let c=0;c<this.local.length;c++){let d=this.local[c];if(d.from<l&&d.to>o&&d.type instanceof Cs){let h=Math.max(o,d.from)-o,p=Math.min(l,d.to)-o;h<p&&(a||(a=[])).push(d.copy(h,p))}}if(a){let c=new tn(a.sort(vo),Tl);return r?new vs([c,r]):c}return r||ar}eq(e){if(this==e)return!0;if(!(e instanceof tn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Ay(this.localsInner(e))}localsInner(e){if(this==ar)return Tl;if(e.inlineContent||!this.local.some(Cs.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Cs||n.push(this.local[r]);return n}forEachSet(e){e(this)}}tn.empty=new tn([],[]);tn.removeOverlap=Ay;const ar=tn.empty;class vs{constructor(e){this.members=e}map(e,n){const r=this.members.map(a=>a.map(e,n,yo));return vs.from(r)}forChild(e,n){if(n.isLeaf)return tn.empty;let r=[];for(let a=0;a<this.members.length;a++){let o=this.members[a].forChild(e,n);o!=ar&&(o instanceof vs?r=r.concat(o.members):r.push(o))}return vs.from(r)}eq(e){if(!(e instanceof vs)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let a=0;a<this.members.length;a++){let o=this.members[a].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let l=0;l<o.length;l++)n.push(o[l])}}return n?Ay(r?n:n.sort(vo)):Tl}static from(e){switch(e.length){case 0:return ar;case 1:return e[0];default:return new vs(e.every(n=>n instanceof tn)?e:e.reduce((n,r)=>n.concat(r instanceof tn?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function ID(t,e,n,r,a,o,l){let c=t.slice();for(let h=0,p=o;h<n.maps.length;h++){let m=0;n.maps[h].forEach((v,x,w,T)=>{let M=T-w-(x-v);for(let O=0;O<c.length;O+=3){let q=c[O+1];if(q<0||v>q+p-m)continue;let V=c[O]+p-m;x>=V?c[O+1]=v<=V?-2:-1:v>=p&&M&&(c[O]+=M,c[O+1]+=M)}m+=M}),p=n.maps[h].map(p,-1)}let d=!1;for(let h=0;h<c.length;h+=3)if(c[h+1]<0){if(c[h+1]==-2){d=!0,c[h+1]=-1;continue}let p=n.map(t[h]+o),m=p-a;if(m<0||m>=r.content.size){d=!0;continue}let v=n.map(t[h+1]+o,-1),x=v-a,{index:w,offset:T}=r.content.findIndex(m),M=r.maybeChild(w);if(M&&T==m&&T+M.nodeSize==x){let O=c[h+2].mapInner(n,M,p+1,t[h]+o+1,l);O!=ar?(c[h]=m,c[h+1]=x,c[h+2]=O):(c[h+1]=-2,d=!0)}else d=!0}if(d){let h=qD(c,t,e,n,a,o,l),p=Ld(h,r,0,l);e=p.local;for(let m=0;m<c.length;m+=3)c[m+1]<0&&(c.splice(m,3),m-=3);for(let m=0,v=0;m<p.children.length;m+=3){let x=p.children[m];for(;v<c.length&&c[v]<x;)v+=3;c.splice(v,0,p.children[m],p.children[m+1],p.children[m+2])}}return new tn(e.sort(vo),c)}function D2(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let a=t[r];n.push(new pr(a.from+e,a.to+e,a.type))}return n}function qD(t,e,n,r,a,o,l){function c(d,h){for(let p=0;p<d.local.length;p++){let m=d.local[p].map(r,a,h);m?n.push(m):l.onRemove&&l.onRemove(d.local[p].spec)}for(let p=0;p<d.children.length;p+=3)c(d.children[p+2],d.children[p]+h+1)}for(let d=0;d<t.length;d+=3)t[d+1]==-1&&c(t[d+2],e[d]+o+1);return n}function R2(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,a=null;for(let o=0,l;o<t.length;o++)(l=t[o])&&l.from>n&&l.to<r&&((a||(a=[])).push(l),t[o]=null);return a}function _2(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Ld(t,e,n,r){let a=[],o=!1;e.forEach((c,d)=>{let h=R2(t,c,d+n);if(h){o=!0;let p=Ld(h,c,n+d+1,r);p!=ar&&a.push(d,d+c.nodeSize,p)}});let l=D2(o?_2(t):t,-n).sort(vo);for(let c=0;c<l.length;c++)l[c].type.valid(e,l[c])||(r.onRemove&&r.onRemove(l[c].spec),l.splice(c--,1));return l.length||a.length?new tn(l,a):ar}function vo(t,e){return t.from-e.from||t.to-e.to}function Ay(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let a=n+1;a<e.length;a++){let o=e[a];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[a]=o.copy(o.from,r.to),vx(e,a+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),vx(e,a,r.copy(o.from,r.to)));break}}}return e}function vx(t,e,n){for(;e<t.length&&vo(n,t[e])>0;)e++;t.splice(e,0,n)}function eg(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=ar&&e.push(r)}),t.cursorWrapper&&e.push(tn.create(t.state.doc,[t.cursorWrapper.deco])),vs.from(e)}const PD={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},VD=Cr&&ks<=11;class FD{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class KD{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new FD,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let a=0;a<r.length;a++)this.queue.push(r[a]);Cr&&ks<=11&&r.some(a=>a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length)?this.flushSoon():sr&&e.composing&&r.some(a=>a.type=="childList"&&a.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),VD&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,PD)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(cx(this.view)){if(this.suppressingSelectionUpdates)return Ma(this.view);if(Cr&&ks<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&wo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=jl(o))n.add(o);for(let o=e.anchorNode;o;o=jl(o))if(n.has(o)){r=o;break}let a=r&&this.view.docView.nearestDesc(r);if(a&&a.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),a=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&cx(e)&&!this.ignoreSelectionChange(r),o=-1,l=-1,c=!1,d=[];if(e.editable)for(let p=0;p<n.length;p++){let m=this.registerMutation(n[p],d);m&&(o=o<0?m.from:Math.min(m.from,o),l=l<0?m.to:Math.max(m.to,l),m.typeOver&&(c=!0))}if(d.some(p=>p.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let p of d)if(p.nodeName=="BR"&&p.parentNode){let m=p.nextSibling;m&&m.nodeType==1&&m.contentEditable=="false"&&p.parentNode.removeChild(p)}}else if(oi&&d.length){let p=d.filter(m=>m.nodeName=="BR");if(p.length==2){let[m,v]=p;m.parentNode&&m.parentNode.parentNode==v.parentNode?v.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let v of p){let x=v.parentNode;x&&x.nodeName=="LI"&&(!m||GD(e,m)!=x)&&v.remove()}}}let h=null;o<0&&a&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Th(r)&&(h=Sy(e))&&h.eq(ut.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ma(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||a)&&(o>-1&&(e.docView.markDirty(o,l),$D(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,QD(e,d)),this.handleDOMChange(o,l,c,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Ma(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let m=e.addedNodes[p];n.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let a=e.previousSibling,o=e.nextSibling;if(Cr&&ks<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:m,nextSibling:v}=e.addedNodes[p];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(a=m),(!v||Array.prototype.indexOf.call(e.addedNodes,v)<0)&&(o=v)}let l=a&&a.parentNode==e.target?Gn(a)+1:0,c=r.localPosFromDOM(e.target,l,-1),d=o&&o.parentNode==e.target?Gn(o):e.target.childNodes.length,h=r.localPosFromDOM(e.target,d,1);return{from:c,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let bx=new WeakMap,xx=!1;function $D(t){if(!bx.has(t)&&(bx.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=oi,xx)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),xx=!0}}function Sx(t,e){let n=e.startContainer,r=e.startOffset,a=e.endContainer,o=e.endOffset,l=t.domAtPos(t.state.selection.anchor);return wo(l.node,l.offset,a,o)&&([n,r,a,o]=[a,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:a,focusOffset:o}}function YD(t,e){if(e.getComposedRanges){let a=e.getComposedRanges(t.root)[0];if(a)return Sx(t,a)}let n;function r(a){a.preventDefault(),a.stopImmediatePropagation(),n=a.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Sx(t,n):null}function GD(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function QD(t,e){var n;let{focusNode:r,focusOffset:a}=t.domSelectionRange();for(let o of e)if(((n=o.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let l=o.nextSibling;for(;l&&l.nodeName!="TD"&&l.nodeName!="TH";)l=l.nextSibling;if(l){let c=l;for(;;){let d=c.firstChild;if(!d||d.nodeType!=1||d.contentEditable=="false"||/^(BR|IMG)$/.test(d.nodeName))break;c=d}c.insertBefore(o,c.firstChild),r==o&&t.domSelection().collapse(o,a)}else o.parentNode.removeChild(o)}}function WD(t,e,n){let{node:r,fromOffset:a,toOffset:o,from:l,to:c}=t.docView.parseRange(e,n),d=t.domSelectionRange(),h,p=d.anchorNode;if(p&&t.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:d.anchorOffset}],Th(d)||h.push({node:d.focusNode,offset:d.focusOffset})),Wn&&t.input.lastKeyCode===8)for(let M=o;M>a;M--){let O=r.childNodes[M-1],q=O.pmViewDesc;if(O.nodeName=="BR"&&!q){o=M;break}if(!q||q.size)break}let m=t.state.doc,v=t.someProp("domParser")||Es.fromSchema(t.state.schema),x=m.resolve(l),w=null,T=v.parse(r,{topNode:x.parent,topMatch:x.parent.contentMatchAt(x.index()),topOpen:!0,from:a,to:o,preserveWhitespace:x.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:XD,context:x});if(h&&h[0].pos!=null){let M=h[0].pos,O=h[1]&&h[1].pos;O==null&&(O=M),w={anchor:M+l,head:O+l}}return{doc:T,sel:w,from:l,to:c}}function XD(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(sr&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||sr&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const JD=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function ZD(t,e,n,r,a){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let P=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,z=Sy(t,P);if(z&&!t.state.selection.eq(z)){if(Wn&&ka&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",G=>G(t,lo(13,"Enter"))))return;let L=t.state.tr.setSelection(z);P=="pointer"?L.setMeta("pointer",!0):P=="key"&&L.scrollIntoView(),o&&L.setMeta("composition",o),t.dispatch(L)}return}let l=t.state.doc.resolve(e),c=l.sharedDepth(n);e=l.before(c+1),n=t.state.doc.resolve(n).after(c+1);let d=t.state.selection,h=WD(t,e,n),p=t.state.doc,m=p.slice(h.from,h.to),v,x;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(v=t.state.selection.to,x="end"):(v=t.state.selection.from,x="start"),t.input.lastKeyCode=null;let w=nR(m.content,h.doc.content,h.from,v,x);if(w&&t.input.domChangeCount++,(Ll&&t.input.lastIOSEnter>Date.now()-225||ka)&&a.some(P=>P.nodeType==1&&!JD.test(P.nodeName))&&(!w||w.endA>=w.endB)&&t.someProp("handleKeyDown",P=>P(t,lo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!w)if(r&&d instanceof tt&&!d.empty&&d.$head.sameParent(d.$anchor)&&!t.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))w={start:d.from,endA:d.to,endB:d.to};else{if(h.sel){let P=wx(t,t.state.doc,h.sel);if(P&&!P.eq(t.state.selection)){let z=t.state.tr.setSelection(P);o&&z.setMeta("composition",o),t.dispatch(z)}}return}t.state.selection.from<t.state.selection.to&&w.start==w.endB&&t.state.selection instanceof tt&&(w.start>t.state.selection.from&&w.start<=t.state.selection.from+2&&t.state.selection.from>=h.from?w.start=t.state.selection.from:w.endA<t.state.selection.to&&w.endA>=t.state.selection.to-2&&t.state.selection.to<=h.to&&(w.endB+=t.state.selection.to-w.endA,w.endA=t.state.selection.to)),Cr&&ks<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>h.from&&h.doc.textBetween(w.start-h.from-1,w.start-h.from+1)==" "&&(w.start--,w.endA--,w.endB--);let T=h.doc.resolveNoCache(w.start-h.from),M=h.doc.resolveNoCache(w.endB-h.from),O=p.resolve(w.start),q=T.sameParent(M)&&T.parent.inlineContent&&O.end()>=w.endA;if((Ll&&t.input.lastIOSEnter>Date.now()-225&&(!q||a.some(P=>P.nodeName=="DIV"||P.nodeName=="P"))||!q&&T.pos<h.doc.content.size&&(!T.sameParent(M)||!T.parent.inlineContent)&&T.pos<M.pos&&!/\S/.test(h.doc.textBetween(T.pos,M.pos,"","")))&&t.someProp("handleKeyDown",P=>P(t,lo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>w.start&&tR(p,w.start,w.endA,T,M)&&t.someProp("handleKeyDown",P=>P(t,lo(8,"Backspace")))){ka&&Wn&&t.domObserver.suppressSelectionUpdates();return}Wn&&w.endB==w.start&&(t.input.lastChromeDelete=Date.now()),ka&&!q&&T.start()!=M.start()&&M.parentOffset==0&&T.depth==M.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==w.endA&&(w.endB-=2,M=h.doc.resolveNoCache(w.endB-h.from),setTimeout(()=>{t.someProp("handleKeyDown",function(P){return P(t,lo(13,"Enter"))})},20));let V=w.start,F=w.endA,$=P=>{let z=P||t.state.tr.replace(V,F,h.doc.slice(w.start-h.from,w.endB-h.from));if(h.sel){let L=wx(t,z.doc,h.sel);L&&!(Wn&&t.composing&&L.empty&&(w.start!=w.endB||t.input.lastChromeDelete<Date.now()-100)&&(L.head==V||L.head==z.mapping.map(F)-1)||Cr&&L.empty&&L.head==V)&&z.setSelection(L)}return o&&z.setMeta("composition",o),z.scrollIntoView()},U;if(q)if(T.pos==M.pos){Cr&&ks<=11&&T.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ma(t),20));let P=$(t.state.tr.delete(V,F)),z=p.resolve(w.start).marksAcross(p.resolve(w.endA));z&&P.ensureMarks(z),t.dispatch(P)}else if(w.endA==w.endB&&(U=eR(T.parent.content.cut(T.parentOffset,M.parentOffset),O.parent.content.cut(O.parentOffset,w.endA-O.start())))){let P=$(t.state.tr);U.type=="add"?P.addMark(V,F,U.mark):P.removeMark(V,F,U.mark),t.dispatch(P)}else if(T.parent.child(T.index()).isText&&T.index()==M.index()-(M.textOffset?0:1)){let P=T.parent.textBetween(T.parentOffset,M.parentOffset),z=()=>$(t.state.tr.insertText(P,V,F));t.someProp("handleTextInput",L=>L(t,V,F,P,z))||t.dispatch(z())}else t.dispatch($());else t.dispatch($())}function wx(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:wy(t,e.resolve(n.anchor),e.resolve(n.head))}function eR(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,a=n,o=r,l,c,d;for(let p=0;p<r.length;p++)a=r[p].removeFromSet(a);for(let p=0;p<n.length;p++)o=n[p].removeFromSet(o);if(a.length==1&&o.length==0)c=a[0],l="add",d=p=>p.mark(c.addToSet(p.marks));else if(a.length==0&&o.length==1)c=o[0],l="remove",d=p=>p.mark(c.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<e.childCount;p++)h.push(d(e.child(p)));if(De.from(h).eq(t))return{mark:c,type:l}}function tR(t,e,n,r,a){if(n-e<=a.pos-r.pos||tg(r,!0,!1)<a.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let c=o.nodeAfter;return c!=null&&n==e+c.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let l=t.resolve(tg(o,!0,!0));return!l.parent.isTextblock||l.pos>n||tg(l,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function tg(t,e,n){let r=t.depth,a=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,a++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,a++}return a}function nR(t,e,n,r,a){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:l,b:c}=t.findDiffEnd(e,n+t.size,n+e.size);if(a=="end"){let d=Math.max(0,o-Math.min(l,c));r-=l+d-o}if(l<o&&t.size<e.size){let d=r<=o&&r>=l?o-r:0;o-=d,o&&o<e.size&&Ex(e.textBetween(o-1,o+1))&&(o+=d?1:-1),c=o+(c-l),l=o}else if(c<o){let d=r<=o&&r>=c?o-r:0;o-=d,o&&o<t.size&&Ex(t.textBetween(o-1,o+1))&&(o+=d?1:-1),l=o+(l-c),c=o}return{start:o,endA:l,endB:c}}function Ex(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class z2{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new vD,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Ax),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Cx(this),Tx(this),this.nodeViews=Mx(this),this.docView=ix(this.state.doc,kx(this),eg(this),this.dom,this),this.domObserver=new KD(this,(r,a,o,l)=>ZD(this,r,a,o,l)),this.domObserver.start(),bD(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Bg(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Ax),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let a=this.state,o=!1,l=!1;e.storedMarks&&this.composing&&(M2(this),l=!0),this.state=e;let c=a.plugins!=e.plugins||this._props.plugins!=n.plugins;if(c||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let x=Mx(this);iR(x,this.nodeViews)&&(this.nodeViews=x,o=!0)}(c||n.handleDOMEvents!=this._props.handleDOMEvents)&&Bg(this),this.editable=Cx(this),Tx(this);let d=eg(this),h=kx(this),p=a.plugins!=e.plugins&&!a.doc.eq(e.doc)?"reset":e.scrollToSelection>a.scrollToSelection?"to selection":"preserve",m=o||!this.docView.matchesNode(e.doc,h,d);(m||!e.selection.eq(a.selection))&&(l=!0);let v=p=="preserve"&&l&&this.dom.style.overflowAnchor==null&&_3(this);if(l){this.domObserver.stop();let x=m&&(Cr||Wn)&&!this.composing&&!a.selection.empty&&!e.selection.empty&&rR(a.selection,e.selection);if(m){let w=Wn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=_D(this)),(o||!this.docView.update(e.doc,h,d,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=ix(e.doc,h,d,this.dom,this)),w&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(x=!0)}x||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&rD(this))?Ma(this,x):(m2(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(a),!((r=this.dragging)===null||r===void 0)&&r.node&&!a.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,a),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():v&&z3(v)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof We){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Jb(this,n.getBoundingClientRect(),e)}else Jb(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,a=-1;if(this.state.doc.nodeAt(r.from)==r.node)a=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(a=o)}this.dragging=new O2(e.slice,e.move,a<0?void 0:We.create(this.state.doc,a))}someProp(e,n){let r=this._props&&this._props[e],a;if(r!=null&&(a=n?n(r):r))return a;for(let l=0;l<this.directPlugins.length;l++){let c=this.directPlugins[l].props[e];if(c!=null&&(a=n?n(c):c))return a}let o=this.state.plugins;if(o)for(let l=0;l<o.length;l++){let c=o[l].props[e];if(c!=null&&(a=n?n(c):c))return a}}hasFocus(){if(Cr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&j3(this.dom),Ma(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return I3(this,e)}coordsAtPos(e,n=1){return o2(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let a=this.docView.posFromDOM(e,n,r);if(a==null)throw new RangeError("DOM position not inside the editor");return a}endOfTextblock(e,n){return K3(this,n||this.state,e)}pasteHTML(e,n){return wc(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return wc(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Ey(this,e)}destroy(){this.docView&&(xD(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],eg(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,E3())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return wD(this,e)}domSelectionRange(){let e=this.domSelection();return e?sr&&this.root.nodeType===11&&A3(this.dom.ownerDocument)==this.dom&&YD(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}z2.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function kx(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[pr.node(0,t.state.doc.content.size,e)]}function Tx(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:pr.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Cx(t){return!t.someProp("editable",e=>e(t.state)===!1)}function rR(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Mx(t){let e=Object.create(null);function n(r){for(let a in r)Object.prototype.hasOwnProperty.call(e,a)||(e[a]=r[a])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function iR(t,e){let n=0,r=0;for(let a in t){if(t[a]!=e[a])return!0;n++}for(let a in e)r++;return n!=r}function Ax(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ms={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Bd={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},aR=typeof navigator<"u"&&/Mac/.test(navigator.platform),sR=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Qn=0;Qn<10;Qn++)Ms[48+Qn]=Ms[96+Qn]=String(Qn);for(var Qn=1;Qn<=24;Qn++)Ms[Qn+111]="F"+Qn;for(var Qn=65;Qn<=90;Qn++)Ms[Qn]=String.fromCharCode(Qn+32),Bd[Qn]=String.fromCharCode(Qn);for(var ng in Ms)Bd.hasOwnProperty(ng)||(Bd[ng]=Ms[ng]);function oR(t){var e=aR&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||sR&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Bd:Ms)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const lR=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),uR=typeof navigator<"u"&&/Win/.test(navigator.platform);function cR(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,a,o,l;for(let c=0;c<e.length-1;c++){let d=e[c];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))a=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))lR?l=!0:a=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(n="Alt-"+n),a&&(n="Ctrl-"+n),l&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function fR(t){let e=Object.create(null);for(let n in t)e[cR(n)]=t[n];return e}function rg(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function dR(t){return new nn({props:{handleKeyDown:j2(t)}})}function j2(t){let e=fR(t);return function(n,r){let a=oR(r),o,l=e[rg(a,r)];if(l&&l(n.state,n.dispatch,n))return!0;if(a.length==1&&a!=" "){if(r.shiftKey){let c=e[rg(a,r,!1)];if(c&&c(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(uR&&r.ctrlKey&&r.altKey)&&(o=Ms[r.keyCode])&&o!=a){let c=e[rg(o,r)];if(c&&c(n.state,n.dispatch,n))return!0}}return!1}}var hR=Object.defineProperty,Oy=(t,e)=>{for(var n in e)hR(t,n,{get:e[n],enumerable:!0})};function Ah(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:a}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return a},get tr(){return r=n.selection,a=n.doc,o=n.storedMarks,n}}}var Oh=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:a}=n,o=this.buildProps(a);return Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...h)=>{const p=c(...h)(o);return!a.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(a),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:a}=this,{view:o}=r,l=[],c=!!t,d=t||a.tr,h=()=>(!c&&e&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(d),l.every(m=>m===!0)),p={...Object.fromEntries(Object.entries(n).map(([m,v])=>[m,(...w)=>{const T=this.buildProps(d,e),M=v(...w)(T);return l.push(M),p}])),run:h};return p}createCan(t){const{rawCommands:e,state:n}=this,r=!1,a=t||n.tr,o=this.buildProps(a,r);return{...Object.fromEntries(Object.entries(e).map(([c,d])=>[c,(...h)=>d(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(a,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:a}=this,{view:o}=r,l={tr:t,editor:r,view:o,state:Ah({state:a,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([c,d])=>[c,(...h)=>d(...h)(l)]))}};return l}},L2={};Oy(L2,{blur:()=>pR,clearContent:()=>mR,clearNodes:()=>gR,command:()=>yR,createParagraphNear:()=>vR,cut:()=>bR,deleteCurrentNode:()=>xR,deleteNode:()=>SR,deleteRange:()=>wR,deleteSelection:()=>ER,enter:()=>kR,exitCode:()=>TR,extendMarkRange:()=>CR,first:()=>MR,focus:()=>OR,forEach:()=>NR,insertContent:()=>DR,insertContentAt:()=>zR,joinBackward:()=>BR,joinDown:()=>LR,joinForward:()=>UR,joinItemBackward:()=>HR,joinItemForward:()=>IR,joinTextblockBackward:()=>qR,joinTextblockForward:()=>PR,joinUp:()=>jR,keyboardShortcut:()=>FR,lift:()=>KR,liftEmptyBlock:()=>$R,liftListItem:()=>YR,newlineInCode:()=>GR,resetAttributes:()=>QR,scrollIntoView:()=>WR,selectAll:()=>XR,selectNodeBackward:()=>JR,selectNodeForward:()=>ZR,selectParentNode:()=>e4,selectTextblockEnd:()=>t4,selectTextblockStart:()=>n4,setContent:()=>r4,setMark:()=>E4,setMeta:()=>k4,setNode:()=>T4,setNodeSelection:()=>C4,setTextDirection:()=>M4,setTextSelection:()=>A4,sinkListItem:()=>O4,splitBlock:()=>N4,splitListItem:()=>D4,toggleList:()=>R4,toggleMark:()=>_4,toggleNode:()=>z4,toggleWrap:()=>j4,undoInputRule:()=>L4,unsetAllMarks:()=>B4,unsetMark:()=>U4,unsetTextDirection:()=>H4,updateAttributes:()=>I4,wrapIn:()=>q4,wrapInList:()=>P4});var pR=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),mR=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),gR=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:a}=r;return n&&a.forEach(({$from:o,$to:l})=>{t.doc.nodesBetween(o.pos,l.pos,(c,d)=>{if(c.type.isText)return;const{doc:h,mapping:p}=e,m=h.resolve(p.map(d)),v=h.resolve(p.map(d+c.nodeSize)),x=m.blockRange(v);if(!x)return;const w=Vl(x);if(c.type.isTextblock){const{defaultType:T}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(x.start,T)}(w||w===0)&&e.lift(x,w)})}),!0},yR=t=>e=>t(e),vR=()=>({state:t,dispatch:e})=>Ww(t,e),bR=(t,e)=>({editor:n,tr:r})=>{const{state:a}=n,o=a.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const l=r.mapping.map(e);return r.insert(l,o.content),r.setSelection(new tt(r.doc.resolve(Math.max(l-1,0)))),!0},xR=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const a=t.selection.$anchor;for(let o=a.depth;o>0;o-=1)if(a.node(o).type===r.type){if(e){const c=a.before(o),d=a.after(o);t.delete(c,d).scrollIntoView()}return!0}return!1};function An(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var SR=t=>({tr:e,state:n,dispatch:r})=>{const a=An(t,n.schema),o=e.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===a){if(r){const d=o.before(l),h=o.after(l);e.delete(d,h).scrollIntoView()}return!0}return!1},wR=t=>({tr:e,dispatch:n})=>{const{from:r,to:a}=t;return n&&e.delete(r,a),!0},ER=()=>({state:t,dispatch:e})=>my(t,e),kR=()=>({commands:t})=>t.keyboardShortcut("Enter"),TR=()=>({state:t,dispatch:e})=>l3(t,e);function Ny(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Ud(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(a=>n.strict?e[a]===t[a]:Ny(e[a])?e[a].test(t[a]):e[a]===t[a]):!0}function B2(t,e,n={}){return t.find(r=>r.type===e&&Ud(Object.fromEntries(Object.keys(n).map(a=>[a,r.attrs[a]])),n))}function Ox(t,e,n={}){return!!B2(t,e,n)}function Dy(t,e,n){var r;if(!t||!e)return;let a=t.parent.childAfter(t.parentOffset);if((!a.node||!a.node.marks.some(p=>p.type===e))&&(a=t.parent.childBefore(t.parentOffset)),!a.node||!a.node.marks.some(p=>p.type===e)||(n=n||((r=a.node.marks[0])==null?void 0:r.attrs),!B2([...a.node.marks],e,n)))return;let l=a.index,c=t.start()+a.offset,d=l+1,h=c+a.node.nodeSize;for(;l>0&&Ox([...t.parent.child(l-1).marks],e,n);)l-=1,c-=t.parent.child(l).nodeSize;for(;d<t.parent.childCount&&Ox([...t.parent.child(d).marks],e,n);)h+=t.parent.child(d).nodeSize,d+=1;return{from:c,to:h}}function Oa(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var CR=(t,e={})=>({tr:n,state:r,dispatch:a})=>{const o=Oa(t,r.schema),{doc:l,selection:c}=n,{$from:d,from:h,to:p}=c;if(a){const m=Dy(d,o,e);if(m&&m.from<=h&&m.to>=p){const v=tt.create(l,m.from,m.to);n.setSelection(v)}}return!0},MR=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function U2(t){return t instanceof tt}function ho(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function H2(t,e=null){if(!e)return null;const n=ut.atStart(t),r=ut.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const a=n.from,o=r.to;return e==="all"?tt.create(t,ho(0,a,o),ho(t.content.size,a,o)):tt.create(t,ho(e,a,o),ho(e,a,o))}function Nx(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Hd(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function AR(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var OR=(t=null,e={})=>({editor:n,view:r,tr:a,dispatch:o})=>{e={scrollIntoView:!0,...e};const l=()=>{(Hd()||Nx())&&r.dom.focus(),AR()&&!Hd()&&!Nx()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};try{if(r.hasFocus()&&t===null||t===!1)return!0}catch{return!1}if(o&&t===null&&!U2(n.state.selection))return l(),!0;const c=H2(a.doc,t)||n.state.selection,d=n.state.selection.eq(c);return o&&(d||a.setSelection(c),d&&a.storedMarks&&a.setStoredMarks(a.storedMarks),l()),!0},NR=(t,e)=>n=>t.every((r,a)=>e(r,{...n,index:a})),DR=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),I2=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&I2(r)}return t};function ed(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return I2(n)}function kc(t,e,n){if(t instanceof yi||t instanceof De)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,a=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return De.fromArray(t.map(c=>e.nodeFromJSON(c)));const l=e.nodeFromJSON(t);return n.errorOnInvalidContent&&l.check(),l}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),kc("",e,n)}if(a){if(n.errorOnInvalidContent){let l=!1,c="";const d=new Ew({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(l=!0,c=typeof h=="string"?h:h.outerHTML,null)}]}})});if(n.slice?Es.fromSchema(d).parseSlice(ed(t),n.parseOptions):Es.fromSchema(d).parse(ed(t),n.parseOptions),n.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const o=Es.fromSchema(e);return n.slice?o.parseSlice(ed(t),n.parseOptions).content:o.parse(ed(t),n.parseOptions)}return kc("",e,n)}function RR(t,e,n){const r=t.steps.length-1;if(r<e)return;const a=t.steps[r];if(!(a instanceof Un||a instanceof Hn))return;const o=t.mapping.maps[r];let l=0;o.forEach((c,d,h,p)=>{l===0&&(l=p)}),t.setSelection(ut.near(t.doc.resolve(l),n))}var _R=t=>!("type"in t),zR=(t,e,n)=>({tr:r,dispatch:a,editor:o})=>{var l;if(a){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let c;const d=M=>{o.emit("contentError",{editor:o,error:M,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{kc(e,o.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(M){d(M)}try{c=kc(e,o.schema,{parseOptions:h,errorOnInvalidContent:(l=n.errorOnInvalidContent)!=null?l:o.options.enableContentCheck})}catch(M){return d(M),!1}let{from:p,to:m}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},v=!0,x=!0;if((_R(c)?c:[c]).forEach(M=>{M.check(),v=v?M.isText&&M.marks.length===0:!1,x=x?M.isBlock:!1}),p===m&&x){const{parent:M}=r.doc.resolve(p);M.isTextblock&&!M.type.spec.code&&!M.childCount&&(p-=1,m+=1)}let T;if(v){if(Array.isArray(e))T=e.map(M=>M.text||"").join("");else if(e instanceof De){let M="";e.forEach(O=>{O.text&&(M+=O.text)}),T=M}else typeof e=="object"&&e&&e.text?T=e.text:T=e;r.insertText(T,p,m)}else{T=c;const M=r.doc.resolve(p),O=M.node(),q=M.parentOffset===0,V=O.isText||O.isTextblock,F=O.content.size>0;q&&V&&F&&(p=Math.max(0,p-1)),r.replaceWith(p,m,T)}n.updateSelection&&RR(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:T}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:T})}return!0},jR=()=>({state:t,dispatch:e})=>a3(t,e),LR=()=>({state:t,dispatch:e})=>s3(t,e),BR=()=>({state:t,dispatch:e})=>Vw(t,e),UR=()=>({state:t,dispatch:e})=>Yw(t,e),HR=()=>({state:t,dispatch:e,tr:n})=>{try{const r=wh(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},IR=()=>({state:t,dispatch:e,tr:n})=>{try{const r=wh(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},qR=()=>({state:t,dispatch:e})=>r3(t,e),PR=()=>({state:t,dispatch:e})=>i3(t,e);function q2(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function VR(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,a,o,l;for(let c=0;c<e.length-1;c+=1){const d=e[c];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))a=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))Hd()||q2()?l=!0:a=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(n=`Alt-${n}`),a&&(n=`Ctrl-${n}`),l&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var FR=t=>({editor:e,view:n,tr:r,dispatch:a})=>{const o=VR(t).split(/-(?!$)/),l=o.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),c=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{n.someProp("handleKeyDown",h=>h(n,c))});return d?.steps.forEach(h=>{const p=h.map(r.mapping);p&&a&&r.maybeStep(p)}),!0};function As(t,e,n={}){const{from:r,to:a,empty:o}=t.selection,l=e?An(e,t.schema):null,c=[];t.doc.nodesBetween(r,a,(m,v)=>{if(m.isText)return;const x=Math.max(r,v),w=Math.min(a,v+m.nodeSize);c.push({node:m,from:x,to:w})});const d=a-r,h=c.filter(m=>l?l.name===m.node.type.name:!0).filter(m=>Ud(m.node.attrs,n,{strict:!1}));return o?!!h.length:h.reduce((m,v)=>m+v.to-v.from,0)>=d}var KR=(t,e={})=>({state:n,dispatch:r})=>{const a=An(t,n.schema);return As(n,a,e)?o3(n,r):!1},$R=()=>({state:t,dispatch:e})=>Xw(t,e),YR=t=>({state:e,dispatch:n})=>{const r=An(t,e.schema);return b3(r)(e,n)},GR=()=>({state:t,dispatch:e})=>Qw(t,e);function Nh(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Dx(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,a)=>(n.includes(a)||(r[a]=t[a]),r),{})}var QR=(t,e)=>({tr:n,state:r,dispatch:a})=>{let o=null,l=null;const c=Nh(typeof t=="string"?t:t.name,r.schema);if(!c)return!1;c==="node"&&(o=An(t,r.schema)),c==="mark"&&(l=Oa(t,r.schema));let d=!1;return n.selection.ranges.forEach(h=>{r.doc.nodesBetween(h.$from.pos,h.$to.pos,(p,m)=>{o&&o===p.type&&(d=!0,a&&n.setNodeMarkup(m,void 0,Dx(p.attrs,e))),l&&p.marks.length&&p.marks.forEach(v=>{l===v.type&&(d=!0,a&&n.addMark(m,m+p.nodeSize,l.create(Dx(v.attrs,e))))})})}),d},WR=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),XR=()=>({tr:t,dispatch:e})=>{if(e){const n=new qr(t.doc);t.setSelection(n)}return!0},JR=()=>({state:t,dispatch:e})=>Kw(t,e),ZR=()=>({state:t,dispatch:e})=>Gw(t,e),e4=()=>({state:t,dispatch:e})=>f3(t,e),t4=()=>({state:t,dispatch:e})=>p3(t,e),n4=()=>({state:t,dispatch:e})=>h3(t,e);function Ug(t,e,n={},r={}){return kc(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var r4=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:a,tr:o,dispatch:l,commands:c})=>{const{doc:d}=o;if(r.preserveWhitespace!=="full"){const h=Ug(t,a.schema,r,{errorOnInvalidContent:e??a.options.enableContentCheck});return l&&o.replaceWith(0,d.content.size,h).setMeta("preventUpdate",!n),!0}return l&&o.setMeta("preventUpdate",!n),c.insertContentAt({from:0,to:d.content.size},t,{parseOptions:r,errorOnInvalidContent:e??a.options.enableContentCheck})};function P2(t,e){const n=Oa(e,t.schema),{from:r,to:a,empty:o}=t.selection,l=[];o?(t.storedMarks&&l.push(...t.storedMarks),l.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,a,d=>{l.push(...d.marks)});const c=l.find(d=>d.type.name===n.name);return c?{...c.attrs}:{}}function V2(t,e){const n=new Hw(t);return e.forEach(r=>{r.steps.forEach(a=>{n.step(a)})}),n}function i4(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function a4(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(a,o)=>{n(a)&&r.push({node:a,pos:o})}),r}function s4(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Dh(t){return e=>s4(e.$from,t)}function Ye(t,e,n){return t.config[e]===void 0&&t.parent?Ye(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Ye(t.parent,e,n):null}):t.config[e]}function Ry(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Ye(e,"addExtensions",n);return r?[e,...Ry(r())]:e}).flat(10)}function _y(t,e){const n=Co.fromSchema(e).serializeFragment(t),a=document.implementation.createHTMLDocument().createElement("div");return a.appendChild(n),a.innerHTML}function F2(t){return typeof t=="function"}function At(t,e=void 0,...n){return F2(t)?e?t.bind(e)(...n):t(...n):t}function o4(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Bl(t){const e=t.filter(a=>a.type==="extension"),n=t.filter(a=>a.type==="node"),r=t.filter(a=>a.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function K2(t){const e=[],{nodeExtensions:n,markExtensions:r}=Bl(t),a=[...n,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(l=>{const c={name:l.name,options:l.options,storage:l.storage,extensions:a},d=Ye(l,"addGlobalAttributes",c);if(!d)return;d().forEach(p=>{p.types.forEach(m=>{Object.entries(p.attributes).forEach(([v,x])=>{e.push({type:m,name:v,attribute:{...o,...x}})})})})}),a.forEach(l=>{const c={name:l.name,options:l.options,storage:l.storage},d=Ye(l,"addAttributes",c);if(!d)return;const h=d();Object.entries(h).forEach(([p,m])=>{const v={...o,...m};typeof v?.default=="function"&&(v.default=v.default()),v?.isRequired&&v?.default===void 0&&delete v.default,e.push({type:l.name,name:p,attribute:v})})}),e}function yn(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([a,o])=>{if(!r[a]){r[a]=o;return}if(a==="class"){const c=o?String(o).split(" "):[],d=r[a]?r[a].split(" "):[],h=c.filter(p=>!d.includes(p));r[a]=[...d,...h].join(" ")}else if(a==="style"){const c=o?o.split(";").map(p=>p.trim()).filter(Boolean):[],d=r[a]?r[a].split(";").map(p=>p.trim()).filter(Boolean):[],h=new Map;d.forEach(p=>{const[m,v]=p.split(":").map(x=>x.trim());h.set(m,v)}),c.forEach(p=>{const[m,v]=p.split(":").map(x=>x.trim());h.set(m,v)}),r[a]=Array.from(h.entries()).map(([p,m])=>`${p}: ${m}`).join("; ")}else r[a]=o}),r},{})}function Tc(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>yn(n,r),{})}function l4(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Rx(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const a=e.reduce((o,l)=>{const c=l.attribute.parseHTML?l.attribute.parseHTML(n):l4(n.getAttribute(l.name));return c==null?o:{...o,[l.name]:c}},{});return{...r,...a}}}}function _x(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&o4(n)?!1:n!=null))}function zx(t){var e,n;const r={};return!((e=t?.attribute)!=null&&e.isRequired)&&"default"in(t?.attribute||{})&&(r.default=t.attribute.default),((n=t?.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function u4(t,e){var n;const r=K2(t),{nodeExtensions:a,markExtensions:o}=Bl(t),l=(n=a.find(h=>Ye(h,"topNode")))==null?void 0:n.name,c=Object.fromEntries(a.map(h=>{const p=r.filter(O=>O.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},v=t.reduce((O,q)=>{const V=Ye(q,"extendNodeSchema",m);return{...O,...V?V(h):{}}},{}),x=_x({...v,content:At(Ye(h,"content",m)),marks:At(Ye(h,"marks",m)),group:At(Ye(h,"group",m)),inline:At(Ye(h,"inline",m)),atom:At(Ye(h,"atom",m)),selectable:At(Ye(h,"selectable",m)),draggable:At(Ye(h,"draggable",m)),code:At(Ye(h,"code",m)),whitespace:At(Ye(h,"whitespace",m)),linebreakReplacement:At(Ye(h,"linebreakReplacement",m)),defining:At(Ye(h,"defining",m)),isolating:At(Ye(h,"isolating",m)),attrs:Object.fromEntries(p.map(zx))}),w=At(Ye(h,"parseHTML",m));w&&(x.parseDOM=w.map(O=>Rx(O,p)));const T=Ye(h,"renderHTML",m);T&&(x.toDOM=O=>T({node:O,HTMLAttributes:Tc(O,p)}));const M=Ye(h,"renderText",m);return M&&(x.toText=M),[h.name,x]})),d=Object.fromEntries(o.map(h=>{const p=r.filter(M=>M.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},v=t.reduce((M,O)=>{const q=Ye(O,"extendMarkSchema",m);return{...M,...q?q(h):{}}},{}),x=_x({...v,inclusive:At(Ye(h,"inclusive",m)),excludes:At(Ye(h,"excludes",m)),group:At(Ye(h,"group",m)),spanning:At(Ye(h,"spanning",m)),code:At(Ye(h,"code",m)),attrs:Object.fromEntries(p.map(zx))}),w=At(Ye(h,"parseHTML",m));w&&(x.parseDOM=w.map(M=>Rx(M,p)));const T=Ye(h,"renderHTML",m);return T&&(x.toDOM=M=>T({mark:M,HTMLAttributes:Tc(M,p)})),[h.name,x]}));return new Ew({topNode:l,nodes:c,marks:d})}function c4(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function Id(t){return t.sort((n,r)=>{const a=Ye(n,"priority")||100,o=Ye(r,"priority")||100;return a>o?-1:a<o?1:0})}function $2(t){const e=Id(Ry(t)),n=c4(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function Y2(t,e,n){const{from:r,to:a}=e,{blockSeparator:o=`

`,textSerializers:l={}}=n||{};let c="";return t.nodesBetween(r,a,(d,h,p,m)=>{var v;d.isBlock&&h>r&&(c+=o);const x=l?.[d.type.name];if(x)return p&&(c+=x({node:d,pos:h,parent:p,index:m,range:e})),!1;d.isText&&(c+=(v=d?.text)==null?void 0:v.slice(Math.max(r,h)-h,a-h))}),c}function f4(t,e){const n={from:0,to:t.content.size};return Y2(t,n,e)}function G2(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function d4(t,e){const n=An(e,t.schema),{from:r,to:a}=t.selection,o=[];t.doc.nodesBetween(r,a,c=>{o.push(c)});const l=o.reverse().find(c=>c.type.name===n.name);return l?{...l.attrs}:{}}function Q2(t,e){const n=Nh(typeof e=="string"?e:e.name,t.schema);return n==="node"?d4(t,e):n==="mark"?P2(t,e):{}}function h4(t,e=JSON.stringify){const n={};return t.filter(r=>{const a=e(r);return Object.prototype.hasOwnProperty.call(n,a)?!1:n[a]=!0})}function p4(t){const e=h4(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,l)=>l!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function W2(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((a,o)=>{const l=[];if(a.ranges.length)a.forEach((c,d)=>{l.push({from:c,to:d})});else{const{from:c,to:d}=n[o];if(c===void 0||d===void 0)return;l.push({from:c,to:d})}l.forEach(({from:c,to:d})=>{const h=e.slice(o).map(c,-1),p=e.slice(o).map(d),m=e.invert().map(h,-1),v=e.invert().map(p);r.push({oldRange:{from:m,to:v},newRange:{from:h,to:p}})})}),p4(r)}function zy(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(a=>{const o=n.resolve(t),l=Dy(o,a.type);l&&r.push({mark:a,...l})}):n.nodesBetween(t,e,(a,o)=>{!a||a?.nodeSize===void 0||r.push(...a.marks.map(l=>({from:o,to:o+a.nodeSize,mark:l})))}),r}var m4=(t,e,n,r=20)=>{const a=t.doc.resolve(n);let o=r,l=null;for(;o>0&&l===null;){const c=a.node(o);c?.type.name===e?l=c:o-=1}return[l,o]};function td(t,e){return e.nodes[t]||e.marks[t]||null}function gd(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const a=t.find(o=>o.type===e&&o.name===r);return a?a.attribute.keepOnSplit:!1}))}var g4=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(a,o,l,c)=>{var d,h;const p=((h=(d=a.type.spec).toText)==null?void 0:h.call(d,{node:a,pos:o,parent:l,index:c}))||a.textContent||"%leaf%";n+=a.isAtom&&!a.isText?p:p.slice(0,Math.max(0,r-o))}),n};function Hg(t,e,n={}){const{empty:r,ranges:a}=t.selection,o=e?Oa(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(m=>o?o.name===m.type.name:!0).find(m=>Ud(m.attrs,n,{strict:!1}));let l=0;const c=[];if(a.forEach(({$from:m,$to:v})=>{const x=m.pos,w=v.pos;t.doc.nodesBetween(x,w,(T,M)=>{if(!T.isText&&!T.marks.length)return;const O=Math.max(x,M),q=Math.min(w,M+T.nodeSize),V=q-O;l+=V,c.push(...T.marks.map(F=>({mark:F,from:O,to:q})))})}),l===0)return!1;const d=c.filter(m=>o?o.name===m.mark.type.name:!0).filter(m=>Ud(m.mark.attrs,n,{strict:!1})).reduce((m,v)=>m+v.to-v.from,0),h=c.filter(m=>o?m.mark.type!==o&&m.mark.type.excludes(o):!0).reduce((m,v)=>m+v.to-v.from,0);return(d>0?d+h:d)>=l}function y4(t,e,n={}){if(!e)return As(t,null,n)||Hg(t,null,n);const r=Nh(e,t.schema);return r==="node"?As(t,e,n):r==="mark"?Hg(t,e,n):!1}var v4=(t,e)=>{const{$from:n,$to:r,$anchor:a}=t.selection;if(e){const o=Dh(c=>c.type.name===e)(t.selection);if(!o)return!1;const l=t.doc.resolve(o.pos+1);return a.pos+1===l.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},b4=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function jx(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Lx(t,e){const{nodeExtensions:n}=Bl(e),r=n.find(l=>l.name===t);if(!r)return!1;const a={name:r.name,options:r.options,storage:r.storage},o=At(Ye(r,"group",a));return typeof o!="string"?!1:o.split(" ").includes("list")}function Rh(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let a=!0;return t.content.forEach(o=>{a!==!1&&(Rh(o,{ignoreWhitespace:n,checkChildren:e})||(a=!1))}),a}return!1}function X2(t){return t instanceof We}var J2=class Z2{constructor(e){this.position=e}static fromJSON(e){return new Z2(e.position)}toJSON(){return{position:this.position}}};function x4(t,e){const n=e.mapping.mapResult(t.position);return{position:new J2(n.pos),mapResult:n}}function S4(t){return new J2(t)}function w4(t,e,n){var r;const{selection:a}=e;let o=null;if(U2(a)&&(o=a.$cursor),o){const c=(r=t.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(c)||!c.some(h=>h.type.excludes(n)))}const{ranges:l}=a;return l.some(({$from:c,$to:d})=>{let h=c.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(c.pos,d.pos,(p,m,v)=>{if(h)return!1;if(p.isInline){const x=!v||v.type.allowsMarkType(n),w=!!n.isInSet(p.marks)||!p.marks.some(T=>T.type.excludes(n));h=x&&w}return!h}),h})}var E4=(t,e={})=>({tr:n,state:r,dispatch:a})=>{const{selection:o}=n,{empty:l,ranges:c}=o,d=Oa(t,r.schema);if(a)if(l){const h=P2(r,d);n.addStoredMark(d.create({...h,...e}))}else c.forEach(h=>{const p=h.$from.pos,m=h.$to.pos;r.doc.nodesBetween(p,m,(v,x)=>{const w=Math.max(x,p),T=Math.min(x+v.nodeSize,m);v.marks.find(O=>O.type===d)?v.marks.forEach(O=>{d===O.type&&n.addMark(w,T,d.create({...O.attrs,...e}))}):n.addMark(w,T,d.create(e))})});return w4(r,n,d)},k4=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),T4=(t,e={})=>({state:n,dispatch:r,chain:a})=>{const o=An(t,n.schema);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),o.isTextblock?a().command(({commands:c})=>Qb(o,{...l,...e})(n)?!0:c.clearNodes()).command(({state:c})=>Qb(o,{...l,...e})(c,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},C4=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,a=ho(t,0,r.content.size),o=We.create(r,a);e.setSelection(o)}return!0},M4=(t,e)=>({tr:n,state:r,dispatch:a})=>{const{selection:o}=r;let l,c;return typeof e=="number"?(l=e,c=e):e&&"from"in e&&"to"in e?(l=e.from,c=e.to):(l=o.from,c=o.to),a&&n.doc.nodesBetween(l,c,(d,h)=>{d.isText||n.setNodeMarkup(h,void 0,{...d.attrs,dir:t})}),!0},A4=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:a,to:o}=typeof t=="number"?{from:t,to:t}:t,l=tt.atStart(r).from,c=tt.atEnd(r).to,d=ho(a,l,c),h=ho(o,l,c),p=tt.create(r,d,h);e.setSelection(p)}return!0},O4=t=>({state:e,dispatch:n})=>{const r=An(t,e.schema);return w3(r)(e,n)};function Bx(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(a=>e?.includes(a.type.name));t.tr.ensureMarks(r)}}var N4=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:a})=>{const{selection:o,doc:l}=e,{$from:c,$to:d}=o,h=a.extensionManager.attributes,p=gd(h,c.node().type.name,c.node().attrs);if(o instanceof We&&o.node.isBlock)return!c.parentOffset||!Ca(l,c.pos)?!1:(r&&(t&&Bx(n,a.extensionManager.splittableMarks),e.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const m=d.parentOffset===d.parent.content.size,v=c.depth===0?void 0:i4(c.node(-1).contentMatchAt(c.indexAfter(-1)));let x=m&&v?[{type:v,attrs:p}]:void 0,w=Ca(e.doc,e.mapping.map(c.pos),1,x);if(!x&&!w&&Ca(e.doc,e.mapping.map(c.pos),1,v?[{type:v}]:void 0)&&(w=!0,x=v?[{type:v,attrs:p}]:void 0),r){if(w&&(o instanceof tt&&e.deleteSelection(),e.split(e.mapping.map(c.pos),1,x),v&&!m&&!c.parentOffset&&c.parent.type!==v)){const T=e.mapping.map(c.before()),M=e.doc.resolve(T);c.node(-1).canReplaceWith(M.index(),M.index()+1,v)&&e.setNodeMarkup(e.mapping.map(c.before()),v)}t&&Bx(n,a.extensionManager.splittableMarks),e.scrollIntoView()}return w},D4=(t,e={})=>({tr:n,state:r,dispatch:a,editor:o})=>{var l;const c=An(t,r.schema),{$from:d,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||d.depth<2||!d.sameParent(h))return!1;const m=d.node(-1);if(m.type!==c)return!1;const v=o.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==c||d.index(-2)!==d.node(-2).childCount-1)return!1;if(a){let O=De.empty;const q=d.index(-1)?1:d.index(-2)?2:3;for(let z=d.depth-q;z>=d.depth-3;z-=1)O=De.from(d.node(z).copy(O));const V=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,F={...gd(v,d.node().type.name,d.node().attrs),...e},$=((l=c.contentMatch.defaultType)==null?void 0:l.createAndFill(F))||void 0;O=O.append(De.from(c.createAndFill(null,$)||void 0));const U=d.before(d.depth-(q-1));n.replace(U,d.after(-V),new Pe(O,4-q,0));let P=-1;n.doc.nodesBetween(U,n.doc.content.size,(z,L)=>{if(P>-1)return!1;z.isTextblock&&z.content.size===0&&(P=L+1)}),P>-1&&n.setSelection(tt.near(n.doc.resolve(P))),n.scrollIntoView()}return!0}const x=h.pos===d.end()?m.contentMatchAt(0).defaultType:null,w={...gd(v,m.type.name,m.attrs),...e},T={...gd(v,d.node().type.name,d.node().attrs),...e};n.delete(d.pos,h.pos);const M=x?[{type:c,attrs:w},{type:x,attrs:T}]:[{type:c,attrs:w}];if(!Ca(n.doc,d.pos,2))return!1;if(a){const{selection:O,storedMarks:q}=r,{splittableMarks:V}=o.extensionManager,F=q||O.$to.parentOffset&&O.$from.marks();if(n.split(d.pos,2,M).scrollIntoView(),!F||!a)return!0;const $=F.filter(U=>V.includes(U.type.name));n.ensureMarks($)}return!0},ig=(t,e)=>{const n=Dh(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const a=t.doc.nodeAt(r);return n.node.type===a?.type&&Os(t.doc,n.pos)&&t.join(n.pos),!0},ag=(t,e)=>{const n=Dh(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const a=t.doc.nodeAt(r);return n.node.type===a?.type&&Os(t.doc,r)&&t.join(r),!0},R4=(t,e,n,r={})=>({editor:a,tr:o,state:l,dispatch:c,chain:d,commands:h,can:p})=>{const{extensions:m,splittableMarks:v}=a.extensionManager,x=An(t,l.schema),w=An(e,l.schema),{selection:T,storedMarks:M}=l,{$from:O,$to:q}=T,V=O.blockRange(q),F=M||T.$to.parentOffset&&T.$from.marks();if(!V)return!1;const $=Dh(U=>Lx(U.type.name,m))(T);if(V.depth>=1&&$&&V.depth-$.depth<=1){if($.node.type===x)return h.liftListItem(w);if(Lx($.node.type.name,m)&&x.validContent($.node.content)&&c)return d().command(()=>(o.setNodeMarkup($.pos,x),!0)).command(()=>ig(o,x)).command(()=>ag(o,x)).run()}return!n||!F||!c?d().command(()=>p().wrapInList(x,r)?!0:h.clearNodes()).wrapInList(x,r).command(()=>ig(o,x)).command(()=>ag(o,x)).run():d().command(()=>{const U=p().wrapInList(x,r),P=F.filter(z=>v.includes(z.type.name));return o.ensureMarks(P),U?!0:h.clearNodes()}).wrapInList(x,r).command(()=>ig(o,x)).command(()=>ag(o,x)).run()},_4=(t,e={},n={})=>({state:r,commands:a})=>{const{extendEmptyMarkRange:o=!1}=n,l=Oa(t,r.schema);return Hg(r,l,e)?a.unsetMark(l,{extendEmptyMarkRange:o}):a.setMark(l,e)},z4=(t,e,n={})=>({state:r,commands:a})=>{const o=An(t,r.schema),l=An(e,r.schema),c=As(r,o,n);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),c?a.setNode(l,d):a.setNode(o,{...d,...n})},j4=(t,e={})=>({state:n,commands:r})=>{const a=An(t,n.schema);return As(n,a,e)?r.lift(a):r.wrapIn(a,e)},L4=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const a=n[r];let o;if(a.spec.isInputRules&&(o=a.getState(t))){if(e){const l=t.tr,c=o.transform;for(let d=c.steps.length-1;d>=0;d-=1)l.step(c.steps[d].invert(c.docs[d]));if(o.text){const d=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,t.schema.text(o.text,d))}else l.delete(o.from,o.to)}return!0}}return!1},B4=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:a}=n;return r||e&&a.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},U4=(t,e={})=>({tr:n,state:r,dispatch:a})=>{var o;const{extendEmptyMarkRange:l=!1}=e,{selection:c}=n,d=Oa(t,r.schema),{$from:h,empty:p,ranges:m}=c;if(!a)return!0;if(p&&l){let{from:v,to:x}=c;const w=(o=h.marks().find(M=>M.type===d))==null?void 0:o.attrs,T=Dy(h,d,w);T&&(v=T.from,x=T.to),n.removeMark(v,x,d)}else m.forEach(v=>{n.removeMark(v.$from.pos,v.$to.pos,d)});return n.removeStoredMark(d),!0},H4=t=>({tr:e,state:n,dispatch:r})=>{const{selection:a}=n;let o,l;return typeof t=="number"?(o=t,l=t):t&&"from"in t&&"to"in t?(o=t.from,l=t.to):(o=a.from,l=a.to),r&&e.doc.nodesBetween(o,l,(c,d)=>{if(c.isText)return;const h={...c.attrs};delete h.dir,e.setNodeMarkup(d,void 0,h)}),!0},I4=(t,e={})=>({tr:n,state:r,dispatch:a})=>{let o=null,l=null;const c=Nh(typeof t=="string"?t:t.name,r.schema);if(!c)return!1;c==="node"&&(o=An(t,r.schema)),c==="mark"&&(l=Oa(t,r.schema));let d=!1;return n.selection.ranges.forEach(h=>{const p=h.$from.pos,m=h.$to.pos;let v,x,w,T;n.selection.empty?r.doc.nodesBetween(p,m,(M,O)=>{o&&o===M.type&&(d=!0,w=Math.max(O,p),T=Math.min(O+M.nodeSize,m),v=O,x=M)}):r.doc.nodesBetween(p,m,(M,O)=>{O<p&&o&&o===M.type&&(d=!0,w=Math.max(O,p),T=Math.min(O+M.nodeSize,m),v=O,x=M),O>=p&&O<=m&&(o&&o===M.type&&(d=!0,a&&n.setNodeMarkup(O,void 0,{...M.attrs,...e})),l&&M.marks.length&&M.marks.forEach(q=>{if(l===q.type&&(d=!0,a)){const V=Math.max(O,p),F=Math.min(O+M.nodeSize,m);n.addMark(V,F,l.create({...q.attrs,...e}))}}))}),x&&(v!==void 0&&a&&n.setNodeMarkup(v,void 0,{...x.attrs,...e}),l&&x.marks.length&&x.marks.forEach(M=>{l===M.type&&a&&n.addMark(w,T,l.create({...M.attrs,...e}))}))}),d},q4=(t,e={})=>({state:n,dispatch:r})=>{const a=An(t,n.schema);return m3(a,e)(n,r)},P4=(t,e={})=>({state:n,dispatch:r})=>{const a=An(t,n.schema);return g3(a,e)(n,r)},V4=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},_h=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},F4=(t,e)=>{if(Ny(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function nd(t){var e;const{editor:n,from:r,to:a,text:o,rules:l,plugin:c}=t,{view:d}=n;if(d.composing)return!1;const h=d.state.doc.resolve(r);if(h.parent.type.spec.code||(e=h.nodeBefore||h.nodeAfter)!=null&&e.marks.find(v=>v.type.spec.code))return!1;let p=!1;const m=g4(h)+o;return l.forEach(v=>{if(p)return;const x=F4(m,v.find);if(!x)return;const w=d.state.tr,T=Ah({state:d.state,transaction:w}),M={from:r-(x[0].length-o.length),to:a},{commands:O,chain:q,can:V}=new Oh({editor:n,state:T});v.handler({state:T,range:M,match:x,commands:O,chain:q,can:V})===null||!w.steps.length||(v.undoable&&w.setMeta(c,{transform:w,from:r,to:a,text:o}),d.dispatch(w),p=!0)}),p}function K4(t){const{editor:e,rules:n}=t,r=new nn({state:{init(){return null},apply(a,o,l){const c=a.getMeta(r);if(c)return c;const d=a.getMeta("applyInputRules");return d&&setTimeout(()=>{let{text:p}=d;typeof p=="string"?p=p:p=_y(De.from(p),l.schema);const{from:m}=d,v=m+p.length;nd({editor:e,from:m,to:v,text:p,rules:n,plugin:r})}),a.selectionSet||a.docChanged?null:o}},props:{handleTextInput(a,o,l,c){return nd({editor:e,from:o,to:l,text:c,rules:n,plugin:r})},handleDOMEvents:{compositionend:a=>(setTimeout(()=>{const{$cursor:o}=a.state.selection;o&&nd({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(a,o){if(o.key!=="Enter")return!1;const{$cursor:l}=a.state.selection;return l?nd({editor:e,from:l.pos,to:l.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function $4(t){return Object.prototype.toString.call(t).slice(8,-1)}function rd(t){return $4(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function eE(t,e){const n={...t};return rd(t)&&rd(e)&&Object.keys(e).forEach(r=>{rd(e[r])&&rd(t[r])?n[r]=eE(t[r],e[r]):n[r]=e[r]}),n}var jy=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...At(Ye(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...At(Ye(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>eE(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Mo=class tE extends jy{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new tE(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,a=e.state.selection.$from;if(a.pos===a.end()){const l=a.marks();if(!!!l.find(h=>h?.type.name===n.name))return!1;const d=l.find(h=>h?.type.name===n.name);return d&&r.removeStoredMark(d),r.insertText(" ",a.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Y4(t){return typeof t=="number"}var G4=class{constructor(t){this.find=t.find,this.handler=t.handler}},Q4=(t,e,n)=>{if(Ny(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(a=>{const o=[a.text];return o.index=a.index,o.input=t,o.data=a.data,a.replaceWith&&(a.text.includes(a.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(a.replaceWith)),o}):[]};function W4(t){const{editor:e,state:n,from:r,to:a,rule:o,pasteEvent:l,dropEvent:c}=t,{commands:d,chain:h,can:p}=new Oh({editor:e,state:n}),m=[];return n.doc.nodesBetween(r,a,(x,w)=>{var T,M,O,q,V;if((M=(T=x.type)==null?void 0:T.spec)!=null&&M.code||!(x.isText||x.isTextblock||x.isInline))return;const F=(V=(q=(O=x.content)==null?void 0:O.size)!=null?q:x.nodeSize)!=null?V:0,$=Math.max(r,w),U=Math.min(a,w+F);if($>=U)return;const P=x.isText?x.text||"":x.textBetween($-w,U-w,void 0,"");Q4(P,o.find,l).forEach(L=>{if(L.index===void 0)return;const G=$+L.index+1,se=G+L[0].length,re={from:n.tr.mapping.map(G),to:n.tr.mapping.map(se)},ce=o.handler({state:n,range:re,match:L,commands:d,chain:h,can:p,pasteEvent:l,dropEvent:c});m.push(ce)})}),m.every(x=>x!==null)}var id=null,X4=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function J4(t){const{editor:e,rules:n}=t;let r=null,a=!1,o=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,c;try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}const d=({state:p,from:m,to:v,rule:x,pasteEvt:w})=>{const T=p.tr,M=Ah({state:p,transaction:T});if(!(!W4({editor:e,state:M,from:Math.max(m-1,0),to:v.b-1,rule:x,pasteEvent:w,dropEvent:c})||!T.steps.length)){try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,T}};return n.map(p=>new nn({view(m){const v=w=>{var T;r=(T=m.dom.parentElement)!=null&&T.contains(w.target)?m.dom.parentElement:null,r&&(id=e)},x=()=>{id&&(id=null)};return window.addEventListener("dragstart",v),window.addEventListener("dragend",x),{destroy(){window.removeEventListener("dragstart",v),window.removeEventListener("dragend",x)}}},props:{handleDOMEvents:{drop:(m,v)=>{if(o=r===m.dom.parentElement,c=v,!o){const x=id;x?.isEditable&&setTimeout(()=>{const w=x.state.selection;w&&x.commands.deleteRange({from:w.from,to:w.to})},10)}return!1},paste:(m,v)=>{var x;const w=(x=v.clipboardData)==null?void 0:x.getData("text/html");return l=v,a=!!w?.includes("data-pm-slice"),!1}}},appendTransaction:(m,v,x)=>{const w=m[0],T=w.getMeta("uiEvent")==="paste"&&!a,M=w.getMeta("uiEvent")==="drop"&&!o,O=w.getMeta("applyPasteRules"),q=!!O;if(!T&&!M&&!q)return;if(q){let{text:$}=O;typeof $=="string"?$=$:$=_y(De.from($),x.schema);const{from:U}=O,P=U+$.length,z=X4($);return d({rule:p,state:x,from:U,to:{b:P},pasteEvt:z})}const V=v.doc.content.findDiffStart(x.doc.content),F=v.doc.content.findDiffEnd(x.doc.content);if(!(!Y4(V)||!F||V===F.b))return d({rule:p,state:x,from:V,to:F,pasteEvt:l})}}))}var zh=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=$2(t),this.schema=u4(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:td(e.name,this.schema)},r=Ye(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return Id([...this.extensions].reverse()).flatMap(r=>{const a={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:td(r.name,this.schema)},o=[],l=Ye(r,"addKeyboardShortcuts",a);let c={};if(r.type==="mark"&&Ye(r,"exitable",a)&&(c.ArrowRight=()=>Mo.handleExit({editor:t,mark:r})),l){const v=Object.fromEntries(Object.entries(l()).map(([x,w])=>[x,()=>w({editor:t})]));c={...c,...v}}const d=dR(c);o.push(d);const h=Ye(r,"addInputRules",a);if(jx(r,t.options.enableInputRules)&&h){const v=h();if(v&&v.length){const x=K4({editor:t,rules:v}),w=Array.isArray(x)?x:[x];o.push(...w)}}const p=Ye(r,"addPasteRules",a);if(jx(r,t.options.enablePasteRules)&&p){const v=p();if(v&&v.length){const x=J4({editor:t,rules:v});o.push(...x)}}const m=Ye(r,"addProseMirrorPlugins",a);if(m){const v=m();o.push(...v)}return o})}get attributes(){return K2(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Bl(this.extensions);return Object.fromEntries(e.filter(n=>!!Ye(n,"addNodeView")).map(n=>{const r=this.attributes.filter(d=>d.type===n.name),a={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:An(n.name,this.schema)},o=Ye(n,"addNodeView",a);if(!o)return[];const l=o();if(!l)return[];const c=(d,h,p,m,v)=>{const x=Tc(d,r);return l({node:d,view:h,getPos:p,decorations:m,innerDecorations:v,editor:t,extension:n,HTMLAttributes:x})};return[n.name,c]}))}dispatchTransaction(t){const{editor:e}=this;return Id([...this.extensions].reverse()).reduceRight((r,a)=>{const o={name:a.name,options:a.options,storage:this.editor.extensionStorage[a.name],editor:e,type:td(a.name,this.schema)},l=Ye(a,"dispatchTransaction",o);return l?c=>{l.call(o,{transaction:c,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Bl(this.extensions);return Object.fromEntries(e.filter(n=>!!Ye(n,"addMarkView")).map(n=>{const r=this.attributes.filter(c=>c.type===n.name),a={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Oa(n.name,this.schema)},o=Ye(n,"addMarkView",a);if(!o)return[];const l=(c,d,h)=>{const p=Tc(c,r);return o()({mark:c,view:d,inline:h,editor:t,extension:n,HTMLAttributes:p,updateAttributes:m=>{h_(c,t,m)}})};return[n.name,l]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:td(e.name,this.schema)};e.type==="mark"&&((n=At(Ye(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const a=Ye(e,"onBeforeCreate",r),o=Ye(e,"onCreate",r),l=Ye(e,"onUpdate",r),c=Ye(e,"onSelectionUpdate",r),d=Ye(e,"onTransaction",r),h=Ye(e,"onFocus",r),p=Ye(e,"onBlur",r),m=Ye(e,"onDestroy",r);a&&this.editor.on("beforeCreate",a),o&&this.editor.on("create",o),l&&this.editor.on("update",l),c&&this.editor.on("selectionUpdate",c),d&&this.editor.on("transaction",d),h&&this.editor.on("focus",h),p&&this.editor.on("blur",p),m&&this.editor.on("destroy",m)})}};zh.resolve=$2;zh.sort=Id;zh.flatten=Ry;var Z4={};Oy(Z4,{ClipboardTextSerializer:()=>rE,Commands:()=>iE,Delete:()=>aE,Drop:()=>sE,Editable:()=>oE,FocusEvents:()=>uE,Keymap:()=>cE,Paste:()=>fE,Tabindex:()=>dE,TextDirection:()=>hE,focusEventsPluginKey:()=>lE});var vn=class nE extends jy{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new nE(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},rE=vn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new nn({key:new Nn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:a}=e,{ranges:o}=a,l=Math.min(...o.map(p=>p.$from.pos)),c=Math.max(...o.map(p=>p.$to.pos)),d=G2(n);return Y2(r,{from:l,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),iE=vn.create({name:"commands",addCommands(){return{...L2}}}),aE=vn.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,a;const o=()=>{var l,c,d,h;if((h=(d=(c=(l=this.editor.options.coreExtensionOptions)==null?void 0:l.delete)==null?void 0:c.filterTransaction)==null?void 0:d.call(c,t))!=null?h:t.getMeta("y-sync$"))return;const p=V2(t.before,[t,...e]);W2(p).forEach(x=>{p.mapping.mapResult(x.oldRange.from).deletedAfter&&p.mapping.mapResult(x.oldRange.to).deletedBefore&&p.before.nodesBetween(x.oldRange.from,x.oldRange.to,(w,T)=>{const M=T+w.nodeSize-2,O=x.oldRange.from<=T&&M<=x.oldRange.to;this.editor.emit("delete",{type:"node",node:w,from:T,to:M,newFrom:p.mapping.map(T),newTo:p.mapping.map(M),deletedRange:x.oldRange,newRange:x.newRange,partial:!O,editor:this.editor,transaction:t,combinedTransform:p})})});const v=p.mapping;p.steps.forEach((x,w)=>{var T,M;if(x instanceof gi){const O=v.slice(w).map(x.from,-1),q=v.slice(w).map(x.to),V=v.invert().map(O,-1),F=v.invert().map(q),$=(T=p.doc.nodeAt(O-1))==null?void 0:T.marks.some(P=>P.eq(x.mark)),U=(M=p.doc.nodeAt(q))==null?void 0:M.marks.some(P=>P.eq(x.mark));this.editor.emit("delete",{type:"mark",mark:x.mark,from:x.from,to:x.to,deletedRange:{from:V,to:F},newRange:{from:O,to:q},partial:!!(U||$),editor:this.editor,transaction:t,combinedTransform:p})}})};(a=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||a?setTimeout(o,0):o()}}),sE=vn.create({name:"drop",addProseMirrorPlugins(){return[new nn({key:new Nn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),oE=vn.create({name:"editable",addProseMirrorPlugins(){return[new nn({key:new Nn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),lE=new Nn("focusEvents"),uE=vn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new nn({key:lE,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),cE=vn.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:c})=>{const{selection:d,doc:h}=c,{empty:p,$anchor:m}=d,{pos:v,parent:x}=m,w=m.parent.isTextblock&&v>0?c.doc.resolve(v-1):m,T=w.parent.type.spec.isolating,M=m.pos-m.parentOffset,O=T&&w.parent.childCount===1?M===m.pos:ut.atStart(h).from===v;return!p||!x.type.isTextblock||x.textContent.length||!O||O&&m.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},a={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Hd()||q2()?o:a},addProseMirrorPlugins(){return[new nn({key:new Nn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(T=>T.getMeta("composition")))return;const r=t.some(T=>T.docChanged)&&!e.doc.eq(n.doc),a=t.some(T=>T.getMeta("preventClearDocument"));if(!r||a)return;const{empty:o,from:l,to:c}=e.selection,d=ut.atStart(e.doc).from,h=ut.atEnd(e.doc).to;if(o||!(l===d&&c===h)||!Rh(n.doc))return;const v=n.tr,x=Ah({state:n,transaction:v}),{commands:w}=new Oh({editor:this.editor,state:x});if(w.clearNodes(),!!v.steps.length)return v}})]}}),fE=vn.create({name:"paste",addProseMirrorPlugins(){return[new nn({key:new Nn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),dE=vn.create({name:"tabindex",addProseMirrorPlugins(){return[new nn({key:new Nn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),hE=vn.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Bl(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new nn({key:new Nn("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),e_=class nc{constructor(e,n,r=!1,a=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=a}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new nc(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new nc(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new nc(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const a=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,l=n.isInline,c=this.pos+r+(o?0:1);if(c<0||c>this.resolvedPos.doc.nodeSize-2)return;const d=this.resolvedPos.doc.resolve(c);if(!a&&!l&&d.depth<=this.depth)return;const h=new nc(d,this.editor,a,a||l?n:null);a&&(h.actualDepth=this.depth+1),e.push(h)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,a=this.parent;for(;a&&!r;){if(a.node.type.name===e)if(Object.keys(n).length>0){const o=a.node.attrs,l=Object.keys(n);for(let c=0;c<l.length;c+=1){const d=l[c];if(o[d]!==n[d])break}}else r=a;a=a.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let a=[];if(!this.children||this.children.length===0)return a;const o=Object.keys(n);return this.children.forEach(l=>{r&&a.length>0||(l.node.type.name===e&&o.every(d=>n[d]===l.node.attrs[d])&&a.push(l),!(r&&a.length>0)&&(a=a.concat(l.querySelectorAll(e,n,r))))}),a}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},t_=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function n_(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const a=document.createElement("style");return e&&a.setAttribute("nonce",e),a.setAttribute("data-tiptap-style",""),a.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(a),a}var r_=class extends V4{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:x4,createMappablePosition:S4},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:a,moved:o})=>this.options.onDrop(r,a,o)),this.on("paste",({event:r,slice:a})=>this.options.onPaste(r,a)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=H2(e,this.options.autofocus);this.editorState=Al.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=n_(t_,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=F2(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(a=>{const o=typeof a=="string"?`${a}$`:a.key;n=n.filter(l=>!l.key.startsWith(o))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[oE,rE.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),iE,uE,cE,dE,sE,fE,aE,hE.configure({direction:this.options.textDirection})].filter(a=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[a.name]!==!1:!0):[],...this.options.extensions].filter(a=>["extension","node","mark"].includes(a?.type));this.extensionManager=new zh(r,this)}createCommandManager(){this.commandManager=new Oh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Ug(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Ug(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),a=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new z2(t,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:a,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.prependClass(),this.injectCSS();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(h=>{var p;return(p=this.capturedTransaction)==null?void 0:p.step(h)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),a=n.includes(t),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!a)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const l=n.findLast(h=>h.getMeta("focus")||h.getMeta("blur")),c=l?.getMeta("focus"),d=l?.getMeta("blur");c&&this.emit("focus",{editor:this,event:c.event,transaction:l}),d&&this.emit("blur",{editor:this,event:d.event,transaction:l}),!(t.getMeta("preventUpdate")||!n.some(h=>h.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return Q2(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return y4(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return _y(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return f4(this.state.doc,{blockSeparator:e,textSerializers:{...G2(this.schema),...n}})}get isEmpty(){return Rh(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new e_(e,this)}get $doc(){return this.$pos(0)}};function Ul(t){return new _h({find:t.find,handler:({state:e,range:n,match:r})=>{const a=At(t.getAttributes,void 0,r);if(a===!1||a===null)return null;const{tr:o}=e,l=r[r.length-1],c=r[0];if(l){const d=c.search(/\S/),h=n.from+c.indexOf(l),p=h+l.length;if(zy(n.from,n.to,e.doc).filter(x=>x.mark.type.excluded.find(T=>T===t.type&&T!==x.mark.type)).filter(x=>x.to>h).length)return null;p<n.to&&o.delete(p,n.to),h>n.from&&o.delete(n.from+d,h);const v=n.from+d+l.length;o.addMark(n.from+d,v,t.type.create(a||{})),o.removeStoredMark(t.type)}},undoable:t.undoable})}function pE(t){return new _h({find:t.find,handler:({state:e,range:n,match:r})=>{const a=At(t.getAttributes,void 0,r)||{},{tr:o}=e,l=n.from;let c=n.to;const d=t.type.create(a);if(r[1]){const h=r[0].lastIndexOf(r[1]);let p=l+h;p>c?p=c:c=p+r[1].length;const m=r[0][r[0].length-1];o.insertText(m,l+r[0].length-1),o.replaceWith(p,c,d)}else if(r[0]){const h=t.type.isInline?l:l-1;o.insert(h,t.type.create(a)).delete(o.mapping.map(l),o.mapping.map(c))}o.scrollIntoView()},undoable:t.undoable})}function Ig(t){return new _h({find:t.find,handler:({state:e,range:n,match:r})=>{const a=e.doc.resolve(n.from),o=At(t.getAttributes,void 0,r)||{};if(!a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)},undoable:t.undoable})}function Hl(t){return new _h({find:t.find,handler:({state:e,range:n,match:r,chain:a})=>{const o=At(t.getAttributes,void 0,r)||{},l=e.tr.delete(n.from,n.to),d=l.doc.resolve(n.from).blockRange(),h=d&&hy(d,t.type,o);if(!h)return null;if(l.wrap(d,h),t.keepMarks&&t.editor){const{selection:m,storedMarks:v}=e,{splittableMarks:x}=t.editor.extensionManager,w=v||m.$to.parentOffset&&m.$from.marks();if(w){const T=w.filter(M=>x.includes(M.type.name));l.ensureMarks(T)}}if(t.keepAttributes){const m=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";a().updateAttributes(m,o).run()}const p=l.doc.resolve(n.from-1).nodeBefore;p&&p.type===t.type&&Os(l.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,p))&&l.join(n.from-1)},undoable:t.undoable})}var i_=t=>"touches"in t,a_=class{constructor(t){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=c=>{if(!this.isResizing||!this.activeHandle)return;const d=c.clientX-this.startX,h=c.clientY-this.startY;this.handleResize(d,h)},this.handleTouchMove=c=>{if(!this.isResizing||!this.activeHandle)return;const d=c.touches[0];if(!d)return;const h=d.clientX-this.startX,p=d.clientY-this.startY;this.handleResize(h,p)},this.handleMouseUp=()=>{if(!this.isResizing)return;const c=this.element.offsetWidth,d=this.element.offsetHeight;this.onCommit(c,d),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=c=>{c.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=c=>{c.key==="Shift"&&(this.isShiftKeyPressed=!1)};var e,n,r,a,o,l;this.node=t.node,this.editor=t.editor,this.element=t.element,this.contentElement=t.contentElement,this.getPos=t.getPos,this.onResize=t.onResize,this.onCommit=t.onCommit,this.onUpdate=t.onUpdate,(e=t.options)!=null&&e.min&&(this.minSize={...this.minSize,...t.options.min}),(n=t.options)!=null&&n.max&&(this.maxSize=t.options.max),(r=t?.options)!=null&&r.directions&&(this.directions=t.options.directions),(a=t.options)!=null&&a.preserveAspectRatio&&(this.preserveAspectRatio=t.options.preserveAspectRatio),(o=t.options)!=null&&o.className&&(this.classNames={container:t.options.className.container||"",wrapper:t.options.className.wrapper||"",handle:t.options.className.handle||"",resizing:t.options.className.resizing||""}),(l=t.options)!=null&&l.createCustomHandle&&(this.createCustomHandle=t.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){var t;return(t=this.contentElement)!=null?t:null}handleEditorUpdate(){const t=this.editor.isEditable;t!==this.lastEditableState&&(this.lastEditableState=t,t?t&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(t,e,n){return t.type!==this.node.type?!1:(this.node=t,this.onUpdate?this.onUpdate(t,e,n):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const t=document.createElement("div");return t.dataset.resizeContainer="",t.dataset.node=this.node.type.name,t.style.display="flex",this.classNames.container&&(t.className=this.classNames.container),t.appendChild(this.wrapper),t}createWrapper(){const t=document.createElement("div");return t.style.position="relative",t.style.display="block",t.dataset.resizeWrapper="",this.classNames.wrapper&&(t.className=this.classNames.wrapper),t.appendChild(this.element),t}createHandle(t){const e=document.createElement("div");return e.dataset.resizeHandle=t,e.style.position="absolute",this.classNames.handle&&(e.className=this.classNames.handle),e}positionHandle(t,e){const n=e.includes("top"),r=e.includes("bottom"),a=e.includes("left"),o=e.includes("right");n&&(t.style.top="0"),r&&(t.style.bottom="0"),a&&(t.style.left="0"),o&&(t.style.right="0"),(e==="top"||e==="bottom")&&(t.style.left="0",t.style.right="0"),(e==="left"||e==="right")&&(t.style.top="0",t.style.bottom="0")}attachHandles(){this.directions.forEach(t=>{let e;this.createCustomHandle?e=this.createCustomHandle(t):e=this.createHandle(t),e instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${t}") did not return an HTMLElement. Falling back to default handle.`),e=this.createHandle(t)),this.createCustomHandle||this.positionHandle(e,t),e.addEventListener("mousedown",n=>this.handleResizeStart(n,t)),e.addEventListener("touchstart",n=>this.handleResizeStart(n,t)),this.handleMap.set(t,e),this.wrapper.appendChild(e)})}removeHandles(){this.handleMap.forEach(t=>t.remove()),this.handleMap.clear()}applyInitialSize(){const t=this.node.attrs.width,e=this.node.attrs.height;t?(this.element.style.width=`${t}px`,this.initialWidth=t):this.initialWidth=this.element.offsetWidth,e?(this.element.style.height=`${e}px`,this.initialHeight=e):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(t,e){t.preventDefault(),t.stopPropagation(),this.isResizing=!0,this.activeHandle=e,i_(t)?(this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY):(this.startX=t.clientX,this.startY=t.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(t,e){if(!this.activeHandle)return;const n=this.preserveAspectRatio||this.isShiftKeyPressed,{width:r,height:a}=this.calculateNewDimensions(this.activeHandle,t,e),o=this.applyConstraints(r,a,n);this.element.style.width=`${o.width}px`,this.element.style.height=`${o.height}px`,this.onResize&&this.onResize(o.width,o.height)}calculateNewDimensions(t,e,n){let r=this.startWidth,a=this.startHeight;const o=t.includes("right"),l=t.includes("left"),c=t.includes("bottom"),d=t.includes("top");return o?r=this.startWidth+e:l&&(r=this.startWidth-e),c?a=this.startHeight+n:d&&(a=this.startHeight-n),(t==="right"||t==="left")&&(r=this.startWidth+(o?e:-e)),(t==="top"||t==="bottom")&&(a=this.startHeight+(c?n:-n)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(r,a,t):{width:r,height:a}}applyConstraints(t,e,n){var r,a,o,l;if(!n){let h=Math.max(this.minSize.width,t),p=Math.max(this.minSize.height,e);return(r=this.maxSize)!=null&&r.width&&(h=Math.min(this.maxSize.width,h)),(a=this.maxSize)!=null&&a.height&&(p=Math.min(this.maxSize.height,p)),{width:h,height:p}}let c=t,d=e;return c<this.minSize.width&&(c=this.minSize.width,d=c/this.aspectRatio),d<this.minSize.height&&(d=this.minSize.height,c=d*this.aspectRatio),(o=this.maxSize)!=null&&o.width&&c>this.maxSize.width&&(c=this.maxSize.width,d=c/this.aspectRatio),(l=this.maxSize)!=null&&l.height&&d>this.maxSize.height&&(d=this.maxSize.height,c=d*this.aspectRatio),{width:c,height:d}}applyAspectRatio(t,e,n){const r=n==="left"||n==="right",a=n==="top"||n==="bottom";return r?{width:t,height:t/this.aspectRatio}:a?{width:e*this.aspectRatio,height:e}:{width:t,height:t/this.aspectRatio}}};function s_(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof We){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let a=r.depth;for(;a>=0;){const o=r.index(a);if(r.node(a).contentMatchAt(o).matchType(e))return!0;a-=1}return!1}var o_={};Oy(o_,{createAtomBlockMarkdownSpec:()=>l_,createBlockMarkdownSpec:()=>u_,createInlineMarkdownSpec:()=>d_,parseAttributes:()=>Ly,parseIndentedBlocks:()=>qg,renderNestedMarkdownContent:()=>Uy,serializeAttributes:()=>By});function Ly(t){if(!t?.trim())return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,h=>(n.push(h),`__QUOTED_${n.length-1}__`)),a=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(a){const h=a.map(p=>p.trim().slice(1));e.class=h.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const l=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(l)).forEach(([,h,p])=>{var m;const v=parseInt(((m=p.match(/__QUOTED_(\d+)__/))==null?void 0:m[1])||"0",10),x=n[v];x&&(e[h]=x.slice(1,-1))});const d=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return d&&d.split(/\s+/).filter(Boolean).forEach(p=>{p.match(/^[a-zA-Z][\w-]*$/)&&(e[p]=!0)}),e}function By(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function l_(t){const{nodeName:e,name:n,parseAttributes:r=Ly,serializeAttributes:a=By,defaultAttributes:o={},requiredAttributes:l=[],allowedAttributes:c}=t,d=n||e,h=p=>{if(!c)return p;const m={};return c.forEach(v=>{v in p&&(m[v]=p[v])}),m};return{parseMarkdown:(p,m)=>{const v={...o,...p.attributes};return m.createNode(e,v,[])},markdownTokenizer:{name:e,level:"block",start(p){var m;const v=new RegExp(`^:::${d}(?:\\s|$)`,"m"),x=(m=p.match(v))==null?void 0:m.index;return x!==void 0?x:-1},tokenize(p,m,v){const x=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),w=p.match(x);if(!w)return;const T=w[1]||"",M=r(T);if(!l.find(q=>!(q in M)))return{type:e,raw:w[0],attributes:M}}},renderMarkdown:p=>{const m=h(p.attrs||{}),v=a(m),x=v?` {${v}}`:"";return`:::${d}${x} :::`}}}function u_(t){const{nodeName:e,name:n,getContent:r,parseAttributes:a=Ly,serializeAttributes:o=By,defaultAttributes:l={},content:c="block",allowedAttributes:d}=t,h=n||e,p=m=>{if(!d)return m;const v={};return d.forEach(x=>{x in m&&(v[x]=m[x])}),v};return{parseMarkdown:(m,v)=>{let x;if(r){const T=r(m);x=typeof T=="string"?[{type:"text",text:T}]:T}else c==="block"?x=v.parseChildren(m.tokens||[]):x=v.parseInline(m.tokens||[]);const w={...l,...m.attributes};return v.createNode(e,w,x)},markdownTokenizer:{name:e,level:"block",start(m){var v;const x=new RegExp(`^:::${h}`,"m"),w=(v=m.match(x))==null?void 0:v.index;return w!==void 0?w:-1},tokenize(m,v,x){var w;const T=new RegExp(`^:::${h}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),M=m.match(T);if(!M)return;const[O,q=""]=M,V=a(q);let F=1;const $=O.length;let U="";const P=/^:::([\w-]*)(\s.*)?/gm,z=m.slice($);for(P.lastIndex=0;;){const L=P.exec(z);if(L===null)break;const G=L.index,se=L[1];if(!((w=L[2])!=null&&w.endsWith(":::"))){if(se)F+=1;else if(F-=1,F===0){const re=z.slice(0,G);U=re.trim();const ce=m.slice(0,$+G+L[0].length);let W=[];if(U)if(c==="block")for(W=x.blockTokens(re),W.forEach(fe=>{fe.text&&(!fe.tokens||fe.tokens.length===0)&&(fe.tokens=x.inlineTokens(fe.text))});W.length>0;){const fe=W[W.length-1];if(fe.type==="paragraph"&&(!fe.text||fe.text.trim()===""))W.pop();else break}else W=x.inlineTokens(U);return{type:e,raw:ce,attributes:V,content:U,tokens:W}}}}}},renderMarkdown:(m,v)=>{const x=p(m.attrs||{}),w=o(x),T=w?` {${w}}`:"",M=v.renderChildren(m.content||[],`

`);return`:::${h}${T}

${M}

:::`}}}function c_(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,a,o,l]=r;e[a]=o||l,r=n.exec(t)}return e}function f_(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function d_(t){const{nodeName:e,name:n,getContent:r,parseAttributes:a=c_,serializeAttributes:o=f_,defaultAttributes:l={},selfClosing:c=!1,allowedAttributes:d}=t,h=n||e,p=v=>{if(!d)return v;const x={};return d.forEach(w=>{const T=typeof w=="string"?w:w.name,M=typeof w=="string"?void 0:w.skipIfDefault;if(T in v){const O=v[T];if(M!==void 0&&O===M)return;x[T]=O}}),x},m=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(v,x)=>{const w={...l,...v.attributes};if(c)return x.createNode(e,w);const T=r?r(v):v.content||"";return T?x.createNode(e,w,[x.createTextNode(T)]):x.createNode(e,w,[])},markdownTokenizer:{name:e,level:"inline",start(v){const x=c?new RegExp(`\\[${m}\\s*[^\\]]*\\]`):new RegExp(`\\[${m}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${m}\\]`),w=v.match(x),T=w?.index;return T!==void 0?T:-1},tokenize(v,x,w){const T=c?new RegExp(`^\\[${m}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${m}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${m}\\]`),M=v.match(T);if(!M)return;let O="",q="";if(c){const[,F]=M;q=F}else{const[,F,$]=M;q=F,O=$||""}const V=a(q.trim());return{type:e,raw:M[0],content:O.trim(),attributes:V}}},renderMarkdown:v=>{let x="";r?x=r(v):v.content&&v.content.length>0&&(x=v.content.filter(O=>O.type==="text").map(O=>O.text).join(""));const w=p(v.attrs||{}),T=o(w),M=T?` ${T}`:"";return c?`[${h}${M}]`:`[${h}${M}]${x}[/${h}]`}}}function qg(t,e,n){var r,a,o,l;const c=t.split(`
`),d=[];let h="",p=0;const m=e.baseIndentSize||2;for(;p<c.length;){const v=c[p],x=v.match(e.itemPattern);if(!x){if(d.length>0)break;if(v.trim()===""){p+=1,h=`${h}${v}
`;continue}else return}const w=e.extractItemData(x),{indentLevel:T,mainContent:M}=w;h=`${h}${v}
`;const O=[M];for(p+=1;p<c.length;){const $=c[p];if($.trim()===""){const P=c.slice(p+1).findIndex(G=>G.trim()!=="");if(P===-1)break;if((((a=(r=c[p+1+P].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:a.length)||0)>T){O.push($),h=`${h}${$}
`,p+=1;continue}else break}if((((l=(o=$.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:l.length)||0)>T)O.push($),h=`${h}${$}
`,p+=1;else break}let q;const V=O.slice(1);if(V.length>0){const $=V.map(U=>U.slice(T+m)).join(`
`);$.trim()&&(e.customNestedParser?q=e.customNestedParser($):q=n.blockTokens($))}const F=e.createToken(w,q);d.push(F)}if(d.length!==0)return{items:d,raw:h}}function Uy(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const a=typeof n=="function"?n(r):n,[o,...l]=t.content,c=e.renderChildren([o]),d=[`${a}${c}`];return l&&l.length>0&&l.forEach(h=>{const p=e.renderChildren([h]);if(p){const m=p.split(`
`).map(v=>v?e.indent(v):"").join(`
`);d.push(m)}}),d.join(`
`)}function h_(t,e,n={}){const{state:r}=e,{doc:a,tr:o}=r,l=t;a.descendants((c,d)=>{const h=o.mapping.map(d),p=o.mapping.map(d)+c.nodeSize;let m=null;if(c.marks.forEach(x=>{if(x!==l)return!1;m=x}),!m)return;let v=!1;if(Object.keys(n).forEach(x=>{n[x]!==m.attrs[x]&&(v=!0)}),v){const x=t.type.create({...t.attrs,...n});o.removeMark(h,p,t.type),o.addMark(h,p,x)}}),o.docChanged&&e.view.dispatch(o)}var Ar=class mE extends jy{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new mE(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function ko(t){return new G4({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:a})=>{const o=At(t.getAttributes,void 0,r,a);if(o===!1||o===null)return null;const{tr:l}=e,c=r[r.length-1],d=r[0];let h=n.to;if(c){const p=d.search(/\S/),m=n.from+d.indexOf(c),v=m+c.length;if(zy(n.from,n.to,e.doc).filter(w=>w.mark.type.excluded.find(M=>M===t.type&&M!==w.mark.type)).filter(w=>w.to>m).length)return null;v<n.to&&l.delete(v,n.to),m>n.from&&l.delete(n.from+p,m),h=n.from+p+c.length,l.addMark(n.from+p,h,t.type.create(o||{})),l.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:p_,getOwnPropertySymbols:m_}=Object,{hasOwnProperty:g_}=Object.prototype;function sg(t,e){return function(r,a,o){return t(r,a,o)&&e(r,a,o)}}function ad(t){return function(n,r,a){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,a);const{cache:o}=a,l=o.get(n),c=o.get(r);if(l&&c)return l===r&&c===n;o.set(n,r),o.set(r,n);const d=t(n,r,a);return o.delete(n),o.delete(r),d}}function y_(t){return t?.[Symbol.toStringTag]}function Ux(t){return p_(t).concat(m_(t))}const v_=Object.hasOwn||((t,e)=>g_.call(t,e));function Ao(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const b_="__v",x_="__o",S_="_owner",{getOwnPropertyDescriptor:Hx,keys:Ix}=Object;function w_(t,e){return t.byteLength===e.byteLength&&qd(new Uint8Array(t),new Uint8Array(e))}function E_(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function k_(t,e){return t.byteLength===e.byteLength&&qd(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function T_(t,e){return Ao(t.getTime(),e.getTime())}function C_(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function M_(t,e){return t===e}function qx(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const a=new Array(r),o=t.entries();let l,c,d=0;for(;(l=o.next())&&!l.done;){const h=e.entries();let p=!1,m=0;for(;(c=h.next())&&!c.done;){if(a[m]){m++;continue}const v=l.value,x=c.value;if(n.equals(v[0],x[0],d,m,t,e,n)&&n.equals(v[1],x[1],v[0],x[0],t,e,n)){p=a[m]=!0;break}m++}if(!p)return!1;d++}return!0}const A_=Ao;function O_(t,e,n){const r=Ix(t);let a=r.length;if(Ix(e).length!==a)return!1;for(;a-- >0;)if(!gE(t,e,n,r[a]))return!1;return!0}function Xu(t,e,n){const r=Ux(t);let a=r.length;if(Ux(e).length!==a)return!1;let o,l,c;for(;a-- >0;)if(o=r[a],!gE(t,e,n,o)||(l=Hx(t,o),c=Hx(e,o),(l||c)&&(!l||!c||l.configurable!==c.configurable||l.enumerable!==c.enumerable||l.writable!==c.writable)))return!1;return!0}function N_(t,e){return Ao(t.valueOf(),e.valueOf())}function D_(t,e){return t.source===e.source&&t.flags===e.flags}function Px(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const a=new Array(r),o=t.values();let l,c;for(;(l=o.next())&&!l.done;){const d=e.values();let h=!1,p=0;for(;(c=d.next())&&!c.done;){if(!a[p]&&n.equals(l.value,c.value,l.value,c.value,t,e,n)){h=a[p]=!0;break}p++}if(!h)return!1}return!0}function qd(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function R_(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function gE(t,e,n,r){return(r===S_||r===x_||r===b_)&&(t.$$typeof||e.$$typeof)?!0:v_(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const __="[object ArrayBuffer]",z_="[object Arguments]",j_="[object Boolean]",L_="[object DataView]",B_="[object Date]",U_="[object Error]",H_="[object Map]",I_="[object Number]",q_="[object Object]",P_="[object RegExp]",V_="[object Set]",F_="[object String]",K_={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},$_="[object URL]",Y_=Object.prototype.toString;function G_({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:a,areFunctionsEqual:o,areMapsEqual:l,areNumbersEqual:c,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:v,areUrlsEqual:x,unknownTagComparators:w}){return function(M,O,q){if(M===O)return!0;if(M==null||O==null)return!1;const V=typeof M;if(V!==typeof O)return!1;if(V!=="object")return V==="number"?c(M,O,q):V==="function"?o(M,O,q):!1;const F=M.constructor;if(F!==O.constructor)return!1;if(F===Object)return d(M,O,q);if(Array.isArray(M))return e(M,O,q);if(F===Date)return r(M,O,q);if(F===RegExp)return p(M,O,q);if(F===Map)return l(M,O,q);if(F===Set)return m(M,O,q);const $=Y_.call(M);if($===B_)return r(M,O,q);if($===P_)return p(M,O,q);if($===H_)return l(M,O,q);if($===V_)return m(M,O,q);if($===q_)return typeof M.then!="function"&&typeof O.then!="function"&&d(M,O,q);if($===$_)return x(M,O,q);if($===U_)return a(M,O,q);if($===z_)return d(M,O,q);if(K_[$])return v(M,O,q);if($===__)return t(M,O,q);if($===L_)return n(M,O,q);if($===j_||$===I_||$===F_)return h(M,O,q);if(w){let U=w[$];if(!U){const P=y_(M);P&&(U=w[P])}if(U)return U(M,O,q)}return!1}}function Q_({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:w_,areArraysEqual:n?Xu:E_,areDataViewsEqual:k_,areDatesEqual:T_,areErrorsEqual:C_,areFunctionsEqual:M_,areMapsEqual:n?sg(qx,Xu):qx,areNumbersEqual:A_,areObjectsEqual:n?Xu:O_,arePrimitiveWrappersEqual:N_,areRegExpsEqual:D_,areSetsEqual:n?sg(Px,Xu):Px,areTypedArraysEqual:n?sg(qd,Xu):qd,areUrlsEqual:R_,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const a=ad(r.areArraysEqual),o=ad(r.areMapsEqual),l=ad(r.areObjectsEqual),c=ad(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return r}function W_(t){return function(e,n,r,a,o,l,c){return t(e,n,c)}}function X_({circular:t,comparator:e,createState:n,equals:r,strict:a}){if(n)return function(c,d){const{cache:h=t?new WeakMap:void 0,meta:p}=n();return e(c,d,{cache:h,equals:r,meta:p,strict:a})};if(t)return function(c,d){return e(c,d,{cache:new WeakMap,equals:r,meta:void 0,strict:a})};const o={cache:void 0,equals:r,meta:void 0,strict:a};return function(c,d){return e(c,d,o)}}const J_=Ds();Ds({strict:!0});Ds({circular:!0});Ds({circular:!0,strict:!0});Ds({createInternalComparator:()=>Ao});Ds({strict:!0,createInternalComparator:()=>Ao});Ds({circular:!0,createInternalComparator:()=>Ao});Ds({circular:!0,createInternalComparator:()=>Ao,strict:!0});function Ds(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:a=!1}=t,o=Q_(t),l=G_(o),c=n?n(l):W_(l);return X_({circular:e,comparator:l,createState:r,equals:c,strict:a})}var og={exports:{}},lg={};var Vx;function Z_(){if(Vx)return lg;Vx=1;var t=Ac(),e=sw();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,o=t.useRef,l=t.useEffect,c=t.useMemo,d=t.useDebugValue;return lg.useSyncExternalStoreWithSelector=function(h,p,m,v,x){var w=o(null);if(w.current===null){var T={hasValue:!1,value:null};w.current=T}else T=w.current;w=c(function(){function O(U){if(!q){if(q=!0,V=U,U=v(U),x!==void 0&&T.hasValue){var P=T.value;if(x(P,U))return F=P}return F=U}if(P=F,r(V,U))return P;var z=v(U);return x!==void 0&&x(P,z)?(V=U,P):(V=U,F=z)}var q=!1,V,F,$=m===void 0?null:m;return[function(){return O(p())},$===null?void 0:function(){return O($())}]},[p,m,v,x]);var M=a(h,w[0],w[1]);return l(function(){T.hasValue=!0,T.value=M},[M]),d(M),M},lg}var Fx;function e5(){return Fx||(Fx=1,og.exports=Z_()),og.exports}var t5=e5(),n5=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},r5=({contentComponent:t})=>{const e=ow.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return B.jsx(B.Fragment,{children:Object.values(e)})};function i5(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:XC.createPortal(r.reactElement,r.element,n)},t.forEach(a=>a())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(a=>a())}}}var a5=class extends ai.Component{constructor(t){var e;super(t),this.editorContentRef=ai.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=i5(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return B.jsxs(B.Fragment,{children:[B.jsx("div",{ref:n5(e,this.editorContentRef),...n}),t?.contentComponent&&B.jsx(r5,{contentComponent:t.contentComponent})]})}},s5=ae.forwardRef((t,e)=>{const n=ai.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return ai.createElement(a5,{key:n,innerRef:e,...t})}),yE=ai.memo(s5),o5=typeof window<"u"?ae.useLayoutEffect:ae.useEffect,l5=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function u5(t){var e;const[n]=ae.useState(()=>new l5(t.editor)),r=t5.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:J_);return o5(()=>n.watch(t.editor),[t.editor,n]),ae.useDebugValue(r),r}var c5=!1,Pg=typeof window>"u",f5=Pg||!!(typeof window<"u"&&window.next),d5=class vE{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Pg||f5?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var a,o;return(o=(a=this.options.current).onBeforeCreate)==null?void 0:o.call(a,...r)},onBlur:(...r)=>{var a,o;return(o=(a=this.options.current).onBlur)==null?void 0:o.call(a,...r)},onCreate:(...r)=>{var a,o;return(o=(a=this.options.current).onCreate)==null?void 0:o.call(a,...r)},onDestroy:(...r)=>{var a,o;return(o=(a=this.options.current).onDestroy)==null?void 0:o.call(a,...r)},onFocus:(...r)=>{var a,o;return(o=(a=this.options.current).onFocus)==null?void 0:o.call(a,...r)},onSelectionUpdate:(...r)=>{var a,o;return(o=(a=this.options.current).onSelectionUpdate)==null?void 0:o.call(a,...r)},onTransaction:(...r)=>{var a,o;return(o=(a=this.options.current).onTransaction)==null?void 0:o.call(a,...r)},onUpdate:(...r)=>{var a,o;return(o=(a=this.options.current).onUpdate)==null?void 0:o.call(a,...r)},onContentError:(...r)=>{var a,o;return(o=(a=this.options.current).onContentError)==null?void 0:o.call(a,...r)},onDrop:(...r)=>{var a,o;return(o=(a=this.options.current).onDrop)==null?void 0:o.call(a,...r)},onPaste:(...r)=>{var a,o;return(o=(a=this.options.current).onPaste)==null?void 0:o.call(a,...r)},onDelete:(...r)=>{var a,o;return(o=(a=this.options.current).onDelete)==null?void 0:o.call(a,...r)}};return new r_(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((a,o)=>{var l;return a===((l=n.extensions)==null?void 0:l[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?vE.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,a)=>r===e[a]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function h5(t={},e=[]){const n=ae.useRef(t);n.current=t;const[r]=ae.useState(()=>new d5(n)),a=ow.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return ae.useDebugValue(a),ae.useEffect(r.onRender(e)),u5({editor:a,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&o===0?0:o+1}),a}var bE=ae.createContext({editor:null});bE.Consumer;var p5=ae.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),m5=()=>ae.useContext(p5);ai.forwardRef((t,e)=>{const{onDragStart:n}=m5(),r=t.as||"div";return B.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});ai.createContext({markViewContentRef:()=>{}});var Hy=ae.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});Hy.displayName="TiptapContext";var g5=()=>ae.useContext(Hy);function xE({editor:t,instance:e,children:n}){const r=t??e;if(!r)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const a=ae.useMemo(()=>({editor:r}),[r]),o=ae.useMemo(()=>({editor:r}),[r]);return B.jsx(bE.Provider,{value:o,children:B.jsx(Hy.Provider,{value:a,children:n})})}xE.displayName="Tiptap";function SE({...t}){const{editor:e}=g5();return B.jsx(yE,{editor:e,...t})}SE.displayName="Tiptap.Content";Object.assign(xE,{Content:SE});var Pd=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},y5=/^\s*>\s$/,v5=Ar.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Pd("blockquote",{...yn(this.options.HTMLAttributes,t),children:Pd("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(a=>{const c=e.renderChildren([a]).split(`
`).map(d=>d.trim()===""?n:`${n} ${d}`);r.push(c.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Hl({find:y5,type:this.type})]}}),b5=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,x5=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,S5=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,w5=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,E5=Mo.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Pd("strong",{...yn(this.options.HTMLAttributes,t),children:Pd("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ul({find:b5,type:this.type}),Ul({find:S5,type:this.type})]},addPasteRules(){return[ko({find:x5,type:this.type}),ko({find:w5,type:this.type})]}}),k5=/(^|[^`])`([^`]+)`(?!`)$/,T5=/(^|[^`])`([^`]+)`(?!`)/g,C5=Mo.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",yn(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ul({find:k5,type:this.type})]},addPasteRules(){return[ko({find:T5,type:this.type})]}}),ug=4,M5=/^```([a-z]+)?[\s\n]$/,A5=/^~~~([a-z]+)?[\s\n]$/,O5=Ar.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:ug,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const o=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(l=>l.startsWith(n)).map(l=>l.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",yn(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const a=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${a}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${a}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:ug,{state:r}=t,{selection:a}=r,{$from:o,empty:l}=a;if(o.parent.type!==this.type)return!1;const c=" ".repeat(n);return l?t.commands.insertContent(c):t.commands.command(({tr:d})=>{const{from:h,to:p}=a,x=r.doc.textBetween(h,p,`
`,`
`).split(`
`).map(w=>c+w).join(`
`);return d.replaceWith(h,p,r.schema.text(x)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:ug,{state:r}=t,{selection:a}=r,{$from:o,empty:l}=a;return o.parent.type!==this.type?!1:l?t.commands.command(({tr:c})=>{var d;const{pos:h}=o,p=o.start(),m=o.end(),x=r.doc.textBetween(p,m,`
`,`
`).split(`
`);let w=0,T=0;const M=h-p;for(let U=0;U<x.length;U+=1){if(T+x[U].length>=M){w=U;break}T+=x[U].length+1}const q=((d=x[w].match(/^ */))==null?void 0:d[0])||"",V=Math.min(q.length,n);if(V===0)return!0;let F=p;for(let U=0;U<w;U+=1)F+=x[U].length+1;return c.delete(F,F+V),h-F<=V&&c.setSelection(tt.create(c.doc,F)),!0}):t.commands.command(({tr:c})=>{const{from:d,to:h}=a,v=r.doc.textBetween(d,h,`
`,`
`).split(`
`).map(x=>{var w;const T=((w=x.match(/^ */))==null?void 0:w[0])||"",M=Math.min(T.length,n);return x.slice(M)}).join(`
`);return c.replaceWith(d,h,r.schema.text(v)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:a}=n;if(!a||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!o||!l?!1:t.chain().command(({tr:c})=>(c.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:a,empty:o}=n;if(!o||a.parent.type!==this.type||!(a.parentOffset===a.parent.nodeSize-2))return!1;const c=a.after();return c===void 0?!1:r.nodeAt(c)?t.commands.command(({tr:h})=>(h.setSelection(ut.near(r.resolve(c))),!0)):t.commands.exitCode()}}},addInputRules(){return[Ig({find:M5,type:this.type,getAttributes:t=>({language:t[1]})}),Ig({find:A5,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new nn({key:new Nn("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),a=r?JSON.parse(r):void 0,o=a?.mode;if(!n||!o)return!1;const{tr:l,schema:c}=t.state,d=c.text(n.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:o},d)),l.selection.$from.parent.type!==this.type&&l.setSelection(tt.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),t.dispatch(l),!0}}})]}}),N5=Ar.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),D5=Ar.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",yn(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:a,storedMarks:o}=n;if(a.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:c}=r.extensionManager,d=o||a.$to.parentOffset&&a.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&d&&l){const m=d.filter(v=>c.includes(v.type.name));h.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),R5=Ar.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,yn(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,a="#".repeat(r);return t.content?`${a} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Ig({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),_5=Ar.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",yn(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!s_(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,a=t();return X2(n)?a.insertContentAt(r.pos,{type:this.name}):a.insertContent({type:this.name}),a.command(({state:o,tr:l,dispatch:c})=>{if(c){const{$to:d}=l.selection,h=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?l.setSelection(tt.create(l.doc,d.pos+1)):d.nodeAfter.isBlock?l.setSelection(We.create(l.doc,d.pos)):l.setSelection(tt.create(l.doc,d.pos));else{const p=o.schema.nodes[this.options.nextNodeType]||d.parent.type.contentMatch.defaultType,m=p?.create();m&&(l.insert(h,m),l.setSelection(tt.create(l.doc,h+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[pE({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),z5=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,j5=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,L5=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,B5=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,U5=Mo.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",yn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ul({find:z5,type:this.type}),Ul({find:L5,type:this.type})]},addPasteRules(){return[ko({find:j5,type:this.type}),ko({find:B5,type:this.type})]}});const H5="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",I5="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Vg="numeric",Fg="ascii",Kg="alpha",lc="asciinumeric",rc="alphanumeric",$g="domain",wE="emoji",q5="scheme",P5="slashscheme",cg="whitespace";function V5(t,e){return t in e||(e[t]=[]),e[t]}function po(t,e,n){e[Vg]&&(e[lc]=!0,e[rc]=!0),e[Fg]&&(e[lc]=!0,e[Kg]=!0),e[lc]&&(e[rc]=!0),e[Kg]&&(e[rc]=!0),e[rc]&&(e[$g]=!0),e[wE]&&(e[$g]=!0);for(const r in e){const a=V5(r,n);a.indexOf(t)<0&&a.push(t)}}function F5(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Tr(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Tr.groups={};Tr.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const a=e.jr[r][0],o=e.jr[r][1];if(o&&a.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let a=0;a<t.length;a++)this.tt(t[a],e,n,r)},tr(t,e,n,r){r=r||Tr.groups;let a;return e&&e.j?a=e:(a=new Tr(e),n&&r&&po(e,n,r)),this.jr.push([t,a]),a},ts(t,e,n,r){let a=this;const o=t.length;if(!o)return a;for(let l=0;l<o-1;l++)a=a.tt(t[l]);return a.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||Tr.groups;const a=this;if(e&&e.j)return a.j[t]=e,e;const o=e;let l,c=a.go(t);if(c?(l=new Tr,Object.assign(l.j,c.j),l.jr.push.apply(l.jr,c.jr),l.jd=c.jd,l.t=c.t):l=new Tr,o){if(r)if(l.t&&typeof l.t=="string"){const d=Object.assign(F5(l.t,r),n);po(o,d,r)}else n&&po(o,n,r);l.t=o}return a.j[t]=l,l}};const lt=(t,e,n,r,a)=>t.ta(e,n,r,a),un=(t,e,n,r,a)=>t.tr(e,n,r,a),Kx=(t,e,n,r,a)=>t.ts(e,n,r,a),Re=(t,e,n,r,a)=>t.tt(e,n,r,a),Sa="WORD",Yg="UWORD",EE="ASCIINUMERICAL",kE="ALPHANUMERICAL",Cc="LOCALHOST",Gg="TLD",Qg="UTLD",yd="SCHEME",Cl="SLASH_SCHEME",Iy="NUM",Wg="WS",qy="NL",uc="OPENBRACE",cc="CLOSEBRACE",Vd="OPENBRACKET",Fd="CLOSEBRACKET",Kd="OPENPAREN",$d="CLOSEPAREN",Yd="OPENANGLEBRACKET",Gd="CLOSEANGLEBRACKET",Qd="FULLWIDTHLEFTPAREN",Wd="FULLWIDTHRIGHTPAREN",Xd="LEFTCORNERBRACKET",Jd="RIGHTCORNERBRACKET",Zd="LEFTWHITECORNERBRACKET",eh="RIGHTWHITECORNERBRACKET",th="FULLWIDTHLESSTHAN",nh="FULLWIDTHGREATERTHAN",rh="AMPERSAND",ih="APOSTROPHE",ah="ASTERISK",gs="AT",sh="BACKSLASH",oh="BACKTICK",lh="CARET",bs="COLON",Py="COMMA",uh="DOLLAR",ji="DOT",ch="EQUALS",Vy="EXCLAMATION",ri="HYPHEN",fc="PERCENT",fh="PIPE",dh="PLUS",hh="POUND",dc="QUERY",Fy="QUOTE",TE="FULLWIDTHMIDDLEDOT",Ky="SEMI",Li="SLASH",hc="TILDE",ph="UNDERSCORE",CE="EMOJI",mh="SYM";var ME=Object.freeze({__proto__:null,ALPHANUMERICAL:kE,AMPERSAND:rh,APOSTROPHE:ih,ASCIINUMERICAL:EE,ASTERISK:ah,AT:gs,BACKSLASH:sh,BACKTICK:oh,CARET:lh,CLOSEANGLEBRACKET:Gd,CLOSEBRACE:cc,CLOSEBRACKET:Fd,CLOSEPAREN:$d,COLON:bs,COMMA:Py,DOLLAR:uh,DOT:ji,EMOJI:CE,EQUALS:ch,EXCLAMATION:Vy,FULLWIDTHGREATERTHAN:nh,FULLWIDTHLEFTPAREN:Qd,FULLWIDTHLESSTHAN:th,FULLWIDTHMIDDLEDOT:TE,FULLWIDTHRIGHTPAREN:Wd,HYPHEN:ri,LEFTCORNERBRACKET:Xd,LEFTWHITECORNERBRACKET:Zd,LOCALHOST:Cc,NL:qy,NUM:Iy,OPENANGLEBRACKET:Yd,OPENBRACE:uc,OPENBRACKET:Vd,OPENPAREN:Kd,PERCENT:fc,PIPE:fh,PLUS:dh,POUND:hh,QUERY:dc,QUOTE:Fy,RIGHTCORNERBRACKET:Jd,RIGHTWHITECORNERBRACKET:eh,SCHEME:yd,SEMI:Ky,SLASH:Li,SLASH_SCHEME:Cl,SYM:mh,TILDE:hc,TLD:Gg,UNDERSCORE:ph,UTLD:Qg,UWORD:Yg,WORD:Sa,WS:Wg});const va=/[a-z]/,Ju=new RegExp("\\p{L}","u"),fg=new RegExp("\\p{Emoji}","u"),ba=/\d/,dg=/\s/,$x="\r",hg=`
`,K5="",$5="",pg="";let sd=null,od=null;function Y5(t=[]){const e={};Tr.groups=e;const n=new Tr;sd==null&&(sd=Yx(H5)),od==null&&(od=Yx(I5)),Re(n,"'",ih),Re(n,"{",uc),Re(n,"}",cc),Re(n,"[",Vd),Re(n,"]",Fd),Re(n,"(",Kd),Re(n,")",$d),Re(n,"<",Yd),Re(n,">",Gd),Re(n,"",Qd),Re(n,"",Wd),Re(n,"",Xd),Re(n,"",Jd),Re(n,"",Zd),Re(n,"",eh),Re(n,"",th),Re(n,"",nh),Re(n,"&",rh),Re(n,"*",ah),Re(n,"@",gs),Re(n,"`",oh),Re(n,"^",lh),Re(n,":",bs),Re(n,",",Py),Re(n,"$",uh),Re(n,".",ji),Re(n,"=",ch),Re(n,"!",Vy),Re(n,"-",ri),Re(n,"%",fc),Re(n,"|",fh),Re(n,"+",dh),Re(n,"#",hh),Re(n,"?",dc),Re(n,'"',Fy),Re(n,"/",Li),Re(n,";",Ky),Re(n,"~",hc),Re(n,"_",ph),Re(n,"\\",sh),Re(n,"",TE);const r=un(n,ba,Iy,{[Vg]:!0});un(r,ba,r);const a=un(r,va,EE,{[lc]:!0}),o=un(r,Ju,kE,{[rc]:!0}),l=un(n,va,Sa,{[Fg]:!0});un(l,ba,a),un(l,va,l),un(a,ba,a),un(a,va,a);const c=un(n,Ju,Yg,{[Kg]:!0});un(c,va),un(c,ba,o),un(c,Ju,c),un(o,ba,o),un(o,va),un(o,Ju,o);const d=Re(n,hg,qy,{[cg]:!0}),h=Re(n,$x,Wg,{[cg]:!0}),p=un(n,dg,Wg,{[cg]:!0});Re(n,pg,p),Re(h,hg,d),Re(h,pg,p),un(h,dg,p),Re(p,$x),Re(p,hg),un(p,dg,p),Re(p,pg,p);const m=un(n,fg,CE,{[wE]:!0});Re(m,"#"),un(m,fg,m),Re(m,K5,m);const v=Re(m,$5);Re(v,"#"),un(v,fg,m);const x=[[va,l],[ba,a]],w=[[va,null],[Ju,c],[ba,o]];for(let T=0;T<sd.length;T++)hs(n,sd[T],Gg,Sa,x);for(let T=0;T<od.length;T++)hs(n,od[T],Qg,Yg,w);po(Gg,{tld:!0,ascii:!0},e),po(Qg,{utld:!0,alpha:!0},e),hs(n,"file",yd,Sa,x),hs(n,"mailto",yd,Sa,x),hs(n,"http",Cl,Sa,x),hs(n,"https",Cl,Sa,x),hs(n,"ftp",Cl,Sa,x),hs(n,"ftps",Cl,Sa,x),po(yd,{scheme:!0,ascii:!0},e),po(Cl,{slashscheme:!0,ascii:!0},e),t=t.sort((T,M)=>T[0]>M[0]?1:-1);for(let T=0;T<t.length;T++){const M=t[T][0],q=t[T][1]?{[q5]:!0}:{[P5]:!0};M.indexOf("-")>=0?q[$g]=!0:va.test(M)?ba.test(M)?q[lc]=!0:q[Fg]=!0:q[Vg]=!0,Kx(n,M,M,q)}return Kx(n,"localhost",Cc,{ascii:!0}),n.jd=new Tr(mh),{start:n,tokens:Object.assign({groups:e},ME)}}function AE(t,e){const n=G5(e.replace(/[A-Z]/g,c=>c.toLowerCase())),r=n.length,a=[];let o=0,l=0;for(;l<r;){let c=t,d=null,h=0,p=null,m=-1,v=-1;for(;l<r&&(d=c.go(n[l]));)c=d,c.accepts()?(m=0,v=0,p=c):m>=0&&(m+=n[l].length,v++),h+=n[l].length,o+=n[l].length,l++;o-=m,l-=v,h-=m,a.push({t:p.t,v:e.slice(o-h,o),s:o-h,e:o})}return a}function G5(t){const e=[],n=t.length;let r=0;for(;r<n;){let a=t.charCodeAt(r),o,l=a<55296||a>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(l),r+=l.length}return e}function hs(t,e,n,r,a){let o;const l=e.length;for(let c=0;c<l-1;c++){const d=e[c];t.j[d]?o=t.j[d]:(o=new Tr(r),o.jr=a.slice(),t.j[d]=o),t=o}return o=new Tr(n),o.jr=a.slice(),t.j[e[l-1]]=o,o}function Yx(t){const e=[],n=[];let r=0,a="0123456789";for(;r<t.length;){let o=0;for(;a.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let l=parseInt(t.substring(r,r+o),10);l>0;l--)n.pop();r+=o}else n.push(t[r]),r++}return e}const Mc={defaultProtocol:"http",events:null,format:Gx,formatHref:Gx,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function $y(t,e=null){let n=Object.assign({},Mc);t&&(n=Object.assign(n,t instanceof $y?t.o:t));const r=n.ignoreTags,a=[];for(let o=0;o<r.length;o++)a.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=a}$y.prototype={o:Mc,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let a=this.o[t];return a&&(typeof a=="object"?(a=n.t in a?a[n.t]:Mc[t],typeof a=="function"&&r&&(a=a(e,n))):typeof a=="function"&&r&&(a=a(e,n.t,n)),a)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Gx(t){return t}function OE(t,e){this.t="token",this.v=t,this.tk=e}OE.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Mc.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),a=t.get("tagName",n,e),o=this.toFormattedString(t),l={},c=t.get("className",n,e),d=t.get("target",n,e),h=t.get("rel",n,e),p=t.getObj("attributes",n,e),m=t.getObj("events",n,e);return l.href=r,c&&(l.class=c),d&&(l.target=d),h&&(l.rel=h),p&&Object.assign(l,p),{tagName:a,attributes:l,content:o,eventListeners:m}}};function jh(t,e){class n extends OE{constructor(a,o){super(a,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Qx=jh("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Wx=jh("text"),Q5=jh("nl"),ld=jh("url",{isLink:!0,toHref(t=Mc.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Cc&&t[1].t===bs}}),ni=t=>new Tr(t);function W5({groups:t}){const e=t.domain.concat([rh,ah,gs,sh,oh,lh,uh,ch,ri,Iy,fc,fh,dh,hh,Li,mh,hc,ph]),n=[ih,bs,Py,ji,Vy,fc,dc,Fy,Ky,Yd,Gd,uc,cc,Fd,Vd,Kd,$d,Qd,Wd,Xd,Jd,Zd,eh,th,nh],r=[rh,ih,ah,sh,oh,lh,uh,ch,ri,uc,cc,fc,fh,dh,hh,dc,Li,mh,hc,ph],a=ni(),o=Re(a,hc);lt(o,r,o),lt(o,t.domain,o);const l=ni(),c=ni(),d=ni();lt(a,t.domain,l),lt(a,t.scheme,c),lt(a,t.slashscheme,d),lt(l,r,o),lt(l,t.domain,l);const h=Re(l,gs);Re(o,gs,h),Re(c,gs,h),Re(d,gs,h);const p=Re(o,ji);lt(p,r,o),lt(p,t.domain,o);const m=ni();lt(h,t.domain,m),lt(m,t.domain,m);const v=Re(m,ji);lt(v,t.domain,m);const x=ni(Qx);lt(v,t.tld,x),lt(v,t.utld,x),Re(h,Cc,x);const w=Re(m,ri);Re(w,ri,w),lt(w,t.domain,m),lt(x,t.domain,m),Re(x,ji,v),Re(x,ri,w);const T=Re(x,bs);lt(T,t.numeric,Qx);const M=Re(l,ri),O=Re(l,ji);Re(M,ri,M),lt(M,t.domain,l),lt(O,r,o),lt(O,t.domain,l);const q=ni(ld);lt(O,t.tld,q),lt(O,t.utld,q),lt(q,t.domain,l),lt(q,r,o),Re(q,ji,O),Re(q,ri,M),Re(q,gs,h);const V=Re(q,bs),F=ni(ld);lt(V,t.numeric,F);const $=ni(ld),U=ni();lt($,e,$),lt($,n,U),lt(U,e,$),lt(U,n,U),Re(q,Li,$),Re(F,Li,$);const P=Re(c,bs),z=Re(d,bs),L=Re(z,Li),G=Re(L,Li);lt(c,t.domain,l),Re(c,ji,O),Re(c,ri,M),lt(d,t.domain,l),Re(d,ji,O),Re(d,ri,M),lt(P,t.domain,$),Re(P,Li,$),Re(P,dc,$),lt(G,t.domain,$),lt(G,e,$),Re(G,Li,$);const se=[[uc,cc],[Vd,Fd],[Kd,$d],[Yd,Gd],[Qd,Wd],[Xd,Jd],[Zd,eh],[th,nh]];for(let re=0;re<se.length;re++){const[ce,W]=se[re],fe=Re($,ce);Re(U,ce,fe),Re(fe,W,$);const D=ni(ld);lt(fe,e,D);const R=ni();lt(fe,n),lt(D,e,D),lt(D,n,R),lt(R,e,D),lt(R,n,R),Re(D,W,$),Re(R,W,$)}return Re(a,Cc,q),Re(a,qy,Q5),{start:a,tokens:ME}}function X5(t,e,n){let r=n.length,a=0,o=[],l=[];for(;a<r;){let c=t,d=null,h=null,p=0,m=null,v=-1;for(;a<r&&!(d=c.go(n[a].t));)l.push(n[a++]);for(;a<r&&(h=d||c.go(n[a].t));)d=null,c=h,c.accepts()?(v=0,m=c):v>=0&&v++,a++,p++;if(v<0)a-=p,a<r&&(l.push(n[a]),a++);else{l.length>0&&(o.push(mg(Wx,e,l)),l=[]),a-=v,p-=v;const x=m.t,w=n.slice(a-p,a);o.push(mg(x,e,w))}}return l.length>0&&o.push(mg(Wx,e,l)),o}function mg(t,e,n){const r=n[0].s,a=n[n.length-1].e,o=e.slice(r,a);return new t(o,n)}const J5=typeof console<"u"&&console&&console.warn||(()=>{}),Z5="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Wt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function ez(){return Tr.groups={},Wt.scanner=null,Wt.parser=null,Wt.tokenQueue=[],Wt.pluginQueue=[],Wt.customSchemes=[],Wt.initialized=!1,Wt}function Xx(t,e=!1){if(Wt.initialized&&J5(`linkifyjs: already initialized - will not register custom scheme "${t}" ${Z5}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Wt.customSchemes.push([t,e])}function tz(){Wt.scanner=Y5(Wt.customSchemes);for(let t=0;t<Wt.tokenQueue.length;t++)Wt.tokenQueue[t][1]({scanner:Wt.scanner});Wt.parser=W5(Wt.scanner.tokens);for(let t=0;t<Wt.pluginQueue.length;t++)Wt.pluginQueue[t][1]({scanner:Wt.scanner,parser:Wt.parser});return Wt.initialized=!0,Wt}function Yy(t){return Wt.initialized||tz(),X5(Wt.parser.start,t,AE(Wt.scanner.start,t))}Yy.scan=AE;function NE(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new $y(n),a=Yy(t),o=[];for(let l=0;l<a.length;l++){const c=a[l];c.isLink&&(!e||c.t===e)&&r.check(c)&&o.push(c.toFormattedObject(r))}return o}var Gy="[\0- -\u2029]",nz=new RegExp(Gy),rz=new RegExp(`${Gy}$`),iz=new RegExp(Gy,"g");function az(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function sz(t){return new nn({key:new Nn("autolink"),appendTransaction:(e,n,r)=>{const a=e.some(h=>h.docChanged)&&!n.doc.eq(r.doc),o=e.some(h=>h.getMeta("preventAutolink"));if(!a||o)return;const{tr:l}=r,c=V2(n.doc,[...e]);if(W2(c).forEach(({newRange:h})=>{const p=a4(r.doc,h,x=>x.isTextblock);let m,v;if(p.length>1)m=p[0],v=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(p.length){const x=r.doc.textBetween(h.from,h.to," "," ");if(!rz.test(x))return;m=p[0],v=r.doc.textBetween(m.pos,h.to,void 0," ")}if(m&&v){const x=v.split(nz).filter(Boolean);if(x.length<=0)return!1;const w=x[x.length-1],T=m.pos+v.lastIndexOf(w);if(!w)return!1;const M=Yy(w).map(O=>O.toObject(t.defaultProtocol));if(!az(M))return!1;M.filter(O=>O.isLink).map(O=>({...O,from:T+O.start+1,to:T+O.end+1})).filter(O=>r.schema.marks.code?!r.doc.rangeHasMark(O.from,O.to,r.schema.marks.code):!0).filter(O=>t.validate(O.value)).filter(O=>t.shouldAutoLink(O.value)).forEach(O=>{zy(O.from,O.to,r.doc).some(q=>q.mark.type===t.type)||l.addMark(O.from,O.to,t.type.create({href:O.href}))})}}),!!l.steps.length)return l}})}function oz(t){return new nn({key:new Nn("handleClickLink"),props:{handleClick:(e,n,r)=>{var a,o;if(r.button!==0||!e.editable)return!1;let l=null;if(r.target instanceof HTMLAnchorElement)l=r.target;else{const d=r.target;if(!d)return!1;const h=t.editor.view.dom;l=d.closest("a"),l&&!h.contains(l)&&(l=null)}if(!l)return!1;let c=!1;if(t.enableClickSelection&&(c=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){const d=Q2(e.state,t.type.name),h=(a=l.href)!=null?a:d.href,p=(o=l.target)!=null?o:d.target;h&&(window.open(h,p),c=!0)}return c}}})}function lz(t){return new nn({key:new Nn("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:a}=t,{state:o}=e,{selection:l}=o,{empty:c}=l;if(c)return!1;let d="";r.content.forEach(p=>{d+=p.textContent});const h=NE(d,{defaultProtocol:t.defaultProtocol}).find(p=>p.isLink&&p.value===d);return!d||!h||a!==void 0&&!a(h.value)?!1:t.editor.commands.setMark(t.type,{href:h.href})}}})}function so(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const a=typeof r=="string"?r:r.scheme;a&&n.push(a)}),!t||t.replace(iz,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var uz=Mo.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Xx(t);return}Xx(t.scheme,t.optionalSlashes)})},onDestroy(){ez()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!so(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const a=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(a)||!/\./.test(a))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!so(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!so(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",yn(this.options.HTMLAttributes,t),0]:["a",yn(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n,r,a,o;const l=(r=(n=t.attrs)==null?void 0:n.href)!=null?r:"",c=(o=(a=t.attrs)==null?void 0:a.title)!=null?o:"",d=e.renderChildren(t);return c?`[${d}](${l} "${c}")`:`[${d}](${l})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!so(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!so(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ko({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,a=NE(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:l=>!!so(l,n),protocols:n,defaultProtocol:r}));a.length&&a.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(sz({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:a=>!!so(a,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(oz({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(lz({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),cz=Object.defineProperty,fz=(t,e)=>{for(var n in e)cz(t,n,{get:e[n],enumerable:!0})},dz="listItem",Jx="textStyle",Zx=/^\s*([-+*])\s$/,DE=Ar.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",yn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(dz,this.editor.getAttributes(Jx)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Hl({find:Zx,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Hl({find:Zx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Jx),editor:this.editor})),[t]}}),RE=Ar.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",yn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(a=>a.type==="paragraph"))n=e.parseChildren(t.tokens);else{const a=t.tokens[0];if(a&&a.type==="text"&&a.tokens&&a.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(a.tokens)}],t.tokens.length>1){const l=t.tokens.slice(1),c=e.parseChildren(l);n.push(...c)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>Uy(t,e,r=>{var a,o;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((o=(a=r.meta)==null?void 0:a.parentAttrs)==null?void 0:o.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),hz={};fz(hz,{findListItemPos:()=>jc,getNextListDepth:()=>Qy,handleBackspace:()=>Xg,handleDelete:()=>Jg,hasListBefore:()=>_E,hasListItemAfter:()=>pz,hasListItemBefore:()=>zE,listItemHasSubList:()=>jE,nextListIsDeeper:()=>LE,nextListIsHigher:()=>BE});var jc=(t,e)=>{const{$from:n}=e.selection,r=An(t,e.schema);let a=null,o=n.depth,l=n.pos,c=null;for(;o>0&&c===null;)a=n.node(o),a.type===r?c=o:(o-=1,l-=1);return c===null?null:{$pos:e.doc.resolve(l),depth:c}},Qy=(t,e)=>{const n=jc(t,e);if(!n)return!1;const[,r]=m4(e,t,n.$pos.pos+4);return r},_E=(t,e,n)=>{const{$anchor:r}=t.selection,a=Math.max(0,r.pos-2),o=t.doc.resolve(a).node();return!(!o||!n.includes(o.type.name))},zE=(t,e)=>{var n;const{$anchor:r}=e.selection,a=e.doc.resolve(r.pos-2);return!(a.index()===0||((n=a.nodeBefore)==null?void 0:n.type.name)!==t)},jE=(t,e,n)=>{if(!n)return!1;const r=An(t,e.schema);let a=!1;return n.descendants(o=>{o.type===r&&(a=!0)}),a},Xg=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!As(t.state,e)&&_E(t.state,e,n)){const{$anchor:c}=t.state.selection,d=t.state.doc.resolve(c.before()-1),h=[];d.node().descendants((v,x)=>{v.type.name===e&&h.push({node:v,pos:x})});const p=h.at(-1);if(!p)return!1;const m=t.state.doc.resolve(d.start()+p.pos+1);return t.chain().cut({from:c.start()-1,to:c.end()+1},m.end()).joinForward().run()}if(!As(t.state,e)||!b4(t.state))return!1;const r=jc(e,t.state);if(!r)return!1;const o=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),l=jE(e,t.state,o);return zE(e,t.state)&&!l?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},LE=(t,e)=>{const n=Qy(t,e),r=jc(t,e);return!r||!n?!1:n>r.depth},BE=(t,e)=>{const n=Qy(t,e),r=jc(t,e);return!r||!n?!1:n<r.depth},Jg=(t,e)=>{if(!As(t.state,e)||!v4(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:a}=n;return!n.empty&&r.sameParent(a)?!1:LE(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():BE(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},pz=(t,e)=>{var n;const{$anchor:r}=e.selection,a=e.doc.resolve(r.pos-r.parentOffset-2);return!(a.index()===a.parent.childCount-1||((n=a.nodeAfter)==null?void 0:n.type.name)!==t)},UE=vn.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Jg(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Jg(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&Xg(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&Xg(t,n,r)&&(e=!0)}),e}}}}),eS=/^(\s*)(\d+)\.\s+(.*)$/,mz=/^\s/;function gz(t){const e=[];let n=0,r=0;for(;n<t.length;){const a=t[n],o=a.match(eS);if(!o)break;const[,l,c,d]=o,h=l.length;let p=d,m=n+1;const v=[a];for(;m<t.length;){const x=t[m];if(x.match(eS))break;if(x.trim()==="")v.push(x),p+=`
`,m+=1;else if(x.match(mz))v.push(x),p+=`
${x.slice(h+2)}`,m+=1;else break}e.push({indent:h,number:parseInt(c,10),content:p.trim(),raw:v.join(`
`)}),r=m,n=m}return[e,r]}function HE(t,e,n){var r;const a=[];let o=0;for(;o<t.length;){const l=t[o];if(l.indent===e){const c=l.content.split(`
`),d=((r=c[0])==null?void 0:r.trim())||"",h=[];d&&h.push({type:"paragraph",raw:d,tokens:n.inlineTokens(d)});const p=c.slice(1).join(`
`).trim();if(p){const x=n.blockTokens(p);h.push(...x)}let m=o+1;const v=[];for(;m<t.length&&t[m].indent>e;)v.push(t[m]),m+=1;if(v.length>0){const x=Math.min(...v.map(T=>T.indent)),w=HE(v,x,n);h.push({type:"list",ordered:!0,start:v[0].number,items:w,raw:v.map(T=>T.raw).join(`
`)})}a.push({type:"list_item",raw:l.raw,tokens:h}),o=m}else o+=1}return a}function yz(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(a=>{if(a.type==="paragraph"||a.type==="list"||a.type==="blockquote"||a.type==="code")r.push(...e.parseChildren([a]));else if(a.type==="text"&&a.tokens){const o=e.parseChildren([a]);r.push({type:"paragraph",content:o})}else{const o=e.parseChildren([a]);o.length>0&&r.push(...o)}}),{type:"listItem",content:r}})}var vz="listItem",tS="textStyle",nS=/^(\d+)\.\s$/,IE=Ar.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",yn(this.options.HTMLAttributes,n),0]:["ol",yn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?yz(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e?.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const a=t.split(`
`),[o,l]=gz(a);if(o.length===0)return;const c=HE(o,0,n);return c.length===0?void 0:{type:"list",ordered:!0,start:((r=o[0])==null?void 0:r.number)||1,items:c,raw:a.slice(0,l).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(vz,this.editor.getAttributes(tS)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Hl({find:nS,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Hl({find:nS,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(tS)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),bz=/^\s*(\[([( |x])?\])\s$/,xz=Ar.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",yn(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const a=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return Uy(t,e,a)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const a=document.createElement("li"),o=document.createElement("label"),l=document.createElement("span"),c=document.createElement("input"),d=document.createElement("div"),h=m=>{var v,x;c.ariaLabel=((x=(v=this.options.a11y)==null?void 0:v.checkboxLabel)==null?void 0:x.call(v,m,c.checked))||`Task item checkbox for ${m.textContent||"empty task item"}`};h(t),o.contentEditable="false",c.type="checkbox",c.addEventListener("mousedown",m=>m.preventDefault()),c.addEventListener("change",m=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){c.checked=!c.checked;return}const{checked:v}=m.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:x})=>{const w=n();if(typeof w!="number")return!1;const T=x.doc.nodeAt(w);return x.setNodeMarkup(w,void 0,{...T?.attrs,checked:v}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,v)||(c.checked=!c.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([m,v])=>{a.setAttribute(m,v)}),a.dataset.checked=t.attrs.checked,c.checked=t.attrs.checked,o.append(c,l),a.append(o,d),Object.entries(e).forEach(([m,v])=>{a.setAttribute(m,v)});let p=new Set(Object.keys(e));return{dom:a,contentDOM:d,update:m=>{if(m.type!==this.type)return!1;a.dataset.checked=m.attrs.checked,c.checked=m.attrs.checked,h(m);const v=r.extensionManager.attributes,x=Tc(m,v),w=new Set(Object.keys(x)),T=this.options.HTMLAttributes;return p.forEach(M=>{w.has(M)||(M in T?a.setAttribute(M,T[M]):a.removeAttribute(M))}),Object.entries(x).forEach(([M,O])=>{O==null?M in T?a.setAttribute(M,T[M]):a.removeAttribute(M):a.setAttribute(M,O)}),p=w,!0}}}},addInputRules(){return[Hl({find:bz,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Sz=Ar.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",yn(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=o=>{const l=qg(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:c=>({indentLevel:c[1].length,mainContent:c[4],checked:c[3].toLowerCase()==="x"}),createToken:(c,d)=>({type:"taskItem",raw:"",mainContent:c.mainContent,indentLevel:c.indentLevel,checked:c.checked,text:c.mainContent,tokens:n.inlineTokens(c.mainContent),nestedTokens:d}),customNestedParser:r},n);return l?[{type:"taskList",raw:l.raw,items:l.items}]:n.blockTokens(o)},a=qg(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,l)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:n.inlineTokens(o.mainContent),nestedTokens:l}),customNestedParser:r},n);if(a)return{type:"taskList",raw:a.raw,items:a.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});vn.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(DE.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(RE.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(UE.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(IE.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(xz.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(Sz.configure(this.options.taskList)),t}});var rS="&nbsp;",wz="",Ez=Ar.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",yn(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];if(n.length===1&&n[0].type==="image")return e.parseChildren([n[0]]);const r=e.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===rS||r[0].text===wz)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,r)},renderMarkdown:(t,e)=>{if(!t)return"";const n=Array.isArray(t.content)?t.content:[];return n.length===0?rS:e.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),kz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Tz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Cz=Mo.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",yn(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ul({find:kz,type:this.type})]},addPasteRules(){return[ko({find:Tz,type:this.type})]}}),Mz=Ar.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),qE=Mo.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",yn(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const a=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!a)return;const o=a[2].trim();return{type:"underline",raw:a[0],text:o,tokens:n.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Az=qE;function Oz(t={}){return new nn({view(e){return new Nz(e,t)}})}class Nz{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(a=>{let o=l=>{this[a](l)};return e.dom.addEventListener(a,o),{name:a,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,a=this.editorView.dom,o=a.getBoundingClientRect(),l=o.width/a.offsetWidth,c=o.height/a.offsetHeight;if(n){let m=e.nodeBefore,v=e.nodeAfter;if(m||v){let x=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(x){let w=x.getBoundingClientRect(),T=m?w.bottom:w.top;m&&v&&(T=(T+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let M=this.width/2*c;r={left:w.left,right:w.right,top:T-M,bottom:T+M}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),v=this.width/2*l;r={left:m.left-v,right:m.left+v,top:m.top,bottom:m.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let h,p;if(!d||d==document.body&&getComputedStyle(d).position=="static")h=-pageXOffset,p=-pageYOffset;else{let m=d.getBoundingClientRect(),v=m.width/d.offsetWidth,x=m.height/d.offsetHeight;h=m.left-d.scrollLeft*v,p=m.top-d.scrollTop*x}this.element.style.left=(r.left-h)/l+"px",this.element.style.top=(r.top-p)/c+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/c+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),a=r&&r.type.spec.disableDropCursor,o=typeof a=="function"?a(this.editorView,n,e):a;if(n&&!o){let l=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=zw(this.editorView.state.doc,l,this.editorView.dragging.slice);c!=null&&(l=c)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class cn extends ut{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return cn.valid(r)?new cn(r):ut.near(r)}content(){return Pe.empty}eq(e){return e instanceof cn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new cn(e.resolve(n.pos))}getBookmark(){return new Wy(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!Dz(e)||!Rz(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let a=n.contentMatchAt(e.index()).defaultType;return a&&a.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&cn.valid(e))return e;let a=e.pos,o=null;for(let l=e.depth;;l--){let c=e.node(l);if(n>0?e.indexAfter(l)<c.childCount:e.index(l)>0){o=c.child(n>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;a+=n;let d=e.doc.resolve(a);if(cn.valid(d))return d}for(;;){let l=n>0?o.firstChild:o.lastChild;if(!l){if(o.isAtom&&!o.isText&&!We.isSelectable(o)){e=e.doc.resolve(a+o.nodeSize*n),r=!1;continue e}break}o=l,a+=n;let c=e.doc.resolve(a);if(cn.valid(c))return c}return null}}}cn.prototype.visible=!1;cn.findFrom=cn.findGapCursorFrom;ut.jsonID("gapcursor",cn);class Wy{constructor(e){this.pos=e}map(e){return new Wy(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return cn.valid(n)?new cn(n):ut.near(n)}}function PE(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function Dz(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let a=r.child(n-1);;a=a.lastChild){if(a.childCount==0&&!a.inlineContent||PE(a.type))return!0;if(a.inlineContent)return!1}}return!0}function Rz(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let a=r.child(n);;a=a.firstChild){if(a.childCount==0&&!a.inlineContent||PE(a.type))return!0;if(a.inlineContent)return!1}}return!0}function _z(){return new nn({props:{decorations:Bz,createSelectionBetween(t,e,n){return e.pos==n.pos&&cn.valid(n)?new cn(n):null},handleClick:jz,handleKeyDown:zz,handleDOMEvents:{beforeinput:Lz}}})}const zz=j2({ArrowLeft:ud("horiz",-1),ArrowRight:ud("horiz",1),ArrowUp:ud("vert",-1),ArrowDown:ud("vert",1)});function ud(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,a,o){let l=r.selection,c=e>0?l.$to:l.$from,d=l.empty;if(l instanceof tt){if(!o.endOfTextblock(n)||c.depth==0)return!1;d=!1,c=r.doc.resolve(e>0?c.after():c.before())}let h=cn.findGapCursorFrom(c,e,d);return h?(a&&a(r.tr.setSelection(new cn(h))),!0):!1}}function jz(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!cn.valid(r))return!1;let a=t.posAtCoords({left:n.clientX,top:n.clientY});return a&&a.inside>-1&&We.isSelectable(t.state.doc.nodeAt(a.inside))?!1:(t.dispatch(t.state.tr.setSelection(new cn(r))),!0)}function Lz(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof cn))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let a=De.empty;for(let l=r.length-1;l>=0;l--)a=De.from(r[l].createAndFill(null,a));let o=t.state.tr.replace(n.pos,n.pos,new Pe(a,0,0));return o.setSelection(tt.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function Bz(t){if(!(t.selection instanceof cn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",tn.create(t.doc,[pr.widget(t.selection.head,e,{key:"gapcursor"})])}var gh=200,In=function(){};In.prototype.append=function(e){return e.length?(e=In.from(e),!this.length&&e||e.length<gh&&this.leafAppend(e)||this.length<gh&&e.leafPrepend(this)||this.appendInner(e)):this};In.prototype.prepend=function(e){return e.length?In.from(e).append(this):this};In.prototype.appendInner=function(e){return new Uz(this,e)};In.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?In.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};In.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};In.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};In.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var a=[];return this.forEach(function(o,l){return a.push(e(o,l))},n,r),a};In.from=function(e){return e instanceof In?e:e&&e.length?new VE(e):In.empty};var VE=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(a,o){return a==0&&o==this.length?this:new e(this.values.slice(a,o))},e.prototype.getInner=function(a){return this.values[a]},e.prototype.forEachInner=function(a,o,l,c){for(var d=o;d<l;d++)if(a(this.values[d],c+d)===!1)return!1},e.prototype.forEachInvertedInner=function(a,o,l,c){for(var d=o-1;d>=l;d--)if(a(this.values[d],c+d)===!1)return!1},e.prototype.leafAppend=function(a){if(this.length+a.length<=gh)return new e(this.values.concat(a.flatten()))},e.prototype.leafPrepend=function(a){if(this.length+a.length<=gh)return new e(a.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(In);In.empty=new VE([]);var Uz=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,a,o,l){var c=this.left.length;if(a<c&&this.left.forEachInner(r,a,Math.min(o,c),l)===!1||o>c&&this.right.forEachInner(r,Math.max(a-c,0),Math.min(this.length,o)-c,l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(r,a,o,l){var c=this.left.length;if(a>c&&this.right.forEachInvertedInner(r,a-c,Math.max(o,c)-c,l+c)===!1||o<c&&this.left.forEachInvertedInner(r,Math.min(a,c),o,l)===!1)return!1},e.prototype.sliceInner=function(r,a){if(r==0&&a==this.length)return this;var o=this.left.length;return a<=o?this.left.slice(r,a):r>=o?this.right.slice(r-o,a-o):this.left.slice(r,o).append(this.right.slice(0,a-o))},e.prototype.leafAppend=function(r){var a=this.right.leafAppend(r);if(a)return new e(this.left,a)},e.prototype.leafPrepend=function(r){var a=this.left.leafPrepend(r);if(a)return new e(a,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(In);const Hz=500;class mi{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let a,o;n&&(a=this.remapping(r,this.items.length),o=a.maps.length);let l=e.tr,c,d,h=[],p=[];return this.items.forEach((m,v)=>{if(!m.step){a||(a=this.remapping(r,v+1),o=a.maps.length),o--,p.push(m);return}if(a){p.push(new Bi(m.map));let x=m.step.map(a.slice(o)),w;x&&l.maybeStep(x).doc&&(w=l.mapping.maps[l.mapping.maps.length-1],h.push(new Bi(w,void 0,void 0,h.length+p.length))),o--,w&&a.appendMap(w,o)}else l.maybeStep(m.step);if(m.selection)return c=a?m.selection.map(a.slice(o)):m.selection,d=new mi(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:l,selection:c}}addTransform(e,n,r,a){let o=[],l=this.eventCount,c=this.items,d=!a&&c.length?c.get(c.length-1):null;for(let p=0;p<e.steps.length;p++){let m=e.steps[p].invert(e.docs[p]),v=new Bi(e.mapping.maps[p],m,n),x;(x=d&&d.merge(v))&&(v=x,p?o.pop():c=c.slice(0,c.length-1)),o.push(v),n&&(l++,n=void 0),a||(d=v)}let h=l-r.depth;return h>qz&&(c=Iz(c,h),l-=h),new mi(c.append(o),l)}remapping(e,n){let r=new bc;return this.items.forEach((a,o)=>{let l=a.mirrorOffset!=null&&o-a.mirrorOffset>=e?r.maps.length-a.mirrorOffset:void 0;r.appendMap(a.map,l)},e,n),r}addMaps(e){return this.eventCount==0?this:new mi(this.items.append(e.map(n=>new Bi(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],a=Math.max(0,this.items.length-n),o=e.mapping,l=e.steps.length,c=this.eventCount;this.items.forEach(v=>{v.selection&&c--},a);let d=n;this.items.forEach(v=>{let x=o.getMirror(--d);if(x==null)return;l=Math.min(l,x);let w=o.maps[x];if(v.step){let T=e.steps[x].invert(e.docs[x]),M=v.selection&&v.selection.map(o.slice(d+1,x));M&&c++,r.push(new Bi(w,T,M))}else r.push(new Bi(w))},a);let h=[];for(let v=n;v<l;v++)h.push(new Bi(o.maps[v]));let p=this.items.slice(0,a).append(h).append(r),m=new mi(p,c);return m.emptyItemCount()>Hz&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,a=[],o=0;return this.items.forEach((l,c)=>{if(c>=e)a.push(l),l.selection&&o++;else if(l.step){let d=l.step.map(n.slice(r)),h=d&&d.getMap();if(r--,h&&n.appendMap(h,r),d){let p=l.selection&&l.selection.map(n.slice(r));p&&o++;let m=new Bi(h.invert(),d,p),v,x=a.length-1;(v=a.length&&a[x].merge(m))?a[x]=v:a.push(m)}}else l.map&&r--},this.items.length,0),new mi(In.from(a.reverse()),o)}}mi.empty=new mi(In.empty,0);function Iz(t,e){let n;return t.forEach((r,a)=>{if(r.selection&&e--==0)return n=a,!1}),t.slice(n)}class Bi{constructor(e,n,r,a){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=a}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Bi(n.getMap().invert(),n,this.selection)}}}class ys{constructor(e,n,r,a,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=a,this.prevComposition=o}}const qz=20;function Pz(t,e,n,r){let a=n.getMeta(bo),o;if(a)return a.historyState;n.getMeta(Kz)&&(t=new ys(t.done,t.undone,null,0,-1));let l=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(l&&l.getMeta(bo))return l.getMeta(bo).redo?new ys(t.done.addTransform(n,void 0,r,vd(e)),t.undone,iS(n.mapping.maps),t.prevTime,t.prevComposition):new ys(t.done,t.undone.addTransform(n,void 0,r,vd(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let c=n.getMeta("composition"),d=t.prevTime==0||!l&&t.prevComposition!=c&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Vz(n,t.prevRanges)),h=l?gg(t.prevRanges,n.mapping):iS(n.mapping.maps);return new ys(t.done.addTransform(n,d?e.selection.getBookmark():void 0,r,vd(e)),mi.empty,h,n.time,c??t.prevComposition)}else return(o=n.getMeta("rebased"))?new ys(t.done.rebased(n,o),t.undone.rebased(n,o),gg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new ys(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),gg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Vz(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,a)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&a>=e[o]&&(n=!0)}),n}function iS(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,a,o,l)=>e.push(o,l));return e}function gg(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let a=e.map(t[r],1),o=e.map(t[r+1],-1);a<=o&&n.push(a,o)}return n}function Fz(t,e,n){let r=vd(e),a=bo.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let l=o.selection.resolve(o.transform.doc),c=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),a,r),d=new ys(n?c:o.remaining,n?o.remaining:c,null,0,-1);return o.transform.setSelection(l).setMeta(bo,{redo:n,historyState:d})}let yg=!1,aS=null;function vd(t){let e=t.plugins;if(aS!=e){yg=!1,aS=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){yg=!0;break}}return yg}const bo=new Nn("history"),Kz=new Nn("closeHistory");function $z(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new nn({key:bo,state:{init(){return new ys(mi.empty,mi.empty,null,0,-1)},apply(e,n,r){return Pz(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,a=r=="historyUndo"?KE:r=="historyRedo"?$E:null;return!a||!e.editable?!1:(n.preventDefault(),a(e.state,e.dispatch))}}}})}function FE(t,e){return(n,r)=>{let a=bo.getState(n);if(!a||(t?a.undone:a.done).eventCount==0)return!1;if(r){let o=Fz(a,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const KE=FE(!1,!0),$E=FE(!0,!0);vn.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new nn({key:new Nn("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const a=this.options.limit;if(a==null||a===0){t=!0;return}const o=this.storage.characters({node:r.doc});if(o>a){const l=o-a,c=0,d=l;console.warn(`[CharacterCount] Initial content exceeded limit of ${a} characters. Content was automatically trimmed.`);const h=r.tr.deleteRange(c,d);return t=!0,h}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const a=this.storage.characters({node:n.doc}),o=this.storage.characters({node:e.doc});if(o<=r||a>r&&o>r&&o<=a)return!0;if(a>r&&o>r&&o>a||!e.getMeta("paste"))return!1;const c=e.selection.$head.pos,d=o-r,h=c-d,p=c;return e.deleteRange(h,p),!(this.storage.characters({node:e.doc})>r)}})]}});var Yz=vn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Oz(this.options)]}});vn.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new nn({key:new Nn("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:a}=e,o=[];if(!n||!r)return tn.create(t,[]);let l=0;this.options.mode==="deepest"&&t.descendants((d,h)=>{if(d.isText)return;if(!(a>=h&&a<=h+d.nodeSize-1))return!1;l+=1});let c=0;return t.descendants((d,h)=>{if(d.isText||!(a>=h&&a<=h+d.nodeSize-1))return!1;if(c+=1,this.options.mode==="deepest"&&l-c>0||this.options.mode==="shallowest"&&c>1)return this.options.mode==="deepest";o.push(pr.node(h,h+d.nodeSize,{class:this.options.className}))}),tn.create(t,o)}}})]}});var Gz=vn.create({name:"gapCursor",addProseMirrorPlugins(){return[_z()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=At(Ye(t,"allowGapCursor",n)))!=null?e:null}}}),sS="placeholder";function Qz(t){return t.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}var Wz=vn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:sS,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const t=this.options.dataAttribute?`data-${Qz(this.options.dataAttribute)}`:`data-${sS}`;return[new nn({key:new Nn("placeholder"),props:{decorations:({doc:e,selection:n})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:a}=n,o=[];if(!r)return null;const l=this.editor.isEmpty;return e.descendants((c,d)=>{const h=a>=d&&a<=d+c.nodeSize,p=!c.isLeaf&&Rh(c);if((h||!this.options.showOnlyCurrent)&&p){const m=[this.options.emptyNodeClass];l&&m.push(this.options.emptyEditorClass);const v=pr.node(d,d+c.nodeSize,{class:m.join(" "),[t]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:c,pos:d,hasAnchor:h}):this.options.placeholder});o.push(v)}return this.options.includeChildren}),tn.create(e,o)}}})]}});vn.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new nn({key:new Nn("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||X2(n.selection)||t.view.dragging?null:tn.create(n.doc,[pr.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function oS({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var Xz=vn.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Nn(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,a])=>a).filter(a=>(this.options.notAfter||[]).concat(n).includes(a.name));return[new nn({key:e,appendTransaction:(a,o,l)=>{const{doc:c,tr:d,schema:h}=l,p=e.getState(l),m=c.content.size,v=h.nodes[n];if(p)return d.insert(m,v.create())},state:{init:(a,o)=>{const l=o.tr.doc.lastChild;return!oS({node:l,types:r})},apply:(a,o)=>{if(!a.docChanged||a.getMeta("__uniqueIDTransaction"))return o;const l=a.doc.lastChild;return!oS({node:l,types:r})}}})]}}),Jz=vn.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>KE(t,e),redo:()=>({state:t,dispatch:e})=>$E(t,e)}},addProseMirrorPlugins(){return[$z(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Zz=vn.create({name:"starterKit",addExtensions(){var t,e,n,r;const a=[];return this.options.bold!==!1&&a.push(E5.configure(this.options.bold)),this.options.blockquote!==!1&&a.push(v5.configure(this.options.blockquote)),this.options.bulletList!==!1&&a.push(DE.configure(this.options.bulletList)),this.options.code!==!1&&a.push(C5.configure(this.options.code)),this.options.codeBlock!==!1&&a.push(O5.configure(this.options.codeBlock)),this.options.document!==!1&&a.push(N5.configure(this.options.document)),this.options.dropcursor!==!1&&a.push(Yz.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&a.push(Gz.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&a.push(D5.configure(this.options.hardBreak)),this.options.heading!==!1&&a.push(R5.configure(this.options.heading)),this.options.undoRedo!==!1&&a.push(Jz.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&a.push(_5.configure(this.options.horizontalRule)),this.options.italic!==!1&&a.push(U5.configure(this.options.italic)),this.options.listItem!==!1&&a.push(RE.configure(this.options.listItem)),this.options.listKeymap!==!1&&a.push(UE.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&a.push(uz.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&a.push(IE.configure(this.options.orderedList)),this.options.paragraph!==!1&&a.push(Ez.configure(this.options.paragraph)),this.options.strike!==!1&&a.push(Cz.configure(this.options.strike)),this.options.text!==!1&&a.push(Mz.configure(this.options.text)),this.options.underline!==!1&&a.push(qE.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&a.push(Xz.configure((r=this.options)==null?void 0:r.trailingNode)),a}}),e6=Zz,t6=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,n6=Ar.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",yn(this.options.HTMLAttributes,t)]},parseMarkdown:(t,e)=>e.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var e,n,r,a,o,l;const c=(n=(e=t.attrs)==null?void 0:e.src)!=null?n:"",d=(a=(r=t.attrs)==null?void 0:r.alt)!=null?a:"",h=(l=(o=t.attrs)==null?void 0:o.title)!=null?l:"";return h?`![${d}](${c} "${h}")`:`![${d}](${c})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:t,minWidth:e,minHeight:n,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:a,getPos:o,HTMLAttributes:l,editor:c})=>{const d=document.createElement("img");Object.entries(l).forEach(([m,v])=>{if(v!=null)switch(m){case"width":case"height":break;default:d.setAttribute(m,v);break}}),d.src=l.src;const h=new a_({element:d,editor:c,node:a,getPos:o,onResize:(m,v)=>{d.style.width=`${m}px`,d.style.height=`${v}px`},onCommit:(m,v)=>{const x=o();x!==void 0&&this.editor.chain().setNodeSelection(x).updateAttributes(this.name,{width:m,height:v}).run()},onUpdate:(m,v,x)=>m.type===a.type,options:{directions:t,min:{width:e,height:n},preserveAspectRatio:r===!0}}),p=h.dom;return p.style.visibility="hidden",p.style.pointerEvents="none",d.onload=()=>{p.style.visibility="",p.style.pointerEvents=""},h}},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[pE({find:t6,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),r6=n6,i6=Wz;const a6=({content:t,onChange:e,placeholder:n="What's on your mind?"})=>{const r=h5({extensions:[e6.configure({heading:{levels:[1,2,3]}}),Az,r6.configure({allowBase64:!0,inline:!0}),i6.configure({placeholder:n})],content:t,onUpdate:({editor:a})=>{e(a.getHTML())},editorProps:{attributes:{class:"prose prose-sm sm:prose-base lg:prose-lg dark:prose-invert focus:outline-none max-w-none"}}});return r?B.jsx("div",{className:"bg-transparent",children:B.jsx(yE,{editor:r,className:"min-h-[400px] focus:outline-none"})}):B.jsx("div",{className:"min-h-[300px] bg-surface-light dark:bg-surface-dark rounded-lg border border-gray-200 dark:border-gray-700 animate-pulse"})},s6=({onImageClick:t,onTextClick:e,onVoiceClick:n,onSave:r,wordCount:a,isSaving:o,hasImages:l=!1})=>B.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-50",children:B.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white/70 dark:bg-black/70 backdrop-blur-xl border border-gray-200 dark:border-gray-800 rounded-2xl shadow-2xl overflow-hidden",children:[B.jsxs("div",{className:"flex items-center gap-1 pr-4 border-r border-gray-200 dark:border-gray-800 relative",children:[B.jsx("button",{onClick:t,className:`p-2.5 rounded-xl transition-all ${l?"text-primary-500 bg-primary-50 dark:bg-primary-900/20":"text-gray-500 hover:text-primary-500 hover:bg-gray-100 dark:hover:bg-gray-900"}`,title:"Add image",children:B.jsx(Dc,{size:20})}),l&&B.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-primary-500 rounded-full"}),B.jsx("button",{onClick:e,className:"p-2.5 text-gray-500 hover:text-primary-500 hover:bg-gray-100 dark:hover:bg-gray-900 rounded-xl transition-all",title:"Formatting",children:B.jsx(KM,{size:20})}),B.jsx("button",{onClick:n,className:"p-2.5 text-gray-500 hover:text-primary-500 hover:bg-gray-100 dark:hover:bg-gray-900 rounded-xl transition-all",title:"Voice record",children:B.jsx(NM,{size:20})})]}),B.jsxs("div",{className:"flex items-center gap-4 px-4",children:[B.jsxs("p",{className:"text-xs font-medium text-gray-400 dark:text-gray-500",children:[a," words"]}),B.jsxs("button",{onClick:r,disabled:o,className:"flex items-center gap-2 px-6 py-2.5 bg-primary-500 text-white text-sm font-bold rounded-xl hover:bg-primary-600 transition-all active:scale-95 disabled:opacity-50 shadow-lg shadow-primary-500/20",children:[o?B.jsx(_S,{size:18,className:"animate-spin"}):B.jsx(DS,{size:18}),B.jsx("span",{children:o?"Saving...":"Save Entry"})]})]})]})}),lS=()=>{const{id:t}=xS(),e=To(),n=qi(),r=t==="new",a=ae.useRef(!1),[o,l]=ae.useState(r?null:t||null),c=n.state?.date,[d,h]=ae.useState(""),[p,m]=ae.useState(""),[v,x]=ae.useState(()=>c||new Date().toISOString().split("T")[0]),[w,T]=ae.useState(""),[M,O]=ae.useState([]),[q,V]=ae.useState([]),[F,$]=ae.useState(""),[U,P]=ae.useState(!1),[z,L]=ae.useState(!1),[G,se]=ae.useState(!1),[re,ce]=ae.useState(null);ae.useEffect(()=>{(async()=>{if(!r&&t&&!a.current)try{const I=await Ir.entries.get(t);I&&(h(I.title||""),m(I.content.replace(/<[^>]*>/g,"")),x(I.date),T(I.location||""),O(I.tags||[]),V(I.images||[]),$(I.heroImage||""),P(I.isFavorite||!1),l(I.id),a.current=!0)}catch(I){console.error("Failed to load entry:",I)}})()},[r,t]);const W=async()=>{se(!0);try{const le=Date.now(),I={title:d.trim()||"Untitled Entry",content:p.trim()||"<p></p>",date:v,location:w.trim()||void 0,tags:M,images:q,heroImage:F||void 0,isFavorite:U,updatedAt:le};if(r||!o){const Y=AO(),we={id:Y,createdAt:le,...I};await Ir.entries.add(we),l(Y),setTimeout(()=>{e(`/editor/${Y}`,{replace:!0})},100)}else{const Y=await Ir.entries.get(o);if(Y){const we={...Y,...I};await Ir.entries.put(we)}}ce(new Date)}catch(le){console.error("Save failed:",le)}finally{se(!1)}};ae.useEffect(()=>{if(o&&(d||p)){const le=setTimeout(()=>{W()},3e3);return()=>clearTimeout(le)}},[d,p,v,w,M,q,F,U,o]);const fe=async le=>{const I=le.target.files?.[0];if(!I)return;L(!0);const Y=Mb(I);if(!Y.valid){alert(Y.error),L(!1);return}try{const we=await Cb(I);$(we)}catch{alert("Failed to upload hero image")}L(!1),le.target.value=""},D=async le=>{const I=le.target.files;if(I){for(const Y of Array.from(I)){const we=Mb(Y);if(!we.valid){alert(we.error);continue}try{const ge=await Cb(Y);V(me=>[...me,ge])}catch{alert("Failed to upload image")}}le.target.value=""}},R=()=>{$("")},ve=le=>{V(q.filter((I,Y)=>Y!==le))},oe=p.split(/\s+/).filter(Boolean).length;return B.jsxs("div",{className:"pb-20",children:[B.jsx("button",{onClick:()=>e(-1),className:"fixed top-20 left-8 p-2 bg-white dark:bg-gray-900 rounded-xl shadow-lg border border-gray-100 dark:border-gray-800 text-gray-500 hover:text-gray-900 dark:hover:text-white transition-all z-30",children:B.jsx(iM,{size:18})}),B.jsx("div",{className:"relative",children:F?B.jsxs("div",{className:"relative h-[140px] w-full",children:[B.jsx("img",{src:F,alt:"Cover",className:"w-full h-full object-cover"}),B.jsx("button",{onClick:R,className:"absolute top-2 right-2 p-1.5 bg-black/50 text-white rounded-lg hover:bg-black/70 transition-colors",children:B.jsx(Dl,{size:14})})]}):B.jsxs("label",{className:"flex items-center justify-center w-full h-[80px] border-b border-gray-100 dark:border-gray-800 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors",children:[B.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[B.jsx(Dc,{size:16}),B.jsx("span",{className:"text-xs",children:"Add cover image"})]}),B.jsx("input",{type:"file",accept:"image/*",onChange:fe,disabled:z,className:"hidden"}),z&&B.jsx("div",{className:"absolute inset-0 bg-white/50 dark:bg-black/50 flex items-center justify-center",children:B.jsx(_S,{size:20,className:"animate-spin text-primary-500"})})]})}),B.jsxs("div",{className:"max-w-screen-md mx-auto px-4",children:[B.jsx("input",{type:"text",value:d,onChange:le=>h(le.target.value),placeholder:"Title your day...",className:"w-full text-xl font-bold bg-transparent border-none outline-none placeholder:text-gray-200 dark:placeholder:text-gray-800 mt-4 mb-2 text-gray-900 dark:text-white"}),B.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-gray-400 mb-4",children:[B.jsx("span",{children:Ea(new Date(re||Date.now()),"MMM d, h:mm a")}),B.jsx("span",{children:G?"Saving...":"Saved"}),oe>0&&B.jsxs("span",{children:[oe," words"]})]}),B.jsx(a6,{content:p,onChange:m,placeholder:"Start writing..."})]}),q.length>0&&B.jsx("div",{className:"fixed bottom-20 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 py-2 px-4 z-20",children:B.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide pb-1",children:q.map((le,I)=>B.jsxs("div",{className:"relative flex-shrink-0 w-12 h-12 rounded-lg overflow-hidden group",children:[B.jsx("img",{src:le,alt:"",className:"w-full h-full object-cover"}),B.jsx("button",{onClick:()=>ve(I),className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:B.jsx(Dl,{size:12,className:"text-white"})})]},I))})}),B.jsx(s6,{onImageClick:()=>{const le=document.createElement("input");le.type="file",le.accept="image/*",le.multiple=!0,le.onchange=I=>D(I),le.click()},onTextClick:()=>{},onVoiceClick:()=>{},onSave:W,wordCount:oe,isSaving:G,hasImages:q.length>0})]})};function o6(){return B.jsx(HO,{children:B.jsxs(yC,{children:[B.jsx(xa,{path:"/",element:B.jsx(KO,{})}),B.jsx(xa,{path:"/calendar",element:B.jsx($O,{})}),B.jsx(xa,{path:"/gallery",element:B.jsx(YO,{})}),B.jsx(xa,{path:"/favorites",element:B.jsx(GO,{})}),B.jsx(xa,{path:"/tag/:tag",element:B.jsx(QO,{})}),B.jsx(xa,{path:"/editor/new",element:B.jsx(lS,{})}),B.jsx(xa,{path:"/editor/:id",element:B.jsx(lS,{})}),B.jsx(xa,{path:"*",element:B.jsx(mC,{to:"/",replace:!0})})]})})}class l6 extends ae.Component{state={hasError:!1,error:null};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}handleReload=()=>{window.location.reload()};handleGoHome=()=>{window.location.href="/"};render(){return this.state.hasError?B.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-light dark:bg-background-dark p-4",children:B.jsxs("div",{className:"max-w-md w-full text-center",children:[B.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:B.jsx(NS,{className:"text-red-500",size:40})}),B.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Something went wrong"}),B.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"We apologize for the inconvenience. An unexpected error has occurred."}),this.state.error&&B.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg text-left",children:B.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 font-mono break-all",children:this.state.error.message})}),B.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[B.jsxs("button",{onClick:this.handleReload,className:"btn-primary flex items-center justify-center gap-2",children:[B.jsx(BM,{size:18}),"Reload Page"]}),B.jsxs("button",{onClick:this.handleGoHome,className:"btn-secondary flex items-center justify-center gap-2",children:[B.jsx(RS,{size:18}),"Go Home"]})]})]})}):this.props.children}}const u6=ae.createContext(void 0),c6=({children:t})=>{const[e,n]=ae.useState([]),r=ae.useCallback((c,d="info")=>{const h=Math.random().toString(36).substr(2,9),p={id:h,message:c,type:d};n(m=>[...m,p]),setTimeout(()=>{n(m=>m.filter(v=>v.id!==h))},4e3)},[]),a=ae.useCallback(c=>{n(d=>d.filter(h=>h.id!==c))},[]),o={success:DS,error:NS,info:SM},l={success:"bg-green-500",error:"bg-red-500",info:"bg-primary-500"};return B.jsxs(u6.Provider,{value:{showToast:r},children:[t,B.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:e.map(c=>{const d=o[c.type];return B.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg text-white ${l[c.type]} animate-fade-in`,role:"alert",children:[B.jsx(d,{size:18}),B.jsx("span",{className:"text-sm font-medium",children:c.message}),B.jsx("button",{onClick:()=>a(c.id),className:"ml-2 hover:opacity-80","aria-label":"Dismiss",children:B.jsx(Dl,{size:16})})]},c.id)})})]})};bT.createRoot(document.getElementById("root")).render(B.jsx(ae.StrictMode,{children:B.jsx(l6,{children:B.jsx(qC,{children:B.jsx(c6,{children:B.jsx(o6,{})})})})}));
